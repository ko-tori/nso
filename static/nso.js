/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcXVlcnkubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjIuMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXHJcbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPWMuc2xpY2UsZj1jLmNvbmNhdCxnPWMucHVzaCxoPWMuaW5kZXhPZixpPXt9LGo9aS50b1N0cmluZyxrPWkuaGFzT3duUHJvcGVydHksbD17fSxtPVwiMi4yLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEudG9TdHJpbmcoKTtyZXR1cm4hbi5pc0FycmF5KGEpJiZiLXBhcnNlRmxvYXQoYikrMT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZihcIm9iamVjdFwiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpKXJldHVybiExO2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSxcImNvbnN0cnVjdG9yXCIpJiYhay5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlfHx7fSxcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITE7Zm9yKGIgaW4gYSk7cmV0dXJuIHZvaWQgMD09PWJ8fGsuY2FsbChhLGIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2lbai5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpPyhiPWQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLnRleHQ9YSxkLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsXCJtcy1cIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOihhK1wiXCIpLnJlcGxhY2UobyxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpnLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aC5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZz0wLGg9W107aWYocyhhKSlmb3IoZD1hLmxlbmd0aDtkPmc7ZysrKWU9YihhW2ddLGcsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGcgaW4gYSllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZi5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxmO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG4uaXNGdW5jdGlvbihhKT8oZD1lLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGQuY29uY2F0KGUuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxuLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omx9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihuLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxuLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2lbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9ISFhJiZcImxlbmd0aFwiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09Y3x8bi5pc1dpbmRvdyhhKT8hMTpcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT1cInNpenpsZVwiKzEqbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYSgpLHo9Z2EoKSxBPWdhKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9MTw8MzEsRD17fS5oYXNPd25Qcm9wZXJ0eSxFPVtdLEY9RS5wb3AsRz1FLnB1c2gsSD1FLnB1c2gsST1FLnNsaWNlLEo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9LEs9XCJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZFwiLEw9XCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLE09XCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixOPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK00rXCIpKXwpXCIrTCtcIipcXFxcXVwiLE89XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK04rXCIpKil8LiopXFxcXCl8KVwiLFA9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxRPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFI9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxTPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVT1uZXcgUmVnRXhwKE8pLFY9bmV3IFJlZ0V4cChcIl5cIitNK1wiJFwiKSxXPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTStcInxbKl0pXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitOKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitPKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFg9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxZPS9eaFxcZCQvaSxaPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sJD0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxfPS9bK35dLyxhYT0vJ3xcXFxcL2csYmE9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK0wrXCI/fChcIitMK1wiKXwuKVwiLFwiaWdcIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX0sZGE9ZnVuY3Rpb24oKXttKCl9O3RyeXtILmFwcGx5KEU9SS5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxFW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGVhKXtIPXthcHBseTpFLmxlbmd0aD9mdW5jdGlvbihhLGIpe0cuYXBwbHkoYSxJLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYShhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHc9YiYmYi5vd25lckRvY3VtZW50LHg9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSxcInN0cmluZ1wiIT10eXBlb2YgYXx8IWF8fDEhPT14JiY5IT09eCYmMTEhPT14KXJldHVybiBkO2lmKCFlJiYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4scCkpe2lmKDExIT09eCYmKG89JC5leGVjKGEpKSlpZihmPW9bMV0pe2lmKDk9PT14KXtpZighKGo9Yi5nZXRFbGVtZW50QnlJZChmKSkpcmV0dXJuIGQ7aWYoai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2UgaWYodyYmKGo9dy5nZXRFbGVtZW50QnlJZChmKSkmJnQoYixqKSYmai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2V7aWYob1syXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGY9b1szXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGYpKSxkfWlmKGMucXNhJiYhQVthK1wiIFwiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKFwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP2s9ay5yZXBsYWNlKGFhLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixrPXUpLHI9ZyhhKSxoPXIubGVuZ3RoLGw9Vi50ZXN0KGspP1wiI1wiK2s6XCJbaWQ9J1wiK2srXCInXVwiO3doaWxlKGgtLSlyW2hdPWwrXCIgXCIrcWEocltoXSk7cz1yLmpvaW4oXCIsXCIpLHc9Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxifWlmKHMpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHMpKSxkfWNhdGNoKHkpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpfX19cmV0dXJuIGkoYS5yZXBsYWNlKFEsXCIkMVwiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjK1wiIFwiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYytcIiBcIl09ZX1yZXR1cm4gYn1mdW5jdGlvbiBoYShhKXtyZXR1cm4gYVt1XT0hMCxhfWZ1bmN0aW9uIGlhKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudChcImRpdlwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9Yy5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmKH5iLnNvdXJjZUluZGV4fHxDKS0ofmEuc291cmNlSW5kZXh8fEMpO2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBsYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGhhKGZ1bmN0aW9uKGIpe3JldHVybiBiPStiLGhhKGZ1bmN0aW9uKGMsZCl7dmFyIGUsZj1hKFtdLGMubGVuZ3RoLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWNbZT1mW2ddXSYmKGNbZV09IShkW2VdPWNbZV0pKX0pfSl9ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZhfWM9ZmEuc3VwcG9ydD17fSxmPWZhLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixkYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZGEpKSxjLmF0dHJpYnV0ZXM9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQobi5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjP1tjXTpbXX19LGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19KTooZGVsZXRlIGQuZmluZC5JRCxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTpjLnFzYT9iLnF1ZXJ5U2VsZWN0b3JBbGwoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPVoudGVzdChuLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGlhKGZ1bmN0aW9uKGEpe28uYXBwZW5kQ2hpbGQoYSkuaW5uZXJIVE1MPVwiPGEgaWQ9J1wiK3UrXCInPjwvYT48c2VsZWN0IGlkPSdcIit1K1wiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitMK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitMK1wiKig/OnZhbHVlfFwiK0srXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltpZH49XCIrdStcIi1dXCIpLmxlbmd0aHx8cS5wdXNoKFwifj1cIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RofHxxLnB1c2goXCI6Y2hlY2tlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhI1wiK3UrXCIrKlwiKS5sZW5ndGh8fHEucHVzaChcIi4jLitbK35dXCIpfSksaWEoZnVuY3Rpb24oYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK0wrXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj1aLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmlhKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixPKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPVoudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fFoudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PW58fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09bnx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9KKGssYSktSihrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGU9YS5wYXJlbnROb2RlLGY9Yi5wYXJlbnROb2RlLGc9W2FdLGg9W2JdO2lmKCFlfHwhZilyZXR1cm4gYT09PW4/LTE6Yj09PW4/MTplPy0xOmY/MTprP0ooayxhKS1KKGssYik6MDtpZihlPT09ZilyZXR1cm4ga2EoYSxiKTtjPWE7d2hpbGUoYz1jLnBhcmVudE5vZGUpZy51bnNoaWZ0KGMpO2M9Yjt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7d2hpbGUoZ1tkXT09PWhbZF0pZCsrO3JldHVybiBkP2thKGdbZF0saFtkXSk6Z1tkXT09PXY/LTE6aFtkXT09PXY/MTowfSxuKTpufSxmYS5tYXRjaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZhKGEsbnVsbCxudWxsLGIpfSxmYS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxiKXtpZigoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksYj1iLnJlcGxhY2UoVCxcIj0nJDEnXVwiKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYitcIiBcIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxmYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmEuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGJhLGNhKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKGJhLGNhKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZmYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVy5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlUudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrTCtcIilcIithK1wiKFwiK0wrXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1mYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjpiPyhlKz1cIlwiLFwiPVwiPT09Yj9lPT09YzpcIiE9XCI9PT1iP2UhPT1jOlwiXj1cIj09PWI/YyYmMD09PWUuaW5kZXhPZihjKTpcIio9XCI9PT1iP2MmJmUuaW5kZXhPZihjKT4tMTpcIiQ9XCI9PT1iP2MmJmUuc2xpY2UoLWMubGVuZ3RoKT09PWM6XCJ+PVwiPT09Yj8oXCIgXCIrZS5yZXBsYWNlKFAsXCIgXCIpK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWgsdD0hMTtpZihxKXtpZihmKXt3aGlsZShwKXttPWI7d2hpbGUobT1tW3BdKWlmKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9oYShmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9SihhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDpoYShmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUSxcIiQxXCIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8XCJcIil8fGZhLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoYmEsY2EpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWC50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om5hKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpuYShmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6bmEoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpuYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpuYShmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om5hKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPWxhKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW1hKGIpO2Z1bmN0aW9uIHBhKCl7fXBhLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcGEsZz1mYS50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVdbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYS5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFhKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiByYShhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnVhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SihmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWEocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkguYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1yYShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9cmEoZnVuY3Rpb24oYSl7cmV0dXJuIEooYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bcmEoc2EobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHZhKGk+MSYmc2EobSksaT4xJiZxYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFEsXCIkMVwiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9XCIwXCIsdD1mJiZbXSx1PVtdLHY9aix4PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109Ri5jYWxsKGkpKTt1PXVhKHUpfUguYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZmYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aGEoZik6Zn1yZXR1cm4gaD1mYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJlwiSURcIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGJhLGNhKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9Vy5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLF8udGVzdChqWzBdLnR5cGUpJiZvYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcWEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsIWJ8fF8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxpYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxqYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGphKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxpYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWVTb3J0PW4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSx2PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfSx3PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQseD0vXjwoW1xcdy1dKylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8seT0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHkudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGguY2FsbChiLGEpPi0xIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10sZT10aGlzO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxkfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHoodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHoodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXoodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEM9bi5mbi5pbml0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZSxmO2lmKCFhKXJldHVybiB0aGlzO2lmKGM9Y3x8QSxcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoZT1cIjxcIj09PWFbMF0mJlwiPlwiPT09YVthLmxlbmd0aC0xXSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTpCLmV4ZWMoYSksIWV8fCFlWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8YykuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoZVsxXSl7aWYoYj1iIGluc3RhbmNlb2Ygbj9iWzBdOmIsbi5tZXJnZSh0aGlzLG4ucGFyc2VIVE1MKGVbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6ZCwhMCkpLHgudGVzdChlWzFdKSYmbi5pc1BsYWluT2JqZWN0KGIpKWZvcihlIGluIGIpbi5pc0Z1bmN0aW9uKHRoaXNbZV0pP3RoaXNbZV0oYltlXSk6dGhpcy5hdHRyKGUsYltlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZiksdGhpcy5jb250ZXh0PWQsdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTpuLmlzRnVuY3Rpb24oYSk/dm9pZCAwIT09Yy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz13LnRlc3QoYSl8fFwic3RyaW5nXCIhPXR5cGVvZiBhP24oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm4uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9uLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP2guY2FsbChuKGEpLHRoaXNbMF0pOmguY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBGKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHYoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB2KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVyblwiVW50aWxcIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiZcInN0cmluZ1wiPT10eXBlb2YgZCYmKGU9bi5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEVbYV18fG4udW5pcXVlU29ydChlKSxELnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFxTKy9nO2Z1bmN0aW9uIEgoYSl7dmFyIGI9e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEcpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOlwiXCIpfSxqPXthZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGMmJiFiJiYoaD1mLmxlbmd0aC0xLGcucHVzaChjKSksZnVuY3Rpb24gZChiKXtuLmVhY2goYixmdW5jdGlvbihiLGMpe24uaXNGdW5jdGlvbihjKT9hLnVuaXF1ZSYmai5oYXMoYyl8fGYucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PW4udHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxoPj1jJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz1cIlwiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGN8fChmPWM9XCJcIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFlfSxmaXJlV2l0aDpmdW5jdGlvbihhLGMpe3JldHVybiBlfHwoYz1jfHxbXSxjPVthLGMuc2xpY2U/Yy5zbGljZSgpOmNdLGcucHVzaChjKSxifHxpKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gai5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWR9fTtyZXR1cm4gan0sbi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciBiPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsbi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxjPVwicGVuZGluZ1wiLGQ9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBlLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gbi5EZWZlcnJlZChmdW5jdGlvbihjKXtuLmVhY2goYixmdW5jdGlvbihiLGYpe3ZhciBnPW4uaXNGdW5jdGlvbihhW2JdKSYmYVtiXTtlW2ZbMV1dKGZ1bmN0aW9uKCl7dmFyIGE9ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YS5wcm9taXNlKCkucHJvZ3Jlc3MoYy5ub3RpZnkpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KTpjW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rXCJXaXRoXCJdPWcuZmlyZVdpdGh9KSxkLnByb21pc2UoZSksYSYmYS5jYWxsKGUsZSksZX0sd2hlbjpmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZS5jYWxsKGFyZ3VtZW50cyksZD1jLmxlbmd0aCxmPTEhPT1kfHxhJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9kOjAsZz0xPT09Zj9hOm4uRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7YlthXT10aGlzLGNbYV09YXJndW1lbnRzLmxlbmd0aD4xP2UuY2FsbChhcmd1bWVudHMpOmQsYz09PWk/Zy5ub3RpZnlXaXRoKGIsYyk6LS1mfHxnLnJlc29sdmVXaXRoKGIsYyl9fSxpLGosaztpZihkPjEpZm9yKGk9bmV3IEFycmF5KGQpLGo9bmV3IEFycmF5KGQpLGs9bmV3IEFycmF5KGQpO2Q+YjtiKyspY1tiXSYmbi5pc0Z1bmN0aW9uKGNbYl0ucHJvbWlzZSk/Y1tiXS5wcm9taXNlKCkucHJvZ3Jlc3MoaChiLGosaSkpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpOi0tZjtyZXR1cm4gZnx8Zy5yZXNvbHZlV2l0aChrLGMpLGcucHJvbWlzZSgpfX0pO3ZhciBJO24uZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucmVhZHkucHJvbWlzZSgpLmRvbmUoYSksdGhpc30sbi5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2E/bi5yZWFkeVdhaXQrKzpuLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oYSl7KGE9PT0hMD8tLW4ucmVhZHlXYWl0Om4uaXNSZWFkeSl8fChuLmlzUmVhZHk9ITAsYSE9PSEwJiYtLW4ucmVhZHlXYWl0PjB8fChJLnJlc29sdmVXaXRoKGQsW25dKSxuLmZuLnRyaWdnZXJIYW5kbGVyJiYobihkKS50cmlnZ2VySGFuZGxlcihcInJlYWR5XCIpLG4oZCkub2ZmKFwicmVhZHlcIikpKSl9fSk7ZnVuY3Rpb24gSigpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSiksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSXx8KEk9bi5EZWZlcnJlZCgpLFwiY29tcGxldGVcIj09PWQucmVhZHlTdGF0ZXx8XCJsb2FkaW5nXCIhPT1kLnJlYWR5U3RhdGUmJiFkLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9hLnNldFRpbWVvdXQobi5yZWFkeSk6KGQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixKKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSikpKSxJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBLPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoXCJvYmplY3RcIj09PW4udHlwZShjKSl7ZT0hMDtmb3IoaCBpbiBjKUsoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn0sTD1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV8fDk9PT1hLm5vZGVUeXBlfHwhK2Eubm9kZVR5cGV9O2Z1bmN0aW9uIE0oKXt0aGlzLmV4cGFuZG89bi5leHBhbmRvK00udWlkKyt9TS51aWQ9MSxNLnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHx7fTtyZXR1cm4gYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109YzpPYmplY3QuZGVmaW5lUHJvcGVydHkoYSx0aGlzLmV4cGFuZG8se3ZhbHVlOmMsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksYVt0aGlzLmV4cGFuZG9dfSxjYWNoZTpmdW5jdGlvbihhKXtpZighTChhKSlyZXR1cm57fTt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LEwoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWVbYl09YztlbHNlIGZvcihkIGluIGIpZVtkXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWFbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1mKXtpZih2b2lkIDA9PT1iKXRoaXMucmVnaXN0ZXIoYSk7ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZj9kPVtiLGVdOihkPWUsZD1kIGluIGY/W2RdOmQubWF0Y2goRyl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGZbZFtjXV19KHZvaWQgMD09PWJ8fG4uaXNFbXB0eU9iamVjdChmKSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGFbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09YiYmIW4uaXNFbXB0eU9iamVjdChiKX19O3ZhciBOPW5ldyBNLE89bmV3IE0sUD0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sUT0vW0EtWl0vZztmdW5jdGlvbiBSKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoUSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVwidHJ1ZVwiPT09Yz8hMDpcImZhbHNlXCI9PT1jPyExOlwibnVsbFwiPT09Yz9udWxsOitjK1wiXCI9PT1jPytjOlAudGVzdChjKT9uLnBhcnNlSlNPTihjKTpjO1xyXG59Y2F0Y2goZSl7fU8uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBPLmhhc0RhdGEoYSl8fE4uaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE8uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe08ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTi5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe04ucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1PLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIU4uZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1uLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxSKGYsZCxlW2RdKSkpO04uc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Ty5zZXQodGhpcyxhKX0pOksodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9Ty5nZXQoZixhKXx8Ty5nZXQoZixhLnJlcGxhY2UoUSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGQ9bi5jYW1lbENhc2UoYSksYz1PLmdldChmLGQpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1SKGYsZCx2b2lkIDApLHZvaWQgMCE9PWMpcmV0dXJuIGN9ZWxzZSBkPW4uY2FtZWxDYXNlKGEpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU8uZ2V0KHRoaXMsZCk7Ty5zZXQodGhpcyxkLGIpLGEuaW5kZXhPZihcIi1cIik+LTEmJnZvaWQgMCE9PWMmJk8uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtPLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1OLmdldChhLGIpLGMmJighZHx8bi5pc0FycmF5KGMpP2Q9Ti5hY2Nlc3MoYSxiLG4ubWFrZUFycmF5KGMpKTpkLnB1c2goYykpLGR8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fFwiZnhcIjt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9O1wiaW5wcm9ncmVzc1wiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKFwiZnhcIj09PWImJmMudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YitcInF1ZXVlSG9va3NcIjtyZXR1cm4gTi5nZXQoYSxjKXx8Ti5hY2Nlc3MoYSxjLHtlbXB0eTpuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe04ucmVtb3ZlKGEsW2IrXCJxdWV1ZVwiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPVwiZnhcIixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9uLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPW4ucXVldWUodGhpcyxhLGIpO24uX3F1ZXVlSG9va3ModGhpcyxhKSxcImZ4XCI9PT1hJiZcImlucHJvZ3Jlc3NcIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPW4uRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8XCJmeFwiO3doaWxlKGctLSljPU4uZ2V0KGZbZ10sYStcInF1ZXVlSG9va3NcIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFM9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFQ9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrUytcIikoW2EteiVdKikkXCIsXCJpXCIpLFU9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLFY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLFwibm9uZVwiPT09bi5jc3MoYSxcImRpc3BsYXlcIil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gVyhhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLFwiXCIpfSxpPWgoKSxqPWMmJmNbM118fChuLmNzc051bWJlcltiXT9cIlwiOlwicHhcIiksaz0obi5jc3NOdW1iZXJbYl18fFwicHhcIiE9PWomJitpKSYmVC5leGVjKG4uY3NzKGEsYikpO2lmKGsmJmtbM10hPT1qKXtqPWp8fGtbM10sYz1jfHxbXSxrPStpfHwxO2RvIGY9Znx8XCIuNVwiLGsvPWYsbi5zdHlsZShhLGIsaytqKTt3aGlsZShmIT09KGY9aCgpL2kpJiYxIT09ZiYmLS1nKX1yZXR1cm4gYyYmKGs9K2t8fCtpfHwwLGU9Y1sxXT9rKyhjWzFdKzEpKmNbMl06K2NbMl0sZCYmKGQudW5pdD1qLGQuc3RhcnQ9ayxkLmVuZD1lKSksZX12YXIgWD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxZPS88KFtcXHc6LV0rKS8sWj0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLCQ9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTskLm9wdGdyb3VwPSQub3B0aW9uLCQudGJvZHk9JC50Zm9vdD0kLmNvbGdyb3VwPSQuY2FwdGlvbj0kLnRoZWFkLCQudGg9JC50ZDtmdW5jdGlvbiBfKGEsYil7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHxcIipcIik6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBhYShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylOLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxOLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9dmFyIGJhPS88fCYjP1xcdys7LztmdW5jdGlvbiBjYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG89MCxwPWEubGVuZ3RoO3A+bztvKyspaWYoZj1hW29dLGZ8fDA9PT1mKWlmKFwib2JqZWN0XCI9PT1uLnR5cGUoZikpbi5tZXJnZShtLGYubm9kZVR5cGU/W2ZdOmYpO2Vsc2UgaWYoYmEudGVzdChmKSl7Zz1nfHxsLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSksaD0oWS5leGVjKGYpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxpPSRbaF18fCQuX2RlZmF1bHQsZy5pbm5lckhUTUw9aVsxXStuLmh0bWxQcmVmaWx0ZXIoZikraVsyXSxrPWlbMF07d2hpbGUoay0tKWc9Zy5sYXN0Q2hpbGQ7bi5tZXJnZShtLGcuY2hpbGROb2RlcyksZz1sLmZpcnN0Q2hpbGQsZy50ZXh0Q29udGVudD1cIlwifWVsc2UgbS5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZikpO2wudGV4dENvbnRlbnQ9XCJcIixvPTA7d2hpbGUoZj1tW28rK10paWYoZCYmbi5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1uLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPV8obC5hcHBlbmRDaGlsZChmKSxcInNjcmlwdFwiKSxqJiZhYShnKSxjKXtrPTA7d2hpbGUoZj1nW2srK10pWi50ZXN0KGYudHlwZXx8XCJcIikmJmMucHVzaChmKX1yZXR1cm4gbH0hZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjPWQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksYy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLGMuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxiLmFwcGVuZENoaWxkKGMpLGwuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixsLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIGRhPS9ea2V5LyxlYT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sZmE9L14oW14uXSopKD86XFwuKC4rKXwpLztmdW5jdGlvbiBnYSgpe3JldHVybiEwfWZ1bmN0aW9uIGhhKCl7cmV0dXJuITF9ZnVuY3Rpb24gaWEoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIGphKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBiKXtcInN0cmluZ1wiIT10eXBlb2YgYyYmKGQ9ZHx8YyxjPXZvaWQgMCk7Zm9yKGggaW4gYilqYShhLGgsYyxkLGJbaF0sZik7cmV0dXJuIGF9aWYobnVsbD09ZCYmbnVsbD09ZT8oZT1jLGQ9Yz12b2lkIDApOm51bGw9PWUmJihcInN0cmluZ1wiPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPWhhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9bi5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1OLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG4mJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fFwiXCIpLm1hdGNoKEcpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paD1mYS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbihcIi5cIil9LGYpLChtPWlbb10pfHwobT1pW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGwuc2V0dXAmJmwuc2V0dXAuY2FsbChhLGQscCxnKSE9PSExfHxhLmFkZEV2ZW50TGlzdGVuZXImJmEuYWRkRXZlbnRMaXN0ZW5lcihvLGcpKSxsLmFkZCYmKGwuYWRkLmNhbGwoYSxrKSxrLmhhbmRsZXIuZ3VpZHx8KGsuaGFuZGxlci5ndWlkPWMuZ3VpZCkpLGU/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxrKTptLnB1c2goayksbi5ldmVudC5nbG9iYWxbb109ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPU4uaGFzRGF0YShhKSYmTi5nZXQoYSk7aWYociYmKGk9ci5ldmVudHMpKXtiPShifHxcIlwiKS5tYXRjaChHKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9ZmEuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiZOLnJlbW92ZShhLFwiaGFuZGxlIGV2ZW50c1wiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxkLGYsZyxoPVtdLGk9ZS5jYWxsKGFyZ3VtZW50cyksaj0oTi5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSlhLnJuYW1lc3BhY2UmJiFhLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZD0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZCYmKGEucmVzdWx0PWQpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKFwiY2xpY2tcIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1pLm5vZGVUeXBlJiYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT4tMTpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczpcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEud2hpY2gmJihhLndoaWNoPW51bGwhPWIuY2hhckNvZGU/Yi5jaGFyQ29kZTpiLmtleUNvZGUpLGF9fSxtb3VzZUhvb2tzOntwcm9wczpcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZz1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxkLGU9Yy5kb2N1bWVudEVsZW1lbnQsZj1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGUmJmUuc2Nyb2xsTGVmdHx8ZiYmZi5zY3JvbGxMZWZ0fHwwKS0oZSYmZS5jbGllbnRMZWZ0fHxmJiZmLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhlJiZlLnNjcm9sbFRvcHx8ZiYmZi5zY3JvbGxUb3B8fDApLShlJiZlLmNsaWVudFRvcHx8ZiYmZi5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1nfHwoYS53aGljaD0xJmc/MToyJmc/Mzo0Jmc/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGUsZj1hLnR5cGUsZz1hLGg9dGhpcy5maXhIb29rc1tmXTtofHwodGhpcy5maXhIb29rc1tmXT1oPWVhLnRlc3QoZik/dGhpcy5tb3VzZUhvb2tzOmRhLnRlc3QoZik/dGhpcy5rZXlIb29rczp7fSksZT1oLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGgucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChnKSxiPWUubGVuZ3RoO3doaWxlKGItLSljPWVbYl0sYVtjXT1nW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGguZmlsdGVyP2guZmlsdGVyKGEsZyk6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1pYSgpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNpblwifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1pYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9nYTpoYSk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpuLkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpoYSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpoYSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpoYSxpc1NpbXVsYXRlZDohMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1nYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1nYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Z2EsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuIGUmJihlPT09ZHx8bi5jb250YWlucyhkLGUpKXx8KGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBqYSh0aGlzLGEsYixjLGQpfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGphKHRoaXMsYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG4oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrXCIuXCIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmXCJmdW5jdGlvblwiIT10eXBlb2YgYnx8KGM9YixiPXZvaWQgMCksYz09PSExJiYoYz1oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX19KTt2YXIga2E9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzotXSspW14+XSopXFwvPi9naSxsYT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxtYT0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLG5hPS9edHJ1ZVxcLyguKikvLG9hPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZztmdW5jdGlvbiBwYShhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiBxYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiByYShhKXt2YXIgYj1uYS5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gc2EoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihOLmhhc0RhdGEoYSkmJihmPU4uYWNjZXNzKGEpLGc9Ti5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspbi5ldmVudC5hZGQoYixlLGpbZV1bY10pfU8uaGFzRGF0YShhKSYmKGg9Ty5hY2Nlc3MoYSksaT1uLmV4dGVuZCh7fSxoKSxPLnNldChiLGkpKX19ZnVuY3Rpb24gdGEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJpbnB1dFwiPT09YyYmWC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDpcImlucHV0XCIhPT1jJiZcInRleHRhcmVhXCIhPT1jfHwoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIHVhKGEsYixjLGQpe2I9Zi5hcHBseShbXSxiKTt2YXIgZSxnLGgsaSxqLGssbT0wLG89YS5sZW5ndGgscD1vLTEscT1iWzBdLHI9bi5pc0Z1bmN0aW9uKHEpO2lmKHJ8fG8+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJm1hLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSx1YShmLGIsYyxkKX0pO2lmKG8mJihlPWNhKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZz1lLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWcpLGd8fGQpKXtmb3IoaD1uLm1hcChfKGUsXCJzY3JpcHRcIikscWEpLGk9aC5sZW5ndGg7bz5tO20rKylqPWUsbSE9PXAmJihqPW4uY2xvbmUoaiwhMCwhMCksaSYmbi5tZXJnZShoLF8oaixcInNjcmlwdFwiKSkpLGMuY2FsbChhW21dLGosbSk7aWYoaSlmb3Ioaz1oW2gubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsbi5tYXAoaCxyYSksbT0wO2k+bTttKyspaj1oW21dLFoudGVzdChqLnR5cGV8fFwiXCIpJiYhTi5hY2Nlc3MoaixcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoayxqKSYmKGouc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoai5zcmMpOm4uZ2xvYmFsRXZhbChqLnRleHRDb250ZW50LnJlcGxhY2Uob2EsXCJcIikpKX1yZXR1cm4gYX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoXyhkKSksZC5wYXJlbnROb2RlJiYoYyYmbi5jb250YWlucyhkLm93bmVyRG9jdW1lbnQsZCkmJmFhKF8oZCxcInNjcmlwdFwiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKGthLFwiPCQxPjwvJDI+XCIpfSxjbG9uZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNsb25lTm9kZSghMCksaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZighKGwubm9DbG9uZUNoZWNrZWR8fDEhPT1hLm5vZGVUeXBlJiYxMSE9PWEubm9kZVR5cGV8fG4uaXNYTUxEb2MoYSkpKWZvcihnPV8oaCksZj1fKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspdGEoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8XyhhKSxnPWd8fF8oaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKylzYShmW2RdLGdbZF0pO2Vsc2Ugc2EoYSxoKTtyZXR1cm4gZz1fKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmYWEoZywhaSYmXyhhLFwic2NyaXB0XCIpKSxofSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlPW4uZXZlbnQuc3BlY2lhbCxmPTA7dm9pZCAwIT09KGM9YVtmXSk7ZisrKWlmKEwoYykpe2lmKGI9Y1tOLmV4cGFuZG9dKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cyllW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO2NbTi5leHBhbmRvXT12b2lkIDB9Y1tPLmV4cGFuZG9dJiYoY1tPLmV4cGFuZG9dPXZvaWQgMCl9fX0pLG4uZm4uZXh0ZW5kKHtkb21NYW5pcDp1YSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHZhKHRoaXMsYSwhMCl9LHJlbW92ZTpmdW5jdGlvbihhKXtyZXR1cm4gdmEodGhpcyxhKX0sdGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9cGEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1wYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShfKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFsYS50ZXN0KGEpJiYhJFsoWS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9bi5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKF8oYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShfKHRoaXMpKSxjJiZjLnJlcGxhY2VDaGlsZChiLHRoaXMpKX0sYSl9fSksbi5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZj1lLmxlbmd0aC0xLGg9MDtmPj1oO2grKyljPWg9PT1mP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxnLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciB3YSx4YT17SFRNTDpcImJsb2NrXCIsQk9EWTpcImJsb2NrXCJ9O2Z1bmN0aW9uIHlhKGEsYil7dmFyIGM9bihiLmNyZWF0ZUVsZW1lbnQoYSkpLmFwcGVuZFRvKGIuYm9keSksZD1uLmNzcyhjWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIHphKGEpe3ZhciBiPWQsYz14YVthXTtyZXR1cm4gY3x8KGM9eWEoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fCh3YT0od2F8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj13YVswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXlhKGEsYiksd2EuZGV0YWNoKCkpLHhhW2FdPWMpLGN9dmFyIEFhPS9ebWFyZ2luLyxCYT1uZXcgUmVnRXhwKFwiXihcIitTK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLENhPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX0sRGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9LEVhPWQuZG9jdW1lbnRFbGVtZW50OyFmdW5jdGlvbigpe3ZhciBiLGMsZSxmLGc9ZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGg9ZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGguc3R5bGUpe2guc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGguY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGwuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWguc3R5bGUuYmFja2dyb3VuZENsaXAsZy5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6OHB4O2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDtwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIixnLmFwcGVuZENoaWxkKGgpO2Z1bmN0aW9uIGkoKXtoLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jazttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3RvcDoxJTt3aWR0aDo1MCVcIixoLmlubmVySFRNTD1cIlwiLEVhLmFwcGVuZENoaWxkKGcpO3ZhciBkPWEuZ2V0Q29tcHV0ZWRTdHlsZShoKTtiPVwiMSVcIiE9PWQudG9wLGY9XCIycHhcIj09PWQubWFyZ2luTGVmdCxjPVwiNHB4XCI9PT1kLndpZHRoLGguc3R5bGUubWFyZ2luUmlnaHQ9XCI1MCVcIixlPVwiNHB4XCI9PT1kLm1hcmdpblJpZ2h0LEVhLnJlbW92ZUNoaWxkKGcpfW4uZXh0ZW5kKGwse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gaSgpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxjfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmkoKSxlfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmaSgpLGZ9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWguYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWguc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCIsYy5zdHlsZS5tYXJnaW5SaWdodD1jLnN0eWxlLndpZHRoPVwiMFwiLGguc3R5bGUud2lkdGg9XCIxcHhcIixFYS5hcHBlbmRDaGlsZChnKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjKS5tYXJnaW5SaWdodCksRWEucmVtb3ZlQ2hpbGQoZyksaC5yZW1vdmVDaGlsZChjKSxifX0pfX0oKTtmdW5jdGlvbiBGYShhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLnN0eWxlO3JldHVybiBjPWN8fENhKGEpLGc9Yz9jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl06dm9pZCAwLFwiXCIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJkJhLnRlc3QoZykmJkFhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiBHYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgSGE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLElhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxKYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LEthPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXSxMYT1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7ZnVuY3Rpb24gTWEoYSl7aWYoYSBpbiBMYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPUthLmxlbmd0aDt3aGlsZShjLS0paWYoYT1LYVtjXStiLGEgaW4gTGEpcmV0dXJuIGF9ZnVuY3Rpb24gTmEoYSxiLGMpe3ZhciBkPVQuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8XCJweFwiKTpifWZ1bmN0aW9uIE9hKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PWI/MTowLGc9MDs0PmY7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPW4uY3NzKGEsYytVW2ZdLCEwLGUpKSxkPyhcImNvbnRlbnRcIj09PWMmJihnLT1uLmNzcyhhLFwicGFkZGluZ1wiK1VbZl0sITAsZSkpLFwibWFyZ2luXCIhPT1jJiYoZy09bi5jc3MoYSxcImJvcmRlclwiK1VbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPW4uY3NzKGEsXCJwYWRkaW5nXCIrVVtmXSwhMCxlKSxcInBhZGRpbmdcIiE9PWMmJihnKz1uLmNzcyhhLFwiYm9yZGVyXCIrVVtmXStcIldpZHRoXCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBQYShhLGIsYyl7dmFyIGQ9ITAsZT1cIndpZHRoXCI9PT1iP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQsZj1DYShhKSxnPVwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9RmEoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSxCYS50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGwuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStPYShhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9ZnVuY3Rpb24gUWEoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109Ti5nZXQoZCxcIm9sZGRpc3BsYXlcIiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8XCJub25lXCIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpLFwiXCI9PT1kLnN0eWxlLmRpc3BsYXkmJlYoZCkmJihmW2ddPU4uYWNjZXNzKGQsXCJvbGRkaXNwbGF5XCIsemEoZC5ub2RlTmFtZSkpKSk6KGU9VihkKSxcIm5vbmVcIj09PWMmJmV8fE4uc2V0KGQsXCJvbGRkaXNwbGF5XCIsZT9jOm4uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9RmEoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOlwiY3NzRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09TWEoaCl8fGgpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPVQuZXhlYyhjKSkmJmVbMV0mJihjPVcoYSxiLGUpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT9cIlwiOlwicHhcIikpLGwuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09TWEoaCl8fGgpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiZcImdldFwiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9RmEoYSxiLGQpKSxcIm5vcm1hbFwiPT09ZSYmYiBpbiBKYSYmKGU9SmFbYl0pLFwiXCI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxpc0Zpbml0ZShmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFtcImhlaWdodFwiLFwid2lkdGhcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP0hhLnRlc3Qobi5jc3MoYSxcImRpc3BsYXlcIikpJiYwPT09YS5vZmZzZXRXaWR0aD9EYShhLElhLGZ1bmN0aW9uKCl7cmV0dXJuIFBhKGEsYixkKX0pOlBhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZDYShhKSxnPWQmJk9hKGEsYixkLFwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpLGYpO3JldHVybiBnJiYoZT1ULmV4ZWMoYykpJiZcInB4XCIhPT0oZVszXXx8XCJweFwiKSYmKGEuc3R5bGVbYl09YyxjPW4uY3NzKGEsYikpLE5hKGEsYyxnKX19fSksbi5jc3NIb29rcy5tYXJnaW5MZWZ0PUdhKGwucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/KHBhcnNlRmxvYXQoRmEoYSxcIm1hcmdpbkxlZnRcIikpfHxhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtRGEoYSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrXCJweFwiOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9R2EobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/RGEoYSx7ZGlzcGxheTpcImlubGluZS1ibG9ja1wifSxGYSxbYSxcIm1hcmdpblJpZ2h0XCJdKTp2b2lkIDB9KSxuLmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj1cInN0cmluZ1wiPT10eXBlb2YgYz9jLnNwbGl0KFwiIFwiKTpbY107ND5kO2QrKyllW2ErVVtkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxBYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1OYSl9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPUNhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBRYSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBRYSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1YodGhpcyk/bih0aGlzKS5zaG93KCk6bih0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBSYShhLGIsYyxkLGUpe3JldHVybiBuZXcgUmEucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1uLlR3ZWVuPVJhLFJhLnByb3RvdHlwZT17Y29uc3RydWN0b3I6UmEsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8bi5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPVJhLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpSYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1SYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOlJhLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LFJhLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1SYS5wcm90b3R5cGUsUmEucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCxcIlwiKSxiJiZcImF1dG9cIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dJiYhbi5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93Om4uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LFJhLnByb3BIb29rcy5zY3JvbGxUb3A9UmEucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDpcInN3aW5nXCJ9LG4uZng9UmEucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBTYSxUYSxVYT0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sVmE9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBXYSgpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtTYT12b2lkIDB9KSxTYT1uLm5vdygpfWZ1bmN0aW9uIFhhKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9VVtkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBZYShhLGIsYyl7Zm9yKHZhciBkLGU9KF9hLnR3ZWVuZXJzW2JdfHxbXSkuY29uY2F0KF9hLnR3ZWVuZXJzW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gWmEoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmVihhKSxxPU4uZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsXCJkaXNwbGF5XCIpLGs9XCJub25lXCI9PT1qP04uZ2V0KGEsXCJvbGRkaXNwbGF5XCIpfHx6YShhLm5vZGVOYW1lKTpqLFwiaW5saW5lXCI9PT1rJiZcIm5vbmVcIj09PW4uY3NzKGEsXCJmbG9hdFwiKSYmKG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixsLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sVWEuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/emEoYS5ub2RlTmFtZSk6aikmJihvLmRpc3BsYXk9aik7ZWxzZXtxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1OLmFjY2VzcyhhLFwiZnhzaG93XCIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO04ucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGIgaW4gbSluLnN0eWxlKGEsYixtW2JdKX0pO2ZvcihkIGluIG0pZz1ZYShwP3FbZF06MCxkLGwpLGQgaW4gcXx8KHFbZF09Zy5zdGFydCxwJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PVwid2lkdGhcIj09PWR8fFwiaGVpZ2h0XCI9PT1kPzE6MCkpfX1mdW5jdGlvbiAkYShhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gX2EoYSxiLGMpe3ZhciBkLGUsZj0wLGc9X2EucHJlZmlsdGVycy5sZW5ndGgsaD1uLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1TYXx8V2EoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7aT5nO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLDE+ZiYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6bi5leHRlbmQoe30sYiksb3B0czpuLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6bi5lYXNpbmcuX2RlZmF1bHR9LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpTYXx8V2EoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW4uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/KGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbaixiXSkpOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoJGEoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7Zz5mO2YrKylpZihkPV9hLnByZWZpbHRlcnNbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBuLmlzRnVuY3Rpb24oZC5zdG9wKSYmKG4uX3F1ZXVlSG9va3Moai5lbGVtLGoub3B0cy5xdWV1ZSkuc3RvcD1uLnByb3h5KGQuc3RvcCxkKSksZDtyZXR1cm4gbi5tYXAoayxZYSxqKSxuLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxuLmZ4LnRpbWVyKG4uZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfW4uQW5pbWF0aW9uPW4uZXh0ZW5kKF9hLHt0d2VlbmVyczp7XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBXKGMuZWxlbSxhLFQuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5tYXRjaChHKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sX2EudHdlZW5lcnNbY109X2EudHdlZW5lcnNbY118fFtdLF9hLnR3ZWVuZXJzW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcnM6W1phXSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP19hLnByZWZpbHRlcnMudW5zaGlmdChhKTpfYS5wcmVmaWx0ZXJzLnB1c2goYSl9fSksbi5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmXCJvYmplY3RcIj09dHlwZW9mIGE/bi5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxuLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIW4uaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIGQuZHVyYXRpb249bi5meC5vZmY/MDpcIm51bWJlclwiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFYpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5pc0VtcHR5T2JqZWN0KGEpLGY9bi5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPV9hKHRoaXMsbi5leHRlbmQoe30sYSksZik7KGV8fE4uZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1uLnRpbWVycyxnPU4uZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlZhLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7IWImJmN8fG4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9Ti5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShYYShiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246WGEoXCJzaG93XCIpLHNsaWRlVXA6WGEoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlhhKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihTYT1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLFNhPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe1RhfHwoVGE9YS5zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFySW50ZXJ2YWwoVGEpLFRhPW51bGx9LG4uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG4uZm4uZGVsYXk9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1uLmZ4P24uZnguc3BlZWRzW2JdfHxiOmIsYz1jfHxcImZ4XCIsdGhpcy5xdWV1ZShjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5zZXRUaW1lb3V0KGMsYik7ZC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhclRpbWVvdXQoZSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1kLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixsLmNoZWNrT249XCJcIiE9PWEudmFsdWUsbC5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGEudmFsdWU9XCJ0XCIsYS50eXBlPVwicmFkaW9cIixsLnJhZGlvVmFsdWU9XCJ0XCI9PT1hLnZhbHVlfSgpO3ZhciBhYixiYj1uLmV4cHIuYXR0ckhhbmRsZTtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBLKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLmdldEF0dHJpYnV0ZT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGU9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP2FiOnZvaWQgMCkpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm4ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX19KSxhYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz1iYltiXXx8bi5maW5kLmF0dHI7YmJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPWJiW2JdLGJiW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCxiYltiXT1mKSxlfX0pO3ZhciBjYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLGRiPS9eKD86YXxhcmVhKSQvaTtuLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBLKHRoaXMsbi5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tuLnByb3BGaXhbYV18fGFdfSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksXHJcbnZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidGFiaW5kZXhcIik7cmV0dXJuIGI/cGFyc2VJbnQoYiwxMCk6Y2IudGVzdChhLm5vZGVOYW1lKXx8ZGIudGVzdChhLm5vZGVOYW1lKSYmYS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtuLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7dmFyIGViPS9bXFx0XFxyXFxuXFxmXS9nO2Z1bmN0aW9uIGZiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIn1uLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYixmYih0aGlzKSkpfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChHKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1mYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYoXCIgXCIrZStcIiBcIikucmVwbGFjZShlYixcIiBcIikpe2c9MDt3aGlsZShmPWJbZysrXSlkLmluZGV4T2YoXCIgXCIrZitcIiBcIik8MCYmKGQrPWYrXCIgXCIpO2g9bi50cmltKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLGZiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKFwiY2xhc3NcIixcIlwiKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPWZiKGMpLGQ9MT09PWMubm9kZVR5cGUmJihcIiBcIitlK1wiIFwiKS5yZXBsYWNlKGViLFwiIFwiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZihcIiBcIitmK1wiIFwiKT4tMSlkPWQucmVwbGFjZShcIiBcIitmK1wiIFwiLFwiIFwiKTtoPW4udHJpbShkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOm4uaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLGZiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoXCJzdHJpbmdcIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJlwiYm9vbGVhblwiIT09Y3x8KGI9ZmIodGhpcyksYiYmTi5zZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGJ8fGE9PT0hMT9cIlwiOk4uZ2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIpfHxcIlwiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj1cIiBcIithK1wiIFwiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoXCIgXCIrZmIoYykrXCIgXCIpLnJlcGxhY2UoZWIsXCIgXCIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGdiPS9cXHIvZyxoYj0vW1xceDIwXFx0XFxyXFxuXFxmXSsvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bi52YWxIb29rc1tlLnR5cGVdfHxuLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShnYixcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bi50cmltKG4udGV4dChhKSkucmVwbGFjZShoYixcIiBcIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLChjLnNlbGVjdGVkfHxpPT09ZSkmJihsLm9wdERpc2FibGVkPyFjLmRpc2FibGVkOm51bGw9PT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKSYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFuLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+LTE6dm9pZCAwfX0sbC5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KTt2YXIgaWI9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvO24uZXh0ZW5kKG4uZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscj1rLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoaD1pPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFpYi50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKFwiLlwiKT4tMSYmKHI9cS5zcGxpdChcIi5cIikscT1yLnNoaWZ0KCksci5zb3J0KCkpLGw9cS5pbmRleE9mKFwiOlwiKTwwJiZcIm9uXCIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsXCJvYmplY3RcIj09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWY/MjozLGIubmFtZXNwYWNlPXIuam9pbihcIi5cIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWUpLGM9bnVsbD09Yz9bYl06bi5tYWtlQXJyYXkoYyxbYl0pLG89bi5ldmVudC5zcGVjaWFsW3FdfHx7fSxmfHwhby50cmlnZ2VyfHxvLnRyaWdnZXIuYXBwbHkoZSxjKSE9PSExKSl7aWYoIWYmJiFvLm5vQnViYmxlJiYhbi5pc1dpbmRvdyhlKSl7Zm9yKGo9by5kZWxlZ2F0ZVR5cGV8fHEsaWIudGVzdChqK3EpfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpcC5wdXNoKGgpLGk9aDtpPT09KGUub3duZXJEb2N1bWVudHx8ZCkmJnAucHVzaChpLmRlZmF1bHRWaWV3fHxpLnBhcmVudFdpbmRvd3x8YSl9Zz0wO3doaWxlKChoPXBbZysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWc+MT9qOm8uYmluZFR5cGV8fHEsbT0oTi5nZXQoaCxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJk4uZ2V0KGgsXCJoYW5kbGVcIiksbSYmbS5hcHBseShoLGMpLG09bCYmaFtsXSxtJiZtLmFwcGx5JiZMKGgpJiYoYi5yZXN1bHQ9bS5hcHBseShoLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGIudHlwZT1xLGZ8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8uX2RlZmF1bHQmJm8uX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxjKSE9PSExfHwhTChlKXx8bCYmbi5pc0Z1bmN0aW9uKGVbcV0pJiYhbi5pc1dpbmRvdyhlKSYmKGk9ZVtsXSxpJiYoZVtsXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGVbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaSYmKGVbbF09aSkpLGIucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYil9fSksbi5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSksbi5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG4uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxsLmZvY3VzaW49XCJvbmZvY3VzaW5cImluIGEsbC5mb2N1c2lufHxuLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1OLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLE4uYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Ti5hY2Nlc3MoZCxiKS0xO2U/Ti5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxOLnJlbW92ZShkLGIpKX19fSk7dmFyIGpiPWEubG9jYXRpb24sa2I9bi5ub3coKSxsYj0vXFw/LztuLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5wYXJzZShhK1wiXCIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGIpe3ZhciBjO2lmKCFifHxcInN0cmluZ1wiIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYixcInRleHQveG1sXCIpfWNhdGNoKGQpe2M9dm9pZCAwfXJldHVybiBjJiYhYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aHx8bi5lcnJvcihcIkludmFsaWQgWE1MOiBcIitiKSxjfTt2YXIgbWI9LyMuKiQvLG5iPS8oWz8mXSlfPVteJl0qLyxvYj0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLHBiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHFiPS9eKD86R0VUfEhFQUQpJC8scmI9L15cXC9cXC8vLHNiPXt9LHRiPXt9LHViPVwiKi9cIi5jb25jYXQoXCIqXCIpLHZiPWQuY3JlYXRlRWxlbWVudChcImFcIik7dmIuaHJlZj1qYi5ocmVmO2Z1bmN0aW9uIHdiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHhiKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PXRiO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24geWIoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHpiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOmpiLmhyZWYsdHlwZTpcIkdFVFwiLGlzTG9jYWw6cGIudGVzdChqYi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6dWIsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDovXFxieG1sXFxiLyxodG1sOi9cXGJodG1sLyxqc29uOi9cXGJqc29uXFxiL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm4ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj95Yih5YihhLG4uYWpheFNldHRpbmdzKSxiKTp5YihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjp3YihzYiksYWpheFRyYW5zcG9ydDp3Yih0YiksYWpheDpmdW5jdGlvbihiLGMpe1wib2JqZWN0XCI9PXR5cGVvZiBiJiYoYz1iLGI9dm9pZCAwKSxjPWN8fHt9O3ZhciBlLGYsZyxoLGksaixrLGwsbT1uLmFqYXhTZXR1cCh7fSxjKSxvPW0uY29udGV4dHx8bSxwPW0uY29udGV4dCYmKG8ubm9kZVR5cGV8fG8uanF1ZXJ5KT9uKG8pOm4uZXZlbnQscT1uLkRlZmVycmVkKCkscj1uLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHM9bS5zdGF0dXNDb2RlfHx7fSx0PXt9LHU9e30sdj0wLHc9XCJjYW5jZWxlZFwiLHg9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dil7aWYoIWgpe2g9e307d2hpbGUoYj1vYi5leGVjKGcpKWhbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9aFthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT12P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdnx8KGE9dVtjXT11W2NdfHxhLHRbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdnx8KG0ubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dilmb3IoYiBpbiBhKXNbYl09W3NbYl0sYVtiXV07ZWxzZSB4LmFsd2F5cyhhW3guc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHc7cmV0dXJuIGUmJmUuYWJvcnQoYikseigwLGIpLHRoaXN9fTtpZihxLnByb21pc2UoeCkuY29tcGxldGU9ci5hZGQseC5zdWNjZXNzPXguZG9uZSx4LmVycm9yPXguZmFpbCxtLnVybD0oKGJ8fG0udXJsfHxqYi5ocmVmKStcIlwiKS5yZXBsYWNlKG1iLFwiXCIpLnJlcGxhY2UocmIsamIucHJvdG9jb2wrXCIvL1wiKSxtLnR5cGU9Yy5tZXRob2R8fGMudHlwZXx8bS5tZXRob2R8fG0udHlwZSxtLmRhdGFUeXBlcz1uLnRyaW0obS5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goRyl8fFtcIlwiXSxudWxsPT1tLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudChcImFcIik7dHJ5e2ouaHJlZj1tLnVybCxqLmhyZWY9ai5ocmVmLG0uY3Jvc3NEb21haW49dmIucHJvdG9jb2wrXCIvL1wiK3ZiLmhvc3QhPWoucHJvdG9jb2wrXCIvL1wiK2ouaG9zdH1jYXRjaCh5KXttLmNyb3NzRG9tYWluPSEwfX1pZihtLmRhdGEmJm0ucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBtLmRhdGEmJihtLmRhdGE9bi5wYXJhbShtLmRhdGEsbS50cmFkaXRpb25hbCkpLHhiKHNiLG0sYyx4KSwyPT09dilyZXR1cm4geDtrPW4uZXZlbnQmJm0uZ2xvYmFsLGsmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksbS50eXBlPW0udHlwZS50b1VwcGVyQ2FzZSgpLG0uaGFzQ29udGVudD0hcWIudGVzdChtLnR5cGUpLGY9bS51cmwsbS5oYXNDb250ZW50fHwobS5kYXRhJiYoZj1tLnVybCs9KGxiLnRlc3QoZik/XCImXCI6XCI/XCIpK20uZGF0YSxkZWxldGUgbS5kYXRhKSxtLmNhY2hlPT09ITEmJihtLnVybD1uYi50ZXN0KGYpP2YucmVwbGFjZShuYixcIiQxXz1cIitrYisrKTpmKyhsYi50ZXN0KGYpP1wiJlwiOlwiP1wiKStcIl89XCIra2IrKykpLG0uaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2ZdJiZ4LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG4ubGFzdE1vZGlmaWVkW2ZdKSxuLmV0YWdbZl0mJnguc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixuLmV0YWdbZl0pKSwobS5kYXRhJiZtLmhhc0NvbnRlbnQmJm0uY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJnguc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLG0uY29udGVudFR5cGUpLHguc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLG0uZGF0YVR5cGVzWzBdJiZtLmFjY2VwdHNbbS5kYXRhVHlwZXNbMF1dP20uYWNjZXB0c1ttLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09bS5kYXRhVHlwZXNbMF0/XCIsIFwiK3ViK1wiOyBxPTAuMDFcIjpcIlwiKTptLmFjY2VwdHNbXCIqXCJdKTtmb3IobCBpbiBtLmhlYWRlcnMpeC5zZXRSZXF1ZXN0SGVhZGVyKGwsbS5oZWFkZXJzW2xdKTtpZihtLmJlZm9yZVNlbmQmJihtLmJlZm9yZVNlbmQuY2FsbChvLHgsbSk9PT0hMXx8Mj09PXYpKXJldHVybiB4LmFib3J0KCk7dz1cImFib3J0XCI7Zm9yKGwgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0peFtsXShtW2xdKTtpZihlPXhiKHRiLG0sYyx4KSl7aWYoeC5yZWFkeVN0YXRlPTEsayYmcC50cmlnZ2VyKFwiYWpheFNlbmRcIixbeCxtXSksMj09PXYpcmV0dXJuIHg7bS5hc3luYyYmbS50aW1lb3V0PjAmJihpPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3guYWJvcnQoXCJ0aW1lb3V0XCIpfSxtLnRpbWVvdXQpKTt0cnl7dj0xLGUuc2VuZCh0LHopfWNhdGNoKHkpe2lmKCEoMj52KSl0aHJvdyB5O3ooLTEseSl9fWVsc2UgeigtMSxcIk5vIFRyYW5zcG9ydFwiKTtmdW5jdGlvbiB6KGIsYyxkLGgpe3ZhciBqLGwsdCx1LHcseT1jOzIhPT12JiYodj0yLGkmJmEuY2xlYXJUaW1lb3V0KGkpLGU9dm9pZCAwLGc9aHx8XCJcIix4LnJlYWR5U3RhdGU9Yj4wPzQ6MCxqPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHU9emIobSx4LGQpKSx1PUFiKG0sdSx4LGopLGo/KG0uaWZNb2RpZmllZCYmKHc9eC5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG4ubGFzdE1vZGlmaWVkW2ZdPXcpLHc9eC5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG4uZXRhZ1tmXT13KSksMjA0PT09Ynx8XCJIRUFEXCI9PT1tLnR5cGU/eT1cIm5vY29udGVudFwiOjMwND09PWI/eT1cIm5vdG1vZGlmaWVkXCI6KHk9dS5zdGF0ZSxsPXUuZGF0YSx0PXUuZXJyb3Isaj0hdCkpOih0PXksIWImJnl8fCh5PVwiZXJyb3JcIiwwPmImJihiPTApKSkseC5zdGF0dXM9Yix4LnN0YXR1c1RleHQ9KGN8fHkpK1wiXCIsaj9xLnJlc29sdmVXaXRoKG8sW2wseSx4XSk6cS5yZWplY3RXaXRoKG8sW3gseSx0XSkseC5zdGF0dXNDb2RlKHMpLHM9dm9pZCAwLGsmJnAudHJpZ2dlcihqP1wiYWpheFN1Y2Nlc3NcIjpcImFqYXhFcnJvclwiLFt4LG0saj9sOnRdKSxyLmZpcmVXaXRoKG8sW3gseV0pLGsmJihwLnRyaWdnZXIoXCJhamF4Q29tcGxldGVcIixbeCxtXSksLS1uLmFjdGl2ZXx8bi5ldmVudC50cmlnZ2VyKFwiYWpheFN0b3BcIikpKX1yZXR1cm4geH0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZ2V0KGEsYixjLFwianNvblwiKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsXCJzY3JpcHRcIil9fSksbi5lYWNoKFtcImdldFwiLFwicG9zdFwiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIW4uZXhwci5maWx0ZXJzLnZpc2libGUoYSl9LG4uZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg+MHx8YS5vZmZzZXRIZWlnaHQ+MHx8YS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD4wfTt2YXIgQmI9LyUyMC9nLENiPS9cXFtcXF0kLyxEYj0vXFxyP1xcbi9nLEViPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxGYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gR2IoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8Q2IudGVzdChhKT9kKGEsZSk6R2IoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPWU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilHYihhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj9cIlwiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpR2IoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIikucmVwbGFjZShCYixcIitcIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmRmIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUViLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFYLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoRGIsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZShEYixcIlxcclxcblwiKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBIYj17MDoyMDAsMTIyMzoyMDR9LEliPW4uYWpheFNldHRpbmdzLnhocigpO2wuY29ycz0hIUliJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gSWIsbC5hamF4PUliPSEhSWIsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe3ZhciBjLGQ7cmV0dXJuIGwuY29yc3x8SWImJiFiLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVtcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxcImFib3J0XCI9PT1hP2guYWJvcnQoKTpcImVycm9yXCI9PT1hP1wibnVtYmVyXCIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsXCJlcnJvclwiKTpmKGguc3RhdHVzLGguc3RhdHVzVGV4dCk6ZihIYltoLnN0YXR1c118fGguc3RhdHVzLGguc3RhdHVzVGV4dCxcInRleHRcIiE9PShoLnJlc3BvbnNlVHlwZXx8XCJ0ZXh0XCIpfHxcInN0cmluZ1wiIT10eXBlb2YgaC5yZXNwb25zZVRleHQ/e2JpbmFyeTpoLnJlc3BvbnNlfTp7dGV4dDpoLnJlc3BvbnNlVGV4dH0saC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0saC5vbmxvYWQ9YygpLGQ9aC5vbmVycm9yPWMoXCJlcnJvclwiKSx2b2lkIDAhPT1oLm9uYWJvcnQ/aC5vbmFib3J0PWQ6aC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09aC5yZWFkeVN0YXRlJiZhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjJiZkKCl9KX0sYz1jKFwiYWJvcnRcIik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fTp2b2lkIDB9KSxuLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihhKXtyZXR1cm4gbi5nbG9iYWxFdmFsKGEpLGF9fX0pLG4uYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPVwiR0VUXCIpfSksbi5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9bihcIjxzY3JpcHQ+XCIpLnByb3Aoe2NoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKFwibG9hZCBlcnJvclwiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZihcImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksZC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBKYj1bXSxLYj0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO24uYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPUpiLnBvcCgpfHxuLmV4cGFuZG8rXCJfXCIra2IrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoS2IudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJktiLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO3JldHVybiBofHxcImpzb25wXCI9PT1iLmRhdGFUeXBlc1swXT8oZT1iLmpzb25wQ2FsbGJhY2s9bi5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoS2IsXCIkMVwiK2UpOmIuanNvbnAhPT0hMSYmKGIudXJsKz0obGIudGVzdChiLnVybCk/XCImXCI6XCI/XCIpK2IuanNvbnArXCI9XCIrZSksYi5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlK1wiIHdhcyBub3QgY2FsbGVkXCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPVwianNvblwiLGY9YVtlXSxhW2VdPWZ1bmN0aW9uKCl7Zz1hcmd1bWVudHN9LGQuYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09Zj9uKGEpLnJlbW92ZVByb3AoZSk6YVtlXT1mLGJbZV0mJihiLmpzb25wQ2FsbGJhY2s9Yy5qc29ucENhbGxiYWNrLEpiLnB1c2goZSkpLGcmJm4uaXNGdW5jdGlvbihmKSYmZihnWzBdKSxnPWY9dm9pZCAwfSksXCJzY3JpcHRcIik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDtcImJvb2xlYW5cIj09dHlwZW9mIGImJihjPWIsYj0hMSksYj1ifHxkO3ZhciBlPXguZXhlYyhhKSxmPSFjJiZbXTtyZXR1cm4gZT9bYi5jcmVhdGVFbGVtZW50KGVbMV0pXTooZT1jYShbYV0sYixmKSxmJiZmLmxlbmd0aCYmbihmKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGUuY2hpbGROb2RlcykpfTt2YXIgTGI9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJkxiKXJldHVybiBMYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZihcIiBcIik7cmV0dXJuIGg+LTEmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fFwiR0VUXCIsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKFwiPGRpdj5cIikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gTWIoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW4oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLFwidG9wXCIpLGk9bi5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsbi5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbSk6bC5jc3MobSl9fSxuLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7bi5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZD10aGlzWzBdLGU9e3RvcDowLGxlZnQ6MH0sZj1kJiZkLm93bmVyRG9jdW1lbnQ7aWYoZilyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxuLmNvbnRhaW5zKGIsZCk/KGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPU1iKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1uLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGEmJlwic3RhdGljXCI9PT1uLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8RWF9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9XCJwYWdlWU9mZnNldFwiPT09YjtuLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmPU1iKGEpO3JldHVybiB2b2lkIDA9PT1lP2Y/ZltiXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/Zi5wYWdlWE9mZnNldDplLGM/ZTpmLnBhZ2VZT2Zmc2V0KTphW2RdPWUpfSxhLGQsYXJndW1lbnRzLmxlbmd0aCl9fSksbi5lYWNoKFtcInRvcFwiLFwibGVmdFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09R2EobC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGM/KGM9RmEoYSxiKSxCYS50ZXN0KGMpP24oYSkucG9zaXRpb24oKVtiXStcInB4XCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDpcImhlaWdodFwiLFdpZHRoOlwid2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmVhY2goe3BhZGRpbmc6XCJpbm5lclwiK2EsY29udGVudDpiLFwiXCI6XCJvdXRlclwiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHxcImJvb2xlYW5cIiE9dHlwZW9mIGQpLGc9Y3x8KGQ9PT0hMHx8ZT09PSEwP1wibWFyZ2luXCI6XCJib3JkZXJcIik7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIithXTo5PT09Yi5ub2RlVHlwZT8oZT1iLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChiLmJvZHlbXCJzY3JvbGxcIithXSxlW1wic2Nyb2xsXCIrYV0sYi5ib2R5W1wib2Zmc2V0XCIrYV0sZVtcIm9mZnNldFwiK2FdLGVbXCJjbGllbnRcIithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH19KSxuLmZuLmFuZFNlbGY9bi5mbi5hZGRCYWNrLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBOYj1hLmpRdWVyeSxPYj1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1PYiksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9TmIpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOyJdLCJmaWxlIjoianF1ZXJ5Lm1pbi5qcyJ9

/*!

JSZip v3.1.1 - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,g,h,i,j,k=[],l=0,m=a.length,n=m,o="string"!==d.getTypeOf(a);l<a.length;)n=m-l,o?(b=a[l++],c=l<m?a[l++]:0,e=l<m?a[l++]:0):(b=a.charCodeAt(l++),c=l<m?a.charCodeAt(l++):0,e=l<m?a.charCodeAt(l++):0),g=b>>2,h=(3&b)<<4|c>>4,i=n>1?(15&c)<<2|e>>6:64,j=n>2?63&e:64,k.push(f.charAt(g)+f.charAt(h)+f.charAt(i)+f.charAt(j));return k.join("")},c.decode=function(a){var b,c,d,g,h,i,j,k=0,l=0,m="data:";if(a.substr(m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n=3*a.length/4;if(a.charAt(a.length-1)===f.charAt(64)&&n--,a.charAt(a.length-2)===f.charAt(64)&&n--,n%1!==0)throw new Error("Invalid base64 input, bad content length.");var o;for(o=e.uint8array?new Uint8Array(0|n):new Array(0|n);k<a.length;)g=f.indexOf(a.charAt(k++)),h=f.indexOf(a.charAt(k++)),i=f.indexOf(a.charAt(k++)),j=f.indexOf(a.charAt(k++)),b=g<<2|h>>4,c=(15&h)<<4|i>>2,d=(3&i)<<6|j,o[l++]=b,64!==i&&(o[l++]=c),64!==j&&(o[l++]=d);return o}},{"./support":27,"./utils":29}],2:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}var e=a("./external"),f=a("./stream/DataWorker"),g=a("./stream/DataLengthProbe"),h=a("./stream/Crc32Probe"),g=a("./stream/DataLengthProbe");d.prototype={getContentWorker:function(){var a=new f(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),b=this;return a.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new f(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(a,b,c){return a.pipe(new h).pipe(new g("uncompressedSize")).pipe(b.compressWorker(c)).pipe(new g("compressedSize")).withStreamInfo("compression",b)},b.exports=d},{"./external":6,"./stream/Crc32Probe":22,"./stream/DataLengthProbe":23,"./stream/DataWorker":24}],3:[function(a,b,c){"use strict";var d=a("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(a){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},c.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":25}],4:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b[g])];return a^-1}function f(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b.charCodeAt(g))];return a^-1}var g=a("./utils"),h=d();b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var c="string"!==g.getTypeOf(a);return c?e(0|b,a,a.length,0):f(0|b,a,a.length,0)}},{"./utils":29}],5:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(a,b,c){(function(c){"use strict";var d=c.Promise||a("lie");b.exports={Promise:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lie:56}],7:[function(a,b,c){"use strict";function d(a,b){h.call(this,"FlateWorker/"+a),this._pako=new f[a]({raw:!0,level:b.level||-1}),this.meta={};var c=this;this._pako.onData=function(a){c.push({data:a,meta:c.meta})}}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=a("pako"),g=a("./utils"),h=a("./stream/GenericWorker"),i=e?"uint8array":"array";c.magic="\b\0",g.inherits(d,h),d.prototype.processChunk=function(a){this.meta=a.meta,this._pako.push(g.transformTo(i,a.data),!1)},d.prototype.flush=function(){h.prototype.flush.call(this),this._pako.push([],!0)},d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},c.compressWorker=function(a){return new d("Deflate",a)},c.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":25,"./utils":29,pako:57}],8:[function(a,b,c){"use strict";function d(a,b,c,d){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=c,this.encodeFileName=d,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var e=a("../utils"),f=a("../stream/GenericWorker"),g=a("../utf8"),h=a("../crc32"),i=a("../signature"),j=function(a,b){var c,d="";for(c=0;c<b;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},k=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},l=function(a,b){return 63&(a||0)},m=function(a,b,c,d,f,m){var n,o,p=a.file,q=a.compression,r=m!==g.utf8encode,s=e.transformTo("string",m(p.name)),t=e.transformTo("string",g.utf8encode(p.name)),u=p.comment,v=e.transformTo("string",m(u)),w=e.transformTo("string",g.utf8encode(u)),x=t.length!==p.name.length,y=w.length!==u.length,z="",A="",B="",C=p.dir,D=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};b&&!c||(E.crc32=a.crc32,E.compressedSize=a.compressedSize,E.uncompressedSize=a.uncompressedSize);var F=0;b&&(F|=8),r||!x&&!y||(F|=2048);var G=0,H=0;C&&(G|=16),"UNIX"===f?(H=798,G|=k(p.unixPermissions,C)):(H=20,G|=l(p.dosPermissions,C)),n=D.getUTCHours(),n<<=6,n|=D.getUTCMinutes(),n<<=5,n|=D.getUTCSeconds()/2,o=D.getUTCFullYear()-1980,o<<=4,o|=D.getUTCMonth()+1,o<<=5,o|=D.getUTCDate(),x&&(A=j(1,1)+j(h(s),4)+t,z+="up"+j(A.length,2)+A),y&&(B=j(1,1)+j(h(v),4)+w,z+="uc"+j(B.length,2)+B);var I="";I+="\n\0",I+=j(F,2),I+=q.magic,I+=j(n,2),I+=j(o,2),I+=j(E.crc32,4),I+=j(E.compressedSize,4),I+=j(E.uncompressedSize,4),I+=j(s.length,2),I+=j(z.length,2);var J=i.LOCAL_FILE_HEADER+I+s+z,K=i.CENTRAL_FILE_HEADER+j(H,2)+I+j(v.length,2)+"\0\0\0\0"+j(G,4)+j(d,4)+s+z+v;return{fileRecord:J,dirRecord:K}},n=function(a,b,c,d,f){var g="",h=e.transformTo("string",f(d));return g=i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+j(a,2)+j(a,2)+j(b,4)+j(c,4)+j(h.length,2)+h},o=function(a){var b="";return b=i.DATA_DESCRIPTOR+j(a.crc32,4)+j(a.compressedSize,4)+j(a.uncompressedSize,4)};e.inherits(d,f),d.prototype.push=function(a){var b=a.meta.percent||0,c=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,f.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:c?(b+100*(c-d-1))/c:100}}))},d.prototype.openedSource=function(a){if(this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name,this.streamFiles&&!a.file.dir){var b=m(a,this.streamFiles,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(a){this.accumulate=!1;var b=m(a,this.streamFiles,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),this.streamFiles&&!a.file.dir)this.push({data:o(a),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var a=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var c=this.bytesWritten-a,d=n(this.dirRecords.length,c,a,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),a.on("error",function(a){b.error(a)}),this},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(a){var b=this._sources;if(!f.prototype.error.call(this,a))return!1;for(var c=0;c<b.length;c++)try{b[c].error(a)}catch(a){}return!0},d.prototype.lock=function(){f.prototype.lock.call(this);for(var a=this._sources,b=0;b<a.length;b++)a[b].lock()},b.exports=d},{"../crc32":4,"../signature":20,"../stream/GenericWorker":25,"../utf8":28,"../utils":29}],9:[function(a,b,c){"use strict";var d=a("../compressions"),e=a("./ZipFileWorker"),f=function(a,b){var c=a||b,e=d[c];if(!e)throw new Error(c+" is not a valid compression method !");return e};c.generateWorker=function(a,b,c){var d=new e(b.streamFiles,c,b.platform,b.encodeFileName),g=0;try{a.forEach(function(a,c){g++;var e=f(c.options.compression,b.compression),h=c.options.compressionOptions||b.compressionOptions||{},i=c.dir,j=c.date;c._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,b,c){"use strict";function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var a=new d;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a}}d.prototype=a("./object"),d.prototype.loadAsync=a("./load"),d.support=a("./support"),d.defaults=a("./defaults"),d.version="3.1.1",d.loadAsync=function(a,b){return(new d).loadAsync(a,b)},d.external=a("./external"),b.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":13,"./support":27}],11:[function(a,b,c){"use strict";function d(a){return new f.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new i);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}var e=a("./utils"),f=a("./external"),g=a("./utf8"),e=a("./utils"),h=a("./zipEntries"),i=a("./stream/Crc32Probe"),j=a("./nodejsUtils");b.exports=function(a,b){var c=this;return b=e.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),j.isNode&&j.isStream(a)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",a,!0,b.optimizedBinaryString,b.base64).then(function(a){var c=new h(b);return c.load(a),c}).then(function(a){var c=[f.Promise.resolve(a)],e=a.files;if(b.checkCRC32)for(var g=0;g<e.length;g++)c.push(d(e[g]));return f.Promise.all(c)}).then(function(a){for(var d=a.shift(),e=d.files,f=0;f<e.length;f++){var g=e[f];c.file(g.fileNameStr,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:b.createFolders})}return d.zipComment.length&&(c.comment=d.zipComment),c})}},{"./external":6,"./nodejsUtils":12,"./stream/Crc32Probe":22,"./utf8":28,"./utils":29,"./zipEntries":30}],12:[function(a,b,c){(function(a){"use strict";b.exports={isNode:"undefined"!=typeof a,newBuffer:function(b,c){return new a(b,c)},isBuffer:function(b){return a.isBuffer(b)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],13:[function(a,b,c){"use strict";function d(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var e=a("./utf8"),f=a("./utils"),g=a("./stream/GenericWorker"),h=a("./stream/StreamHelper"),i=a("./defaults"),j=a("./compressedObject"),k=a("./zipObject"),l=a("./generate"),m=a("./nodejsUtils"),n=a("./nodejs/NodejsStreamInputAdapter"),o=function(a,b,c){var d,e=f.getTypeOf(b);c=f.extend(c||{},i),c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(a=q(a)),c.createFolders&&(d=p(a))&&r.call(this,d,!0);var h="string"===e&&c.binary===!1&&c.base64===!1;c.binary=!h;var l=b instanceof j&&0===b.uncompressedSize;(l||c.dir||!b||0===b.length)&&(c.base64=!1,c.binary=!0,b="",c.compression="STORE",e="string");var o=null;o=b instanceof j||b instanceof g?b:m.isNode&&m.isStream(b)?new n(a,b):f.prepareContent(a,b,c.binary,c.optimizedBinaryString,c.base64);var s=new k(a,o,c);this.files[a]=s},p=function(a){"/"===a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},q=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},r=function(a,b){return b="undefined"!=typeof b?b:i.createFolders,a=q(a),this.files[a]||o.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},s={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],c=b.slice(this.root.length,b.length),c&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];return this.forEach(function(c,d){a(c,d)&&b.push(d)}),b},file:function(a,b,c){if(1===arguments.length){if(d(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}var f=this.files[this.root+a];return f&&!f.dir?f:null}return a=this.root+a,o.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=r.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!==a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(a){var b,c={};try{if(c=f.extend(a||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode}),c.type=c.type.toLowerCase(),c.compression=c.compression.toUpperCase(),"binarystring"===c.type&&(c.type="string"),!c.type)throw new Error("No output type specified.");f.checkSupport(c.type),"darwin"!==a.platform&&"freebsd"!==a.platform&&"linux"!==a.platform&&"sunos"!==a.platform||(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS");var d=c.comment||this.comment||"";b=l.generateWorker(this,c,d)}catch(i){b=new g("error"),b.error(i)}return new h(b,c.type||"string",c.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){return a=a||{},a.type||(a.type="nodebuffer"),this.generateInternalStream(a).toNodejsStream(b)}};b.exports=s},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":33,"./nodejsUtils":12,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28,"./utils":29,"./zipObject":32}],14:[function(a,b,c){"use strict";function d(a){e.call(this,a);for(var b=0;b<this.data.length;b++)a[b]=255&a[b]}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data[this.zero+a]},d.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f-this.zero;return-1},d.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&e===f[3]},d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./DataReader":15}],15:[function(a,b,c){"use strict";function d(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}var e=a("../utils");d.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return e.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=d},{"../utils":29}],16:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./Uint8ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./Uint8ArrayReader":18}],17:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},d.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},d.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b},d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./DataReader":15}],18:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./ArrayReader":14}],19:[function(a,b,c){"use strict";var d=a("../utils"),e=a("../support"),f=a("./ArrayReader"),g=a("./StringReader"),h=a("./NodeBufferReader"),i=a("./Uint8ArrayReader");b.exports=function(a){var b=d.getTypeOf(a);return d.checkSupport(b),"string"!==b||e.uint8array?"nodebuffer"===b?new h(a):e.uint8array?new i(d.transformTo("uint8array",a)):new f(d.transformTo("array",a)):new g(a)}},{"../support":27,"../utils":29,"./ArrayReader":14,"./NodeBufferReader":16,"./StringReader":17,"./Uint8ArrayReader":18}],20:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],21:[function(a,b,c){"use strict";function d(a){e.call(this,"ConvertWorker to "+a),this.destType=a}var e=a("./GenericWorker"),f=a("../utils");f.inherits(d,e),d.prototype.processChunk=function(a){this.push({data:f.transformTo(this.destType,a.data),meta:a.meta})},b.exports=d},{"../utils":29,"./GenericWorker":25}],22:[function(a,b,c){"use strict";function d(){e.call(this,"Crc32Probe")}var e=a("./GenericWorker"),f=a("../crc32"),g=a("../utils");g.inherits(d,e),d.prototype.processChunk=function(a){this.streamInfo.crc32=f(a.data,this.streamInfo.crc32||0),this.push(a)},b.exports=d},{"../crc32":4,"../utils":29,"./GenericWorker":25}],23:[function(a,b,c){"use strict";function d(a){f.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}var e=a("../utils"),f=a("./GenericWorker");e.inherits(d,f),d.prototype.processChunk=function(a){if(a){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+a.data.length}f.prototype.processChunk.call(this,a)},b.exports=d},{"../utils":29,"./GenericWorker":25}],24:[function(a,b,c){"use strict";function d(a){f.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(a){b.dataIsReady=!0,b.data=a,b.max=a&&a.length||0,b.type=e.getTypeOf(a),b.isPaused||b._tickAndRepeat()},function(a){b.error(a)})}var e=a("../utils"),f=a("./GenericWorker"),g=16384;e.inherits(d,f),d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=g,b=null,c=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,c);break;case"uint8array":b=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":b=this.data.slice(this.index,c)}return this.index=c,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=d},{"../utils":29,"./GenericWorker":25}],25:[function(a,b,c){"use strict";function d(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,b){return this._listeners[a].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.end()}),a.on("error",function(a){b.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){return this.extraStreamInfo[a]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},b.exports=d},{}],26:[function(a,b,c){(function(c){"use strict";function d(a,b,c){switch(a){case"blob":return h.newBlob(h.transformTo("arraybuffer",b),c);case"base64":return k.encode(b);default:return h.transformTo(a,b)}}function e(a,b){var d,e=0,f=null,g=0;for(d=0;d<b.length;d++)g+=b[d].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(f=new Uint8Array(g),d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].length;return f;case"nodebuffer":return c.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function f(a,b){return new m.Promise(function(c,f){var g=[],h=a._internalType,i=a._outputType,j=a._mimeType;a.on("data",function(a,c){g.push(a),b&&b(c)}).on("error",function(a){g=[],f(a)}).on("end",function(){try{var a=d(i,e(h,g),j);c(a)}catch(b){f(b)}g=[]}).resume()})}function g(a,b,c){var d=b;switch(b){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=b,this._mimeType=c,h.checkSupport(d),this._worker=a.pipe(new i(d)),a.lock()}catch(e){this._worker=new j("error"),this._worker.error(e)}}var h=a("../utils"),i=a("./ConvertWorker"),j=a("./GenericWorker"),k=a("../base64"),l=a("../nodejs/NodejsStreamOutputAdapter"),m=a("../external");g.prototype={accumulate:function(a){return f(this,a)},on:function(a,b){var c=this;return"data"===a?this._worker.on(a,function(a){b.call(c,a.data,a.meta)}):this._worker.on(a,function(){h.delay(b,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},a)}},b.exports=g}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":33,"../utils":29,"./ConvertWorker":21,"./GenericWorker":25}],27:[function(a,b,c){(function(b){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof b,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var d=new ArrayBuffer(0);try{c.blob=0===new Blob([d],{type:"application/zip"}).size}catch(e){try{var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,g=new f;g.append(d),c.blob=0===g.getBlob("application/zip").size}catch(e){c.blob=!1}}}c.nodestream=!!a("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"./nodejs/NodejsStreamOutputAdapter":33}],28:[function(a,b,c){"use strict";function d(){i.call(this,"utf-8 decode"),this.leftOver=null}function e(){i.call(this,"utf-8 encode")}for(var f=a("./utils"),g=a("./support"),h=a("./nodejsUtils"),i=a("./stream/GenericWorker"),j=new Array(256),k=0;k<256;k++)j[k]=k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1;j[254]=j[254]=1;var l=function(a){var b,c,d,e,f,h=a.length,i=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=g.uint8array?new Uint8Array(i):new Array(i),f=0,e=0;f<i;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),c<128?b[f++]=c:c<2048?(b[f++]=192|c>>>6,b[f++]=128|63&c):c<65536?(b[f++]=224|c>>>12,b[f++]=128|c>>>6&63,b[f++]=128|63&c):(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63,b[f++]=128|c>>>6&63,b[f++]=128|63&c);return b},m=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+j[a[c]]>b?c:b},n=function(a){var b,c,d,e,g=a.length,h=new Array(2*g);for(c=0,b=0;b<g;)if(d=a[b++],d<128)h[c++]=d;else if(e=j[d],e>4)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;e>1&&b<g;)d=d<<6|63&a[b++],e--;e>1?h[c++]=65533:d<65536?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|1023&d)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),f.applyFromCharCode(h)};c.utf8encode=function(a){return g.nodebuffer?h.newBuffer(a,"utf-8"):l(a)},c.utf8decode=function(a){return g.nodebuffer?f.transformTo("nodebuffer",a).toString("utf-8"):(a=f.transformTo(g.uint8array?"uint8array":"array",a),n(a))},f.inherits(d,i),d.prototype.processChunk=function(a){var b=f.transformTo(g.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var d=b;b=new Uint8Array(d.length+this.leftOver.length),b.set(this.leftOver,0),b.set(d,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var e=m(b),h=b;e!==b.length&&(g.uint8array?(h=b.subarray(0,e),this.leftOver=b.subarray(e,b.length)):(h=b.slice(0,e),this.leftOver=b.slice(e,b.length))),this.push({data:c.utf8decode(h),meta:a.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=d,f.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=e},{"./nodejsUtils":12,"./stream/GenericWorker":25,"./support":27,"./utils":29}],29:[function(a,b,c){"use strict";function d(a){var b=null;return b=i.uint8array?new Uint8Array(a.length):new Array(a.length),f(a,b)}function e(a){return a}function f(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function g(a){var b=65536,d=c.getTypeOf(a),e=!0;if("uint8array"===d?e=n.applyCanBeUsed.uint8array:"nodebuffer"===d&&(e=n.applyCanBeUsed.nodebuffer),e)for(;b>1;)try{return n.stringifyByChunk(a,d,b)}catch(f){b=Math.floor(b/2)}return n.stringifyByChar(a)}function h(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var i=a("./support"),j=a("./base64"),k=a("./nodejsUtils"),l=a("core-js/library/fn/set-immediate"),m=a("./external");c.newBlob=function(a,b){c.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;return f.append(a),f.getBlob(b)}catch(d){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);for(;e<f;)"array"===b||"nodebuffer"===b?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(a){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,k.newBuffer(1)).length}catch(a){return!1}}()}};c.applyFromCharCode=g;var o={};o.string={string:e,array:function(a){return f(a,new Array(a.length))},arraybuffer:function(a){return o.string.uint8array(a).buffer},uint8array:function(a){return f(a,new Uint8Array(a.length));
},nodebuffer:function(a){return f(a,k.newBuffer(a.length))}},o.array={string:g,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(a)}},o.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return h(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(new Uint8Array(a))}},o.uint8array={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:e,nodebuffer:function(a){return k.newBuffer(a)}},o.nodebuffer={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return o.nodebuffer.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:e},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=o[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":i.nodebuffer&&k.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=i[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(b<16?"0":"")+b.toString(16).toUpperCase();return d},c.delay=function(a,b,c){l(function(){a.apply(c||null,b||[])})},c.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},c.extend=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},c.prepareContent=function(a,b,e,f,g){var h=m.Promise.resolve(b).then(function(a){return i.blob&&a instanceof Blob&&"undefined"!=typeof FileReader?new m.Promise(function(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)},d.onerror=function(a){c(a.target.error)},d.readAsArrayBuffer(a)}):a});return h.then(function(b){var h=c.getTypeOf(b);return h?("arraybuffer"===h?b=c.transformTo("uint8array",b):"string"===h&&(g?b=j.decode(b):e&&f!==!0&&(b=d(b))),b):m.Promise.reject(new Error("The data of '"+a+"' is in an unsupported format !"))})}},{"./base64":1,"./external":6,"./nodejsUtils":12,"./support":27,"core-js/library/fn/set-immediate":34}],30:[function(a,b,c){"use strict";function d(a){this.files=[],this.loadOptions=a}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./signature"),h=a("./zipEntry"),i=(a("./utf8"),a("./support"));d.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+f.pretty(b)+", expected "+f.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),e=d===b;return this.reader.setIndex(c),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),b=i.uint8array?"uint8array":"array",c=f.transformTo(b,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;e<d;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readData(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)a=new h({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(a<0){var b=!this.isSignature(0,g.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(a);var c=a;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),a<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var e=c-d;if(e>0)this.isSignature(c,g.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(a){this.reader=e(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=d},{"./reader/readerFor":19,"./signature":20,"./support":27,"./utf8":28,"./utils":29,"./zipEntry":31}],31:[function(a,b,c){"use strict";function d(a,b){this.options=a,this.loadOptions=b}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./compressedObject"),h=a("./crc32"),i=a("./utf8"),j=a("./compressions"),k=a("./support"),l=0,m=3,n=function(a){for(var b in j)if(j.hasOwnProperty(b)&&j[b].magic===a)return j[b];return null};d.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=n(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,b,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var b=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a===l&&(this.dosPermissions=63&this.externalFileAttributes),a===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(a){if(this.extraFields[1]){var b=e(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<e;)b=a.readInt(2),c=a.readInt(2),d=a.readData(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){var a=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var c=f.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var d=this.findExtraFieldUnicodeComment();if(null!==d)this.fileCommentStr=d;else{var e=f.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(e)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileName)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileComment)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null}},b.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":19,"./support":27,"./utf8":28,"./utils":29}],32:[function(a,b,c){"use strict";var d=a("./stream/StreamHelper"),e=a("./stream/DataWorker"),f=a("./utf8"),g=a("./compressedObject"),h=a("./stream/GenericWorker"),i=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};i.prototype={internalStream:function(a){var b=a.toLowerCase(),c="string"===b||"text"===b;"binarystring"!==b&&"text"!==b||(b="string");var e=this._decompressWorker(),g=!this._dataBinary;return g&&!c&&(e=e.pipe(new f.Utf8EncodeWorker)),!g&&c&&(e=e.pipe(new f.Utf8DecodeWorker)),new d(e,b,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof g&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new f.Utf8EncodeWorker)),g.createWorkerFrom(c,a,b)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof h?this._data:new e(this._data)}};for(var j=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<j.length;l++)i.prototype[j[l]]=k;b.exports=i},{"./compressedObject":2,"./stream/DataWorker":24,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28}],33:[function(a,b,c){},{}],34:[function(a,b,c){a("../modules/web.immediate"),b.exports=a("../modules/_core").setImmediate},{"../modules/_core":38,"../modules/web.immediate":54}],35:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],36:[function(a,b,c){var d=a("./_is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":49}],37:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],38:[function(a,b,c){var d=b.exports={version:"2.3.0"};"number"==typeof __e&&(__e=d)},{}],39:[function(a,b,c){var d=a("./_a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./_a-function":35}],40:[function(a,b,c){b.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":43}],41:[function(a,b,c){var d=a("./_is-object"),e=a("./_global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./_global":44,"./_is-object":49}],42:[function(a,b,c){var d=a("./_global"),e=a("./_core"),f=a("./_ctx"),g=a("./_hide"),h="prototype",i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s[h],u=n?d:o?d[b]:(d[b]||{})[h];n&&(c=b);for(j in c)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[h]=a[h],b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,b.exports=i},{"./_core":38,"./_ctx":39,"./_global":44,"./_hide":45}],43:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],44:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],45:[function(a,b,c){var d=a("./_object-dp"),e=a("./_property-desc");b.exports=a("./_descriptors")?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./_descriptors":40,"./_object-dp":50,"./_property-desc":51}],46:[function(a,b,c){b.exports=a("./_global").document&&document.documentElement},{"./_global":44}],47:[function(a,b,c){b.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":40,"./_dom-create":41,"./_fails":43}],48:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],49:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],50:[function(a,b,c){var d=a("./_an-object"),e=a("./_ie8-dom-define"),f=a("./_to-primitive"),g=Object.defineProperty;c.f=a("./_descriptors")?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(h){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{"./_an-object":36,"./_descriptors":40,"./_ie8-dom-define":47,"./_to-primitive":53}],51:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],52:[function(a,b,c){var d,e,f,g=a("./_ctx"),h=a("./_invoke"),i=a("./_html"),j=a("./_dom-create"),k=a("./_global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./_cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./_cof":37,"./_ctx":39,"./_dom-create":41,"./_global":44,"./_html":46,"./_invoke":48}],53:[function(a,b,c){var d=a("./_is-object");b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":49}],54:[function(a,b,c){var d=a("./_export"),e=a("./_task");d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{"./_export":42,"./_task":52}],55:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(e){return p.reject(a,e)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(d){c.status="error",c.value=d}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{immediate:55}],57:[function(a,b,c){"use strict";var d=a("./lib/utils/common").assign,e=a("./lib/deflate"),f=a("./lib/inflate"),g=a("./lib/zlib/constants"),h={};d(h,e,f,g),b.exports=h},{"./lib/deflate":58,"./lib/inflate":59,"./lib/utils/common":60,"./lib/zlib/constants":63}],58:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,"string"==typeof a?e.input=j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;0!==e.avail_out&&(0!==e.avail_in||d!==o&&d!==r)||("string"===this.options.to?this.onData(j.buf2binstring(i.shrinkBuf(e.output,e.next_out))):this.onData(i.shrinkBuf(e.output,e.next_out)))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":60,"./utils/strings":61,"./zlib/deflate":65,"./zlib/messages":70,"./zlib/zstream":72}],59:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0!==m.avail_out&&c!==j.Z_STREAM_END&&(0!==m.avail_in||d!==j.Z_FINISH&&d!==j.Z_SYNC_FLUSH)||("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":60,"./utils/strings":61,"./zlib/constants":63,"./zlib/gzheader":66,"./zlib/inflate":68,"./zlib/messages":70,"./zlib/zstream":72}],60:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],61:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;j<256;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;c<h;)if(f=a[c++],f<128)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<h;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":60}],62:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],63:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],64:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^e[255&(a^b[h])];return a^-1}var f=d();b.exports=e},{}],65:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,
e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),e<0?(h=0,e=-e):e>15&&(h=2,e-=16),f<1||f>_||c!==$||e<8||e>15||b<0||b>9||g<0||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||b<0)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if(o!==wa&&o!==xa||(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":60,"./adler32":62,"./crc32":64,"./messages":70,"./trees":71}],66:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],67:[function(a,b,c){"use strict";var d=30,e=12;b.exports=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=c.dmax,l=c.wsize,m=c.whave,n=c.wnext,o=c.window,p=c.hold,q=c.bits,r=c.lencode,s=c.distcode,t=(1<<c.lenbits)-1,u=(1<<c.distbits)-1;a:do{q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){c.mode=e;break a}a.msg="invalid literal/length code",c.mode=d;break a}x=65535&v,w&=15,w&&(q<w&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",c.mode=d;break a}if(y=65535&v,w&=15,q<w&&(p+=B[f++]<<q,q+=8,q<w&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",c.mode=d;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&c.sane){a.msg="invalid distance too far back",c.mode=d;break a}if(z=0,A=o,0===n){if(z+=l-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(n<w){if(z+=l+n-w,w-=n,w<x){x-=w;do C[h++]=o[z++];while(--w);if(z=0,n<x){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(f<g&&h<j);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=f<g?5+(g-f):5-(f-g),a.avail_out=h<j?257+(j-h):257-(h-j),c.hold=p,c.bits=q}},{}],68:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15)),b&&(b<8||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;n<14;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(sa<16)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;n<32;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":60,"./adler32":62,"./crc32":64,"./inffast":67,"./inftrees":69}],69:[function(a,b,c){"use strict";var d=a("../utils/common"),e=15,f=852,g=592,h=0,i=1,j=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,c,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new d.Buf16(e+1),Q=new d.Buf16(e+1),R=null,S=0;for(D=0;D<=e;D++)P[D]=0;for(E=0;E<o;E++)P[b[c+E]]++;for(H=C,G=e;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=e;D++)if(K<<=1,K-=P[D],K<0)return-1;if(K>0&&(a===h||1!==G))return-1;for(Q[1]=0,D=1;D<e;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<o;E++)0!==b[c+E]&&(r[Q[b[c+E]]++]=E);if(a===h?(N=R=r,y=19):a===i?(N=k,O-=257,R=l,S-=257,y=256):(N=m,R=n,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===i&&L>f||a===j&&L>g)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[c+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;I+J<G&&(K-=P[I+J],!(K<=0));)I++,K<<=1;if(L+=1<<I,a===i&&L>f||a===j&&L>g)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":60}],70:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],71:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return a<256?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=W;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;c<V;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;d<=W;d++)f[d]=g=g+c[d-1]<<1;for(e=0;e<=b;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;d<Q-1;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;d<16;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;d<T;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;b<=W;b++)g[b]=0;for(a=0;a<=143;)ga[2*a+1]=8,a++,g[8]++;for(;a<=255;)ga[2*a+1]=9,a++,g[9]++;for(;a<=279;)ga[2*a+1]=7,a++,g[7]++;for(;a<=287;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;a<T;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;b<S;b++)a.dyn_ltree[2*b]=0;for(b=0;b<T;b++)a.dyn_dtree[2*b]=0;for(b=0;b<U;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c];
}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=j<2?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;d<=c;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):h<=10?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;d<=c;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(h<l){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):h<=10?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;e<d;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;b<R;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,f<=e&&(e=f)):e=f=c+5,c+4<=e&&b!==-1?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":60}],72:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}]},{},[10])(10)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqc3ppcC5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcblxyXG5KU1ppcCB2My4xLjEgLSBBIEphdmFzY3JpcHQgY2xhc3MgZm9yIGdlbmVyYXRpbmcgYW5kIHJlYWRpbmcgemlwIGZpbGVzXHJcbjxodHRwOi8vc3R1YXJ0ay5jb20vanN6aXA+XHJcblxyXG4oYykgMjAwOS0yMDE2IFN0dWFydCBLbmlnaHRsZXkgPHN0dWFydCBbYXRdIHN0dWFydGsuY29tPlxyXG5EdWFsIGxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBvciBHUEx2My4gU2VlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vU3R1ay9qc3ppcC9tYXN0ZXIvTElDRU5TRS5tYXJrZG93bi5cclxuXHJcbkpTWmlwIHVzZXMgdGhlIGxpYnJhcnkgcGFrbyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgOlxyXG5odHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL3Bha28vYmxvYi9tYXN0ZXIvTElDRU5TRVxyXG4qL1xyXG4hZnVuY3Rpb24oYSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9YSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxhKTtlbHNle3ZhciBiO2I9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGIuSlNaaXA9YSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gYShiLGMsZCl7ZnVuY3Rpb24gZShnLGgpe2lmKCFjW2ddKXtpZighYltnXSl7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighaCYmaSlyZXR1cm4gaShnLCEwKTtpZihmKXJldHVybiBmKGcsITApO3ZhciBqPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrZytcIidcIik7dGhyb3cgai5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGp9dmFyIGs9Y1tnXT17ZXhwb3J0czp7fX07YltnXVswXS5jYWxsKGsuZXhwb3J0cyxmdW5jdGlvbihhKXt2YXIgYz1iW2ddWzFdW2FdO3JldHVybiBlKGM/YzphKX0sayxrLmV4cG9ydHMsYSxiLGMsZCl9cmV0dXJuIGNbZ10uZXhwb3J0c31mb3IodmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxnPTA7ZzxkLmxlbmd0aDtnKyspZShkW2ddKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1hKFwiLi91dGlsc1wiKSxlPWEoXCIuL3N1cHBvcnRcIiksZj1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7Yy5lbmNvZGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZSxnLGgsaSxqLGs9W10sbD0wLG09YS5sZW5ndGgsbj1tLG89XCJzdHJpbmdcIiE9PWQuZ2V0VHlwZU9mKGEpO2w8YS5sZW5ndGg7KW49bS1sLG8/KGI9YVtsKytdLGM9bDxtP2FbbCsrXTowLGU9bDxtP2FbbCsrXTowKTooYj1hLmNoYXJDb2RlQXQobCsrKSxjPWw8bT9hLmNoYXJDb2RlQXQobCsrKTowLGU9bDxtP2EuY2hhckNvZGVBdChsKyspOjApLGc9Yj4+MixoPSgzJmIpPDw0fGM+PjQsaT1uPjE/KDE1JmMpPDwyfGU+PjY6NjQsaj1uPjI/NjMmZTo2NCxrLnB1c2goZi5jaGFyQXQoZykrZi5jaGFyQXQoaCkrZi5jaGFyQXQoaSkrZi5jaGFyQXQoaikpO3JldHVybiBrLmpvaW4oXCJcIil9LGMuZGVjb2RlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxnLGgsaSxqLGs9MCxsPTAsbT1cImRhdGE6XCI7aWYoYS5zdWJzdHIobS5sZW5ndGgpPT09bSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBpbnB1dCwgaXQgbG9va3MgbGlrZSBhIGRhdGEgdXJsLlwiKTthPWEucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9cXD1dL2csXCJcIik7dmFyIG49MyphLmxlbmd0aC80O2lmKGEuY2hhckF0KGEubGVuZ3RoLTEpPT09Zi5jaGFyQXQoNjQpJiZuLS0sYS5jaGFyQXQoYS5sZW5ndGgtMik9PT1mLmNoYXJBdCg2NCkmJm4tLSxuJTEhPT0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYmFzZTY0IGlucHV0LCBiYWQgY29udGVudCBsZW5ndGguXCIpO3ZhciBvO2ZvcihvPWUudWludDhhcnJheT9uZXcgVWludDhBcnJheSgwfG4pOm5ldyBBcnJheSgwfG4pO2s8YS5sZW5ndGg7KWc9Zi5pbmRleE9mKGEuY2hhckF0KGsrKykpLGg9Zi5pbmRleE9mKGEuY2hhckF0KGsrKykpLGk9Zi5pbmRleE9mKGEuY2hhckF0KGsrKykpLGo9Zi5pbmRleE9mKGEuY2hhckF0KGsrKykpLGI9Zzw8MnxoPj40LGM9KDE1JmgpPDw0fGk+PjIsZD0oMyZpKTw8NnxqLG9bbCsrXT1iLDY0IT09aSYmKG9bbCsrXT1jKSw2NCE9PWomJihvW2wrK109ZCk7cmV0dXJuIG99fSx7XCIuL3N1cHBvcnRcIjoyNyxcIi4vdXRpbHNcIjoyOX1dLDI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYixjLGQsZSl7dGhpcy5jb21wcmVzc2VkU2l6ZT1hLHRoaXMudW5jb21wcmVzc2VkU2l6ZT1iLHRoaXMuY3JjMzI9Yyx0aGlzLmNvbXByZXNzaW9uPWQsdGhpcy5jb21wcmVzc2VkQ29udGVudD1lfXZhciBlPWEoXCIuL2V4dGVybmFsXCIpLGY9YShcIi4vc3RyZWFtL0RhdGFXb3JrZXJcIiksZz1hKFwiLi9zdHJlYW0vRGF0YUxlbmd0aFByb2JlXCIpLGg9YShcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIiksZz1hKFwiLi9zdHJlYW0vRGF0YUxlbmd0aFByb2JlXCIpO2QucHJvdG90eXBlPXtnZXRDb250ZW50V29ya2VyOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IGYoZS5Qcm9taXNlLnJlc29sdmUodGhpcy5jb21wcmVzc2VkQ29udGVudCkpLnBpcGUodGhpcy5jb21wcmVzc2lvbi51bmNvbXByZXNzV29ya2VyKCkpLnBpcGUobmV3IGcoXCJkYXRhX2xlbmd0aFwiKSksYj10aGlzO3JldHVybiBhLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtpZih0aGlzLnN0cmVhbUluZm8uZGF0YV9sZW5ndGghPT1iLnVuY29tcHJlc3NlZFNpemUpdGhyb3cgbmV3IEVycm9yKFwiQnVnIDogdW5jb21wcmVzc2VkIGRhdGEgc2l6ZSBtaXNtYXRjaFwiKX0pLGF9LGdldENvbXByZXNzZWRXb3JrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGYoZS5Qcm9taXNlLnJlc29sdmUodGhpcy5jb21wcmVzc2VkQ29udGVudCkpLndpdGhTdHJlYW1JbmZvKFwiY29tcHJlc3NlZFNpemVcIix0aGlzLmNvbXByZXNzZWRTaXplKS53aXRoU3RyZWFtSW5mbyhcInVuY29tcHJlc3NlZFNpemVcIix0aGlzLnVuY29tcHJlc3NlZFNpemUpLndpdGhTdHJlYW1JbmZvKFwiY3JjMzJcIix0aGlzLmNyYzMyKS53aXRoU3RyZWFtSW5mbyhcImNvbXByZXNzaW9uXCIsdGhpcy5jb21wcmVzc2lvbil9fSxkLmNyZWF0ZVdvcmtlckZyb209ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhLnBpcGUobmV3IGgpLnBpcGUobmV3IGcoXCJ1bmNvbXByZXNzZWRTaXplXCIpKS5waXBlKGIuY29tcHJlc3NXb3JrZXIoYykpLnBpcGUobmV3IGcoXCJjb21wcmVzc2VkU2l6ZVwiKSkud2l0aFN0cmVhbUluZm8oXCJjb21wcmVzc2lvblwiLGIpfSxiLmV4cG9ydHM9ZH0se1wiLi9leHRlcm5hbFwiOjYsXCIuL3N0cmVhbS9DcmMzMlByb2JlXCI6MjIsXCIuL3N0cmVhbS9EYXRhTGVuZ3RoUHJvYmVcIjoyMyxcIi4vc3RyZWFtL0RhdGFXb3JrZXJcIjoyNH1dLDM6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKTtjLlNUT1JFPXttYWdpYzpcIlxcMFxcMFwiLGNvbXByZXNzV29ya2VyOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZChcIlNUT1JFIGNvbXByZXNzaW9uXCIpfSx1bmNvbXByZXNzV29ya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKFwiU1RPUkUgZGVjb21wcmVzc2lvblwiKX19LGMuREVGTEFURT1hKFwiLi9mbGF0ZVwiKX0se1wiLi9mbGF0ZVwiOjcsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjV9XSw0OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe2Zvcih2YXIgYSxiPVtdLGM9MDtjPDI1NjtjKyspe2E9Yztmb3IodmFyIGQ9MDtkPDg7ZCsrKWE9MSZhPzM5ODgyOTIzODReYT4+PjE6YT4+PjE7YltjXT1hfXJldHVybiBifWZ1bmN0aW9uIGUoYSxiLGMsZCl7dmFyIGU9aCxmPWQrYzthXj0tMTtmb3IodmFyIGc9ZDtnPGY7ZysrKWE9YT4+PjheZVsyNTUmKGFeYltnXSldO3JldHVybiBhXi0xfWZ1bmN0aW9uIGYoYSxiLGMsZCl7dmFyIGU9aCxmPWQrYzthXj0tMTtmb3IodmFyIGc9ZDtnPGY7ZysrKWE9YT4+PjheZVsyNTUmKGFeYi5jaGFyQ29kZUF0KGcpKV07cmV0dXJuIGFeLTF9dmFyIGc9YShcIi4vdXRpbHNcIiksaD1kKCk7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGF8fCFhLmxlbmd0aClyZXR1cm4gMDt2YXIgYz1cInN0cmluZ1wiIT09Zy5nZXRUeXBlT2YoYSk7cmV0dXJuIGM/ZSgwfGIsYSxhLmxlbmd0aCwwKTpmKDB8YixhLGEubGVuZ3RoLDApfX0se1wiLi91dGlsc1wiOjI5fV0sNTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2MuYmFzZTY0PSExLGMuYmluYXJ5PSExLGMuZGlyPSExLGMuY3JlYXRlRm9sZGVycz0hMCxjLmRhdGU9bnVsbCxjLmNvbXByZXNzaW9uPW51bGwsYy5jb21wcmVzc2lvbk9wdGlvbnM9bnVsbCxjLmNvbW1lbnQ9bnVsbCxjLnVuaXhQZXJtaXNzaW9ucz1udWxsLGMuZG9zUGVybWlzc2lvbnM9bnVsbH0se31dLDY6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9Yy5Qcm9taXNlfHxhKFwibGllXCIpO2IuZXhwb3J0cz17UHJvbWlzZTpkfX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se2xpZTo1Nn1dLDc6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7aC5jYWxsKHRoaXMsXCJGbGF0ZVdvcmtlci9cIithKSx0aGlzLl9wYWtvPW5ldyBmW2FdKHtyYXc6ITAsbGV2ZWw6Yi5sZXZlbHx8LTF9KSx0aGlzLm1ldGE9e307dmFyIGM9dGhpczt0aGlzLl9wYWtvLm9uRGF0YT1mdW5jdGlvbihhKXtjLnB1c2goe2RhdGE6YSxtZXRhOmMubWV0YX0pfX12YXIgZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDMyQXJyYXksZj1hKFwicGFrb1wiKSxnPWEoXCIuL3V0aWxzXCIpLGg9YShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksaT1lP1widWludDhhcnJheVwiOlwiYXJyYXlcIjtjLm1hZ2ljPVwiXFxiXFwwXCIsZy5pbmhlcml0cyhkLGgpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt0aGlzLm1ldGE9YS5tZXRhLHRoaXMuX3Bha28ucHVzaChnLnRyYW5zZm9ybVRvKGksYS5kYXRhKSwhMSl9LGQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aC5wcm90b3R5cGUuZmx1c2guY2FsbCh0aGlzKSx0aGlzLl9wYWtvLnB1c2goW10sITApfSxkLnByb3RvdHlwZS5jbGVhblVwPWZ1bmN0aW9uKCl7aC5wcm90b3R5cGUuY2xlYW5VcC5jYWxsKHRoaXMpLHRoaXMuX3Bha289bnVsbH0sYy5jb21wcmVzc1dvcmtlcj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQoXCJEZWZsYXRlXCIsYSl9LGMudW5jb21wcmVzc1dvcmtlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgZChcIkluZmxhdGVcIix7fSl9fSx7XCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjUsXCIuL3V0aWxzXCI6MjkscGFrbzo1N31dLDg6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYixjLGQpe2YuY2FsbCh0aGlzLFwiWmlwRmlsZVdvcmtlclwiKSx0aGlzLmJ5dGVzV3JpdHRlbj0wLHRoaXMuemlwQ29tbWVudD1iLHRoaXMuemlwUGxhdGZvcm09Yyx0aGlzLmVuY29kZUZpbGVOYW1lPWQsdGhpcy5zdHJlYW1GaWxlcz1hLHRoaXMuYWNjdW11bGF0ZT0hMSx0aGlzLmNvbnRlbnRCdWZmZXI9W10sdGhpcy5kaXJSZWNvcmRzPVtdLHRoaXMuY3VycmVudFNvdXJjZU9mZnNldD0wLHRoaXMuZW50cmllc0NvdW50PTAsdGhpcy5jdXJyZW50RmlsZT1udWxsLHRoaXMuX3NvdXJjZXM9W119dmFyIGU9YShcIi4uL3V0aWxzXCIpLGY9YShcIi4uL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLGc9YShcIi4uL3V0ZjhcIiksaD1hKFwiLi4vY3JjMzJcIiksaT1hKFwiLi4vc2lnbmF0dXJlXCIpLGo9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVwiXCI7Zm9yKGM9MDtjPGI7YysrKWQrPVN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmEpLGE+Pj49ODtyZXR1cm4gZH0saz1mdW5jdGlvbihhLGIpe3ZhciBjPWE7cmV0dXJuIGF8fChjPWI/MTY4OTM6MzMyMDQpLCg2NTUzNSZjKTw8MTZ9LGw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gNjMmKGF8fDApfSxtPWZ1bmN0aW9uKGEsYixjLGQsZixtKXt2YXIgbixvLHA9YS5maWxlLHE9YS5jb21wcmVzc2lvbixyPW0hPT1nLnV0ZjhlbmNvZGUscz1lLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsbShwLm5hbWUpKSx0PWUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixnLnV0ZjhlbmNvZGUocC5uYW1lKSksdT1wLmNvbW1lbnQsdj1lLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsbSh1KSksdz1lLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsZy51dGY4ZW5jb2RlKHUpKSx4PXQubGVuZ3RoIT09cC5uYW1lLmxlbmd0aCx5PXcubGVuZ3RoIT09dS5sZW5ndGgsej1cIlwiLEE9XCJcIixCPVwiXCIsQz1wLmRpcixEPXAuZGF0ZSxFPXtjcmMzMjowLGNvbXByZXNzZWRTaXplOjAsdW5jb21wcmVzc2VkU2l6ZTowfTtiJiYhY3x8KEUuY3JjMzI9YS5jcmMzMixFLmNvbXByZXNzZWRTaXplPWEuY29tcHJlc3NlZFNpemUsRS51bmNvbXByZXNzZWRTaXplPWEudW5jb21wcmVzc2VkU2l6ZSk7dmFyIEY9MDtiJiYoRnw9OCkscnx8IXgmJiF5fHwoRnw9MjA0OCk7dmFyIEc9MCxIPTA7QyYmKEd8PTE2KSxcIlVOSVhcIj09PWY/KEg9Nzk4LEd8PWsocC51bml4UGVybWlzc2lvbnMsQykpOihIPTIwLEd8PWwocC5kb3NQZXJtaXNzaW9ucyxDKSksbj1ELmdldFVUQ0hvdXJzKCksbjw8PTYsbnw9RC5nZXRVVENNaW51dGVzKCksbjw8PTUsbnw9RC5nZXRVVENTZWNvbmRzKCkvMixvPUQuZ2V0VVRDRnVsbFllYXIoKS0xOTgwLG88PD00LG98PUQuZ2V0VVRDTW9udGgoKSsxLG88PD01LG98PUQuZ2V0VVRDRGF0ZSgpLHgmJihBPWooMSwxKStqKGgocyksNCkrdCx6Kz1cInVwXCIraihBLmxlbmd0aCwyKStBKSx5JiYoQj1qKDEsMSkraihoKHYpLDQpK3cseis9XCJ1Y1wiK2ooQi5sZW5ndGgsMikrQik7dmFyIEk9XCJcIjtJKz1cIlxcblxcMFwiLEkrPWooRiwyKSxJKz1xLm1hZ2ljLEkrPWoobiwyKSxJKz1qKG8sMiksSSs9aihFLmNyYzMyLDQpLEkrPWooRS5jb21wcmVzc2VkU2l6ZSw0KSxJKz1qKEUudW5jb21wcmVzc2VkU2l6ZSw0KSxJKz1qKHMubGVuZ3RoLDIpLEkrPWooei5sZW5ndGgsMik7dmFyIEo9aS5MT0NBTF9GSUxFX0hFQURFUitJK3MreixLPWkuQ0VOVFJBTF9GSUxFX0hFQURFUitqKEgsMikrSStqKHYubGVuZ3RoLDIpK1wiXFwwXFwwXFwwXFwwXCIraihHLDQpK2ooZCw0KStzK3ordjtyZXR1cm57ZmlsZVJlY29yZDpKLGRpclJlY29yZDpLfX0sbj1mdW5jdGlvbihhLGIsYyxkLGYpe3ZhciBnPVwiXCIsaD1lLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsZihkKSk7cmV0dXJuIGc9aS5DRU5UUkFMX0RJUkVDVE9SWV9FTkQrXCJcXDBcXDBcXDBcXDBcIitqKGEsMikraihhLDIpK2ooYiw0KStqKGMsNCkraihoLmxlbmd0aCwyKStofSxvPWZ1bmN0aW9uKGEpe3ZhciBiPVwiXCI7cmV0dXJuIGI9aS5EQVRBX0RFU0NSSVBUT1IraihhLmNyYzMyLDQpK2ooYS5jb21wcmVzc2VkU2l6ZSw0KStqKGEudW5jb21wcmVzc2VkU2l6ZSw0KX07ZS5pbmhlcml0cyhkLGYpLGQucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSl7dmFyIGI9YS5tZXRhLnBlcmNlbnR8fDAsYz10aGlzLmVudHJpZXNDb3VudCxkPXRoaXMuX3NvdXJjZXMubGVuZ3RoO3RoaXMuYWNjdW11bGF0ZT90aGlzLmNvbnRlbnRCdWZmZXIucHVzaChhKToodGhpcy5ieXRlc1dyaXR0ZW4rPWEuZGF0YS5sZW5ndGgsZi5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMse2RhdGE6YS5kYXRhLG1ldGE6e2N1cnJlbnRGaWxlOnRoaXMuY3VycmVudEZpbGUscGVyY2VudDpjPyhiKzEwMCooYy1kLTEpKS9jOjEwMH19KSl9LGQucHJvdG90eXBlLm9wZW5lZFNvdXJjZT1mdW5jdGlvbihhKXtpZih0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQ9dGhpcy5ieXRlc1dyaXR0ZW4sdGhpcy5jdXJyZW50RmlsZT1hLmZpbGUubmFtZSx0aGlzLnN0cmVhbUZpbGVzJiYhYS5maWxlLmRpcil7dmFyIGI9bShhLHRoaXMuc3RyZWFtRmlsZXMsITEsdGhpcy5jdXJyZW50U291cmNlT2Zmc2V0LHRoaXMuemlwUGxhdGZvcm0sdGhpcy5lbmNvZGVGaWxlTmFtZSk7dGhpcy5wdXNoKHtkYXRhOmIuZmlsZVJlY29yZCxtZXRhOntwZXJjZW50OjB9fSl9ZWxzZSB0aGlzLmFjY3VtdWxhdGU9ITB9LGQucHJvdG90eXBlLmNsb3NlZFNvdXJjZT1mdW5jdGlvbihhKXt0aGlzLmFjY3VtdWxhdGU9ITE7dmFyIGI9bShhLHRoaXMuc3RyZWFtRmlsZXMsITAsdGhpcy5jdXJyZW50U291cmNlT2Zmc2V0LHRoaXMuemlwUGxhdGZvcm0sdGhpcy5lbmNvZGVGaWxlTmFtZSk7aWYodGhpcy5kaXJSZWNvcmRzLnB1c2goYi5kaXJSZWNvcmQpLHRoaXMuc3RyZWFtRmlsZXMmJiFhLmZpbGUuZGlyKXRoaXMucHVzaCh7ZGF0YTpvKGEpLG1ldGE6e3BlcmNlbnQ6MTAwfX0pO2Vsc2UgZm9yKHRoaXMucHVzaCh7ZGF0YTpiLmZpbGVSZWNvcmQsbWV0YTp7cGVyY2VudDowfX0pO3RoaXMuY29udGVudEJ1ZmZlci5sZW5ndGg7KXRoaXMucHVzaCh0aGlzLmNvbnRlbnRCdWZmZXIuc2hpZnQoKSk7dGhpcy5jdXJyZW50RmlsZT1udWxsfSxkLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmJ5dGVzV3JpdHRlbixiPTA7Yjx0aGlzLmRpclJlY29yZHMubGVuZ3RoO2IrKyl0aGlzLnB1c2goe2RhdGE6dGhpcy5kaXJSZWNvcmRzW2JdLG1ldGE6e3BlcmNlbnQ6MTAwfX0pO3ZhciBjPXRoaXMuYnl0ZXNXcml0dGVuLWEsZD1uKHRoaXMuZGlyUmVjb3Jkcy5sZW5ndGgsYyxhLHRoaXMuemlwQ29tbWVudCx0aGlzLmVuY29kZUZpbGVOYW1lKTt0aGlzLnB1c2goe2RhdGE6ZCxtZXRhOntwZXJjZW50OjEwMH19KX0sZC5wcm90b3R5cGUucHJlcGFyZU5leHRTb3VyY2U9ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPXRoaXMuX3NvdXJjZXMuc2hpZnQoKSx0aGlzLm9wZW5lZFNvdXJjZSh0aGlzLnByZXZpb3VzLnN0cmVhbUluZm8pLHRoaXMuaXNQYXVzZWQ/dGhpcy5wcmV2aW91cy5wYXVzZSgpOnRoaXMucHJldmlvdXMucmVzdW1lKCl9LGQucHJvdG90eXBlLnJlZ2lzdGVyUHJldmlvdXM9ZnVuY3Rpb24oYSl7dGhpcy5fc291cmNlcy5wdXNoKGEpO3ZhciBiPXRoaXM7cmV0dXJuIGEub24oXCJkYXRhXCIsZnVuY3Rpb24oYSl7Yi5wcm9jZXNzQ2h1bmsoYSl9KSxhLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtiLmNsb3NlZFNvdXJjZShiLnByZXZpb3VzLnN0cmVhbUluZm8pLGIuX3NvdXJjZXMubGVuZ3RoP2IucHJlcGFyZU5leHRTb3VyY2UoKTpiLmVuZCgpfSksYS5vbihcImVycm9yXCIsZnVuY3Rpb24oYSl7Yi5lcnJvcihhKX0pLHRoaXN9LGQucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhZi5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJighdGhpcy5wcmV2aW91cyYmdGhpcy5fc291cmNlcy5sZW5ndGg/KHRoaXMucHJlcGFyZU5leHRTb3VyY2UoKSwhMCk6dGhpcy5wcmV2aW91c3x8dGhpcy5fc291cmNlcy5sZW5ndGh8fHRoaXMuZ2VuZXJhdGVkRXJyb3I/dm9pZCAwOih0aGlzLmVuZCgpLCEwKSl9LGQucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX3NvdXJjZXM7aWYoIWYucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyxhKSlyZXR1cm4hMTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl0cnl7YltjXS5lcnJvcihhKX1jYXRjaChhKXt9cmV0dXJuITB9LGQucHJvdG90eXBlLmxvY2s9ZnVuY3Rpb24oKXtmLnByb3RvdHlwZS5sb2NrLmNhbGwodGhpcyk7Zm9yKHZhciBhPXRoaXMuX3NvdXJjZXMsYj0wO2I8YS5sZW5ndGg7YisrKWFbYl0ubG9jaygpfSxiLmV4cG9ydHM9ZH0se1wiLi4vY3JjMzJcIjo0LFwiLi4vc2lnbmF0dXJlXCI6MjAsXCIuLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiOjI1LFwiLi4vdXRmOFwiOjI4LFwiLi4vdXRpbHNcIjoyOX1dLDk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1hKFwiLi4vY29tcHJlc3Npb25zXCIpLGU9YShcIi4vWmlwRmlsZVdvcmtlclwiKSxmPWZ1bmN0aW9uKGEsYil7dmFyIGM9YXx8YixlPWRbY107aWYoIWUpdGhyb3cgbmV3IEVycm9yKGMrXCIgaXMgbm90IGEgdmFsaWQgY29tcHJlc3Npb24gbWV0aG9kICFcIik7cmV0dXJuIGV9O2MuZ2VuZXJhdGVXb3JrZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBlKGIuc3RyZWFtRmlsZXMsYyxiLnBsYXRmb3JtLGIuZW5jb2RlRmlsZU5hbWUpLGc9MDt0cnl7YS5mb3JFYWNoKGZ1bmN0aW9uKGEsYyl7ZysrO3ZhciBlPWYoYy5vcHRpb25zLmNvbXByZXNzaW9uLGIuY29tcHJlc3Npb24pLGg9Yy5vcHRpb25zLmNvbXByZXNzaW9uT3B0aW9uc3x8Yi5jb21wcmVzc2lvbk9wdGlvbnN8fHt9LGk9Yy5kaXIsaj1jLmRhdGU7Yy5fY29tcHJlc3NXb3JrZXIoZSxoKS53aXRoU3RyZWFtSW5mbyhcImZpbGVcIix7bmFtZTphLGRpcjppLGRhdGU6aixjb21tZW50OmMuY29tbWVudHx8XCJcIix1bml4UGVybWlzc2lvbnM6Yy51bml4UGVybWlzc2lvbnMsZG9zUGVybWlzc2lvbnM6Yy5kb3NQZXJtaXNzaW9uc30pLnBpcGUoZCl9KSxkLmVudHJpZXNDb3VudD1nfWNhdGNoKGgpe2QuZXJyb3IoaCl9cmV0dXJuIGR9fSx7XCIuLi9jb21wcmVzc2lvbnNcIjozLFwiLi9aaXBGaWxlV29ya2VyXCI6OH1dLDEwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXJldHVybiBuZXcgZDtpZihhcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlRoZSBjb25zdHJ1Y3RvciB3aXRoIHBhcmFtZXRlcnMgaGFzIGJlZW4gcmVtb3ZlZCBpbiBKU1ppcCAzLjAsIHBsZWFzZSBjaGVjayB0aGUgdXBncmFkZSBndWlkZS5cIik7dGhpcy5maWxlcz17fSx0aGlzLmNvbW1lbnQ9bnVsbCx0aGlzLnJvb3Q9XCJcIix0aGlzLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGQ7Zm9yKHZhciBiIGluIHRoaXMpXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpc1tiXSYmKGFbYl09dGhpc1tiXSk7cmV0dXJuIGF9fWQucHJvdG90eXBlPWEoXCIuL29iamVjdFwiKSxkLnByb3RvdHlwZS5sb2FkQXN5bmM9YShcIi4vbG9hZFwiKSxkLnN1cHBvcnQ9YShcIi4vc3VwcG9ydFwiKSxkLmRlZmF1bHRzPWEoXCIuL2RlZmF1bHRzXCIpLGQudmVyc2lvbj1cIjMuMS4xXCIsZC5sb2FkQXN5bmM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4obmV3IGQpLmxvYWRBc3luYyhhLGIpfSxkLmV4dGVybmFsPWEoXCIuL2V4dGVybmFsXCIpLGIuZXhwb3J0cz1kfSx7XCIuL2RlZmF1bHRzXCI6NSxcIi4vZXh0ZXJuYWxcIjo2LFwiLi9sb2FkXCI6MTEsXCIuL29iamVjdFwiOjEzLFwiLi9zdXBwb3J0XCI6Mjd9XSwxMTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIG5ldyBmLlByb21pc2UoZnVuY3Rpb24oYixjKXt2YXIgZD1hLmRlY29tcHJlc3NlZC5nZXRDb250ZW50V29ya2VyKCkucGlwZShuZXcgaSk7ZC5vbihcImVycm9yXCIsZnVuY3Rpb24oYSl7YyhhKX0pLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtkLnN0cmVhbUluZm8uY3JjMzIhPT1hLmRlY29tcHJlc3NlZC5jcmMzMj9jKG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBDUkMzMiBtaXNtYXRjaFwiKSk6YigpfSkucmVzdW1lKCl9KX12YXIgZT1hKFwiLi91dGlsc1wiKSxmPWEoXCIuL2V4dGVybmFsXCIpLGc9YShcIi4vdXRmOFwiKSxlPWEoXCIuL3V0aWxzXCIpLGg9YShcIi4vemlwRW50cmllc1wiKSxpPWEoXCIuL3N0cmVhbS9DcmMzMlByb2JlXCIpLGo9YShcIi4vbm9kZWpzVXRpbHNcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gYj1lLmV4dGVuZChifHx7fSx7YmFzZTY0OiExLGNoZWNrQ1JDMzI6ITEsb3B0aW1pemVkQmluYXJ5U3RyaW5nOiExLGNyZWF0ZUZvbGRlcnM6ITEsZGVjb2RlRmlsZU5hbWU6Zy51dGY4ZGVjb2RlfSksai5pc05vZGUmJmouaXNTdHJlYW0oYSk/Zi5Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJKU1ppcCBjYW4ndCBhY2NlcHQgYSBzdHJlYW0gd2hlbiBsb2FkaW5nIGEgemlwIGZpbGUuXCIpKTplLnByZXBhcmVDb250ZW50KFwidGhlIGxvYWRlZCB6aXAgZmlsZVwiLGEsITAsYi5vcHRpbWl6ZWRCaW5hcnlTdHJpbmcsYi5iYXNlNjQpLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGM9bmV3IGgoYik7cmV0dXJuIGMubG9hZChhKSxjfSkudGhlbihmdW5jdGlvbihhKXt2YXIgYz1bZi5Qcm9taXNlLnJlc29sdmUoYSldLGU9YS5maWxlcztpZihiLmNoZWNrQ1JDMzIpZm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspYy5wdXNoKGQoZVtnXSkpO3JldHVybiBmLlByb21pc2UuYWxsKGMpfSkudGhlbihmdW5jdGlvbihhKXtmb3IodmFyIGQ9YS5zaGlmdCgpLGU9ZC5maWxlcyxmPTA7ZjxlLmxlbmd0aDtmKyspe3ZhciBnPWVbZl07Yy5maWxlKGcuZmlsZU5hbWVTdHIsZy5kZWNvbXByZXNzZWQse2JpbmFyeTohMCxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITAsZGF0ZTpnLmRhdGUsZGlyOmcuZGlyLGNvbW1lbnQ6Zy5maWxlQ29tbWVudFN0ci5sZW5ndGg/Zy5maWxlQ29tbWVudFN0cjpudWxsLHVuaXhQZXJtaXNzaW9uczpnLnVuaXhQZXJtaXNzaW9ucyxkb3NQZXJtaXNzaW9uczpnLmRvc1Blcm1pc3Npb25zLGNyZWF0ZUZvbGRlcnM6Yi5jcmVhdGVGb2xkZXJzfSl9cmV0dXJuIGQuemlwQ29tbWVudC5sZW5ndGgmJihjLmNvbW1lbnQ9ZC56aXBDb21tZW50KSxjfSl9fSx7XCIuL2V4dGVybmFsXCI6NixcIi4vbm9kZWpzVXRpbHNcIjoxMixcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIjoyMixcIi4vdXRmOFwiOjI4LFwiLi91dGlsc1wiOjI5LFwiLi96aXBFbnRyaWVzXCI6MzB9XSwxMjpbZnVuY3Rpb24oYSxiLGMpeyhmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtiLmV4cG9ydHM9e2lzTm9kZTpcInVuZGVmaW5lZFwiIT10eXBlb2YgYSxuZXdCdWZmZXI6ZnVuY3Rpb24oYixjKXtyZXR1cm4gbmV3IGEoYixjKX0saXNCdWZmZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaXNCdWZmZXIoYil9LGlzU3RyZWFtOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLm9uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnBhdXNlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnJlc3VtZX19fSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBCdWZmZXI/QnVmZmVyOnZvaWQgMCl9LHt9XSwxMzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuXCJbb2JqZWN0IFJlZ0V4cF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX12YXIgZT1hKFwiLi91dGY4XCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxoPWEoXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIiksaT1hKFwiLi9kZWZhdWx0c1wiKSxqPWEoXCIuL2NvbXByZXNzZWRPYmplY3RcIiksaz1hKFwiLi96aXBPYmplY3RcIiksbD1hKFwiLi9nZW5lcmF0ZVwiKSxtPWEoXCIuL25vZGVqc1V0aWxzXCIpLG49YShcIi4vbm9kZWpzL05vZGVqc1N0cmVhbUlucHV0QWRhcHRlclwiKSxvPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWYuZ2V0VHlwZU9mKGIpO2M9Zi5leHRlbmQoY3x8e30saSksYy5kYXRlPWMuZGF0ZXx8bmV3IERhdGUsbnVsbCE9PWMuY29tcHJlc3Npb24mJihjLmNvbXByZXNzaW9uPWMuY29tcHJlc3Npb24udG9VcHBlckNhc2UoKSksXCJzdHJpbmdcIj09dHlwZW9mIGMudW5peFBlcm1pc3Npb25zJiYoYy51bml4UGVybWlzc2lvbnM9cGFyc2VJbnQoYy51bml4UGVybWlzc2lvbnMsOCkpLGMudW5peFBlcm1pc3Npb25zJiYxNjM4NCZjLnVuaXhQZXJtaXNzaW9ucyYmKGMuZGlyPSEwKSxjLmRvc1Blcm1pc3Npb25zJiYxNiZjLmRvc1Blcm1pc3Npb25zJiYoYy5kaXI9ITApLGMuZGlyJiYoYT1xKGEpKSxjLmNyZWF0ZUZvbGRlcnMmJihkPXAoYSkpJiZyLmNhbGwodGhpcyxkLCEwKTt2YXIgaD1cInN0cmluZ1wiPT09ZSYmYy5iaW5hcnk9PT0hMSYmYy5iYXNlNjQ9PT0hMTtjLmJpbmFyeT0haDt2YXIgbD1iIGluc3RhbmNlb2YgaiYmMD09PWIudW5jb21wcmVzc2VkU2l6ZTsobHx8Yy5kaXJ8fCFifHwwPT09Yi5sZW5ndGgpJiYoYy5iYXNlNjQ9ITEsYy5iaW5hcnk9ITAsYj1cIlwiLGMuY29tcHJlc3Npb249XCJTVE9SRVwiLGU9XCJzdHJpbmdcIik7dmFyIG89bnVsbDtvPWIgaW5zdGFuY2VvZiBqfHxiIGluc3RhbmNlb2YgZz9iOm0uaXNOb2RlJiZtLmlzU3RyZWFtKGIpP25ldyBuKGEsYik6Zi5wcmVwYXJlQ29udGVudChhLGIsYy5iaW5hcnksYy5vcHRpbWl6ZWRCaW5hcnlTdHJpbmcsYy5iYXNlNjQpO3ZhciBzPW5ldyBrKGEsbyxjKTt0aGlzLmZpbGVzW2FdPXN9LHA9ZnVuY3Rpb24oYSl7XCIvXCI9PT1hLnNsaWNlKC0xKSYmKGE9YS5zdWJzdHJpbmcoMCxhLmxlbmd0aC0xKSk7dmFyIGI9YS5sYXN0SW5kZXhPZihcIi9cIik7cmV0dXJuIGI+MD9hLnN1YnN0cmluZygwLGIpOlwiXCJ9LHE9ZnVuY3Rpb24oYSl7cmV0dXJuXCIvXCIhPT1hLnNsaWNlKC0xKSYmKGErPVwiL1wiKSxhfSxyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGI/YjppLmNyZWF0ZUZvbGRlcnMsYT1xKGEpLHRoaXMuZmlsZXNbYV18fG8uY2FsbCh0aGlzLGEsbnVsbCx7ZGlyOiEwLGNyZWF0ZUZvbGRlcnM6Yn0pLHRoaXMuZmlsZXNbYV19LHM9e2xvYWQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sZm9yRWFjaDpmdW5jdGlvbihhKXt2YXIgYixjLGQ7Zm9yKGIgaW4gdGhpcy5maWxlcyl0aGlzLmZpbGVzLmhhc093blByb3BlcnR5KGIpJiYoZD10aGlzLmZpbGVzW2JdLGM9Yi5zbGljZSh0aGlzLnJvb3QubGVuZ3RoLGIubGVuZ3RoKSxjJiZiLnNsaWNlKDAsdGhpcy5yb290Lmxlbmd0aCk9PT10aGlzLnJvb3QmJmEoYyxkKSl9LGZpbHRlcjpmdW5jdGlvbihhKXt2YXIgYj1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7YShjLGQpJiZiLnB1c2goZCl9KSxifSxmaWxlOmZ1bmN0aW9uKGEsYixjKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoZChhKSl7dmFyIGU9YTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oYSxiKXtyZXR1cm4hYi5kaXImJmUudGVzdChhKX0pfXZhciBmPXRoaXMuZmlsZXNbdGhpcy5yb290K2FdO3JldHVybiBmJiYhZi5kaXI/ZjpudWxsfXJldHVybiBhPXRoaXMucm9vdCthLG8uY2FsbCh0aGlzLGEsYixjKSx0aGlzfSxmb2xkZXI6ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHRoaXM7aWYoZChhKSlyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oYixjKXtyZXR1cm4gYy5kaXImJmEudGVzdChiKX0pO3ZhciBiPXRoaXMucm9vdCthLGM9ci5jYWxsKHRoaXMsYiksZT10aGlzLmNsb25lKCk7cmV0dXJuIGUucm9vdD1jLm5hbWUsZX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2E9dGhpcy5yb290K2E7dmFyIGI9dGhpcy5maWxlc1thXTtpZihifHwoXCIvXCIhPT1hLnNsaWNlKC0xKSYmKGErPVwiL1wiKSxiPXRoaXMuZmlsZXNbYV0pLGImJiFiLmRpcilkZWxldGUgdGhpcy5maWxlc1thXTtlbHNlIGZvcih2YXIgYz10aGlzLmZpbHRlcihmdW5jdGlvbihiLGMpe3JldHVybiBjLm5hbWUuc2xpY2UoMCxhLmxlbmd0aCk9PT1hfSksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWRlbGV0ZSB0aGlzLmZpbGVzW2NbZF0ubmFtZV07cmV0dXJuIHRoaXN9LGdlbmVyYXRlOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGhhcyBiZWVuIHJlbW92ZWQgaW4gSlNaaXAgMy4wLCBwbGVhc2UgY2hlY2sgdGhlIHVwZ3JhZGUgZ3VpZGUuXCIpfSxnZW5lcmF0ZUludGVybmFsU3RyZWFtOmZ1bmN0aW9uKGEpe3ZhciBiLGM9e307dHJ5e2lmKGM9Zi5leHRlbmQoYXx8e30se3N0cmVhbUZpbGVzOiExLGNvbXByZXNzaW9uOlwiU1RPUkVcIixjb21wcmVzc2lvbk9wdGlvbnM6bnVsbCx0eXBlOlwiXCIscGxhdGZvcm06XCJET1NcIixjb21tZW50Om51bGwsbWltZVR5cGU6XCJhcHBsaWNhdGlvbi96aXBcIixlbmNvZGVGaWxlTmFtZTplLnV0ZjhlbmNvZGV9KSxjLnR5cGU9Yy50eXBlLnRvTG93ZXJDYXNlKCksYy5jb21wcmVzc2lvbj1jLmNvbXByZXNzaW9uLnRvVXBwZXJDYXNlKCksXCJiaW5hcnlzdHJpbmdcIj09PWMudHlwZSYmKGMudHlwZT1cInN0cmluZ1wiKSwhYy50eXBlKXRocm93IG5ldyBFcnJvcihcIk5vIG91dHB1dCB0eXBlIHNwZWNpZmllZC5cIik7Zi5jaGVja1N1cHBvcnQoYy50eXBlKSxcImRhcndpblwiIT09YS5wbGF0Zm9ybSYmXCJmcmVlYnNkXCIhPT1hLnBsYXRmb3JtJiZcImxpbnV4XCIhPT1hLnBsYXRmb3JtJiZcInN1bm9zXCIhPT1hLnBsYXRmb3JtfHwoYS5wbGF0Zm9ybT1cIlVOSVhcIiksXCJ3aW4zMlwiPT09YS5wbGF0Zm9ybSYmKGEucGxhdGZvcm09XCJET1NcIik7dmFyIGQ9Yy5jb21tZW50fHx0aGlzLmNvbW1lbnR8fFwiXCI7Yj1sLmdlbmVyYXRlV29ya2VyKHRoaXMsYyxkKX1jYXRjaChpKXtiPW5ldyBnKFwiZXJyb3JcIiksYi5lcnJvcihpKX1yZXR1cm4gbmV3IGgoYixjLnR5cGV8fFwic3RyaW5nXCIsYy5taW1lVHlwZSl9LGdlbmVyYXRlQXN5bmM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZUludGVybmFsU3RyZWFtKGEpLmFjY3VtdWxhdGUoYil9LGdlbmVyYXRlTm9kZVN0cmVhbTpmdW5jdGlvbihhLGIpe3JldHVybiBhPWF8fHt9LGEudHlwZXx8KGEudHlwZT1cIm5vZGVidWZmZXJcIiksdGhpcy5nZW5lcmF0ZUludGVybmFsU3RyZWFtKGEpLnRvTm9kZWpzU3RyZWFtKGIpfX07Yi5leHBvcnRzPXN9LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjIsXCIuL2RlZmF1bHRzXCI6NSxcIi4vZ2VuZXJhdGVcIjo5LFwiLi9ub2RlanMvTm9kZWpzU3RyZWFtSW5wdXRBZGFwdGVyXCI6MzMsXCIuL25vZGVqc1V0aWxzXCI6MTIsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjUsXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIjoyNixcIi4vdXRmOFwiOjI4LFwiLi91dGlsc1wiOjI5LFwiLi96aXBPYmplY3RcIjozMn1dLDE0OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtlLmNhbGwodGhpcyxhKTtmb3IodmFyIGI9MDtiPHRoaXMuZGF0YS5sZW5ndGg7YisrKWFbYl09MjU1JmFbYl19dmFyIGU9YShcIi4vRGF0YVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGFbdGhpcy56ZXJvK2FdfSxkLnByb3RvdHlwZS5sYXN0SW5kZXhPZlNpZ25hdHVyZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS5jaGFyQ29kZUF0KDApLGM9YS5jaGFyQ29kZUF0KDEpLGQ9YS5jaGFyQ29kZUF0KDIpLGU9YS5jaGFyQ29kZUF0KDMpLGY9dGhpcy5sZW5ndGgtNDtmPj0wOy0tZilpZih0aGlzLmRhdGFbZl09PT1iJiZ0aGlzLmRhdGFbZisxXT09PWMmJnRoaXMuZGF0YVtmKzJdPT09ZCYmdGhpcy5kYXRhW2YrM109PT1lKXJldHVybiBmLXRoaXMuemVybztyZXR1cm4tMX0sZC5wcm90b3R5cGUucmVhZEFuZENoZWNrU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKSxjPWEuY2hhckNvZGVBdCgxKSxkPWEuY2hhckNvZGVBdCgyKSxlPWEuY2hhckNvZGVBdCgzKSxmPXRoaXMucmVhZERhdGEoNCk7cmV0dXJuIGI9PT1mWzBdJiZjPT09ZlsxXSYmZD09PWZbMl0mJmU9PT1mWzNdfSxkLnByb3RvdHlwZS5yZWFkRGF0YT1mdW5jdGlvbihhKXtpZih0aGlzLmNoZWNrT2Zmc2V0KGEpLDA9PT1hKXJldHVybltdO3ZhciBiPXRoaXMuZGF0YS5zbGljZSh0aGlzLnplcm8rdGhpcy5pbmRleCx0aGlzLnplcm8rdGhpcy5pbmRleCthKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxifSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjoyOSxcIi4vRGF0YVJlYWRlclwiOjE1fV0sMTU6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3RoaXMuZGF0YT1hLHRoaXMubGVuZ3RoPWEubGVuZ3RoLHRoaXMuaW5kZXg9MCx0aGlzLnplcm89MH12YXIgZT1hKFwiLi4vdXRpbHNcIik7ZC5wcm90b3R5cGU9e2NoZWNrT2Zmc2V0OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tJbmRleCh0aGlzLmluZGV4K2EpfSxjaGVja0luZGV4OmZ1bmN0aW9uKGEpe2lmKHRoaXMubGVuZ3RoPHRoaXMuemVybythfHxhPDApdGhyb3cgbmV3IEVycm9yKFwiRW5kIG9mIGRhdGEgcmVhY2hlZCAoZGF0YSBsZW5ndGggPSBcIit0aGlzLmxlbmd0aCtcIiwgYXNrZWQgaW5kZXggPSBcIithK1wiKS4gQ29ycnVwdGVkIHppcCA/XCIpfSxzZXRJbmRleDpmdW5jdGlvbihhKXt0aGlzLmNoZWNrSW5kZXgoYSksdGhpcy5pbmRleD1hfSxza2lwOmZ1bmN0aW9uKGEpe3RoaXMuc2V0SW5kZXgodGhpcy5pbmRleCthKX0sYnl0ZUF0OmZ1bmN0aW9uKGEpe30scmVhZEludDpmdW5jdGlvbihhKXt2YXIgYixjPTA7Zm9yKHRoaXMuY2hlY2tPZmZzZXQoYSksYj10aGlzLmluZGV4K2EtMTtiPj10aGlzLmluZGV4O2ItLSljPShjPDw4KSt0aGlzLmJ5dGVBdChiKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxjfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBlLnRyYW5zZm9ybVRvKFwic3RyaW5nXCIsdGhpcy5yZWFkRGF0YShhKSl9LHJlYWREYXRhOmZ1bmN0aW9uKGEpe30sbGFzdEluZGV4T2ZTaWduYXR1cmU6ZnVuY3Rpb24oYSl7fSxyZWFkQW5kQ2hlY2tTaWduYXR1cmU6ZnVuY3Rpb24oYSl7fSxyZWFkRGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVhZEludCg0KTtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoKGE+PjI1JjEyNykrMTk4MCwoYT4+MjEmMTUpLTEsYT4+MTYmMzEsYT4+MTEmMzEsYT4+NSY2MywoMzEmYSk8PDEpKX19LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5fV0sMTY6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLGEpfXZhciBlPWEoXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIiksZj1hKFwiLi4vdXRpbHNcIik7Zi5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tPZmZzZXQoYSk7dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9VaW50OEFycmF5UmVhZGVyXCI6MTh9XSwxNzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsYSl9dmFyIGU9YShcIi4vRGF0YVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnplcm8rYSl9LGQucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEubGFzdEluZGV4T2YoYSktdGhpcy56ZXJvfSxkLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWFkRGF0YSg0KTtyZXR1cm4gYT09PWJ9LGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tPZmZzZXQoYSk7dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9EYXRhUmVhZGVyXCI6MTV9XSwxODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsYSl9dmFyIGU9YShcIi4vQXJyYXlSZWFkZXJcIiksZj1hKFwiLi4vdXRpbHNcIik7Zi5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY2hlY2tPZmZzZXQoYSksMD09PWEpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO3ZhciBiPXRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLnplcm8rdGhpcy5pbmRleCx0aGlzLnplcm8rdGhpcy5pbmRleCthKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxifSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjoyOSxcIi4vQXJyYXlSZWFkZXJcIjoxNH1dLDE5OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4uL3V0aWxzXCIpLGU9YShcIi4uL3N1cHBvcnRcIiksZj1hKFwiLi9BcnJheVJlYWRlclwiKSxnPWEoXCIuL1N0cmluZ1JlYWRlclwiKSxoPWEoXCIuL05vZGVCdWZmZXJSZWFkZXJcIiksaT1hKFwiLi9VaW50OEFycmF5UmVhZGVyXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXt2YXIgYj1kLmdldFR5cGVPZihhKTtyZXR1cm4gZC5jaGVja1N1cHBvcnQoYiksXCJzdHJpbmdcIiE9PWJ8fGUudWludDhhcnJheT9cIm5vZGVidWZmZXJcIj09PWI/bmV3IGgoYSk6ZS51aW50OGFycmF5P25ldyBpKGQudHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsYSkpOm5ldyBmKGQudHJhbnNmb3JtVG8oXCJhcnJheVwiLGEpKTpuZXcgZyhhKX19LHtcIi4uL3N1cHBvcnRcIjoyNyxcIi4uL3V0aWxzXCI6MjksXCIuL0FycmF5UmVhZGVyXCI6MTQsXCIuL05vZGVCdWZmZXJSZWFkZXJcIjoxNixcIi4vU3RyaW5nUmVhZGVyXCI6MTcsXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIjoxOH1dLDIwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yy5MT0NBTF9GSUxFX0hFQURFUj1cIlBLXHUwMDAzXHUwMDA0XCIsYy5DRU5UUkFMX0ZJTEVfSEVBREVSPVwiUEtcdTAwMDFcdTAwMDJcIixjLkNFTlRSQUxfRElSRUNUT1JZX0VORD1cIlBLXHUwMDA1XHUwMDA2XCIsYy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SPVwiUEtcdTAwMDZcdTAwMDdcIixjLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORD1cIlBLXHUwMDA2XHUwMDA2XCIsYy5EQVRBX0RFU0NSSVBUT1I9XCJQS1x1MDAwN1xcYlwifSx7fV0sMjE6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLFwiQ29udmVydFdvcmtlciB0byBcIithKSx0aGlzLmRlc3RUeXBlPWF9dmFyIGU9YShcIi4vR2VuZXJpY1dvcmtlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe3RoaXMucHVzaCh7ZGF0YTpmLnRyYW5zZm9ybVRvKHRoaXMuZGVzdFR5cGUsYS5kYXRhKSxtZXRhOmEubWV0YX0pfSxiLmV4cG9ydHM9ZH0se1wiLi4vdXRpbHNcIjoyOSxcIi4vR2VuZXJpY1dvcmtlclwiOjI1fV0sMjI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7ZS5jYWxsKHRoaXMsXCJDcmMzMlByb2JlXCIpfXZhciBlPWEoXCIuL0dlbmVyaWNXb3JrZXJcIiksZj1hKFwiLi4vY3JjMzJcIiksZz1hKFwiLi4vdXRpbHNcIik7Zy5pbmhlcml0cyhkLGUpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt0aGlzLnN0cmVhbUluZm8uY3JjMzI9ZihhLmRhdGEsdGhpcy5zdHJlYW1JbmZvLmNyYzMyfHwwKSx0aGlzLnB1c2goYSl9LGIuZXhwb3J0cz1kfSx7XCIuLi9jcmMzMlwiOjQsXCIuLi91dGlsc1wiOjI5LFwiLi9HZW5lcmljV29ya2VyXCI6MjV9XSwyMzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Zi5jYWxsKHRoaXMsXCJEYXRhTGVuZ3RoUHJvYmUgZm9yIFwiK2EpLHRoaXMucHJvcE5hbWU9YSx0aGlzLndpdGhTdHJlYW1JbmZvKGEsMCl9dmFyIGU9YShcIi4uL3V0aWxzXCIpLGY9YShcIi4vR2VuZXJpY1dvcmtlclwiKTtlLmluaGVyaXRzKGQsZiksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPXRoaXMuc3RyZWFtSW5mb1t0aGlzLnByb3BOYW1lXXx8MDt0aGlzLnN0cmVhbUluZm9bdGhpcy5wcm9wTmFtZV09YithLmRhdGEubGVuZ3RofWYucHJvdG90eXBlLnByb2Nlc3NDaHVuay5jYWxsKHRoaXMsYSl9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9HZW5lcmljV29ya2VyXCI6MjV9XSwyNDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Zi5jYWxsKHRoaXMsXCJEYXRhV29ya2VyXCIpO3ZhciBiPXRoaXM7dGhpcy5kYXRhSXNSZWFkeT0hMSx0aGlzLmluZGV4PTAsdGhpcy5tYXg9MCx0aGlzLmRhdGE9bnVsbCx0aGlzLnR5cGU9XCJcIix0aGlzLl90aWNrU2NoZWR1bGVkPSExLGEudGhlbihmdW5jdGlvbihhKXtiLmRhdGFJc1JlYWR5PSEwLGIuZGF0YT1hLGIubWF4PWEmJmEubGVuZ3RofHwwLGIudHlwZT1lLmdldFR5cGVPZihhKSxiLmlzUGF1c2VkfHxiLl90aWNrQW5kUmVwZWF0KCl9LGZ1bmN0aW9uKGEpe2IuZXJyb3IoYSl9KX12YXIgZT1hKFwiLi4vdXRpbHNcIiksZj1hKFwiLi9HZW5lcmljV29ya2VyXCIpLGc9MTYzODQ7ZS5pbmhlcml0cyhkLGYpLGQucHJvdG90eXBlLmNsZWFuVXA9ZnVuY3Rpb24oKXtmLnByb3RvdHlwZS5jbGVhblVwLmNhbGwodGhpcyksdGhpcy5kYXRhPW51bGx9LGQucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiEhZi5wcm90b3R5cGUucmVzdW1lLmNhbGwodGhpcykmJighdGhpcy5fdGlja1NjaGVkdWxlZCYmdGhpcy5kYXRhSXNSZWFkeSYmKHRoaXMuX3RpY2tTY2hlZHVsZWQ9ITAsZS5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LFtdLHRoaXMpKSwhMCl9LGQucHJvdG90eXBlLl90aWNrQW5kUmVwZWF0PWZ1bmN0aW9uKCl7dGhpcy5fdGlja1NjaGVkdWxlZD0hMSx0aGlzLmlzUGF1c2VkfHx0aGlzLmlzRmluaXNoZWR8fCh0aGlzLl90aWNrKCksdGhpcy5pc0ZpbmlzaGVkfHwoZS5kZWxheSh0aGlzLl90aWNrQW5kUmVwZWF0LFtdLHRoaXMpLHRoaXMuX3RpY2tTY2hlZHVsZWQ9ITApKX0sZC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24oKXtpZih0aGlzLmlzUGF1c2VkfHx0aGlzLmlzRmluaXNoZWQpcmV0dXJuITE7dmFyIGE9ZyxiPW51bGwsYz1NYXRoLm1pbih0aGlzLm1heCx0aGlzLmluZGV4K2EpO2lmKHRoaXMuaW5kZXg+PXRoaXMubWF4KXJldHVybiB0aGlzLmVuZCgpO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2VcInN0cmluZ1wiOmI9dGhpcy5kYXRhLnN1YnN0cmluZyh0aGlzLmluZGV4LGMpO2JyZWFrO2Nhc2VcInVpbnQ4YXJyYXlcIjpiPXRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLmluZGV4LGMpO2JyZWFrO2Nhc2VcImFycmF5XCI6Y2FzZVwibm9kZWJ1ZmZlclwiOmI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsYyl9cmV0dXJuIHRoaXMuaW5kZXg9Yyx0aGlzLnB1c2goe2RhdGE6YixtZXRhOntwZXJjZW50OnRoaXMubWF4P3RoaXMuaW5kZXgvdGhpcy5tYXgqMTAwOjB9fSl9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9HZW5lcmljV29ya2VyXCI6MjV9XSwyNTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7dGhpcy5uYW1lPWF8fFwiZGVmYXVsdFwiLHRoaXMuc3RyZWFtSW5mbz17fSx0aGlzLmdlbmVyYXRlZEVycm9yPW51bGwsdGhpcy5leHRyYVN0cmVhbUluZm89e30sdGhpcy5pc1BhdXNlZD0hMCx0aGlzLmlzRmluaXNoZWQ9ITEsdGhpcy5pc0xvY2tlZD0hMSx0aGlzLl9saXN0ZW5lcnM9e2RhdGE6W10sZW5kOltdLGVycm9yOltdfSx0aGlzLnByZXZpb3VzPW51bGx9ZC5wcm90b3R5cGU9e3B1c2g6ZnVuY3Rpb24oYSl7dGhpcy5lbWl0KFwiZGF0YVwiLGEpfSxlbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRmluaXNoZWQpcmV0dXJuITE7dGhpcy5mbHVzaCgpO3RyeXt0aGlzLmVtaXQoXCJlbmRcIiksdGhpcy5jbGVhblVwKCksdGhpcy5pc0ZpbmlzaGVkPSEwfWNhdGNoKGEpe3RoaXMuZW1pdChcImVycm9yXCIsYSl9cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGEpe3JldHVybiF0aGlzLmlzRmluaXNoZWQmJih0aGlzLmlzUGF1c2VkP3RoaXMuZ2VuZXJhdGVkRXJyb3I9YToodGhpcy5pc0ZpbmlzaGVkPSEwLHRoaXMuZW1pdChcImVycm9yXCIsYSksdGhpcy5wcmV2aW91cyYmdGhpcy5wcmV2aW91cy5lcnJvcihhKSx0aGlzLmNsZWFuVXAoKSksITApfSxvbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9saXN0ZW5lcnNbYV0ucHVzaChiKSx0aGlzfSxjbGVhblVwOmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW1JbmZvPXRoaXMuZ2VuZXJhdGVkRXJyb3I9dGhpcy5leHRyYVN0cmVhbUluZm89bnVsbCx0aGlzLl9saXN0ZW5lcnM9W119LGVtaXQ6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9saXN0ZW5lcnNbYV0pZm9yKHZhciBjPTA7Yzx0aGlzLl9saXN0ZW5lcnNbYV0ubGVuZ3RoO2MrKyl0aGlzLl9saXN0ZW5lcnNbYV1bY10uY2FsbCh0aGlzLGIpfSxwaXBlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlZ2lzdGVyUHJldmlvdXModGhpcyl9LHJlZ2lzdGVyUHJldmlvdXM6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0xvY2tlZCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3RyZWFtICdcIit0aGlzK1wiJyBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIpO3RoaXMuc3RyZWFtSW5mbz1hLnN0cmVhbUluZm8sdGhpcy5tZXJnZVN0cmVhbUluZm8oKSx0aGlzLnByZXZpb3VzPWE7dmFyIGI9dGhpcztyZXR1cm4gYS5vbihcImRhdGFcIixmdW5jdGlvbihhKXtiLnByb2Nlc3NDaHVuayhhKX0pLGEub24oXCJlbmRcIixmdW5jdGlvbigpe2IuZW5kKCl9KSxhLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXtiLmVycm9yKGEpfSksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc1BhdXNlZCYmIXRoaXMuaXNGaW5pc2hlZCYmKHRoaXMuaXNQYXVzZWQ9ITAsdGhpcy5wcmV2aW91cyYmdGhpcy5wcmV2aW91cy5wYXVzZSgpLCEwKX0scmVzdW1lOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt0aGlzLmlzUGF1c2VkPSExO3ZhciBhPSExO3JldHVybiB0aGlzLmdlbmVyYXRlZEVycm9yJiYodGhpcy5lcnJvcih0aGlzLmdlbmVyYXRlZEVycm9yKSxhPSEwKSx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLnJlc3VtZSgpLCFhfSxmbHVzaDpmdW5jdGlvbigpe30scHJvY2Vzc0NodW5rOmZ1bmN0aW9uKGEpe3RoaXMucHVzaChhKX0sd2l0aFN0cmVhbUluZm86ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5leHRyYVN0cmVhbUluZm9bYV09Yix0aGlzLm1lcmdlU3RyZWFtSW5mbygpLHRoaXN9LG1lcmdlU3RyZWFtSW5mbzpmdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmV4dHJhU3RyZWFtSW5mbyl0aGlzLmV4dHJhU3RyZWFtSW5mby5oYXNPd25Qcm9wZXJ0eShhKSYmKHRoaXMuc3RyZWFtSW5mb1thXT10aGlzLmV4dHJhU3RyZWFtSW5mb1thXSl9LGxvY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTG9ja2VkKXRocm93IG5ldyBFcnJvcihcIlRoZSBzdHJlYW0gJ1wiK3RoaXMrXCInIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIik7dGhpcy5pc0xvY2tlZD0hMCx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLmxvY2soKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1cIldvcmtlciBcIit0aGlzLm5hbWU7cmV0dXJuIHRoaXMucHJldmlvdXM/dGhpcy5wcmV2aW91cytcIiAtPiBcIithOmF9fSxiLmV4cG9ydHM9ZH0se31dLDI2OltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiLGMpe3N3aXRjaChhKXtjYXNlXCJibG9iXCI6cmV0dXJuIGgubmV3QmxvYihoLnRyYW5zZm9ybVRvKFwiYXJyYXlidWZmZXJcIixiKSxjKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gay5lbmNvZGUoYik7ZGVmYXVsdDpyZXR1cm4gaC50cmFuc2Zvcm1UbyhhLGIpfX1mdW5jdGlvbiBlKGEsYil7dmFyIGQsZT0wLGY9bnVsbCxnPTA7Zm9yKGQ9MDtkPGIubGVuZ3RoO2QrKylnKz1iW2RdLmxlbmd0aDtzd2l0Y2goYSl7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIGIuam9pbihcIlwiKTtjYXNlXCJhcnJheVwiOnJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGIpO2Nhc2VcInVpbnQ4YXJyYXlcIjpmb3IoZj1uZXcgVWludDhBcnJheShnKSxkPTA7ZDxiLmxlbmd0aDtkKyspZi5zZXQoYltkXSxlKSxlKz1iW2RdLmxlbmd0aDtyZXR1cm4gZjtjYXNlXCJub2RlYnVmZmVyXCI6cmV0dXJuIGMuY29uY2F0KGIpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiY29uY2F0IDogdW5zdXBwb3J0ZWQgdHlwZSAnXCIrYStcIidcIil9fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gbmV3IG0uUHJvbWlzZShmdW5jdGlvbihjLGYpe3ZhciBnPVtdLGg9YS5faW50ZXJuYWxUeXBlLGk9YS5fb3V0cHV0VHlwZSxqPWEuX21pbWVUeXBlO2Eub24oXCJkYXRhXCIsZnVuY3Rpb24oYSxjKXtnLnB1c2goYSksYiYmYihjKX0pLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXtnPVtdLGYoYSl9KS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7dHJ5e3ZhciBhPWQoaSxlKGgsZyksaik7YyhhKX1jYXRjaChiKXtmKGIpfWc9W119KS5yZXN1bWUoKX0pfWZ1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPWI7c3dpdGNoKGIpe2Nhc2VcImJsb2JcIjpjYXNlXCJhcnJheWJ1ZmZlclwiOmQ9XCJ1aW50OGFycmF5XCI7YnJlYWs7Y2FzZVwiYmFzZTY0XCI6ZD1cInN0cmluZ1wifXRyeXt0aGlzLl9pbnRlcm5hbFR5cGU9ZCx0aGlzLl9vdXRwdXRUeXBlPWIsdGhpcy5fbWltZVR5cGU9YyxoLmNoZWNrU3VwcG9ydChkKSx0aGlzLl93b3JrZXI9YS5waXBlKG5ldyBpKGQpKSxhLmxvY2soKX1jYXRjaChlKXt0aGlzLl93b3JrZXI9bmV3IGooXCJlcnJvclwiKSx0aGlzLl93b3JrZXIuZXJyb3IoZSl9fXZhciBoPWEoXCIuLi91dGlsc1wiKSxpPWEoXCIuL0NvbnZlcnRXb3JrZXJcIiksaj1hKFwiLi9HZW5lcmljV29ya2VyXCIpLGs9YShcIi4uL2Jhc2U2NFwiKSxsPWEoXCIuLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlclwiKSxtPWEoXCIuLi9leHRlcm5hbFwiKTtnLnByb3RvdHlwZT17YWNjdW11bGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLGEpfSxvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuXCJkYXRhXCI9PT1hP3RoaXMuX3dvcmtlci5vbihhLGZ1bmN0aW9uKGEpe2IuY2FsbChjLGEuZGF0YSxhLm1ldGEpfSk6dGhpcy5fd29ya2VyLm9uKGEsZnVuY3Rpb24oKXtoLmRlbGF5KGIsYXJndW1lbnRzLGMpfSksdGhpc30scmVzdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIGguZGVsYXkodGhpcy5fd29ya2VyLnJlc3VtZSxbXSx0aGlzLl93b3JrZXIpLHRoaXN9LHBhdXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dvcmtlci5wYXVzZSgpLHRoaXN9LHRvTm9kZWpzU3RyZWFtOmZ1bmN0aW9uKGEpe2lmKGguY2hlY2tTdXBwb3J0KFwibm9kZXN0cmVhbVwiKSxcIm5vZGVidWZmZXJcIiE9PXRoaXMuX291dHB1dFR5cGUpdGhyb3cgbmV3IEVycm9yKHRoaXMuX291dHB1dFR5cGUrXCIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIG1ldGhvZFwiKTtyZXR1cm4gbmV3IGwodGhpcyx7b2JqZWN0TW9kZTpcIm5vZGVidWZmZXJcIiE9PXRoaXMuX291dHB1dFR5cGV9LGEpfX0sYi5leHBvcnRzPWd9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6dm9pZCAwKX0se1wiLi4vYmFzZTY0XCI6MSxcIi4uL2V4dGVybmFsXCI6NixcIi4uL25vZGVqcy9Ob2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyXCI6MzMsXCIuLi91dGlsc1wiOjI5LFwiLi9Db252ZXJ0V29ya2VyXCI6MjEsXCIuL0dlbmVyaWNXb3JrZXJcIjoyNX1dLDI3OltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGIpe1widXNlIHN0cmljdFwiO2lmKGMuYmFzZTY0PSEwLGMuYXJyYXk9ITAsYy5zdHJpbmc9ITAsYy5hcnJheWJ1ZmZlcj1cInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5LGMubm9kZWJ1ZmZlcj1cInVuZGVmaW5lZFwiIT10eXBlb2YgYixjLnVpbnQ4YXJyYXk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXksXCJ1bmRlZmluZWRcIj09dHlwZW9mIEFycmF5QnVmZmVyKWMuYmxvYj0hMTtlbHNle3ZhciBkPW5ldyBBcnJheUJ1ZmZlcigwKTt0cnl7Yy5ibG9iPTA9PT1uZXcgQmxvYihbZF0se3R5cGU6XCJhcHBsaWNhdGlvbi96aXBcIn0pLnNpemV9Y2F0Y2goZSl7dHJ5e3ZhciBmPXdpbmRvdy5CbG9iQnVpbGRlcnx8d2luZG93LldlYktpdEJsb2JCdWlsZGVyfHx3aW5kb3cuTW96QmxvYkJ1aWxkZXJ8fHdpbmRvdy5NU0Jsb2JCdWlsZGVyLGc9bmV3IGY7Zy5hcHBlbmQoZCksYy5ibG9iPTA9PT1nLmdldEJsb2IoXCJhcHBsaWNhdGlvbi96aXBcIikuc2l6ZX1jYXRjaChlKXtjLmJsb2I9ITF9fX1jLm5vZGVzdHJlYW09ISFhKFwiLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlclwiKS5wcm90b3R5cGV9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6dm9pZCAwKX0se1wiLi9ub2RlanMvTm9kZWpzU3RyZWFtT3V0cHV0QWRhcHRlclwiOjMzfV0sMjg6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7aS5jYWxsKHRoaXMsXCJ1dGYtOCBkZWNvZGVcIiksdGhpcy5sZWZ0T3Zlcj1udWxsfWZ1bmN0aW9uIGUoKXtpLmNhbGwodGhpcyxcInV0Zi04IGVuY29kZVwiKX1mb3IodmFyIGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9zdXBwb3J0XCIpLGg9YShcIi4vbm9kZWpzVXRpbHNcIiksaT1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxqPW5ldyBBcnJheSgyNTYpLGs9MDtrPDI1NjtrKyspaltrXT1rPj0yNTI/NjprPj0yNDg/NTprPj0yNDA/NDprPj0yMjQ/MzprPj0xOTI/MjoxO2pbMjU0XT1qWzI1NF09MTt2YXIgbD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGg9YS5sZW5ndGgsaT0wO2ZvcihlPTA7ZTxoO2UrKyljPWEuY2hhckNvZGVBdChlKSw1NTI5Nj09PSg2NDUxMiZjKSYmZSsxPGgmJihkPWEuY2hhckNvZGVBdChlKzEpLDU2MzIwPT09KDY0NTEyJmQpJiYoYz02NTUzNisoYy01NTI5Njw8MTApKyhkLTU2MzIwKSxlKyspKSxpKz1jPDEyOD8xOmM8MjA0OD8yOmM8NjU1MzY/Mzo0O2ZvcihiPWcudWludDhhcnJheT9uZXcgVWludDhBcnJheShpKTpuZXcgQXJyYXkoaSksZj0wLGU9MDtmPGk7ZSsrKWM9YS5jaGFyQ29kZUF0KGUpLDU1Mjk2PT09KDY0NTEyJmMpJiZlKzE8aCYmKGQ9YS5jaGFyQ29kZUF0KGUrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGUrKykpLGM8MTI4P2JbZisrXT1jOmM8MjA0OD8oYltmKytdPTE5MnxjPj4+NixiW2YrK109MTI4fDYzJmMpOmM8NjU1MzY/KGJbZisrXT0yMjR8Yz4+PjEyLGJbZisrXT0xMjh8Yz4+PjYmNjMsYltmKytdPTEyOHw2MyZjKTooYltmKytdPTI0MHxjPj4+MTgsYltmKytdPTEyOHxjPj4+MTImNjMsYltmKytdPTEyOHxjPj4+NiY2MyxiW2YrK109MTI4fDYzJmMpO3JldHVybiBifSxtPWZ1bmN0aW9uKGEsYil7dmFyIGM7Zm9yKGI9Ynx8YS5sZW5ndGgsYj5hLmxlbmd0aCYmKGI9YS5sZW5ndGgpLGM9Yi0xO2M+PTAmJjEyOD09PSgxOTImYVtjXSk7KWMtLTtyZXR1cm4gYzwwP2I6MD09PWM/YjpjK2pbYVtjXV0+Yj9jOmJ9LG49ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZz1hLmxlbmd0aCxoPW5ldyBBcnJheSgyKmcpO2ZvcihjPTAsYj0wO2I8ZzspaWYoZD1hW2IrK10sZDwxMjgpaFtjKytdPWQ7ZWxzZSBpZihlPWpbZF0sZT40KWhbYysrXT02NTUzMyxiKz1lLTE7ZWxzZXtmb3IoZCY9Mj09PWU/MzE6Mz09PWU/MTU6NztlPjEmJmI8ZzspZD1kPDw2fDYzJmFbYisrXSxlLS07ZT4xP2hbYysrXT02NTUzMzpkPDY1NTM2P2hbYysrXT1kOihkLT02NTUzNixoW2MrK109NTUyOTZ8ZD4+MTAmMTAyMyxoW2MrK109NTYzMjB8MTAyMyZkKX1yZXR1cm4gaC5sZW5ndGghPT1jJiYoaC5zdWJhcnJheT9oPWguc3ViYXJyYXkoMCxjKTpoLmxlbmd0aD1jKSxmLmFwcGx5RnJvbUNoYXJDb2RlKGgpfTtjLnV0ZjhlbmNvZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGcubm9kZWJ1ZmZlcj9oLm5ld0J1ZmZlcihhLFwidXRmLThcIik6bChhKX0sYy51dGY4ZGVjb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBnLm5vZGVidWZmZXI/Zi50cmFuc2Zvcm1UbyhcIm5vZGVidWZmZXJcIixhKS50b1N0cmluZyhcInV0Zi04XCIpOihhPWYudHJhbnNmb3JtVG8oZy51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIixhKSxuKGEpKX0sZi5pbmhlcml0cyhkLGkpLGQucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt2YXIgYj1mLnRyYW5zZm9ybVRvKGcudWludDhhcnJheT9cInVpbnQ4YXJyYXlcIjpcImFycmF5XCIsYS5kYXRhKTtpZih0aGlzLmxlZnRPdmVyJiZ0aGlzLmxlZnRPdmVyLmxlbmd0aCl7aWYoZy51aW50OGFycmF5KXt2YXIgZD1iO2I9bmV3IFVpbnQ4QXJyYXkoZC5sZW5ndGgrdGhpcy5sZWZ0T3Zlci5sZW5ndGgpLGIuc2V0KHRoaXMubGVmdE92ZXIsMCksYi5zZXQoZCx0aGlzLmxlZnRPdmVyLmxlbmd0aCl9ZWxzZSBiPXRoaXMubGVmdE92ZXIuY29uY2F0KGIpO3RoaXMubGVmdE92ZXI9bnVsbH12YXIgZT1tKGIpLGg9YjtlIT09Yi5sZW5ndGgmJihnLnVpbnQ4YXJyYXk/KGg9Yi5zdWJhcnJheSgwLGUpLHRoaXMubGVmdE92ZXI9Yi5zdWJhcnJheShlLGIubGVuZ3RoKSk6KGg9Yi5zbGljZSgwLGUpLHRoaXMubGVmdE92ZXI9Yi5zbGljZShlLGIubGVuZ3RoKSkpLHRoaXMucHVzaCh7ZGF0YTpjLnV0ZjhkZWNvZGUoaCksbWV0YTphLm1ldGF9KX0sZC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt0aGlzLmxlZnRPdmVyJiZ0aGlzLmxlZnRPdmVyLmxlbmd0aCYmKHRoaXMucHVzaCh7ZGF0YTpjLnV0ZjhkZWNvZGUodGhpcy5sZWZ0T3ZlciksbWV0YTp7fX0pLHRoaXMubGVmdE92ZXI9bnVsbCl9LGMuVXRmOERlY29kZVdvcmtlcj1kLGYuaW5oZXJpdHMoZSxpKSxlLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oYSl7dGhpcy5wdXNoKHtkYXRhOmMudXRmOGVuY29kZShhLmRhdGEpLG1ldGE6YS5tZXRhfSl9LGMuVXRmOEVuY29kZVdvcmtlcj1lfSx7XCIuL25vZGVqc1V0aWxzXCI6MTIsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjUsXCIuL3N1cHBvcnRcIjoyNyxcIi4vdXRpbHNcIjoyOX1dLDI5OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt2YXIgYj1udWxsO3JldHVybiBiPWkudWludDhhcnJheT9uZXcgVWludDhBcnJheShhLmxlbmd0aCk6bmV3IEFycmF5KGEubGVuZ3RoKSxmKGEsYil9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYX1mdW5jdGlvbiBmKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpYltjXT0yNTUmYS5jaGFyQ29kZUF0KGMpO3JldHVybiBifWZ1bmN0aW9uIGcoYSl7dmFyIGI9NjU1MzYsZD1jLmdldFR5cGVPZihhKSxlPSEwO2lmKFwidWludDhhcnJheVwiPT09ZD9lPW4uYXBwbHlDYW5CZVVzZWQudWludDhhcnJheTpcIm5vZGVidWZmZXJcIj09PWQmJihlPW4uYXBwbHlDYW5CZVVzZWQubm9kZWJ1ZmZlciksZSlmb3IoO2I+MTspdHJ5e3JldHVybiBuLnN0cmluZ2lmeUJ5Q2h1bmsoYSxkLGIpfWNhdGNoKGYpe2I9TWF0aC5mbG9vcihiLzIpfXJldHVybiBuLnN0cmluZ2lmeUJ5Q2hhcihhKX1mdW5jdGlvbiBoKGEsYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYltjXT1hW2NdO3JldHVybiBifXZhciBpPWEoXCIuL3N1cHBvcnRcIiksaj1hKFwiLi9iYXNlNjRcIiksaz1hKFwiLi9ub2RlanNVdGlsc1wiKSxsPWEoXCJjb3JlLWpzL2xpYnJhcnkvZm4vc2V0LWltbWVkaWF0ZVwiKSxtPWEoXCIuL2V4dGVybmFsXCIpO2MubmV3QmxvYj1mdW5jdGlvbihhLGIpe2MuY2hlY2tTdXBwb3J0KFwiYmxvYlwiKTt0cnl7cmV0dXJuIG5ldyBCbG9iKFthXSx7dHlwZTpifSl9Y2F0Y2goZCl7dHJ5e3ZhciBlPXdpbmRvdy5CbG9iQnVpbGRlcnx8d2luZG93LldlYktpdEJsb2JCdWlsZGVyfHx3aW5kb3cuTW96QmxvYkJ1aWxkZXJ8fHdpbmRvdy5NU0Jsb2JCdWlsZGVyLGY9bmV3IGU7cmV0dXJuIGYuYXBwZW5kKGEpLGYuZ2V0QmxvYihiKX1jYXRjaChkKXt0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiBjYW4ndCBjb25zdHJ1Y3QgdGhlIEJsb2IuXCIpfX19O3ZhciBuPXtzdHJpbmdpZnlCeUNodW5rOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtpZihmPD1jKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYSk7Zm9yKDtlPGY7KVwiYXJyYXlcIj09PWJ8fFwibm9kZWJ1ZmZlclwiPT09Yj9kLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEuc2xpY2UoZSxNYXRoLm1pbihlK2MsZikpKSk6ZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhLnN1YmFycmF5KGUsTWF0aC5taW4oZStjLGYpKSkpLGUrPWM7cmV0dXJuIGQuam9pbihcIlwiKX0sc3RyaW5naWZ5QnlDaGFyOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGEubGVuZ3RoO2MrKyliKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbY10pO3JldHVybiBifSxhcHBseUNhbkJlVXNlZDp7dWludDhhcnJheTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gaS51aW50OGFycmF5JiYxPT09U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKS5sZW5ndGh9Y2F0Y2goYSl7cmV0dXJuITF9fSgpLG5vZGVidWZmZXI6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGkubm9kZWJ1ZmZlciYmMT09PVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxrLm5ld0J1ZmZlcigxKSkubGVuZ3RofWNhdGNoKGEpe3JldHVybiExfX0oKX19O2MuYXBwbHlGcm9tQ2hhckNvZGU9Zzt2YXIgbz17fTtvLnN0cmluZz17c3RyaW5nOmUsYXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxuZXcgQXJyYXkoYS5sZW5ndGgpKX0sYXJyYXlidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG8uc3RyaW5nLnVpbnQ4YXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBmKGEsbmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpKTtcclxufSxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBmKGEsay5uZXdCdWZmZXIoYS5sZW5ndGgpKX19LG8uYXJyYXk9e3N0cmluZzpnLGFycmF5OmUsYXJyYXlidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGsubmV3QnVmZmVyKGEpfX0sby5hcnJheWJ1ZmZlcj17c3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBnKG5ldyBVaW50OEFycmF5KGEpKX0sYXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGgobmV3IFVpbnQ4QXJyYXkoYSksbmV3IEFycmF5KGEuYnl0ZUxlbmd0aCkpfSxhcnJheWJ1ZmZlcjplLHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpfSxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBrLm5ld0J1ZmZlcihuZXcgVWludDhBcnJheShhKSl9fSxvLnVpbnQ4YXJyYXk9e3N0cmluZzpnLGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBoKGEsbmV3IEFycmF5KGEubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLmJ1ZmZlcn0sdWludDhhcnJheTplLG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGsubmV3QnVmZmVyKGEpfX0sby5ub2RlYnVmZmVyPXtzdHJpbmc6ZyxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gaChhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gby5ub2RlYnVmZmVyLnVpbnQ4YXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBoKGEsbmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpKX0sbm9kZWJ1ZmZlcjplfSxjLnRyYW5zZm9ybVRvPWZ1bmN0aW9uKGEsYil7aWYoYnx8KGI9XCJcIiksIWEpcmV0dXJuIGI7Yy5jaGVja1N1cHBvcnQoYSk7dmFyIGQ9Yy5nZXRUeXBlT2YoYiksZT1vW2RdW2FdKGIpO3JldHVybiBlfSxjLmdldFR5cGVPZj1mdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT9cInN0cmluZ1wiOlwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKT9cImFycmF5XCI6aS5ub2RlYnVmZmVyJiZrLmlzQnVmZmVyKGEpP1wibm9kZWJ1ZmZlclwiOmkudWludDhhcnJheSYmYSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk/XCJ1aW50OGFycmF5XCI6aS5hcnJheWJ1ZmZlciYmYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP1wiYXJyYXlidWZmZXJcIjp2b2lkIDB9LGMuY2hlY2tTdXBwb3J0PWZ1bmN0aW9uKGEpe3ZhciBiPWlbYS50b0xvd2VyQ2FzZSgpXTtpZighYil0aHJvdyBuZXcgRXJyb3IoYStcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgcGxhdGZvcm1cIil9LGMuTUFYX1ZBTFVFXzE2QklUUz02NTUzNSxjLk1BWF9WQUxVRV8zMkJJVFM9LTEsYy5wcmV0dHk9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPVwiXCI7Zm9yKGM9MDtjPChhfHxcIlwiKS5sZW5ndGg7YysrKWI9YS5jaGFyQ29kZUF0KGMpLGQrPVwiXFxcXHhcIisoYjwxNj9cIjBcIjpcIlwiKStiLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO3JldHVybiBkfSxjLmRlbGF5PWZ1bmN0aW9uKGEsYixjKXtsKGZ1bmN0aW9uKCl7YS5hcHBseShjfHxudWxsLGJ8fFtdKX0pfSxjLmluaGVyaXRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlPWIucHJvdG90eXBlLGEucHJvdG90eXBlPW5ldyBjfSxjLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYz17fTtmb3IoYT0wO2E8YXJndW1lbnRzLmxlbmd0aDthKyspZm9yKGIgaW4gYXJndW1lbnRzW2FdKWFyZ3VtZW50c1thXS5oYXNPd25Qcm9wZXJ0eShiKSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIGNbYl0mJihjW2JdPWFyZ3VtZW50c1thXVtiXSk7cmV0dXJuIGN9LGMucHJlcGFyZUNvbnRlbnQ9ZnVuY3Rpb24oYSxiLGUsZixnKXt2YXIgaD1tLlByb21pc2UucmVzb2x2ZShiKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBpLmJsb2ImJmEgaW5zdGFuY2VvZiBCbG9iJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgRmlsZVJlYWRlcj9uZXcgbS5Qcm9taXNlKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IEZpbGVSZWFkZXI7ZC5vbmxvYWQ9ZnVuY3Rpb24oYSl7YihhLnRhcmdldC5yZXN1bHQpfSxkLm9uZXJyb3I9ZnVuY3Rpb24oYSl7YyhhLnRhcmdldC5lcnJvcil9LGQucmVhZEFzQXJyYXlCdWZmZXIoYSl9KTphfSk7cmV0dXJuIGgudGhlbihmdW5jdGlvbihiKXt2YXIgaD1jLmdldFR5cGVPZihiKTtyZXR1cm4gaD8oXCJhcnJheWJ1ZmZlclwiPT09aD9iPWMudHJhbnNmb3JtVG8oXCJ1aW50OGFycmF5XCIsYik6XCJzdHJpbmdcIj09PWgmJihnP2I9ai5kZWNvZGUoYik6ZSYmZiE9PSEwJiYoYj1kKGIpKSksYik6bS5Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJUaGUgZGF0YSBvZiAnXCIrYStcIicgaXMgaW4gYW4gdW5zdXBwb3J0ZWQgZm9ybWF0ICFcIikpfSl9fSx7XCIuL2Jhc2U2NFwiOjEsXCIuL2V4dGVybmFsXCI6NixcIi4vbm9kZWpzVXRpbHNcIjoxMixcIi4vc3VwcG9ydFwiOjI3LFwiY29yZS1qcy9saWJyYXJ5L2ZuL3NldC1pbW1lZGlhdGVcIjozNH1dLDMwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt0aGlzLmZpbGVzPVtdLHRoaXMubG9hZE9wdGlvbnM9YX12YXIgZT1hKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9zaWduYXR1cmVcIiksaD1hKFwiLi96aXBFbnRyeVwiKSxpPShhKFwiLi91dGY4XCIpLGEoXCIuL3N1cHBvcnRcIikpO2QucHJvdG90eXBlPXtjaGVja1NpZ25hdHVyZTpmdW5jdGlvbihhKXtpZighdGhpcy5yZWFkZXIucmVhZEFuZENoZWNrU2lnbmF0dXJlKGEpKXt0aGlzLnJlYWRlci5pbmRleC09NDt2YXIgYj10aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpO3Rocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgb3IgYnVnIDogdW5leHBlY3RlZCBzaWduYXR1cmUgKFwiK2YucHJldHR5KGIpK1wiLCBleHBlY3RlZCBcIitmLnByZXR0eShhKStcIilcIil9fSxpc1NpZ25hdHVyZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucmVhZGVyLmluZGV4O3RoaXMucmVhZGVyLnNldEluZGV4KGEpO3ZhciBkPXRoaXMucmVhZGVyLnJlYWRTdHJpbmcoNCksZT1kPT09YjtyZXR1cm4gdGhpcy5yZWFkZXIuc2V0SW5kZXgoYyksZX0scmVhZEJsb2NrRW5kT2ZDZW50cmFsOmZ1bmN0aW9uKCl7dGhpcy5kaXNrTnVtYmVyPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuY2VudHJhbERpclJlY29yZHNPblRoaXNEaXNrPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyUmVjb3Jkcz10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuY2VudHJhbERpclNpemU9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmNlbnRyYWxEaXJPZmZzZXQ9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLnppcENvbW1lbnRMZW5ndGg9dGhpcy5yZWFkZXIucmVhZEludCgyKTt2YXIgYT10aGlzLnJlYWRlci5yZWFkRGF0YSh0aGlzLnppcENvbW1lbnRMZW5ndGgpLGI9aS51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIixjPWYudHJhbnNmb3JtVG8oYixhKTt0aGlzLnppcENvbW1lbnQ9dGhpcy5sb2FkT3B0aW9ucy5kZWNvZGVGaWxlTmFtZShjKX0scmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt0aGlzLnppcDY0RW5kT2ZDZW50cmFsU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMucmVhZGVyLnNraXAoNCksdGhpcy5kaXNrTnVtYmVyPXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuY2VudHJhbERpclJlY29yZHNPblRoaXNEaXNrPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkcz10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpclNpemU9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJPZmZzZXQ9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLnppcDY0RXh0ZW5zaWJsZURhdGE9e307Zm9yKHZhciBhLGIsYyxkPXRoaXMuemlwNjRFbmRPZkNlbnRyYWxTaXplLTQ0LGU9MDtlPGQ7KWE9dGhpcy5yZWFkZXIucmVhZEludCgyKSxiPXRoaXMucmVhZGVyLnJlYWRJbnQoNCksYz10aGlzLnJlYWRlci5yZWFkRGF0YShiKSx0aGlzLnppcDY0RXh0ZW5zaWJsZURhdGFbYV09e2lkOmEsbGVuZ3RoOmIsdmFsdWU6Y319LHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcjpmdW5jdGlvbigpe2lmKHRoaXMuZGlza1dpdGhaaXA2NENlbnRyYWxEaXJTdGFydD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcj10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuZGlza3NDb3VudD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuZGlza3NDb3VudD4xKXRocm93IG5ldyBFcnJvcihcIk11bHRpLXZvbHVtZXMgemlwIGFyZSBub3Qgc3VwcG9ydGVkXCIpfSxyZWFkTG9jYWxGaWxlczpmdW5jdGlvbigpe3ZhciBhLGI7Zm9yKGE9MDthPHRoaXMuZmlsZXMubGVuZ3RoO2ErKyliPXRoaXMuZmlsZXNbYV0sdGhpcy5yZWFkZXIuc2V0SW5kZXgoYi5sb2NhbEhlYWRlck9mZnNldCksdGhpcy5jaGVja1NpZ25hdHVyZShnLkxPQ0FMX0ZJTEVfSEVBREVSKSxiLnJlYWRMb2NhbFBhcnQodGhpcy5yZWFkZXIpLGIuaGFuZGxlVVRGOCgpLGIucHJvY2Vzc0F0dHJpYnV0ZXMoKX0scmVhZENlbnRyYWxEaXI6ZnVuY3Rpb24oKXt2YXIgYTtmb3IodGhpcy5yZWFkZXIuc2V0SW5kZXgodGhpcy5jZW50cmFsRGlyT2Zmc2V0KTt0aGlzLnJlYWRlci5yZWFkQW5kQ2hlY2tTaWduYXR1cmUoZy5DRU5UUkFMX0ZJTEVfSEVBREVSKTspYT1uZXcgaCh7emlwNjQ6dGhpcy56aXA2NH0sdGhpcy5sb2FkT3B0aW9ucyksYS5yZWFkQ2VudHJhbFBhcnQodGhpcy5yZWFkZXIpLHRoaXMuZmlsZXMucHVzaChhKTtpZih0aGlzLmNlbnRyYWxEaXJSZWNvcmRzIT09dGhpcy5maWxlcy5sZW5ndGgmJjAhPT10aGlzLmNlbnRyYWxEaXJSZWNvcmRzJiYwPT09dGhpcy5maWxlcy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCBvciBidWc6IGV4cGVjdGVkIFwiK3RoaXMuY2VudHJhbERpclJlY29yZHMrXCIgcmVjb3JkcyBpbiBjZW50cmFsIGRpciwgZ290IFwiK3RoaXMuZmlsZXMubGVuZ3RoKX0scmVhZEVuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGcuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKTtpZihhPDApe3ZhciBiPSF0aGlzLmlzU2lnbmF0dXJlKDAsZy5MT0NBTF9GSUxFX0hFQURFUik7dGhyb3cgYj9uZXcgRXJyb3IoXCJDYW4ndCBmaW5kIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSA6IGlzIHRoaXMgYSB6aXAgZmlsZSA/IElmIGl0IGlzLCBzZWUgaHR0cDovL3N0dWsuZ2l0aHViLmlvL2pzemlwL2RvY3VtZW50YXRpb24vaG93dG8vcmVhZF96aXAuaHRtbFwiKTpuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY2FuJ3QgZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnlcIil9dGhpcy5yZWFkZXIuc2V0SW5kZXgoYSk7dmFyIGM9YTtpZih0aGlzLmNoZWNrU2lnbmF0dXJlKGcuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja0VuZE9mQ2VudHJhbCgpLHRoaXMuZGlza051bWJlcj09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9PT1mLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclJlY29yZHM9PT1mLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclNpemU9PT1mLk1BWF9WQUxVRV8zMkJJVFN8fHRoaXMuY2VudHJhbERpck9mZnNldD09PWYuTUFYX1ZBTFVFXzMyQklUUyl7aWYodGhpcy56aXA2ND0hMCxhPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUiksYTwwKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBjYW4ndCBmaW5kIHRoZSBaSVA2NCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkgbG9jYXRvclwiKTtpZih0aGlzLnJlYWRlci5zZXRJbmRleChhKSx0aGlzLmNoZWNrU2lnbmF0dXJlKGcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUiksdGhpcy5yZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbExvY2F0b3IoKSwhdGhpcy5pc1NpZ25hdHVyZSh0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIsZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpJiYodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGcuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXI8MCkpdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeVwiKTt0aGlzLnJlYWRlci5zZXRJbmRleCh0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXIpLHRoaXMuY2hlY2tTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWwoKX12YXIgZD10aGlzLmNlbnRyYWxEaXJPZmZzZXQrdGhpcy5jZW50cmFsRGlyU2l6ZTt0aGlzLnppcDY0JiYoZCs9MjAsZCs9MTIrdGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUpO3ZhciBlPWMtZDtpZihlPjApdGhpcy5pc1NpZ25hdHVyZShjLGcuQ0VOVFJBTF9GSUxFX0hFQURFUil8fCh0aGlzLnJlYWRlci56ZXJvPWUpO2Vsc2UgaWYoZTwwKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXA6IG1pc3NpbmcgXCIrTWF0aC5hYnMoZSkrXCIgYnl0ZXMuXCIpfSxwcmVwYXJlUmVhZGVyOmZ1bmN0aW9uKGEpe3RoaXMucmVhZGVyPWUoYSl9LGxvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5wcmVwYXJlUmVhZGVyKGEpLHRoaXMucmVhZEVuZE9mQ2VudHJhbCgpLHRoaXMucmVhZENlbnRyYWxEaXIoKSx0aGlzLnJlYWRMb2NhbEZpbGVzKCl9fSxiLmV4cG9ydHM9ZH0se1wiLi9yZWFkZXIvcmVhZGVyRm9yXCI6MTksXCIuL3NpZ25hdHVyZVwiOjIwLFwiLi9zdXBwb3J0XCI6MjcsXCIuL3V0ZjhcIjoyOCxcIi4vdXRpbHNcIjoyOSxcIi4vemlwRW50cnlcIjozMX1dLDMxOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe3RoaXMub3B0aW9ucz1hLHRoaXMubG9hZE9wdGlvbnM9Yn12YXIgZT1hKFwiLi9yZWFkZXIvcmVhZGVyRm9yXCIpLGY9YShcIi4vdXRpbHNcIiksZz1hKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGg9YShcIi4vY3JjMzJcIiksaT1hKFwiLi91dGY4XCIpLGo9YShcIi4vY29tcHJlc3Npb25zXCIpLGs9YShcIi4vc3VwcG9ydFwiKSxsPTAsbT0zLG49ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGopaWYoai5oYXNPd25Qcm9wZXJ0eShiKSYmaltiXS5tYWdpYz09PWEpcmV0dXJuIGpbYl07cmV0dXJuIG51bGx9O2QucHJvdG90eXBlPXtpc0VuY3J5cHRlZDpmdW5jdGlvbigpe3JldHVybiAxPT09KDEmdGhpcy5iaXRGbGFnKX0sdXNlVVRGODpmdW5jdGlvbigpe3JldHVybiAyMDQ4PT09KDIwNDgmdGhpcy5iaXRGbGFnKX0scmVhZExvY2FsUGFydDpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGEuc2tpcCgyMiksdGhpcy5maWxlTmFtZUxlbmd0aD1hLnJlYWRJbnQoMiksYz1hLnJlYWRJbnQoMiksdGhpcy5maWxlTmFtZT1hLnJlYWREYXRhKHRoaXMuZmlsZU5hbWVMZW5ndGgpLGEuc2tpcChjKSx0aGlzLmNvbXByZXNzZWRTaXplPT09LTF8fHRoaXMudW5jb21wcmVzc2VkU2l6ZT09PS0xKXRocm93IG5ldyBFcnJvcihcIkJ1ZyBvciBjb3JydXB0ZWQgemlwIDogZGlkbid0IGdldCBlbm91Z2ggaW5mb3JtYXRpb25zIGZyb20gdGhlIGNlbnRyYWwgZGlyZWN0b3J5IChjb21wcmVzc2VkU2l6ZSA9PT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PT0gLTEpXCIpO2lmKGI9bih0aGlzLmNvbXByZXNzaW9uTWV0aG9kKSxudWxsPT09Yil0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY29tcHJlc3Npb24gXCIrZi5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkrXCIgdW5rbm93biAoaW5uZXIgZmlsZSA6IFwiK2YudHJhbnNmb3JtVG8oXCJzdHJpbmdcIix0aGlzLmZpbGVOYW1lKStcIilcIik7dGhpcy5kZWNvbXByZXNzZWQ9bmV3IGcodGhpcy5jb21wcmVzc2VkU2l6ZSx0aGlzLnVuY29tcHJlc3NlZFNpemUsdGhpcy5jcmMzMixiLGEucmVhZERhdGEodGhpcy5jb21wcmVzc2VkU2l6ZSkpfSxyZWFkQ2VudHJhbFBhcnQ6ZnVuY3Rpb24oYSl7dGhpcy52ZXJzaW9uTWFkZUJ5PWEucmVhZEludCgyKSxhLnNraXAoMiksdGhpcy5iaXRGbGFnPWEucmVhZEludCgyKSx0aGlzLmNvbXByZXNzaW9uTWV0aG9kPWEucmVhZFN0cmluZygyKSx0aGlzLmRhdGU9YS5yZWFkRGF0ZSgpLHRoaXMuY3JjMzI9YS5yZWFkSW50KDQpLHRoaXMuY29tcHJlc3NlZFNpemU9YS5yZWFkSW50KDQpLHRoaXMudW5jb21wcmVzc2VkU2l6ZT1hLnJlYWRJbnQoNCk7dmFyIGI9YS5yZWFkSW50KDIpO2lmKHRoaXMuZXh0cmFGaWVsZHNMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZmlsZUNvbW1lbnRMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZGlza051bWJlclN0YXJ0PWEucmVhZEludCgyKSx0aGlzLmludGVybmFsRmlsZUF0dHJpYnV0ZXM9YS5yZWFkSW50KDIpLHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz1hLnJlYWRJbnQoNCksdGhpcy5sb2NhbEhlYWRlck9mZnNldD1hLnJlYWRJbnQoNCksdGhpcy5pc0VuY3J5cHRlZCgpKXRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRlZCB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIik7YS5za2lwKGIpLHRoaXMucmVhZEV4dHJhRmllbGRzKGEpLHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQoYSksdGhpcy5maWxlQ29tbWVudD1hLnJlYWREYXRhKHRoaXMuZmlsZUNvbW1lbnRMZW5ndGgpfSxwcm9jZXNzQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMudW5peFBlcm1pc3Npb25zPW51bGwsdGhpcy5kb3NQZXJtaXNzaW9ucz1udWxsO3ZhciBhPXRoaXMudmVyc2lvbk1hZGVCeT4+ODt0aGlzLmRpcj0hISgxNiZ0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMpLGE9PT1sJiYodGhpcy5kb3NQZXJtaXNzaW9ucz02MyZ0aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXMpLGE9PT1tJiYodGhpcy51bml4UGVybWlzc2lvbnM9dGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzPj4xNiY2NTUzNSksdGhpcy5kaXJ8fFwiL1wiIT09dGhpcy5maWxlTmFtZVN0ci5zbGljZSgtMSl8fCh0aGlzLmRpcj0hMCl9LHBhcnNlWklQNjRFeHRyYUZpZWxkOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZXh0cmFGaWVsZHNbMV0pe3ZhciBiPWUodGhpcy5leHRyYUZpZWxkc1sxXS52YWx1ZSk7dGhpcy51bmNvbXByZXNzZWRTaXplPT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy51bmNvbXByZXNzZWRTaXplPWIucmVhZEludCg4KSksdGhpcy5jb21wcmVzc2VkU2l6ZT09PWYuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMuY29tcHJlc3NlZFNpemU9Yi5yZWFkSW50KDgpKSx0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0PT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5sb2NhbEhlYWRlck9mZnNldD1iLnJlYWRJbnQoOCkpLHRoaXMuZGlza051bWJlclN0YXJ0PT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5kaXNrTnVtYmVyU3RhcnQ9Yi5yZWFkSW50KDQpKX19LHJlYWRFeHRyYUZpZWxkczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLmluZGV4K3RoaXMuZXh0cmFGaWVsZHNMZW5ndGg7Zm9yKHRoaXMuZXh0cmFGaWVsZHN8fCh0aGlzLmV4dHJhRmllbGRzPXt9KTthLmluZGV4PGU7KWI9YS5yZWFkSW50KDIpLGM9YS5yZWFkSW50KDIpLGQ9YS5yZWFkRGF0YShjKSx0aGlzLmV4dHJhRmllbGRzW2JdPXtpZDpiLGxlbmd0aDpjLHZhbHVlOmR9fSxoYW5kbGVVVEY4OmZ1bmN0aW9uKCl7dmFyIGE9ay51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIjtpZih0aGlzLnVzZVVURjgoKSl0aGlzLmZpbGVOYW1lU3RyPWkudXRmOGRlY29kZSh0aGlzLmZpbGVOYW1lKSx0aGlzLmZpbGVDb21tZW50U3RyPWkudXRmOGRlY29kZSh0aGlzLmZpbGVDb21tZW50KTtlbHNle3ZhciBiPXRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlUGF0aCgpO2lmKG51bGwhPT1iKXRoaXMuZmlsZU5hbWVTdHI9YjtlbHNle3ZhciBjPWYudHJhbnNmb3JtVG8oYSx0aGlzLmZpbGVOYW1lKTt0aGlzLmZpbGVOYW1lU3RyPXRoaXMubG9hZE9wdGlvbnMuZGVjb2RlRmlsZU5hbWUoYyl9dmFyIGQ9dGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVDb21tZW50KCk7aWYobnVsbCE9PWQpdGhpcy5maWxlQ29tbWVudFN0cj1kO2Vsc2V7dmFyIGU9Zi50cmFuc2Zvcm1UbyhhLHRoaXMuZmlsZUNvbW1lbnQpO3RoaXMuZmlsZUNvbW1lbnRTdHI9dGhpcy5sb2FkT3B0aW9ucy5kZWNvZGVGaWxlTmFtZShlKX19fSxmaW5kRXh0cmFGaWVsZFVuaWNvZGVQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5leHRyYUZpZWxkc1syODc4OV07aWYoYSl7dmFyIGI9ZShhLnZhbHVlKTtyZXR1cm4gMSE9PWIucmVhZEludCgxKT9udWxsOmgodGhpcy5maWxlTmFtZSkhPT1iLnJlYWRJbnQoNCk/bnVsbDppLnV0ZjhkZWNvZGUoYi5yZWFkRGF0YShhLmxlbmd0aC01KSl9cmV0dXJuIG51bGx9LGZpbmRFeHRyYUZpZWxkVW5pY29kZUNvbW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dHJhRmllbGRzWzI1NDYxXTtpZihhKXt2YXIgYj1lKGEudmFsdWUpO3JldHVybiAxIT09Yi5yZWFkSW50KDEpP251bGw6aCh0aGlzLmZpbGVDb21tZW50KSE9PWIucmVhZEludCg0KT9udWxsOmkudXRmOGRlY29kZShiLnJlYWREYXRhKGEubGVuZ3RoLTUpKX1yZXR1cm4gbnVsbH19LGIuZXhwb3J0cz1kfSx7XCIuL2NvbXByZXNzZWRPYmplY3RcIjoyLFwiLi9jb21wcmVzc2lvbnNcIjozLFwiLi9jcmMzMlwiOjQsXCIuL3JlYWRlci9yZWFkZXJGb3JcIjoxOSxcIi4vc3VwcG9ydFwiOjI3LFwiLi91dGY4XCI6MjgsXCIuL3V0aWxzXCI6Mjl9XSwzMjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIiksZT1hKFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiKSxmPWEoXCIuL3V0ZjhcIiksZz1hKFwiLi9jb21wcmVzc2VkT2JqZWN0XCIpLGg9YShcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksaT1mdW5jdGlvbihhLGIsYyl7dGhpcy5uYW1lPWEsdGhpcy5kaXI9Yy5kaXIsdGhpcy5kYXRlPWMuZGF0ZSx0aGlzLmNvbW1lbnQ9Yy5jb21tZW50LHRoaXMudW5peFBlcm1pc3Npb25zPWMudW5peFBlcm1pc3Npb25zLHRoaXMuZG9zUGVybWlzc2lvbnM9Yy5kb3NQZXJtaXNzaW9ucyx0aGlzLl9kYXRhPWIsdGhpcy5fZGF0YUJpbmFyeT1jLmJpbmFyeSx0aGlzLm9wdGlvbnM9e2NvbXByZXNzaW9uOmMuY29tcHJlc3Npb24sY29tcHJlc3Npb25PcHRpb25zOmMuY29tcHJlc3Npb25PcHRpb25zfX07aS5wcm90b3R5cGU9e2ludGVybmFsU3RyZWFtOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG9Mb3dlckNhc2UoKSxjPVwic3RyaW5nXCI9PT1ifHxcInRleHRcIj09PWI7XCJiaW5hcnlzdHJpbmdcIiE9PWImJlwidGV4dFwiIT09Ynx8KGI9XCJzdHJpbmdcIik7dmFyIGU9dGhpcy5fZGVjb21wcmVzc1dvcmtlcigpLGc9IXRoaXMuX2RhdGFCaW5hcnk7cmV0dXJuIGcmJiFjJiYoZT1lLnBpcGUobmV3IGYuVXRmOEVuY29kZVdvcmtlcikpLCFnJiZjJiYoZT1lLnBpcGUobmV3IGYuVXRmOERlY29kZVdvcmtlcikpLG5ldyBkKGUsYixcIlwiKX0sYXN5bmM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbnRlcm5hbFN0cmVhbShhKS5hY2N1bXVsYXRlKGIpfSxub2RlU3RyZWFtOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaW50ZXJuYWxTdHJlYW0oYXx8XCJub2RlYnVmZmVyXCIpLnRvTm9kZWpzU3RyZWFtKGIpfSxfY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9kYXRhIGluc3RhbmNlb2YgZyYmdGhpcy5fZGF0YS5jb21wcmVzc2lvbi5tYWdpYz09PWEubWFnaWMpcmV0dXJuIHRoaXMuX2RhdGEuZ2V0Q29tcHJlc3NlZFdvcmtlcigpO3ZhciBjPXRoaXMuX2RlY29tcHJlc3NXb3JrZXIoKTtyZXR1cm4gdGhpcy5fZGF0YUJpbmFyeXx8KGM9Yy5waXBlKG5ldyBmLlV0ZjhFbmNvZGVXb3JrZXIpKSxnLmNyZWF0ZVdvcmtlckZyb20oYyxhLGIpfSxfZGVjb21wcmVzc1dvcmtlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhIGluc3RhbmNlb2YgZz90aGlzLl9kYXRhLmdldENvbnRlbnRXb3JrZXIoKTp0aGlzLl9kYXRhIGluc3RhbmNlb2YgaD90aGlzLl9kYXRhOm5ldyBlKHRoaXMuX2RhdGEpfX07Zm9yKHZhciBqPVtcImFzVGV4dFwiLFwiYXNCaW5hcnlcIixcImFzTm9kZUJ1ZmZlclwiLFwiYXNVaW50OEFycmF5XCIsXCJhc0FycmF5QnVmZmVyXCJdLGs9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKX0sbD0wO2w8ai5sZW5ndGg7bCsrKWkucHJvdG90eXBlW2pbbF1dPWs7Yi5leHBvcnRzPWl9LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjIsXCIuL3N0cmVhbS9EYXRhV29ya2VyXCI6MjQsXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjUsXCIuL3N0cmVhbS9TdHJlYW1IZWxwZXJcIjoyNixcIi4vdXRmOFwiOjI4fV0sMzM6W2Z1bmN0aW9uKGEsYixjKXt9LHt9XSwzNDpbZnVuY3Rpb24oYSxiLGMpe2EoXCIuLi9tb2R1bGVzL3dlYi5pbW1lZGlhdGVcIiksYi5leHBvcnRzPWEoXCIuLi9tb2R1bGVzL19jb3JlXCIpLnNldEltbWVkaWF0ZX0se1wiLi4vbW9kdWxlcy9fY29yZVwiOjM4LFwiLi4vbW9kdWxlcy93ZWIuaW1tZWRpYXRlXCI6NTR9XSwzNTpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IFR5cGVFcnJvcihhK1wiIGlzIG5vdCBhIGZ1bmN0aW9uIVwiKTtyZXR1cm4gYX19LHt9XSwzNjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19pcy1vYmplY3RcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe2lmKCFkKGEpKXRocm93IFR5cGVFcnJvcihhK1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiBhfX0se1wiLi9faXMtb2JqZWN0XCI6NDl9XSwzNzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXt9LnRvU3RyaW5nO2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gZC5jYWxsKGEpLnNsaWNlKDgsLTEpfX0se31dLDM4OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5leHBvcnRzPXt2ZXJzaW9uOlwiMi4zLjBcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1kKX0se31dLDM5OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2EtZnVuY3Rpb25cIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjKXtpZihkKGEpLHZvaWQgMD09PWIpcmV0dXJuIGE7c3dpdGNoKGMpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIGEuY2FsbChiLGMpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEuY2FsbChiLGMsZCl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe3JldHVybiBhLmNhbGwoYixjLGQsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19fSx7XCIuL19hLWZ1bmN0aW9uXCI6MzV9XSw0MDpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz0hYShcIi4vX2ZhaWxzXCIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7XCIuL19mYWlsc1wiOjQzfV0sNDE6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9faXMtb2JqZWN0XCIpLGU9YShcIi4vX2dsb2JhbFwiKS5kb2N1bWVudCxmPWQoZSkmJmQoZS5jcmVhdGVFbGVtZW50KTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGY/ZS5jcmVhdGVFbGVtZW50KGEpOnt9fX0se1wiLi9fZ2xvYmFsXCI6NDQsXCIuL19pcy1vYmplY3RcIjo0OX1dLDQyOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2dsb2JhbFwiKSxlPWEoXCIuL19jb3JlXCIpLGY9YShcIi4vX2N0eFwiKSxnPWEoXCIuL19oaWRlXCIpLGg9XCJwcm90b3R5cGVcIixpPWZ1bmN0aW9uKGEsYixjKXt2YXIgaixrLGwsbT1hJmkuRixuPWEmaS5HLG89YSZpLlMscD1hJmkuUCxxPWEmaS5CLHI9YSZpLlcscz1uP2U6ZVtiXXx8KGVbYl09e30pLHQ9c1toXSx1PW4/ZDpvP2RbYl06KGRbYl18fHt9KVtoXTtuJiYoYz1iKTtmb3IoaiBpbiBjKWs9IW0mJnUmJnZvaWQgMCE9PXVbal0sayYmaiBpbiBzfHwobD1rP3Vbal06Y1tqXSxzW2pdPW4mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHVbal0/Y1tqXTpxJiZrP2YobCxkKTpyJiZ1W2pdPT1sP2Z1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzIGluc3RhbmNlb2YgYSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGE7Y2FzZSAxOnJldHVybiBuZXcgYShiKTtjYXNlIDI6cmV0dXJuIG5ldyBhKGIsYyl9cmV0dXJuIG5ldyBhKGIsYyxkKX1yZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBiW2hdPWFbaF0sYn0obCk6cCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbD9mKEZ1bmN0aW9uLmNhbGwsbCk6bCxwJiYoKHMudmlydHVhbHx8KHMudmlydHVhbD17fSkpW2pdPWwsYSZpLlImJnQmJiF0W2pdJiZnKHQsaixsKSkpfTtpLkY9MSxpLkc9MixpLlM9NCxpLlA9OCxpLkI9MTYsaS5XPTMyLGkuVT02NCxpLlI9MTI4LGIuZXhwb3J0cz1pfSx7XCIuL19jb3JlXCI6MzgsXCIuL19jdHhcIjozOSxcIi4vX2dsb2JhbFwiOjQ0LFwiLi9faGlkZVwiOjQ1fV0sNDM6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiEhYSgpfWNhdGNoKGIpe3JldHVybiEwfX19LHt9XSw0NDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPWQpfSx7fV0sNDU6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9fb2JqZWN0LWRwXCIpLGU9YShcIi4vX3Byb3BlcnR5LWRlc2NcIik7Yi5leHBvcnRzPWEoXCIuL19kZXNjcmlwdG9yc1wiKT9mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGQuZihhLGIsZSgxLGMpKX06ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBhW2JdPWMsYX19LHtcIi4vX2Rlc2NyaXB0b3JzXCI6NDAsXCIuL19vYmplY3QtZHBcIjo1MCxcIi4vX3Byb3BlcnR5LWRlc2NcIjo1MX1dLDQ2OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWEoXCIuL19nbG9iYWxcIikuZG9jdW1lbnQmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudH0se1wiLi9fZ2xvYmFsXCI6NDR9XSw0NzpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz0hYShcIi4vX2Rlc2NyaXB0b3JzXCIpJiYhYShcIi4vX2ZhaWxzXCIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhKFwiLi9fZG9tLWNyZWF0ZVwiKShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7XCIuL19kZXNjcmlwdG9yc1wiOjQwLFwiLi9fZG9tLWNyZWF0ZVwiOjQxLFwiLi9fZmFpbHNcIjo0M31dLDQ4OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD12b2lkIDA9PT1jO3N3aXRjaChiLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBkP2EoKTphLmNhbGwoYyk7Y2FzZSAxOnJldHVybiBkP2EoYlswXSk6YS5jYWxsKGMsYlswXSk7Y2FzZSAyOnJldHVybiBkP2EoYlswXSxiWzFdKTphLmNhbGwoYyxiWzBdLGJbMV0pO2Nhc2UgMzpyZXR1cm4gZD9hKGJbMF0sYlsxXSxiWzJdKTphLmNhbGwoYyxiWzBdLGJbMV0sYlsyXSk7Y2FzZSA0OnJldHVybiBkP2EoYlswXSxiWzFdLGJbMl0sYlszXSk6YS5jYWxsKGMsYlswXSxiWzFdLGJbMl0sYlszXSl9cmV0dXJuIGEuYXBwbHkoYyxiKX19LHt9XSw0OTpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT9udWxsIT09YTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBhfX0se31dLDUwOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2FuLW9iamVjdFwiKSxlPWEoXCIuL19pZTgtZG9tLWRlZmluZVwiKSxmPWEoXCIuL190by1wcmltaXRpdmVcIiksZz1PYmplY3QuZGVmaW5lUHJvcGVydHk7Yy5mPWEoXCIuL19kZXNjcmlwdG9yc1wiKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oYSxiLGMpe2lmKGQoYSksYj1mKGIsITApLGQoYyksZSl0cnl7cmV0dXJuIGcoYSxiLGMpfWNhdGNoKGgpe31pZihcImdldFwiaW4gY3x8XCJzZXRcImluIGMpdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhXCIpO3JldHVyblwidmFsdWVcImluIGMmJihhW2JdPWMudmFsdWUpLGF9fSx7XCIuL19hbi1vYmplY3RcIjozNixcIi4vX2Rlc2NyaXB0b3JzXCI6NDAsXCIuL19pZTgtZG9tLWRlZmluZVwiOjQ3LFwiLi9fdG8tcHJpbWl0aXZlXCI6NTN9XSw1MTpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3JldHVybntlbnVtZXJhYmxlOiEoMSZhKSxjb25maWd1cmFibGU6ISgyJmEpLHdyaXRhYmxlOiEoNCZhKSx2YWx1ZTpifX19LHt9XSw1MjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEoXCIuL19jdHhcIiksaD1hKFwiLi9faW52b2tlXCIpLGk9YShcIi4vX2h0bWxcIiksaj1hKFwiLi9fZG9tLWNyZWF0ZVwiKSxrPWEoXCIuL19nbG9iYWxcIiksbD1rLnByb2Nlc3MsbT1rLnNldEltbWVkaWF0ZSxuPWsuY2xlYXJJbW1lZGlhdGUsbz1rLk1lc3NhZ2VDaGFubmVsLHA9MCxxPXt9LHI9XCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixzPWZ1bmN0aW9uKCl7dmFyIGE9K3RoaXM7aWYocS5oYXNPd25Qcm9wZXJ0eShhKSl7dmFyIGI9cVthXTtkZWxldGUgcVthXSxiKCl9fSx0PWZ1bmN0aW9uKGEpe3MuY2FsbChhLmRhdGEpfTttJiZufHwobT1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz0xO2FyZ3VtZW50cy5sZW5ndGg+YzspYi5wdXNoKGFyZ3VtZW50c1tjKytdKTtyZXR1cm4gcVsrK3BdPWZ1bmN0aW9uKCl7aChcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2E6RnVuY3Rpb24oYSksYil9LGQocCkscH0sbj1mdW5jdGlvbihhKXtkZWxldGUgcVthXX0sXCJwcm9jZXNzXCI9PWEoXCIuL19jb2ZcIikobCk/ZD1mdW5jdGlvbihhKXtsLm5leHRUaWNrKGcocyxhLDEpKX06bz8oZT1uZXcgbyxmPWUucG9ydDIsZS5wb3J0MS5vbm1lc3NhZ2U9dCxkPWcoZi5wb3N0TWVzc2FnZSxmLDEpKTprLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhay5pbXBvcnRTY3JpcHRzPyhkPWZ1bmN0aW9uKGEpe2sucG9zdE1lc3NhZ2UoYStcIlwiLFwiKlwiKX0say5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHQsITEpKTpkPXIgaW4gaihcInNjcmlwdFwiKT9mdW5jdGlvbihhKXtpLmFwcGVuZENoaWxkKGooXCJzY3JpcHRcIikpW3JdPWZ1bmN0aW9uKCl7aS5yZW1vdmVDaGlsZCh0aGlzKSxzLmNhbGwoYSl9fTpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGcocyxhLDEpLDApfSksYi5leHBvcnRzPXtzZXQ6bSxjbGVhcjpufX0se1wiLi9fY29mXCI6MzcsXCIuL19jdHhcIjozOSxcIi4vX2RvbS1jcmVhdGVcIjo0MSxcIi4vX2dsb2JhbFwiOjQ0LFwiLi9faHRtbFwiOjQ2LFwiLi9faW52b2tlXCI6NDh9XSw1MzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19pcy1vYmplY3RcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7aWYoIWQoYSkpcmV0dXJuIGE7dmFyIGMsZTtpZihiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihjPWEudG9TdHJpbmcpJiYhZChlPWMuY2FsbChhKSkpcmV0dXJuIGU7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YoYz1hLnZhbHVlT2YpJiYhZChlPWMuY2FsbChhKSkpcmV0dXJuIGU7aWYoIWImJlwiZnVuY3Rpb25cIj09dHlwZW9mKGM9YS50b1N0cmluZykmJiFkKGU9Yy5jYWxsKGEpKSlyZXR1cm4gZTt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9fSx7XCIuL19pcy1vYmplY3RcIjo0OX1dLDU0OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2V4cG9ydFwiKSxlPWEoXCIuL190YXNrXCIpO2QoZC5HK2QuQix7c2V0SW1tZWRpYXRlOmUuc2V0LGNsZWFySW1tZWRpYXRlOmUuY2xlYXJ9KX0se1wiLi9fZXhwb3J0XCI6NDIsXCIuL190YXNrXCI6NTJ9XSw1NTpbZnVuY3Rpb24oYSxiLGMpeyhmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKCl7az0hMDtmb3IodmFyIGEsYixjPWwubGVuZ3RoO2M7KXtmb3IoYj1sLGw9W10sYT0tMTsrK2E8YzspYlthXSgpO2M9bC5sZW5ndGh9az0hMX1mdW5jdGlvbiBkKGEpezEhPT1sLnB1c2goYSl8fGt8fGUoKX12YXIgZSxmPWEuTXV0YXRpb25PYnNlcnZlcnx8YS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO2lmKGYpe3ZhciBnPTAsaD1uZXcgZihjKSxpPWEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7aC5vYnNlcnZlKGkse2NoYXJhY3RlckRhdGE6ITB9KSxlPWZ1bmN0aW9uKCl7aS5kYXRhPWc9KytnJTJ9fWVsc2UgaWYoYS5zZXRJbW1lZGlhdGV8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLk1lc3NhZ2VDaGFubmVsKWU9XCJkb2N1bWVudFwiaW4gYSYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT9mdW5jdGlvbigpe3ZhciBiPWEuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtiLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2MoKSxiLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9LGEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGIpfTpmdW5jdGlvbigpe3NldFRpbWVvdXQoYywwKX07ZWxzZXt2YXIgaj1uZXcgYS5NZXNzYWdlQ2hhbm5lbDtqLnBvcnQxLm9ubWVzc2FnZT1jLGU9ZnVuY3Rpb24oKXtqLnBvcnQyLnBvc3RNZXNzYWdlKDApfX12YXIgayxsPVtdO2IuZXhwb3J0cz1kfSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sNTY6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIGUoYSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3RoaXMuc3RhdGU9cyx0aGlzLnF1ZXVlPVtdLHRoaXMub3V0Y29tZT12b2lkIDAsYSE9PWQmJmkodGhpcyxhKX1mdW5jdGlvbiBmKGEsYixjKXt0aGlzLnByb21pc2U9YSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYodGhpcy5vbkZ1bGZpbGxlZD1iLHRoaXMuY2FsbEZ1bGZpbGxlZD10aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZCksXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKHRoaXMub25SZWplY3RlZD1jLHRoaXMuY2FsbFJlamVjdGVkPXRoaXMub3RoZXJDYWxsUmVqZWN0ZWQpfWZ1bmN0aW9uIGcoYSxiLGMpe28oZnVuY3Rpb24oKXt2YXIgZDt0cnl7ZD1iKGMpfWNhdGNoKGUpe3JldHVybiBwLnJlamVjdChhLGUpfWQ9PT1hP3AucmVqZWN0KGEsbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGZcIikpOnAucmVzb2x2ZShhLGQpfSl9ZnVuY3Rpb24gaChhKXt2YXIgYj1hJiZhLnRoZW47aWYoYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIpcmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGkoYSxiKXtmdW5jdGlvbiBjKGIpe2Z8fChmPSEwLHAucmVqZWN0KGEsYikpfWZ1bmN0aW9uIGQoYil7Znx8KGY9ITAscC5yZXNvbHZlKGEsYikpfWZ1bmN0aW9uIGUoKXtiKGQsYyl9dmFyIGY9ITEsZz1qKGUpO1wiZXJyb3JcIj09PWcuc3RhdHVzJiZjKGcudmFsdWUpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz17fTt0cnl7Yy52YWx1ZT1hKGIpLGMuc3RhdHVzPVwic3VjY2Vzc1wifWNhdGNoKGQpe2Muc3RhdHVzPVwiZXJyb3JcIixjLnZhbHVlPWR9cmV0dXJuIGN9ZnVuY3Rpb24gayhhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIHRoaXM/YTpwLnJlc29sdmUobmV3IHRoaXMoZCksYSl9ZnVuY3Rpb24gbChhKXt2YXIgYj1uZXcgdGhpcyhkKTtyZXR1cm4gcC5yZWplY3QoYixhKX1mdW5jdGlvbiBtKGEpe2Z1bmN0aW9uIGIoYSxiKXtmdW5jdGlvbiBkKGEpe2dbYl09YSwrK2ghPT1lfHxmfHwoZj0hMCxwLnJlc29sdmUoaixnKSl9Yy5yZXNvbHZlKGEpLnRoZW4oZCxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChqLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9bmV3IEFycmF5KGUpLGg9MCxpPS0xLGo9bmV3IHRoaXMoZCk7KytpPGU7KWIoYVtpXSxpKTtyZXR1cm4gan1mdW5jdGlvbiBuKGEpe2Z1bmN0aW9uIGIoYSl7Yy5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24oYSl7Znx8KGY9ITAscC5yZXNvbHZlKGgsYSkpfSxmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlamVjdChoLGEpKX0pfXZhciBjPXRoaXM7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKXJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwibXVzdCBiZSBhbiBhcnJheVwiKSk7dmFyIGU9YS5sZW5ndGgsZj0hMTtpZighZSlyZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtmb3IodmFyIGc9LTEsaD1uZXcgdGhpcyhkKTsrK2c8ZTspYihhW2ddKTtyZXR1cm4gaH12YXIgbz1hKFwiaW1tZWRpYXRlXCIpLHA9e30scT1bXCJSRUpFQ1RFRFwiXSxyPVtcIkZVTEZJTExFRFwiXSxzPVtcIlBFTkRJTkdcIl07Yi5leHBvcnRzPWUsZS5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9LGUucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhJiZ0aGlzLnN0YXRlPT09cnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYiYmdGhpcy5zdGF0ZT09PXEpcmV0dXJuIHRoaXM7dmFyIGM9bmV3IHRoaXMuY29uc3RydWN0b3IoZCk7aWYodGhpcy5zdGF0ZSE9PXMpe3ZhciBlPXRoaXMuc3RhdGU9PT1yP2E6YjtnKGMsZSx0aGlzLm91dGNvbWUpfWVsc2UgdGhpcy5xdWV1ZS5wdXNoKG5ldyBmKGMsYSxiKSk7cmV0dXJuIGN9LGYucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oYSl7cC5yZXNvbHZlKHRoaXMucHJvbWlzZSxhKX0sZi5wcm90b3R5cGUub3RoZXJDYWxsRnVsZmlsbGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25GdWxmaWxsZWQsYSl9LGYucHJvdG90eXBlLmNhbGxSZWplY3RlZD1mdW5jdGlvbihhKXtwLnJlamVjdCh0aGlzLnByb21pc2UsYSl9LGYucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkPWZ1bmN0aW9uKGEpe2codGhpcy5wcm9taXNlLHRoaXMub25SZWplY3RlZCxhKX0scC5yZXNvbHZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9aihoLGIpO2lmKFwiZXJyb3JcIj09PWMuc3RhdHVzKXJldHVybiBwLnJlamVjdChhLGMudmFsdWUpO3ZhciBkPWMudmFsdWU7aWYoZClpKGEsZCk7ZWxzZXthLnN0YXRlPXIsYS5vdXRjb21lPWI7Zm9yKHZhciBlPS0xLGY9YS5xdWV1ZS5sZW5ndGg7KytlPGY7KWEucXVldWVbZV0uY2FsbEZ1bGZpbGxlZChiKX1yZXR1cm4gYX0scC5yZWplY3Q9ZnVuY3Rpb24oYSxiKXthLnN0YXRlPXEsYS5vdXRjb21lPWI7Zm9yKHZhciBjPS0xLGQ9YS5xdWV1ZS5sZW5ndGg7KytjPGQ7KWEucXVldWVbY10uY2FsbFJlamVjdGVkKGIpO3JldHVybiBhfSxlLnJlc29sdmU9ayxlLnJlamVjdD1sLGUuYWxsPW0sZS5yYWNlPW59LHtpbW1lZGlhdGU6NTV9XSw1NzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL2xpYi91dGlscy9jb21tb25cIikuYXNzaWduLGU9YShcIi4vbGliL2RlZmxhdGVcIiksZj1hKFwiLi9saWIvaW5mbGF0ZVwiKSxnPWEoXCIuL2xpYi96bGliL2NvbnN0YW50c1wiKSxoPXt9O2QoaCxlLGYsZyksYi5leHBvcnRzPWh9LHtcIi4vbGliL2RlZmxhdGVcIjo1OCxcIi4vbGliL2luZmxhdGVcIjo1OSxcIi4vbGliL3V0aWxzL2NvbW1vblwiOjYwLFwiLi9saWIvemxpYi9jb25zdGFudHNcIjo2M31dLDU4OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSlyZXR1cm4gbmV3IGQoYSk7dGhpcy5vcHRpb25zPWkuYXNzaWduKHtsZXZlbDpzLG1ldGhvZDp1LGNodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjE1LG1lbUxldmVsOjgsc3RyYXRlZ3k6dCx0bzpcIlwifSxhfHx7fSk7dmFyIGI9dGhpcy5vcHRpb25zO2IucmF3JiZiLndpbmRvd0JpdHM+MD9iLndpbmRvd0JpdHM9LWIud2luZG93Qml0czpiLmd6aXAmJmIud2luZG93Qml0cz4wJiZiLndpbmRvd0JpdHM8MTYmJihiLndpbmRvd0JpdHMrPTE2KSx0aGlzLmVycj0wLHRoaXMubXNnPVwiXCIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IGwsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBjPWguZGVmbGF0ZUluaXQyKHRoaXMuc3RybSxiLmxldmVsLGIubWV0aG9kLGIud2luZG93Qml0cyxiLm1lbUxldmVsLGIuc3RyYXRlZ3kpO2lmKGMhPT1wKXRocm93IG5ldyBFcnJvcihrW2NdKTtpZihiLmhlYWRlciYmaC5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSxiLmhlYWRlciksYi5kaWN0aW9uYXJ5KXt2YXIgZTtpZihlPVwic3RyaW5nXCI9PXR5cGVvZiBiLmRpY3Rpb25hcnk/ai5zdHJpbmcyYnVmKGIuZGljdGlvbmFyeSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bS5jYWxsKGIuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkoYi5kaWN0aW9uYXJ5KTpiLmRpY3Rpb25hcnksYz1oLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxlKSxjIT09cCl0aHJvdyBuZXcgRXJyb3Ioa1tjXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz1uZXcgZChiKTtpZihjLnB1c2goYSwhMCksYy5lcnIpdGhyb3cgYy5tc2c7cmV0dXJuIGMucmVzdWx0fWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJhdz0hMCxlKGEsYil9ZnVuY3Rpb24gZyhhLGIpe3JldHVybiBiPWJ8fHt9LGIuZ3ppcD0hMCxlKGEsYil9dmFyIGg9YShcIi4vemxpYi9kZWZsYXRlXCIpLGk9YShcIi4vdXRpbHMvY29tbW9uXCIpLGo9YShcIi4vdXRpbHMvc3RyaW5nc1wiKSxrPWEoXCIuL3psaWIvbWVzc2FnZXNcIiksbD1hKFwiLi96bGliL3pzdHJlYW1cIiksbT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLG49MCxvPTQscD0wLHE9MSxyPTIscz0tMSx0PTAsdT04O2QucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5zdHJtLGY9dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtpZih0aGlzLmVuZGVkKXJldHVybiExO2Q9Yj09PX5+Yj9iOmI9PT0hMD9vOm4sXCJzdHJpbmdcIj09dHlwZW9mIGE/ZS5pbnB1dD1qLnN0cmluZzJidWYoYSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bS5jYWxsKGEpP2UuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoYSk6ZS5pbnB1dD1hLGUubmV4dF9pbj0wLGUuYXZhaWxfaW49ZS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PWUuYXZhaWxfb3V0JiYoZS5vdXRwdXQ9bmV3IGkuQnVmOChmKSxlLm5leHRfb3V0PTAsZS5hdmFpbF9vdXQ9ZiksYz1oLmRlZmxhdGUoZSxkKSxjIT09cSYmYyE9PXApcmV0dXJuIHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCwhMTswIT09ZS5hdmFpbF9vdXQmJigwIT09ZS5hdmFpbF9pbnx8ZCE9PW8mJmQhPT1yKXx8KFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5vbkRhdGEoai5idWYyYmluc3RyaW5nKGkuc2hyaW5rQnVmKGUub3V0cHV0LGUubmV4dF9vdXQpKSk6dGhpcy5vbkRhdGEoaS5zaHJpbmtCdWYoZS5vdXRwdXQsZS5uZXh0X291dCkpKX13aGlsZSgoZS5hdmFpbF9pbj4wfHwwPT09ZS5hdmFpbF9vdXQpJiZjIT09cSk7cmV0dXJuIGQ9PT1vPyhjPWguZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCxjPT09cCk6ZCE9PXJ8fCh0aGlzLm9uRW5kKHApLGUuYXZhaWxfb3V0PTAsITApfSxkLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaHVua3MucHVzaChhKX0sZC5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oYSl7YT09PXAmJihcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvP3RoaXMucmVzdWx0PXRoaXMuY2h1bmtzLmpvaW4oXCJcIik6dGhpcy5yZXN1bHQ9aS5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9YSx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfSxjLkRlZmxhdGU9ZCxjLmRlZmxhdGU9ZSxjLmRlZmxhdGVSYXc9ZixjLmd6aXA9Z30se1wiLi91dGlscy9jb21tb25cIjo2MCxcIi4vdXRpbHMvc3RyaW5nc1wiOjYxLFwiLi96bGliL2RlZmxhdGVcIjo2NSxcIi4vemxpYi9tZXNzYWdlc1wiOjcwLFwiLi96bGliL3pzdHJlYW1cIjo3Mn1dLDU5OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSlyZXR1cm4gbmV3IGQoYSk7dGhpcy5vcHRpb25zPWguYXNzaWduKHtjaHVua1NpemU6MTYzODQsd2luZG93Qml0czowLHRvOlwiXCJ9LGF8fHt9KTt2YXIgYj10aGlzLm9wdGlvbnM7Yi5yYXcmJmIud2luZG93Qml0cz49MCYmYi53aW5kb3dCaXRzPDE2JiYoYi53aW5kb3dCaXRzPS1iLndpbmRvd0JpdHMsMD09PWIud2luZG93Qml0cyYmKGIud2luZG93Qml0cz0tMTUpKSwhKGIud2luZG93Qml0cz49MCYmYi53aW5kb3dCaXRzPDE2KXx8YSYmYS53aW5kb3dCaXRzfHwoYi53aW5kb3dCaXRzKz0zMiksYi53aW5kb3dCaXRzPjE1JiZiLndpbmRvd0JpdHM8NDgmJjA9PT0oMTUmYi53aW5kb3dCaXRzKSYmKGIud2luZG93Qml0c3w9MTUpLHRoaXMuZXJyPTAsdGhpcy5tc2c9XCJcIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgbCx0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIGM9Zy5pbmZsYXRlSW5pdDIodGhpcy5zdHJtLGIud2luZG93Qml0cyk7aWYoYyE9PWouWl9PSyl0aHJvdyBuZXcgRXJyb3Ioa1tjXSk7dGhpcy5oZWFkZXI9bmV3IG0sZy5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSx0aGlzLmhlYWRlcil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPW5ldyBkKGIpO2lmKGMucHVzaChhLCEwKSxjLmVycil0aHJvdyBjLm1zZztyZXR1cm4gYy5yZXN1bHR9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBiPWJ8fHt9LGIucmF3PSEwLGUoYSxiKX12YXIgZz1hKFwiLi96bGliL2luZmxhdGVcIiksaD1hKFwiLi91dGlscy9jb21tb25cIiksaT1hKFwiLi91dGlscy9zdHJpbmdzXCIpLGo9YShcIi4vemxpYi9jb25zdGFudHNcIiksaz1hKFwiLi96bGliL21lc3NhZ2VzXCIpLGw9YShcIi4vemxpYi96c3RyZWFtXCIpLG09YShcIi4vemxpYi9nemhlYWRlclwiKSxuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGssbCxtPXRoaXMuc3RybSxvPXRoaXMub3B0aW9ucy5jaHVua1NpemUscD10aGlzLm9wdGlvbnMuZGljdGlvbmFyeSxxPSExO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7ZD1iPT09fn5iP2I6Yj09PSEwP2ouWl9GSU5JU0g6ai5aX05PX0ZMVVNILFwic3RyaW5nXCI9PXR5cGVvZiBhP20uaW5wdXQ9aS5iaW5zdHJpbmcyYnVmKGEpOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PW4uY2FsbChhKT9tLmlucHV0PW5ldyBVaW50OEFycmF5KGEpOm0uaW5wdXQ9YSxtLm5leHRfaW49MCxtLmF2YWlsX2luPW0uaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1tLmF2YWlsX291dCYmKG0ub3V0cHV0PW5ldyBoLkJ1ZjgobyksbS5uZXh0X291dD0wLG0uYXZhaWxfb3V0PW8pLGM9Zy5pbmZsYXRlKG0sai5aX05PX0ZMVVNIKSxjPT09ai5aX05FRURfRElDVCYmcCYmKGw9XCJzdHJpbmdcIj09dHlwZW9mIHA/aS5zdHJpbmcyYnVmKHApOlwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PW4uY2FsbChwKT9uZXcgVWludDhBcnJheShwKTpwLGM9Zy5pbmZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sbCkpLGM9PT1qLlpfQlVGX0VSUk9SJiZxPT09ITAmJihjPWouWl9PSyxxPSExKSxjIT09ai5aX1NUUkVBTV9FTkQmJmMhPT1qLlpfT0spcmV0dXJuIHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCwhMTttLm5leHRfb3V0JiYoMCE9PW0uYXZhaWxfb3V0JiZjIT09ai5aX1NUUkVBTV9FTkQmJigwIT09bS5hdmFpbF9pbnx8ZCE9PWouWl9GSU5JU0gmJmQhPT1qLlpfU1lOQ19GTFVTSCl8fChcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvPyhlPWkudXRmOGJvcmRlcihtLm91dHB1dCxtLm5leHRfb3V0KSxmPW0ubmV4dF9vdXQtZSxrPWkuYnVmMnN0cmluZyhtLm91dHB1dCxlKSxtLm5leHRfb3V0PWYsbS5hdmFpbF9vdXQ9by1mLGYmJmguYXJyYXlTZXQobS5vdXRwdXQsbS5vdXRwdXQsZSxmLDApLHRoaXMub25EYXRhKGspKTp0aGlzLm9uRGF0YShoLnNocmlua0J1ZihtLm91dHB1dCxtLm5leHRfb3V0KSkpKSwwPT09bS5hdmFpbF9pbiYmMD09PW0uYXZhaWxfb3V0JiYocT0hMCl9d2hpbGUoKG0uYXZhaWxfaW4+MHx8MD09PW0uYXZhaWxfb3V0KSYmYyE9PWouWl9TVFJFQU1fRU5EKTtyZXR1cm4gYz09PWouWl9TVFJFQU1fRU5EJiYoZD1qLlpfRklOSVNIKSxkPT09ai5aX0ZJTklTSD8oYz1nLmluZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKGMpLHRoaXMuZW5kZWQ9ITAsYz09PWouWl9PSyk6ZCE9PWouWl9TWU5DX0ZMVVNIfHwodGhpcy5vbkVuZChqLlpfT0spLG0uYXZhaWxfb3V0PTAsITApfSxkLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaHVua3MucHVzaChhKX0sZC5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oYSl7YT09PWouWl9PSyYmKFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbihcIlwiKTp0aGlzLnJlc3VsdD1oLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj1hLHRoaXMubXNnPXRoaXMuc3RybS5tc2d9LGMuSW5mbGF0ZT1kLGMuaW5mbGF0ZT1lLGMuaW5mbGF0ZVJhdz1mLGMudW5nemlwPWV9LHtcIi4vdXRpbHMvY29tbW9uXCI6NjAsXCIuL3V0aWxzL3N0cmluZ3NcIjo2MSxcIi4vemxpYi9jb25zdGFudHNcIjo2MyxcIi4vemxpYi9nemhlYWRlclwiOjY2LFwiLi96bGliL2luZmxhdGVcIjo2OCxcIi4vemxpYi9tZXNzYWdlc1wiOjcwLFwiLi96bGliL3pzdHJlYW1cIjo3Mn1dLDYwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEludDMyQXJyYXk7Yy5hc3NpZ249ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtiLmxlbmd0aDspe3ZhciBjPWIuc2hpZnQoKTtpZihjKXtpZihcIm9iamVjdFwiIT10eXBlb2YgYyl0aHJvdyBuZXcgVHlwZUVycm9yKGMrXCJtdXN0IGJlIG5vbi1vYmplY3RcIik7Zm9yKHZhciBkIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShkKSYmKGFbZF09Y1tkXSl9fXJldHVybiBhfSxjLnNocmlua0J1Zj1mdW5jdGlvbihhLGIpe3JldHVybiBhLmxlbmd0aD09PWI/YTphLnN1YmFycmF5P2Euc3ViYXJyYXkoMCxiKTooYS5sZW5ndGg9YixhKX07dmFyIGU9e2FycmF5U2V0OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoYi5zdWJhcnJheSYmYS5zdWJhcnJheSlyZXR1cm4gdm9pZCBhLnNldChiLnN1YmFycmF5KGMsYytkKSxlKTtmb3IodmFyIGY9MDtmPGQ7ZisrKWFbZStmXT1iW2MrZl19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnO2ZvcihkPTAsYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylkKz1hW2JdLmxlbmd0aDtmb3IoZz1uZXcgVWludDhBcnJheShkKSxlPTAsYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylmPWFbYl0sZy5zZXQoZixlKSxlKz1mLmxlbmd0aDtyZXR1cm4gZ319LGY9e2FycmF5U2V0OmZ1bmN0aW9uKGEsYixjLGQsZSl7Zm9yKHZhciBmPTA7ZjxkO2YrKylhW2UrZl09YltjK2ZdfSxmbGF0dGVuQ2h1bmtzOmZ1bmN0aW9uKGEpe3JldHVybltdLmNvbmNhdC5hcHBseShbXSxhKX19O2Muc2V0VHlwZWQ9ZnVuY3Rpb24oYSl7YT8oYy5CdWY4PVVpbnQ4QXJyYXksYy5CdWYxNj1VaW50MTZBcnJheSxjLkJ1ZjMyPUludDMyQXJyYXksYy5hc3NpZ24oYyxlKSk6KGMuQnVmOD1BcnJheSxjLkJ1ZjE2PUFycmF5LGMuQnVmMzI9QXJyYXksYy5hc3NpZ24oYyxmKSl9LGMuc2V0VHlwZWQoZCl9LHt9XSw2MTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtpZihiPDY1NTM3JiYoYS5zdWJhcnJheSYmZ3x8IWEuc3ViYXJyYXkmJmYpKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZS5zaHJpbmtCdWYoYSxiKSk7Zm9yKHZhciBjPVwiXCIsZD0wO2Q8YjtkKyspYys9U3RyaW5nLmZyb21DaGFyQ29kZShhW2RdKTtyZXR1cm4gY312YXIgZT1hKFwiLi9jb21tb25cIiksZj0hMCxnPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsWzBdKX1jYXRjaChoKXtmPSExfXRyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKGgpe2c9ITF9Zm9yKHZhciBpPW5ldyBlLkJ1ZjgoMjU2KSxqPTA7ajwyNTY7aisrKWlbal09aj49MjUyPzY6aj49MjQ4PzU6aj49MjQwPzQ6aj49MjI0PzM6aj49MTkyPzI6MTtpWzI1NF09aVsyNTRdPTEsYy5zdHJpbmcyYnVmPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxmLGcsaD1hLmxlbmd0aCxpPTA7Zm9yKGY9MDtmPGg7ZisrKWM9YS5jaGFyQ29kZUF0KGYpLDU1Mjk2PT09KDY0NTEyJmMpJiZmKzE8aCYmKGQ9YS5jaGFyQ29kZUF0KGYrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGYrKykpLGkrPWM8MTI4PzE6YzwyMDQ4PzI6Yzw2NTUzNj8zOjQ7Zm9yKGI9bmV3IGUuQnVmOChpKSxnPTAsZj0wO2c8aTtmKyspYz1hLmNoYXJDb2RlQXQoZiksNTUyOTY9PT0oNjQ1MTImYykmJmYrMTxoJiYoZD1hLmNoYXJDb2RlQXQoZisxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZisrKSksYzwxMjg/YltnKytdPWM6YzwyMDQ4PyhiW2crK109MTkyfGM+Pj42LGJbZysrXT0xMjh8NjMmYyk6Yzw2NTUzNj8oYltnKytdPTIyNHxjPj4+MTIsYltnKytdPTEyOHxjPj4+NiY2MyxiW2crK109MTI4fDYzJmMpOihiW2crK109MjQwfGM+Pj4xOCxiW2crK109MTI4fGM+Pj4xMiY2MyxiW2crK109MTI4fGM+Pj42JjYzLGJbZysrXT0xMjh8NjMmYyk7cmV0dXJuIGJ9LGMuYnVmMmJpbnN0cmluZz1mdW5jdGlvbihhKXtyZXR1cm4gZChhLGEubGVuZ3RoKX0sYy5iaW5zdHJpbmcyYnVmPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgZS5CdWY4KGEubGVuZ3RoKSxjPTAsZD1iLmxlbmd0aDtjPGQ7YysrKWJbY109YS5jaGFyQ29kZUF0KGMpO3JldHVybiBifSxjLmJ1ZjJzdHJpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoPWJ8fGEubGVuZ3RoLGo9bmV3IEFycmF5KDIqaCk7Zm9yKGU9MCxjPTA7YzxoOylpZihmPWFbYysrXSxmPDEyOClqW2UrK109ZjtlbHNlIGlmKGc9aVtmXSxnPjQpaltlKytdPTY1NTMzLGMrPWctMTtlbHNle2ZvcihmJj0yPT09Zz8zMTozPT09Zz8xNTo3O2c+MSYmYzxoOylmPWY8PDZ8NjMmYVtjKytdLGctLTtnPjE/altlKytdPTY1NTMzOmY8NjU1MzY/altlKytdPWY6KGYtPTY1NTM2LGpbZSsrXT01NTI5NnxmPj4xMCYxMDIzLGpbZSsrXT01NjMyMHwxMDIzJmYpfXJldHVybiBkKGosZSl9LGMudXRmOGJvcmRlcj1mdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihiPWJ8fGEubGVuZ3RoLGI+YS5sZW5ndGgmJihiPWEubGVuZ3RoKSxjPWItMTtjPj0wJiYxMjg9PT0oMTkyJmFbY10pOyljLS07cmV0dXJuIGM8MD9iOjA9PT1jP2I6YytpW2FbY11dPmI/YzpifX0se1wiLi9jb21tb25cIjo2MH1dLDYyOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyxkKXtmb3IodmFyIGU9NjU1MzUmYXwwLGY9YT4+PjE2JjY1NTM1fDAsZz0wOzAhPT1jOyl7Zz1jPjJlMz8yZTM6YyxjLT1nO2RvIGU9ZStiW2QrK118MCxmPWYrZXwwO3doaWxlKC0tZyk7ZSU9NjU1MjEsZiU9NjU1MjF9cmV0dXJuIGV8Zjw8MTZ8MH1iLmV4cG9ydHM9ZH0se31dLDYzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yi5leHBvcnRzPXtaX05PX0ZMVVNIOjAsWl9QQVJUSUFMX0ZMVVNIOjEsWl9TWU5DX0ZMVVNIOjIsWl9GVUxMX0ZMVVNIOjMsWl9GSU5JU0g6NCxaX0JMT0NLOjUsWl9UUkVFUzo2LFpfT0s6MCxaX1NUUkVBTV9FTkQ6MSxaX05FRURfRElDVDoyLFpfRVJSTk86LTEsWl9TVFJFQU1fRVJST1I6LTIsWl9EQVRBX0VSUk9SOi0zLFpfQlVGX0VSUk9SOi01LFpfTk9fQ09NUFJFU1NJT046MCxaX0JFU1RfU1BFRUQ6MSxaX0JFU1RfQ09NUFJFU1NJT046OSxaX0RFRkFVTFRfQ09NUFJFU1NJT046LTEsWl9GSUxURVJFRDoxLFpfSFVGRk1BTl9PTkxZOjIsWl9STEU6MyxaX0ZJWEVEOjQsWl9ERUZBVUxUX1NUUkFURUdZOjAsWl9CSU5BUlk6MCxaX1RFWFQ6MSxaX1VOS05PV046MixaX0RFRkxBVEVEOjh9fSx7fV0sNjQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7Zm9yKHZhciBhLGI9W10sYz0wO2M8MjU2O2MrKyl7YT1jO2Zvcih2YXIgZD0wO2Q8ODtkKyspYT0xJmE/Mzk4ODI5MjM4NF5hPj4+MTphPj4+MTtiW2NdPWF9cmV0dXJuIGJ9ZnVuY3Rpb24gZShhLGIsYyxkKXt2YXIgZT1mLGc9ZCtjO2FePS0xO2Zvcih2YXIgaD1kO2g8ZztoKyspYT1hPj4+OF5lWzI1NSYoYV5iW2hdKV07cmV0dXJuIGFeLTF9dmFyIGY9ZCgpO2IuZXhwb3J0cz1lfSx7fV0sNjU6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7cmV0dXJuIGEubXNnPUlbYl0sYn1mdW5jdGlvbiBlKGEpe3JldHVybihhPDwxKS0oYT40Pzk6MCl9ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9YS5sZW5ndGg7LS1iPj0wOylhW2JdPTB9ZnVuY3Rpb24gZyhhKXt2YXIgYj1hLnN0YXRlLGM9Yi5wZW5kaW5nO2M+YS5hdmFpbF9vdXQmJihjPWEuYXZhaWxfb3V0KSwwIT09YyYmKEUuYXJyYXlTZXQoYS5vdXRwdXQsYi5wZW5kaW5nX2J1ZixiLnBlbmRpbmdfb3V0LGMsYS5uZXh0X291dCksYS5uZXh0X291dCs9YyxiLnBlbmRpbmdfb3V0Kz1jLGEudG90YWxfb3V0Kz1jLGEuYXZhaWxfb3V0LT1jLGIucGVuZGluZy09YywwPT09Yi5wZW5kaW5nJiYoYi5wZW5kaW5nX291dD0wKSl9ZnVuY3Rpb24gaChhLGIpe0YuX3RyX2ZsdXNoX2Jsb2NrKGEsYS5ibG9ja19zdGFydD49MD9hLmJsb2NrX3N0YXJ0Oi0xLGEuc3Ryc3RhcnQtYS5ibG9ja19zdGFydCxiKSxhLmJsb2NrX3N0YXJ0PWEuc3Ryc3RhcnQsZyhhLnN0cm0pfWZ1bmN0aW9uIGkoYSxiKXthLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT1ifWZ1bmN0aW9uIGooYSxiKXthLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT1iPj4+OCYyNTUsYS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109MjU1JmJ9ZnVuY3Rpb24gayhhLGIsYyxkKXt2YXIgZT1hLmF2YWlsX2luO3JldHVybiBlPmQmJihlPWQpLDA9PT1lPzA6KGEuYXZhaWxfaW4tPWUsRS5hcnJheVNldChiLGEuaW5wdXQsYS5uZXh0X2luLGUsYyksMT09PWEuc3RhdGUud3JhcD9hLmFkbGVyPUcoYS5hZGxlcixiLGUsYyk6Mj09PWEuc3RhdGUud3JhcCYmKGEuYWRsZXI9SChhLmFkbGVyLGIsZSxjKSksYS5uZXh0X2luKz1lLGEudG90YWxfaW4rPWUsXHJcbmUpfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYyxkLGU9YS5tYXhfY2hhaW5fbGVuZ3RoLGY9YS5zdHJzdGFydCxnPWEucHJldl9sZW5ndGgsaD1hLm5pY2VfbWF0Y2gsaT1hLnN0cnN0YXJ0PmEud19zaXplLWxhP2Euc3Ryc3RhcnQtKGEud19zaXplLWxhKTowLGo9YS53aW5kb3csaz1hLndfbWFzayxsPWEucHJldixtPWEuc3Ryc3RhcnQra2Esbj1qW2YrZy0xXSxvPWpbZitnXTthLnByZXZfbGVuZ3RoPj1hLmdvb2RfbWF0Y2gmJihlPj49MiksaD5hLmxvb2thaGVhZCYmKGg9YS5sb29rYWhlYWQpO2RvIGlmKGM9YixqW2MrZ109PT1vJiZqW2MrZy0xXT09PW4mJmpbY109PT1qW2ZdJiZqWysrY109PT1qW2YrMV0pe2YrPTIsYysrO2RvO3doaWxlKGpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZmPG0pO2lmKGQ9a2EtKG0tZiksZj1tLWthLGQ+Zyl7aWYoYS5tYXRjaF9zdGFydD1iLGc9ZCxkPj1oKWJyZWFrO249altmK2ctMV0sbz1qW2YrZ119fXdoaWxlKChiPWxbYiZrXSk+aSYmMCE9PS0tZSk7cmV0dXJuIGc8PWEubG9va2FoZWFkP2c6YS5sb29rYWhlYWR9ZnVuY3Rpb24gbShhKXt2YXIgYixjLGQsZSxmLGc9YS53X3NpemU7ZG97aWYoZT1hLndpbmRvd19zaXplLWEubG9va2FoZWFkLWEuc3Ryc3RhcnQsYS5zdHJzdGFydD49ZysoZy1sYSkpe0UuYXJyYXlTZXQoYS53aW5kb3csYS53aW5kb3csZyxnLDApLGEubWF0Y2hfc3RhcnQtPWcsYS5zdHJzdGFydC09ZyxhLmJsb2NrX3N0YXJ0LT1nLGM9YS5oYXNoX3NpemUsYj1jO2RvIGQ9YS5oZWFkWy0tYl0sYS5oZWFkW2JdPWQ+PWc/ZC1nOjA7d2hpbGUoLS1jKTtjPWcsYj1jO2RvIGQ9YS5wcmV2Wy0tYl0sYS5wcmV2W2JdPWQ+PWc/ZC1nOjA7d2hpbGUoLS1jKTtlKz1nfWlmKDA9PT1hLnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYoYz1rKGEuc3RybSxhLndpbmRvdyxhLnN0cnN0YXJ0K2EubG9va2FoZWFkLGUpLGEubG9va2FoZWFkKz1jLGEubG9va2FoZWFkK2EuaW5zZXJ0Pj1qYSlmb3IoZj1hLnN0cnN0YXJ0LWEuaW5zZXJ0LGEuaW5zX2g9YS53aW5kb3dbZl0sYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2YrMV0pJmEuaGFzaF9tYXNrO2EuaW5zZXJ0JiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2YramEtMV0pJmEuaGFzaF9tYXNrLGEucHJldltmJmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWYsZisrLGEuaW5zZXJ0LS0sIShhLmxvb2thaGVhZCthLmluc2VydDxqYSkpOyk7fXdoaWxlKGEubG9va2FoZWFkPGxhJiYwIT09YS5zdHJtLmF2YWlsX2luKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9NjU1MzU7Zm9yKGM+YS5wZW5kaW5nX2J1Zl9zaXplLTUmJihjPWEucGVuZGluZ19idWZfc2l6ZS01KTs7KXtpZihhLmxvb2thaGVhZDw9MSl7aWYobShhKSwwPT09YS5sb29rYWhlYWQmJmI9PT1KKXJldHVybiB1YTtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9YS5zdHJzdGFydCs9YS5sb29rYWhlYWQsYS5sb29rYWhlYWQ9MDt2YXIgZD1hLmJsb2NrX3N0YXJ0K2M7aWYoKDA9PT1hLnN0cnN0YXJ0fHxhLnN0cnN0YXJ0Pj1kKSYmKGEubG9va2FoZWFkPWEuc3Ryc3RhcnQtZCxhLnN0cnN0YXJ0PWQsaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhO2lmKGEuc3Ryc3RhcnQtYS5ibG9ja19zdGFydD49YS53X3NpemUtbGEmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWF9cmV0dXJuIGEuaW5zZXJ0PTAsYj09PU0/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/d2E6eGEpOmEuc3Ryc3RhcnQ+YS5ibG9ja19zdGFydCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3VhOnVhfWZ1bmN0aW9uIG8oYSxiKXtmb3IodmFyIGMsZDs7KXtpZihhLmxvb2thaGVhZDxsYSl7aWYobShhKSxhLmxvb2thaGVhZDxsYSYmYj09PUopcmV0dXJuIHVhO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31pZihjPTAsYS5sb29rYWhlYWQ+PWphJiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQramEtMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydCksMCE9PWMmJmEuc3Ryc3RhcnQtYzw9YS53X3NpemUtbGEmJihhLm1hdGNoX2xlbmd0aD1sKGEsYykpLGEubWF0Y2hfbGVuZ3RoPj1qYSlpZihkPUYuX3RyX3RhbGx5KGEsYS5zdHJzdGFydC1hLm1hdGNoX3N0YXJ0LGEubWF0Y2hfbGVuZ3RoLWphKSxhLmxvb2thaGVhZC09YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg8PWEubWF4X2xhenlfbWF0Y2gmJmEubG9va2FoZWFkPj1qYSl7YS5tYXRjaF9sZW5ndGgtLTtkbyBhLnN0cnN0YXJ0KyssYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQramEtMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydDt3aGlsZSgwIT09LS1hLm1hdGNoX2xlbmd0aCk7YS5zdHJzdGFydCsrfWVsc2UgYS5zdHJzdGFydCs9YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg9MCxhLmluc19oPWEud2luZG93W2Euc3Ryc3RhcnRdLGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0KzFdKSZhLmhhc2hfbWFzaztlbHNlIGQ9Ri5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnRdKSxhLmxvb2thaGVhZC0tLGEuc3Ryc3RhcnQrKztpZihkJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhfXJldHVybiBhLmluc2VydD1hLnN0cnN0YXJ0PGphLTE/YS5zdHJzdGFydDpqYS0xLGI9PT1NPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3dhOnhhKTphLmxhc3RfbGl0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/dWE6dmF9ZnVuY3Rpb24gcChhLGIpe2Zvcih2YXIgYyxkLGU7Oyl7aWYoYS5sb29rYWhlYWQ8bGEpe2lmKG0oYSksYS5sb29rYWhlYWQ8bGEmJmI9PT1KKXJldHVybiB1YTtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9aWYoYz0wLGEubG9va2FoZWFkPj1qYSYmKGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0K2phLTFdKSZhLmhhc2hfbWFzayxjPWEucHJldlthLnN0cnN0YXJ0JmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWEuc3Ryc3RhcnQpLGEucHJldl9sZW5ndGg9YS5tYXRjaF9sZW5ndGgsYS5wcmV2X21hdGNoPWEubWF0Y2hfc3RhcnQsYS5tYXRjaF9sZW5ndGg9amEtMSwwIT09YyYmYS5wcmV2X2xlbmd0aDxhLm1heF9sYXp5X21hdGNoJiZhLnN0cnN0YXJ0LWM8PWEud19zaXplLWxhJiYoYS5tYXRjaF9sZW5ndGg9bChhLGMpLGEubWF0Y2hfbGVuZ3RoPD01JiYoYS5zdHJhdGVneT09PVV8fGEubWF0Y2hfbGVuZ3RoPT09amEmJmEuc3Ryc3RhcnQtYS5tYXRjaF9zdGFydD40MDk2KSYmKGEubWF0Y2hfbGVuZ3RoPWphLTEpKSxhLnByZXZfbGVuZ3RoPj1qYSYmYS5tYXRjaF9sZW5ndGg8PWEucHJldl9sZW5ndGgpe2U9YS5zdHJzdGFydCthLmxvb2thaGVhZC1qYSxkPUYuX3RyX3RhbGx5KGEsYS5zdHJzdGFydC0xLWEucHJldl9tYXRjaCxhLnByZXZfbGVuZ3RoLWphKSxhLmxvb2thaGVhZC09YS5wcmV2X2xlbmd0aC0xLGEucHJldl9sZW5ndGgtPTI7ZG8rK2Euc3Ryc3RhcnQ8PWUmJihhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCtqYS0xXSkmYS5oYXNoX21hc2ssYz1hLnByZXZbYS5zdHJzdGFydCZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1hLnN0cnN0YXJ0KTt3aGlsZSgwIT09LS1hLnByZXZfbGVuZ3RoKTtpZihhLm1hdGNoX2F2YWlsYWJsZT0wLGEubWF0Y2hfbGVuZ3RoPWphLTEsYS5zdHJzdGFydCsrLGQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWF9ZWxzZSBpZihhLm1hdGNoX2F2YWlsYWJsZSl7aWYoZD1GLl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydC0xXSksZCYmaChhLCExKSxhLnN0cnN0YXJ0KyssYS5sb29rYWhlYWQtLSwwPT09YS5zdHJtLmF2YWlsX291dClyZXR1cm4gdWF9ZWxzZSBhLm1hdGNoX2F2YWlsYWJsZT0xLGEuc3Ryc3RhcnQrKyxhLmxvb2thaGVhZC0tfXJldHVybiBhLm1hdGNoX2F2YWlsYWJsZSYmKGQ9Ri5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnQtMV0pLGEubWF0Y2hfYXZhaWxhYmxlPTApLGEuaW5zZXJ0PWEuc3Ryc3RhcnQ8amEtMT9hLnN0cnN0YXJ0OmphLTEsYj09PU0/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/d2E6eGEpOmEubGFzdF9saXQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT91YTp2YX1mdW5jdGlvbiBxKGEsYil7Zm9yKHZhciBjLGQsZSxmLGc9YS53aW5kb3c7Oyl7aWYoYS5sb29rYWhlYWQ8PWthKXtpZihtKGEpLGEubG9va2FoZWFkPD1rYSYmYj09PUopcmV0dXJuIHVhO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31pZihhLm1hdGNoX2xlbmd0aD0wLGEubG9va2FoZWFkPj1qYSYmYS5zdHJzdGFydD4wJiYoZT1hLnN0cnN0YXJ0LTEsZD1nW2VdLGQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0pKXtmPWEuc3Ryc3RhcnQra2E7ZG87d2hpbGUoZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZTxmKTthLm1hdGNoX2xlbmd0aD1rYS0oZi1lKSxhLm1hdGNoX2xlbmd0aD5hLmxvb2thaGVhZCYmKGEubWF0Y2hfbGVuZ3RoPWEubG9va2FoZWFkKX1pZihhLm1hdGNoX2xlbmd0aD49amE/KGM9Ri5fdHJfdGFsbHkoYSwxLGEubWF0Y2hfbGVuZ3RoLWphKSxhLmxvb2thaGVhZC09YS5tYXRjaF9sZW5ndGgsYS5zdHJzdGFydCs9YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg9MCk6KGM9Ri5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnRdKSxhLmxvb2thaGVhZC0tLGEuc3Ryc3RhcnQrKyksYyYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YX1yZXR1cm4gYS5pbnNlcnQ9MCxiPT09TT8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD93YTp4YSk6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3VhOnZhfWZ1bmN0aW9uIHIoYSxiKXtmb3IodmFyIGM7Oyl7aWYoMD09PWEubG9va2FoZWFkJiYobShhKSwwPT09YS5sb29rYWhlYWQpKXtpZihiPT09SilyZXR1cm4gdWE7YnJlYWt9aWYoYS5tYXRjaF9sZW5ndGg9MCxjPUYuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0XSksYS5sb29rYWhlYWQtLSxhLnN0cnN0YXJ0KyssYyYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YX1yZXR1cm4gYS5pbnNlcnQ9MCxiPT09TT8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD93YTp4YSk6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3VhOnZhfWZ1bmN0aW9uIHMoYSxiLGMsZCxlKXt0aGlzLmdvb2RfbGVuZ3RoPWEsdGhpcy5tYXhfbGF6eT1iLHRoaXMubmljZV9sZW5ndGg9Yyx0aGlzLm1heF9jaGFpbj1kLHRoaXMuZnVuYz1lfWZ1bmN0aW9uIHQoYSl7YS53aW5kb3dfc2l6ZT0yKmEud19zaXplLGYoYS5oZWFkKSxhLm1heF9sYXp5X21hdGNoPURbYS5sZXZlbF0ubWF4X2xhenksYS5nb29kX21hdGNoPURbYS5sZXZlbF0uZ29vZF9sZW5ndGgsYS5uaWNlX21hdGNoPURbYS5sZXZlbF0ubmljZV9sZW5ndGgsYS5tYXhfY2hhaW5fbGVuZ3RoPURbYS5sZXZlbF0ubWF4X2NoYWluLGEuc3Ryc3RhcnQ9MCxhLmJsb2NrX3N0YXJ0PTAsYS5sb29rYWhlYWQ9MCxhLmluc2VydD0wLGEubWF0Y2hfbGVuZ3RoPWEucHJldl9sZW5ndGg9amEtMSxhLm1hdGNoX2F2YWlsYWJsZT0wLGEuaW5zX2g9MH1mdW5jdGlvbiB1KCl7dGhpcy5zdHJtPW51bGwsdGhpcy5zdGF0dXM9MCx0aGlzLnBlbmRpbmdfYnVmPW51bGwsdGhpcy5wZW5kaW5nX2J1Zl9zaXplPTAsdGhpcy5wZW5kaW5nX291dD0wLHRoaXMucGVuZGluZz0wLHRoaXMud3JhcD0wLHRoaXMuZ3poZWFkPW51bGwsdGhpcy5nemluZGV4PTAsdGhpcy5tZXRob2Q9JCx0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgRS5CdWYxNigyKmhhKSx0aGlzLmR5bl9kdHJlZT1uZXcgRS5CdWYxNigyKigyKmZhKzEpKSx0aGlzLmJsX3RyZWU9bmV3IEUuQnVmMTYoMiooMipnYSsxKSksZih0aGlzLmR5bl9sdHJlZSksZih0aGlzLmR5bl9kdHJlZSksZih0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBFLkJ1ZjE2KGlhKzEpLHRoaXMuaGVhcD1uZXcgRS5CdWYxNigyKmVhKzEpLGYodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IEUuQnVmMTYoMiplYSsxKSxmKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfWZ1bmN0aW9uIHYoYSl7dmFyIGI7cmV0dXJuIGEmJmEuc3RhdGU/KGEudG90YWxfaW49YS50b3RhbF9vdXQ9MCxhLmRhdGFfdHlwZT1aLGI9YS5zdGF0ZSxiLnBlbmRpbmc9MCxiLnBlbmRpbmdfb3V0PTAsYi53cmFwPDAmJihiLndyYXA9LWIud3JhcCksYi5zdGF0dXM9Yi53cmFwP25hOnNhLGEuYWRsZXI9Mj09PWIud3JhcD8wOjEsYi5sYXN0X2ZsdXNoPUosRi5fdHJfaW5pdChiKSxPKTpkKGEsUSl9ZnVuY3Rpb24gdyhhKXt2YXIgYj12KGEpO3JldHVybiBiPT09TyYmdChhLnN0YXRlKSxifWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gYSYmYS5zdGF0ZT8yIT09YS5zdGF0ZS53cmFwP1E6KGEuc3RhdGUuZ3poZWFkPWIsTyk6UX1mdW5jdGlvbiB5KGEsYixjLGUsZixnKXtpZighYSlyZXR1cm4gUTt2YXIgaD0xO2lmKGI9PT1UJiYoYj02KSxlPDA/KGg9MCxlPS1lKTplPjE1JiYoaD0yLGUtPTE2KSxmPDF8fGY+X3x8YyE9PSR8fGU8OHx8ZT4xNXx8YjwwfHxiPjl8fGc8MHx8Zz5YKXJldHVybiBkKGEsUSk7OD09PWUmJihlPTkpO3ZhciBpPW5ldyB1O3JldHVybiBhLnN0YXRlPWksaS5zdHJtPWEsaS53cmFwPWgsaS5nemhlYWQ9bnVsbCxpLndfYml0cz1lLGkud19zaXplPTE8PGkud19iaXRzLGkud19tYXNrPWkud19zaXplLTEsaS5oYXNoX2JpdHM9Zis3LGkuaGFzaF9zaXplPTE8PGkuaGFzaF9iaXRzLGkuaGFzaF9tYXNrPWkuaGFzaF9zaXplLTEsaS5oYXNoX3NoaWZ0PX5+KChpLmhhc2hfYml0cytqYS0xKS9qYSksaS53aW5kb3c9bmV3IEUuQnVmOCgyKmkud19zaXplKSxpLmhlYWQ9bmV3IEUuQnVmMTYoaS5oYXNoX3NpemUpLGkucHJldj1uZXcgRS5CdWYxNihpLndfc2l6ZSksaS5saXRfYnVmc2l6ZT0xPDxmKzYsaS5wZW5kaW5nX2J1Zl9zaXplPTQqaS5saXRfYnVmc2l6ZSxpLnBlbmRpbmdfYnVmPW5ldyBFLkJ1ZjgoaS5wZW5kaW5nX2J1Zl9zaXplKSxpLmRfYnVmPTEqaS5saXRfYnVmc2l6ZSxpLmxfYnVmPTMqaS5saXRfYnVmc2l6ZSxpLmxldmVsPWIsaS5zdHJhdGVneT1nLGkubWV0aG9kPWMsdyhhKX1mdW5jdGlvbiB6KGEsYil7cmV0dXJuIHkoYSxiLCQsYWEsYmEsWSl9ZnVuY3Rpb24gQShhLGIpe3ZhciBjLGgsayxsO2lmKCFhfHwhYS5zdGF0ZXx8Yj5OfHxiPDApcmV0dXJuIGE/ZChhLFEpOlE7aWYoaD1hLnN0YXRlLCFhLm91dHB1dHx8IWEuaW5wdXQmJjAhPT1hLmF2YWlsX2lufHxoLnN0YXR1cz09PXRhJiZiIT09TSlyZXR1cm4gZChhLDA9PT1hLmF2YWlsX291dD9TOlEpO2lmKGguc3RybT1hLGM9aC5sYXN0X2ZsdXNoLGgubGFzdF9mbHVzaD1iLGguc3RhdHVzPT09bmEpaWYoMj09PWgud3JhcClhLmFkbGVyPTAsaShoLDMxKSxpKGgsMTM5KSxpKGgsOCksaC5nemhlYWQ/KGkoaCwoaC5nemhlYWQudGV4dD8xOjApKyhoLmd6aGVhZC5oY3JjPzI6MCkrKGguZ3poZWFkLmV4dHJhPzQ6MCkrKGguZ3poZWFkLm5hbWU/ODowKSsoaC5nemhlYWQuY29tbWVudD8xNjowKSksaShoLDI1NSZoLmd6aGVhZC50aW1lKSxpKGgsaC5nemhlYWQudGltZT4+OCYyNTUpLGkoaCxoLmd6aGVhZC50aW1lPj4xNiYyNTUpLGkoaCxoLmd6aGVhZC50aW1lPj4yNCYyNTUpLGkoaCw5PT09aC5sZXZlbD8yOmguc3RyYXRlZ3k+PVZ8fGgubGV2ZWw8Mj80OjApLGkoaCwyNTUmaC5nemhlYWQub3MpLGguZ3poZWFkLmV4dHJhJiZoLmd6aGVhZC5leHRyYS5sZW5ndGgmJihpKGgsMjU1JmguZ3poZWFkLmV4dHJhLmxlbmd0aCksaShoLGguZ3poZWFkLmV4dHJhLmxlbmd0aD4+OCYyNTUpKSxoLmd6aGVhZC5oY3JjJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmcsMCkpLGguZ3ppbmRleD0wLGguc3RhdHVzPW9hKTooaShoLDApLGkoaCwwKSxpKGgsMCksaShoLDApLGkoaCwwKSxpKGgsOT09PWgubGV2ZWw/MjpoLnN0cmF0ZWd5Pj1WfHxoLmxldmVsPDI/NDowKSxpKGgseWEpLGguc3RhdHVzPXNhKTtlbHNle3ZhciBtPSQrKGgud19iaXRzLTg8PDQpPDw4LG49LTE7bj1oLnN0cmF0ZWd5Pj1WfHxoLmxldmVsPDI/MDpoLmxldmVsPDY/MTo2PT09aC5sZXZlbD8yOjMsbXw9bjw8NiwwIT09aC5zdHJzdGFydCYmKG18PW1hKSxtKz0zMS1tJTMxLGguc3RhdHVzPXNhLGooaCxtKSwwIT09aC5zdHJzdGFydCYmKGooaCxhLmFkbGVyPj4+MTYpLGooaCw2NTUzNSZhLmFkbGVyKSksYS5hZGxlcj0xfWlmKGguc3RhdHVzPT09b2EpaWYoaC5nemhlYWQuZXh0cmEpe2ZvcihrPWgucGVuZGluZztoLmd6aW5kZXg8KDY1NTM1JmguZ3poZWFkLmV4dHJhLmxlbmd0aCkmJihoLnBlbmRpbmchPT1oLnBlbmRpbmdfYnVmX3NpemV8fChoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLGcoYSksaz1oLnBlbmRpbmcsaC5wZW5kaW5nIT09aC5wZW5kaW5nX2J1Zl9zaXplKSk7KWkoaCwyNTUmaC5nemhlYWQuZXh0cmFbaC5nemluZGV4XSksaC5nemluZGV4Kys7aC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxoLmd6aW5kZXg9PT1oLmd6aGVhZC5leHRyYS5sZW5ndGgmJihoLmd6aW5kZXg9MCxoLnN0YXR1cz1wYSl9ZWxzZSBoLnN0YXR1cz1wYTtpZihoLnN0YXR1cz09PXBhKWlmKGguZ3poZWFkLm5hbWUpe2s9aC5wZW5kaW5nO2Rve2lmKGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSYmKGguZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksZyhhKSxrPWgucGVuZGluZyxoLnBlbmRpbmc9PT1oLnBlbmRpbmdfYnVmX3NpemUpKXtsPTE7YnJlYWt9bD1oLmd6aW5kZXg8aC5nemhlYWQubmFtZS5sZW5ndGg/MjU1JmguZ3poZWFkLm5hbWUuY2hhckNvZGVBdChoLmd6aW5kZXgrKyk6MCxpKGgsbCl9d2hpbGUoMCE9PWwpO2guZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksMD09PWwmJihoLmd6aW5kZXg9MCxoLnN0YXR1cz1xYSl9ZWxzZSBoLnN0YXR1cz1xYTtpZihoLnN0YXR1cz09PXFhKWlmKGguZ3poZWFkLmNvbW1lbnQpe2s9aC5wZW5kaW5nO2Rve2lmKGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSYmKGguZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksZyhhKSxrPWgucGVuZGluZyxoLnBlbmRpbmc9PT1oLnBlbmRpbmdfYnVmX3NpemUpKXtsPTE7YnJlYWt9bD1oLmd6aW5kZXg8aC5nemhlYWQuY29tbWVudC5sZW5ndGg/MjU1JmguZ3poZWFkLmNvbW1lbnQuY2hhckNvZGVBdChoLmd6aW5kZXgrKyk6MCxpKGgsbCl9d2hpbGUoMCE9PWwpO2guZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksMD09PWwmJihoLnN0YXR1cz1yYSl9ZWxzZSBoLnN0YXR1cz1yYTtpZihoLnN0YXR1cz09PXJhJiYoaC5nemhlYWQuaGNyYz8oaC5wZW5kaW5nKzI+aC5wZW5kaW5nX2J1Zl9zaXplJiZnKGEpLGgucGVuZGluZysyPD1oLnBlbmRpbmdfYnVmX3NpemUmJihpKGgsMjU1JmEuYWRsZXIpLGkoaCxhLmFkbGVyPj44JjI1NSksYS5hZGxlcj0wLGguc3RhdHVzPXNhKSk6aC5zdGF0dXM9c2EpLDAhPT1oLnBlbmRpbmcpe2lmKGcoYSksMD09PWEuYXZhaWxfb3V0KXJldHVybiBoLmxhc3RfZmx1c2g9LTEsT31lbHNlIGlmKDA9PT1hLmF2YWlsX2luJiZlKGIpPD1lKGMpJiZiIT09TSlyZXR1cm4gZChhLFMpO2lmKGguc3RhdHVzPT09dGEmJjAhPT1hLmF2YWlsX2luKXJldHVybiBkKGEsUyk7aWYoMCE9PWEuYXZhaWxfaW58fDAhPT1oLmxvb2thaGVhZHx8YiE9PUomJmguc3RhdHVzIT09dGEpe3ZhciBvPWguc3RyYXRlZ3k9PT1WP3IoaCxiKTpoLnN0cmF0ZWd5PT09Vz9xKGgsYik6RFtoLmxldmVsXS5mdW5jKGgsYik7aWYobyE9PXdhJiZvIT09eGF8fChoLnN0YXR1cz10YSksbz09PXVhfHxvPT09d2EpcmV0dXJuIDA9PT1hLmF2YWlsX291dCYmKGgubGFzdF9mbHVzaD0tMSksTztpZihvPT09dmEmJihiPT09Sz9GLl90cl9hbGlnbihoKTpiIT09TiYmKEYuX3RyX3N0b3JlZF9ibG9jayhoLDAsMCwhMSksYj09PUwmJihmKGguaGVhZCksMD09PWgubG9va2FoZWFkJiYoaC5zdHJzdGFydD0wLGguYmxvY2tfc3RhcnQ9MCxoLmluc2VydD0wKSkpLGcoYSksMD09PWEuYXZhaWxfb3V0KSlyZXR1cm4gaC5sYXN0X2ZsdXNoPS0xLE99cmV0dXJuIGIhPT1NP086aC53cmFwPD0wP1A6KDI9PT1oLndyYXA/KGkoaCwyNTUmYS5hZGxlciksaShoLGEuYWRsZXI+PjgmMjU1KSxpKGgsYS5hZGxlcj4+MTYmMjU1KSxpKGgsYS5hZGxlcj4+MjQmMjU1KSxpKGgsMjU1JmEudG90YWxfaW4pLGkoaCxhLnRvdGFsX2luPj44JjI1NSksaShoLGEudG90YWxfaW4+PjE2JjI1NSksaShoLGEudG90YWxfaW4+PjI0JjI1NSkpOihqKGgsYS5hZGxlcj4+PjE2KSxqKGgsNjU1MzUmYS5hZGxlcikpLGcoYSksaC53cmFwPjAmJihoLndyYXA9LWgud3JhcCksMCE9PWgucGVuZGluZz9POlApfWZ1bmN0aW9uIEIoYSl7dmFyIGI7cmV0dXJuIGEmJmEuc3RhdGU/KGI9YS5zdGF0ZS5zdGF0dXMsYiE9PW5hJiZiIT09b2EmJmIhPT1wYSYmYiE9PXFhJiZiIT09cmEmJmIhPT1zYSYmYiE9PXRhP2QoYSxRKTooYS5zdGF0ZT1udWxsLGI9PT1zYT9kKGEsUik6TykpOlF9ZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQsZSxnLGgsaSxqLGssbD1iLmxlbmd0aDtpZighYXx8IWEuc3RhdGUpcmV0dXJuIFE7aWYoYz1hLnN0YXRlLGc9Yy53cmFwLDI9PT1nfHwxPT09ZyYmYy5zdGF0dXMhPT1uYXx8Yy5sb29rYWhlYWQpcmV0dXJuIFE7Zm9yKDE9PT1nJiYoYS5hZGxlcj1HKGEuYWRsZXIsYixsLDApKSxjLndyYXA9MCxsPj1jLndfc2l6ZSYmKDA9PT1nJiYoZihjLmhlYWQpLGMuc3Ryc3RhcnQ9MCxjLmJsb2NrX3N0YXJ0PTAsYy5pbnNlcnQ9MCksaz1uZXcgRS5CdWY4KGMud19zaXplKSxFLmFycmF5U2V0KGssYixsLWMud19zaXplLGMud19zaXplLDApLGI9ayxsPWMud19zaXplKSxoPWEuYXZhaWxfaW4saT1hLm5leHRfaW4saj1hLmlucHV0LGEuYXZhaWxfaW49bCxhLm5leHRfaW49MCxhLmlucHV0PWIsbShjKTtjLmxvb2thaGVhZD49amE7KXtkPWMuc3Ryc3RhcnQsZT1jLmxvb2thaGVhZC0oamEtMSk7ZG8gYy5pbnNfaD0oYy5pbnNfaDw8Yy5oYXNoX3NoaWZ0XmMud2luZG93W2QramEtMV0pJmMuaGFzaF9tYXNrLGMucHJldltkJmMud19tYXNrXT1jLmhlYWRbYy5pbnNfaF0sYy5oZWFkW2MuaW5zX2hdPWQsZCsrO3doaWxlKC0tZSk7Yy5zdHJzdGFydD1kLGMubG9va2FoZWFkPWphLTEsbShjKX1yZXR1cm4gYy5zdHJzdGFydCs9Yy5sb29rYWhlYWQsYy5ibG9ja19zdGFydD1jLnN0cnN0YXJ0LGMuaW5zZXJ0PWMubG9va2FoZWFkLGMubG9va2FoZWFkPTAsYy5tYXRjaF9sZW5ndGg9Yy5wcmV2X2xlbmd0aD1qYS0xLGMubWF0Y2hfYXZhaWxhYmxlPTAsYS5uZXh0X2luPWksYS5pbnB1dD1qLGEuYXZhaWxfaW49aCxjLndyYXA9ZyxPfXZhciBELEU9YShcIi4uL3V0aWxzL2NvbW1vblwiKSxGPWEoXCIuL3RyZWVzXCIpLEc9YShcIi4vYWRsZXIzMlwiKSxIPWEoXCIuL2NyYzMyXCIpLEk9YShcIi4vbWVzc2FnZXNcIiksSj0wLEs9MSxMPTMsTT00LE49NSxPPTAsUD0xLFE9LTIsUj0tMyxTPS01LFQ9LTEsVT0xLFY9MixXPTMsWD00LFk9MCxaPTIsJD04LF89OSxhYT0xNSxiYT04LGNhPTI5LGRhPTI1NixlYT1kYSsxK2NhLGZhPTMwLGdhPTE5LGhhPTIqZWErMSxpYT0xNSxqYT0zLGthPTI1OCxsYT1rYStqYSsxLG1hPTMyLG5hPTQyLG9hPTY5LHBhPTczLHFhPTkxLHJhPTEwMyxzYT0xMTMsdGE9NjY2LHVhPTEsdmE9Mix3YT0zLHhhPTQseWE9MztEPVtuZXcgcygwLDAsMCwwLG4pLG5ldyBzKDQsNCw4LDQsbyksbmV3IHMoNCw1LDE2LDgsbyksbmV3IHMoNCw2LDMyLDMyLG8pLG5ldyBzKDQsNCwxNiwxNixwKSxuZXcgcyg4LDE2LDMyLDMyLHApLG5ldyBzKDgsMTYsMTI4LDEyOCxwKSxuZXcgcyg4LDMyLDEyOCwyNTYscCksbmV3IHMoMzIsMTI4LDI1OCwxMDI0LHApLG5ldyBzKDMyLDI1OCwyNTgsNDA5NixwKV0sYy5kZWZsYXRlSW5pdD16LGMuZGVmbGF0ZUluaXQyPXksYy5kZWZsYXRlUmVzZXQ9dyxjLmRlZmxhdGVSZXNldEtlZXA9dixjLmRlZmxhdGVTZXRIZWFkZXI9eCxjLmRlZmxhdGU9QSxjLmRlZmxhdGVFbmQ9QixjLmRlZmxhdGVTZXREaWN0aW9uYXJ5PUMsYy5kZWZsYXRlSW5mbz1cInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NjAsXCIuL2FkbGVyMzJcIjo2MixcIi4vY3JjMzJcIjo2NCxcIi4vbWVzc2FnZXNcIjo3MCxcIi4vdHJlZXNcIjo3MX1dLDY2OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZCgpe3RoaXMudGV4dD0wLHRoaXMudGltZT0wLHRoaXMueGZsYWdzPTAsdGhpcy5vcz0wLHRoaXMuZXh0cmE9bnVsbCx0aGlzLmV4dHJhX2xlbj0wLHRoaXMubmFtZT1cIlwiLHRoaXMuY29tbWVudD1cIlwiLHRoaXMuaGNyYz0wLHRoaXMuZG9uZT0hMX1iLmV4cG9ydHM9ZH0se31dLDY3OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9MzAsZT0xMjtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgYyxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1LHYsdyx4LHkseixBLEIsQztjPWEuc3RhdGUsZj1hLm5leHRfaW4sQj1hLmlucHV0LGc9ZisoYS5hdmFpbF9pbi01KSxoPWEubmV4dF9vdXQsQz1hLm91dHB1dCxpPWgtKGItYS5hdmFpbF9vdXQpLGo9aCsoYS5hdmFpbF9vdXQtMjU3KSxrPWMuZG1heCxsPWMud3NpemUsbT1jLndoYXZlLG49Yy53bmV4dCxvPWMud2luZG93LHA9Yy5ob2xkLHE9Yy5iaXRzLHI9Yy5sZW5jb2RlLHM9Yy5kaXN0Y29kZSx0PSgxPDxjLmxlbmJpdHMpLTEsdT0oMTw8Yy5kaXN0Yml0cyktMTthOmRve3E8MTUmJihwKz1CW2YrK108PHEscSs9OCxwKz1CW2YrK108PHEscSs9OCksdj1yW3AmdF07Yjpmb3IoOzspe2lmKHc9dj4+PjI0LHA+Pj49dyxxLT13LHc9dj4+PjE2JjI1NSwwPT09dylDW2grK109NjU1MzUmdjtlbHNle2lmKCEoMTYmdykpe2lmKDA9PT0oNjQmdykpe3Y9clsoNjU1MzUmdikrKHAmKDE8PHcpLTEpXTtjb250aW51ZSBifWlmKDMyJncpe2MubW9kZT1lO2JyZWFrIGF9YS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIixjLm1vZGU9ZDticmVhayBhfXg9NjU1MzUmdix3Jj0xNSx3JiYocTx3JiYocCs9QltmKytdPDxxLHErPTgpLHgrPXAmKDE8PHcpLTEscD4+Pj13LHEtPXcpLHE8MTUmJihwKz1CW2YrK108PHEscSs9OCxwKz1CW2YrK108PHEscSs9OCksdj1zW3AmdV07Yzpmb3IoOzspe2lmKHc9dj4+PjI0LHA+Pj49dyxxLT13LHc9dj4+PjE2JjI1NSwhKDE2JncpKXtpZigwPT09KDY0JncpKXt2PXNbKDY1NTM1JnYpKyhwJigxPDx3KS0xKV07Y29udGludWUgY31hLm1zZz1cImludmFsaWQgZGlzdGFuY2UgY29kZVwiLGMubW9kZT1kO2JyZWFrIGF9aWYoeT02NTUzNSZ2LHcmPTE1LHE8dyYmKHArPUJbZisrXTw8cSxxKz04LHE8dyYmKHArPUJbZisrXTw8cSxxKz04KSkseSs9cCYoMTw8dyktMSx5Pmspe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixjLm1vZGU9ZDticmVhayBhfWlmKHA+Pj49dyxxLT13LHc9aC1pLHk+dyl7aWYodz15LXcsdz5tJiZjLnNhbmUpe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixjLm1vZGU9ZDticmVhayBhfWlmKHo9MCxBPW8sMD09PW4pe2lmKHorPWwtdyx3PHgpe3gtPXc7ZG8gQ1toKytdPW9beisrXTt3aGlsZSgtLXcpO3o9aC15LEE9Q319ZWxzZSBpZihuPHcpe2lmKHorPWwrbi13LHctPW4sdzx4KXt4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTtpZih6PTAsbjx4KXt3PW4seC09dztkbyBDW2grK109b1t6KytdO3doaWxlKC0tdyk7ej1oLXksQT1DfX19ZWxzZSBpZih6Kz1uLXcsdzx4KXt4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTt6PWgteSxBPUN9Zm9yKDt4PjI7KUNbaCsrXT1BW3orK10sQ1toKytdPUFbeisrXSxDW2grK109QVt6KytdLHgtPTM7eCYmKENbaCsrXT1BW3orK10seD4xJiYoQ1toKytdPUFbeisrXSkpfWVsc2V7ej1oLXk7ZG8gQ1toKytdPUNbeisrXSxDW2grK109Q1t6KytdLENbaCsrXT1DW3orK10seC09Mzt3aGlsZSh4PjIpO3gmJihDW2grK109Q1t6KytdLHg+MSYmKENbaCsrXT1DW3orK10pKX1icmVha319YnJlYWt9fXdoaWxlKGY8ZyYmaDxqKTt4PXE+PjMsZi09eCxxLT14PDwzLHAmPSgxPDxxKS0xLGEubmV4dF9pbj1mLGEubmV4dF9vdXQ9aCxhLmF2YWlsX2luPWY8Zz81KyhnLWYpOjUtKGYtZyksYS5hdmFpbF9vdXQ9aDxqPzI1Nysoai1oKToyNTctKGgtaiksYy5ob2xkPXAsYy5iaXRzPXF9fSx7fV0sNjg6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3JldHVybihhPj4+MjQmMjU1KSsoYT4+PjgmNjUyODApKygoNjUyODAmYSk8PDgpKygoMjU1JmEpPDwyNCl9ZnVuY3Rpb24gZSgpe3RoaXMubW9kZT0wLHRoaXMubGFzdD0hMSx0aGlzLndyYXA9MCx0aGlzLmhhdmVkaWN0PSExLHRoaXMuZmxhZ3M9MCx0aGlzLmRtYXg9MCx0aGlzLmNoZWNrPTAsdGhpcy50b3RhbD0wLHRoaXMuaGVhZD1udWxsLHRoaXMud2JpdHM9MCx0aGlzLndzaXplPTAsdGhpcy53aGF2ZT0wLHRoaXMud25leHQ9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMuaG9sZD0wLHRoaXMuYml0cz0wLHRoaXMubGVuZ3RoPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmV4dHJhPTAsdGhpcy5sZW5jb2RlPW51bGwsdGhpcy5kaXN0Y29kZT1udWxsLHRoaXMubGVuYml0cz0wLHRoaXMuZGlzdGJpdHM9MCx0aGlzLm5jb2RlPTAsdGhpcy5ubGVuPTAsdGhpcy5uZGlzdD0wLHRoaXMuaGF2ZT0wLHRoaXMubmV4dD1udWxsLHRoaXMubGVucz1uZXcgcy5CdWYxNigzMjApLHRoaXMud29yaz1uZXcgcy5CdWYxNigyODgpLHRoaXMubGVuZHluPW51bGwsdGhpcy5kaXN0ZHluPW51bGwsdGhpcy5zYW5lPTAsdGhpcy5iYWNrPTAsdGhpcy53YXM9MH1mdW5jdGlvbiBmKGEpe3ZhciBiO3JldHVybiBhJiZhLnN0YXRlPyhiPWEuc3RhdGUsYS50b3RhbF9pbj1hLnRvdGFsX291dD1iLnRvdGFsPTAsYS5tc2c9XCJcIixiLndyYXAmJihhLmFkbGVyPTEmYi53cmFwKSxiLm1vZGU9TCxiLmxhc3Q9MCxiLmhhdmVkaWN0PTAsYi5kbWF4PTMyNzY4LGIuaGVhZD1udWxsLGIuaG9sZD0wLGIuYml0cz0wLGIubGVuY29kZT1iLmxlbmR5bj1uZXcgcy5CdWYzMihwYSksYi5kaXN0Y29kZT1iLmRpc3RkeW49bmV3IHMuQnVmMzIocWEpLGIuc2FuZT0xLGIuYmFjaz0tMSxEKTpHfWZ1bmN0aW9uIGcoYSl7dmFyIGI7cmV0dXJuIGEmJmEuc3RhdGU/KGI9YS5zdGF0ZSxiLndzaXplPTAsYi53aGF2ZT0wLGIud25leHQ9MCxmKGEpKTpHfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYyxkO3JldHVybiBhJiZhLnN0YXRlPyhkPWEuc3RhdGUsYjwwPyhjPTAsYj0tYik6KGM9KGI+PjQpKzEsYjw0OCYmKGImPTE1KSksYiYmKGI8OHx8Yj4xNSk/RzoobnVsbCE9PWQud2luZG93JiZkLndiaXRzIT09YiYmKGQud2luZG93PW51bGwpLGQud3JhcD1jLGQud2JpdHM9YixnKGEpKSk6R31mdW5jdGlvbiBpKGEsYil7dmFyIGMsZDtyZXR1cm4gYT8oZD1uZXcgZSxhLnN0YXRlPWQsZC53aW5kb3c9bnVsbCxjPWgoYSxiKSxjIT09RCYmKGEuc3RhdGU9bnVsbCksYyk6R31mdW5jdGlvbiBqKGEpe3JldHVybiBpKGEsc2EpfWZ1bmN0aW9uIGsoYSl7aWYodGEpe3ZhciBiO2ZvcihxPW5ldyBzLkJ1ZjMyKDUxMikscj1uZXcgcy5CdWYzMigzMiksYj0wO2I8MTQ0OylhLmxlbnNbYisrXT04O2Zvcig7YjwyNTY7KWEubGVuc1tiKytdPTk7Zm9yKDtiPDI4MDspYS5sZW5zW2IrK109Nztmb3IoO2I8Mjg4OylhLmxlbnNbYisrXT04O2Zvcih3KHksYS5sZW5zLDAsMjg4LHEsMCxhLndvcmsse2JpdHM6OX0pLGI9MDtiPDMyOylhLmxlbnNbYisrXT01O3coeixhLmxlbnMsMCwzMixyLDAsYS53b3JrLHtiaXRzOjV9KSx0YT0hMX1hLmxlbmNvZGU9cSxhLmxlbmJpdHM9OSxhLmRpc3Rjb2RlPXIsYS5kaXN0Yml0cz01fWZ1bmN0aW9uIGwoYSxiLGMsZCl7dmFyIGUsZj1hLnN0YXRlO3JldHVybiBudWxsPT09Zi53aW5kb3cmJihmLndzaXplPTE8PGYud2JpdHMsZi53bmV4dD0wLGYud2hhdmU9MCxmLndpbmRvdz1uZXcgcy5CdWY4KGYud3NpemUpKSxkPj1mLndzaXplPyhzLmFycmF5U2V0KGYud2luZG93LGIsYy1mLndzaXplLGYud3NpemUsMCksZi53bmV4dD0wLGYud2hhdmU9Zi53c2l6ZSk6KGU9Zi53c2l6ZS1mLnduZXh0LGU+ZCYmKGU9ZCkscy5hcnJheVNldChmLndpbmRvdyxiLGMtZCxlLGYud25leHQpLGQtPWUsZD8ocy5hcnJheVNldChmLndpbmRvdyxiLGMtZCxkLDApLGYud25leHQ9ZCxmLndoYXZlPWYud3NpemUpOihmLnduZXh0Kz1lLGYud25leHQ9PT1mLndzaXplJiYoZi53bmV4dD0wKSxmLndoYXZlPGYud3NpemUmJihmLndoYXZlKz1lKSkpLDB9ZnVuY3Rpb24gbShhLGIpe3ZhciBjLGUsZixnLGgsaSxqLG0sbixvLHAscSxyLHBhLHFhLHJhLHNhLHRhLHVhLHZhLHdhLHhhLHlhLHphLEFhPTAsQmE9bmV3IHMuQnVmOCg0KSxDYT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV07aWYoIWF8fCFhLnN0YXRlfHwhYS5vdXRwdXR8fCFhLmlucHV0JiYwIT09YS5hdmFpbF9pbilyZXR1cm4gRztjPWEuc3RhdGUsYy5tb2RlPT09VyYmKGMubW9kZT1YKSxoPWEubmV4dF9vdXQsZj1hLm91dHB1dCxqPWEuYXZhaWxfb3V0LGc9YS5uZXh0X2luLGU9YS5pbnB1dCxpPWEuYXZhaWxfaW4sbT1jLmhvbGQsbj1jLmJpdHMsbz1pLHA9aix4YT1EO2E6Zm9yKDs7KXN3aXRjaChjLm1vZGUpe2Nhc2UgTDppZigwPT09Yy53cmFwKXtjLm1vZGU9WDticmVha31mb3IoO248MTY7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZigyJmMud3JhcCYmMzU2MTU9PT1tKXtjLmNoZWNrPTAsQmFbMF09MjU1Jm0sQmFbMV09bT4+PjgmMjU1LGMuY2hlY2s9dShjLmNoZWNrLEJhLDIsMCksbT0wLG49MCxjLm1vZGU9TTticmVha31pZihjLmZsYWdzPTAsYy5oZWFkJiYoYy5oZWFkLmRvbmU9ITEpLCEoMSZjLndyYXApfHwoKCgyNTUmbSk8PDgpKyhtPj44KSklMzEpe2EubXNnPVwiaW5jb3JyZWN0IGhlYWRlciBjaGVja1wiLGMubW9kZT1tYTticmVha31pZigoMTUmbSkhPT1LKXthLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIsYy5tb2RlPW1hO2JyZWFrfWlmKG0+Pj49NCxuLT00LHdhPSgxNSZtKSs4LDA9PT1jLndiaXRzKWMud2JpdHM9d2E7ZWxzZSBpZih3YT5jLndiaXRzKXthLm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIixjLm1vZGU9bWE7YnJlYWt9Yy5kbWF4PTE8PHdhLGEuYWRsZXI9Yy5jaGVjaz0xLGMubW9kZT01MTImbT9VOlcsbT0wLG49MDticmVhaztjYXNlIE06Zm9yKDtuPDE2Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoYy5mbGFncz1tLCgyNTUmYy5mbGFncykhPT1LKXthLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIsYy5tb2RlPW1hO2JyZWFrfWlmKDU3MzQ0JmMuZmxhZ3Mpe2EubXNnPVwidW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0XCIsYy5tb2RlPW1hO2JyZWFrfWMuaGVhZCYmKGMuaGVhZC50ZXh0PW0+PjgmMSksNTEyJmMuZmxhZ3MmJihCYVswXT0yNTUmbSxCYVsxXT1tPj4+OCYyNTUsYy5jaGVjaz11KGMuY2hlY2ssQmEsMiwwKSksbT0wLG49MCxjLm1vZGU9TjtjYXNlIE46Zm9yKDtuPDMyOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5oZWFkJiYoYy5oZWFkLnRpbWU9bSksNTEyJmMuZmxhZ3MmJihCYVswXT0yNTUmbSxCYVsxXT1tPj4+OCYyNTUsQmFbMl09bT4+PjE2JjI1NSxCYVszXT1tPj4+MjQmMjU1LGMuY2hlY2s9dShjLmNoZWNrLEJhLDQsMCkpLG09MCxuPTAsYy5tb2RlPU87Y2FzZSBPOmZvcig7bjwxNjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMuaGVhZCYmKGMuaGVhZC54ZmxhZ3M9MjU1Jm0sYy5oZWFkLm9zPW0+PjgpLDUxMiZjLmZsYWdzJiYoQmFbMF09MjU1Jm0sQmFbMV09bT4+PjgmMjU1LGMuY2hlY2s9dShjLmNoZWNrLEJhLDIsMCkpLG09MCxuPTAsYy5tb2RlPVA7Y2FzZSBQOmlmKDEwMjQmYy5mbGFncyl7Zm9yKDtuPDE2Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5sZW5ndGg9bSxjLmhlYWQmJihjLmhlYWQuZXh0cmFfbGVuPW0pLDUxMiZjLmZsYWdzJiYoQmFbMF09MjU1Jm0sQmFbMV09bT4+PjgmMjU1LGMuY2hlY2s9dShjLmNoZWNrLEJhLDIsMCkpLG09MCxuPTB9ZWxzZSBjLmhlYWQmJihjLmhlYWQuZXh0cmE9bnVsbCk7Yy5tb2RlPVE7Y2FzZSBROmlmKDEwMjQmYy5mbGFncyYmKHE9Yy5sZW5ndGgscT5pJiYocT1pKSxxJiYoYy5oZWFkJiYod2E9Yy5oZWFkLmV4dHJhX2xlbi1jLmxlbmd0aCxjLmhlYWQuZXh0cmF8fChjLmhlYWQuZXh0cmE9bmV3IEFycmF5KGMuaGVhZC5leHRyYV9sZW4pKSxzLmFycmF5U2V0KGMuaGVhZC5leHRyYSxlLGcscSx3YSkpLDUxMiZjLmZsYWdzJiYoYy5jaGVjaz11KGMuY2hlY2ssZSxxLGcpKSxpLT1xLGcrPXEsYy5sZW5ndGgtPXEpLGMubGVuZ3RoKSlicmVhayBhO2MubGVuZ3RoPTAsYy5tb2RlPVI7Y2FzZSBSOmlmKDIwNDgmYy5mbGFncyl7aWYoMD09PWkpYnJlYWsgYTtxPTA7ZG8gd2E9ZVtnK3ErK10sYy5oZWFkJiZ3YSYmYy5sZW5ndGg8NjU1MzYmJihjLmhlYWQubmFtZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh3YSkpO3doaWxlKHdhJiZxPGkpO2lmKDUxMiZjLmZsYWdzJiYoYy5jaGVjaz11KGMuY2hlY2ssZSxxLGcpKSxpLT1xLGcrPXEsd2EpYnJlYWsgYX1lbHNlIGMuaGVhZCYmKGMuaGVhZC5uYW1lPW51bGwpO2MubGVuZ3RoPTAsYy5tb2RlPVM7Y2FzZSBTOmlmKDQwOTYmYy5mbGFncyl7aWYoMD09PWkpYnJlYWsgYTtxPTA7ZG8gd2E9ZVtnK3ErK10sYy5oZWFkJiZ3YSYmYy5sZW5ndGg8NjU1MzYmJihjLmhlYWQuY29tbWVudCs9U3RyaW5nLmZyb21DaGFyQ29kZSh3YSkpO3doaWxlKHdhJiZxPGkpO2lmKDUxMiZjLmZsYWdzJiYoYy5jaGVjaz11KGMuY2hlY2ssZSxxLGcpKSxpLT1xLGcrPXEsd2EpYnJlYWsgYX1lbHNlIGMuaGVhZCYmKGMuaGVhZC5jb21tZW50PW51bGwpO2MubW9kZT1UO2Nhc2UgVDppZig1MTImYy5mbGFncyl7Zm9yKDtuPDE2Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYobSE9PSg2NTUzNSZjLmNoZWNrKSl7YS5tc2c9XCJoZWFkZXIgY3JjIG1pc21hdGNoXCIsYy5tb2RlPW1hO2JyZWFrfW09MCxuPTB9Yy5oZWFkJiYoYy5oZWFkLmhjcmM9Yy5mbGFncz4+OSYxLGMuaGVhZC5kb25lPSEwKSxhLmFkbGVyPWMuY2hlY2s9MCxjLm1vZGU9VzticmVhaztjYXNlIFU6Zm9yKDtuPDMyOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9YS5hZGxlcj1jLmNoZWNrPWQobSksbT0wLG49MCxjLm1vZGU9VjtjYXNlIFY6aWYoMD09PWMuaGF2ZWRpY3QpcmV0dXJuIGEubmV4dF9vdXQ9aCxhLmF2YWlsX291dD1qLGEubmV4dF9pbj1nLGEuYXZhaWxfaW49aSxjLmhvbGQ9bSxjLmJpdHM9bixGO2EuYWRsZXI9Yy5jaGVjaz0xLGMubW9kZT1XO2Nhc2UgVzppZihiPT09Qnx8Yj09PUMpYnJlYWsgYTtjYXNlIFg6aWYoYy5sYXN0KXttPj4+PTcmbixuLT03Jm4sYy5tb2RlPWphO2JyZWFrfWZvcig7bjwzOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9c3dpdGNoKGMubGFzdD0xJm0sbT4+Pj0xLG4tPTEsMyZtKXtjYXNlIDA6Yy5tb2RlPVk7YnJlYWs7Y2FzZSAxOmlmKGsoYyksYy5tb2RlPWNhLGI9PT1DKXttPj4+PTIsbi09MjticmVhayBhfWJyZWFrO2Nhc2UgMjpjLm1vZGU9XzticmVhaztjYXNlIDM6YS5tc2c9XCJpbnZhbGlkIGJsb2NrIHR5cGVcIixjLm1vZGU9bWF9bT4+Pj0yLG4tPTI7YnJlYWs7Y2FzZSBZOmZvcihtPj4+PTcmbixuLT03Jm47bjwzMjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKCg2NTUzNSZtKSE9PShtPj4+MTZeNjU1MzUpKXthLm1zZz1cImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHNcIixjLm1vZGU9bWE7YnJlYWt9aWYoYy5sZW5ndGg9NjU1MzUmbSxtPTAsbj0wLGMubW9kZT1aLGI9PT1DKWJyZWFrIGE7Y2FzZSBaOmMubW9kZT0kO2Nhc2UgJDppZihxPWMubGVuZ3RoKXtpZihxPmkmJihxPWkpLHE+aiYmKHE9aiksMD09PXEpYnJlYWsgYTtzLmFycmF5U2V0KGYsZSxnLHEsaCksaS09cSxnKz1xLGotPXEsaCs9cSxjLmxlbmd0aC09cTticmVha31jLm1vZGU9VzticmVhaztjYXNlIF86Zm9yKDtuPDE0Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoYy5ubGVuPSgzMSZtKSsyNTcsbT4+Pj01LG4tPTUsYy5uZGlzdD0oMzEmbSkrMSxtPj4+PTUsbi09NSxjLm5jb2RlPSgxNSZtKSs0LG0+Pj49NCxuLT00LGMubmxlbj4yODZ8fGMubmRpc3Q+MzApe2EubXNnPVwidG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHNcIixjLm1vZGU9bWE7YnJlYWt9Yy5oYXZlPTAsYy5tb2RlPWFhO2Nhc2UgYWE6Zm9yKDtjLmhhdmU8Yy5uY29kZTspe2Zvcig7bjwzOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5sZW5zW0NhW2MuaGF2ZSsrXV09NyZtLG0+Pj49MyxuLT0zfWZvcig7Yy5oYXZlPDE5OyljLmxlbnNbQ2FbYy5oYXZlKytdXT0wO2lmKGMubGVuY29kZT1jLmxlbmR5bixjLmxlbmJpdHM9Nyx5YT17Yml0czpjLmxlbmJpdHN9LHhhPXcoeCxjLmxlbnMsMCwxOSxjLmxlbmNvZGUsMCxjLndvcmsseWEpLGMubGVuYml0cz15YS5iaXRzLHhhKXthLm1zZz1cImludmFsaWQgY29kZSBsZW5ndGhzIHNldFwiLGMubW9kZT1tYTticmVha31jLmhhdmU9MCxjLm1vZGU9YmE7Y2FzZSBiYTpmb3IoO2MuaGF2ZTxjLm5sZW4rYy5uZGlzdDspe2Zvcig7QWE9Yy5sZW5jb2RlW20mKDE8PGMubGVuYml0cyktMV0scWE9QWE+Pj4yNCxyYT1BYT4+PjE2JjI1NSxzYT02NTUzNSZBYSwhKHFhPD1uKTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKHNhPDE2KW0+Pj49cWEsbi09cWEsYy5sZW5zW2MuaGF2ZSsrXT1zYTtlbHNle2lmKDE2PT09c2Epe2Zvcih6YT1xYSsyO248emE7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihtPj4+PXFhLG4tPXFhLDA9PT1jLmhhdmUpe2EubXNnPVwiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdFwiLGMubW9kZT1tYTticmVha313YT1jLmxlbnNbYy5oYXZlLTFdLHE9MysoMyZtKSxtPj4+PTIsbi09Mn1lbHNlIGlmKDE3PT09c2Epe2Zvcih6YT1xYSszO248emE7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1tPj4+PXFhLG4tPXFhLHdhPTAscT0zKyg3Jm0pLG0+Pj49MyxuLT0zfWVsc2V7Zm9yKHphPXFhKzc7bjx6YTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fW0+Pj49cWEsbi09cWEsd2E9MCxxPTExKygxMjcmbSksbT4+Pj03LG4tPTd9aWYoYy5oYXZlK3E+Yy5ubGVuK2MubmRpc3Qpe2EubXNnPVwiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdFwiLGMubW9kZT1tYTticmVha31mb3IoO3EtLTspYy5sZW5zW2MuaGF2ZSsrXT13YX19aWYoYy5tb2RlPT09bWEpYnJlYWs7aWYoMD09PWMubGVuc1syNTZdKXthLm1zZz1cImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9ja1wiLGMubW9kZT1tYTticmVha31pZihjLmxlbmJpdHM9OSx5YT17Yml0czpjLmxlbmJpdHN9LHhhPXcoeSxjLmxlbnMsMCxjLm5sZW4sYy5sZW5jb2RlLDAsYy53b3JrLHlhKSxjLmxlbmJpdHM9eWEuYml0cyx4YSl7YS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXRcIixjLm1vZGU9bWE7YnJlYWt9aWYoYy5kaXN0Yml0cz02LGMuZGlzdGNvZGU9Yy5kaXN0ZHluLHlhPXtiaXRzOmMuZGlzdGJpdHN9LHhhPXcoeixjLmxlbnMsYy5ubGVuLGMubmRpc3QsYy5kaXN0Y29kZSwwLGMud29yayx5YSksYy5kaXN0Yml0cz15YS5iaXRzLHhhKXthLm1zZz1cImludmFsaWQgZGlzdGFuY2VzIHNldFwiLGMubW9kZT1tYTticmVha31pZihjLm1vZGU9Y2EsYj09PUMpYnJlYWsgYTtjYXNlIGNhOmMubW9kZT1kYTtjYXNlIGRhOmlmKGk+PTYmJmo+PTI1OCl7YS5uZXh0X291dD1oLGEuYXZhaWxfb3V0PWosYS5uZXh0X2luPWcsYS5hdmFpbF9pbj1pLGMuaG9sZD1tLGMuYml0cz1uLHYoYSxwKSxoPWEubmV4dF9vdXQsZj1hLm91dHB1dCxqPWEuYXZhaWxfb3V0LGc9YS5uZXh0X2luLGU9YS5pbnB1dCxpPWEuYXZhaWxfaW4sbT1jLmhvbGQsbj1jLmJpdHMsYy5tb2RlPT09VyYmKGMuYmFjaz0tMSk7YnJlYWt9Zm9yKGMuYmFjaz0wO0FhPWMubGVuY29kZVttJigxPDxjLmxlbmJpdHMpLTFdLHFhPUFhPj4+MjQscmE9QWE+Pj4xNiYyNTUsc2E9NjU1MzUmQWEsIShxYTw9bik7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihyYSYmMD09PSgyNDAmcmEpKXtmb3IodGE9cWEsdWE9cmEsdmE9c2E7QWE9Yy5sZW5jb2RlW3ZhKygobSYoMTw8dGErdWEpLTEpPj50YSldLHFhPUFhPj4+MjQscmE9QWE+Pj4xNiYyNTUsc2E9NjU1MzUmQWEsISh0YStxYTw9bik7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1tPj4+PXRhLG4tPXRhLGMuYmFjays9dGF9aWYobT4+Pj1xYSxuLT1xYSxjLmJhY2srPXFhLGMubGVuZ3RoPXNhLDA9PT1yYSl7Yy5tb2RlPWlhO2JyZWFrfWlmKDMyJnJhKXtjLmJhY2s9LTEsYy5tb2RlPVc7YnJlYWt9aWYoNjQmcmEpe2EubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCIsYy5tb2RlPW1hO2JyZWFrfWMuZXh0cmE9MTUmcmEsYy5tb2RlPWVhO2Nhc2UgZWE6aWYoYy5leHRyYSl7Zm9yKHphPWMuZXh0cmE7bjx6YTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMubGVuZ3RoKz1tJigxPDxjLmV4dHJhKS0xLG0+Pj49Yy5leHRyYSxuLT1jLmV4dHJhLGMuYmFjays9Yy5leHRyYX1jLndhcz1jLmxlbmd0aCxjLm1vZGU9ZmE7Y2FzZSBmYTpmb3IoO0FhPWMuZGlzdGNvZGVbbSYoMTw8Yy5kaXN0Yml0cyktMV0scWE9QWE+Pj4yNCxyYT1BYT4+PjE2JjI1NSxzYT02NTUzNSZBYSwhKHFhPD1uKTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKDA9PT0oMjQwJnJhKSl7Zm9yKHRhPXFhLHVhPXJhLHZhPXNhO0FhPWMuZGlzdGNvZGVbdmErKChtJigxPDx0YSt1YSktMSk+PnRhKV0scWE9QWE+Pj4yNCxyYT1BYT4+PjE2JjI1NSxzYT02NTUzNSZBYSwhKHRhK3FhPD1uKTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fW0+Pj49dGEsbi09dGEsYy5iYWNrKz10YX1pZihtPj4+PXFhLG4tPXFhLGMuYmFjays9cWEsNjQmcmEpe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCIsYy5tb2RlPW1hO2JyZWFrfWMub2Zmc2V0PXNhLGMuZXh0cmE9MTUmcmEsYy5tb2RlPWdhO2Nhc2UgZ2E6aWYoYy5leHRyYSl7Zm9yKHphPWMuZXh0cmE7bjx6YTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMub2Zmc2V0Kz1tJigxPDxjLmV4dHJhKS0xLG0+Pj49Yy5leHRyYSxuLT1jLmV4dHJhLGMuYmFjays9Yy5leHRyYX1pZihjLm9mZnNldD5jLmRtYXgpe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixjLm1vZGU9bWE7YnJlYWt9Yy5tb2RlPWhhO2Nhc2UgaGE6aWYoMD09PWopYnJlYWsgYTtpZihxPXAtaixjLm9mZnNldD5xKXtpZihxPWMub2Zmc2V0LXEscT5jLndoYXZlJiZjLnNhbmUpe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixjLm1vZGU9bWE7YnJlYWt9cT5jLnduZXh0PyhxLT1jLnduZXh0LHI9Yy53c2l6ZS1xKTpyPWMud25leHQtcSxxPmMubGVuZ3RoJiYocT1jLmxlbmd0aCkscGE9Yy53aW5kb3d9ZWxzZSBwYT1mLHI9aC1jLm9mZnNldCxxPWMubGVuZ3RoO3E+aiYmKHE9aiksai09cSxjLmxlbmd0aC09cTtkbyBmW2grK109cGFbcisrXTt3aGlsZSgtLXEpOzA9PT1jLmxlbmd0aCYmKGMubW9kZT1kYSk7YnJlYWs7Y2FzZSBpYTppZigwPT09ailicmVhayBhO2ZbaCsrXT1jLmxlbmd0aCxqLS0sYy5tb2RlPWRhO2JyZWFrO2Nhc2UgamE6aWYoYy53cmFwKXtmb3IoO248MzI7KXtpZigwPT09aSlicmVhayBhO2ktLSxtfD1lW2crK108PG4sbis9OH1pZihwLT1qLGEudG90YWxfb3V0Kz1wLGMudG90YWwrPXAscCYmKGEuYWRsZXI9Yy5jaGVjaz1jLmZsYWdzP3UoYy5jaGVjayxmLHAsaC1wKTp0KGMuY2hlY2ssZixwLGgtcCkpLHA9aiwoYy5mbGFncz9tOmQobSkpIT09Yy5jaGVjayl7YS5tc2c9XCJpbmNvcnJlY3QgZGF0YSBjaGVja1wiLGMubW9kZT1tYTticmVha31tPTAsbj0wfWMubW9kZT1rYTtjYXNlIGthOmlmKGMud3JhcCYmYy5mbGFncyl7Zm9yKDtuPDMyOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYobSE9PSg0Mjk0OTY3Mjk1JmMudG90YWwpKXthLm1zZz1cImluY29ycmVjdCBsZW5ndGggY2hlY2tcIixjLm1vZGU9bWE7YnJlYWt9bT0wLG49MH1jLm1vZGU9bGE7Y2FzZSBsYTp4YT1FO2JyZWFrIGE7Y2FzZSBtYTp4YT1IO2JyZWFrIGE7Y2FzZSBuYTpyZXR1cm4gSTtjYXNlIG9hOmRlZmF1bHQ6cmV0dXJuIEd9cmV0dXJuIGEubmV4dF9vdXQ9aCxhLmF2YWlsX291dD1qLGEubmV4dF9pbj1nLGEuYXZhaWxfaW49aSxjLmhvbGQ9bSxjLmJpdHM9biwoYy53c2l6ZXx8cCE9PWEuYXZhaWxfb3V0JiZjLm1vZGU8bWEmJihjLm1vZGU8amF8fGIhPT1BKSkmJmwoYSxhLm91dHB1dCxhLm5leHRfb3V0LHAtYS5hdmFpbF9vdXQpPyhjLm1vZGU9bmEsSSk6KG8tPWEuYXZhaWxfaW4scC09YS5hdmFpbF9vdXQsYS50b3RhbF9pbis9byxhLnRvdGFsX291dCs9cCxjLnRvdGFsKz1wLGMud3JhcCYmcCYmKGEuYWRsZXI9Yy5jaGVjaz1jLmZsYWdzP3UoYy5jaGVjayxmLHAsYS5uZXh0X291dC1wKTp0KGMuY2hlY2ssZixwLGEubmV4dF9vdXQtcCkpLGEuZGF0YV90eXBlPWMuYml0cysoYy5sYXN0PzY0OjApKyhjLm1vZGU9PT1XPzEyODowKSsoYy5tb2RlPT09Y2F8fGMubW9kZT09PVo/MjU2OjApLCgwPT09byYmMD09PXB8fGI9PT1BKSYmeGE9PT1EJiYoeGE9SikseGEpfWZ1bmN0aW9uIG4oYSl7aWYoIWF8fCFhLnN0YXRlKXJldHVybiBHO3ZhciBiPWEuc3RhdGU7cmV0dXJuIGIud2luZG93JiYoYi53aW5kb3c9bnVsbCksYS5zdGF0ZT1udWxsLER9ZnVuY3Rpb24gbyhhLGIpe3ZhciBjO3JldHVybiBhJiZhLnN0YXRlPyhjPWEuc3RhdGUsMD09PSgyJmMud3JhcCk/RzooYy5oZWFkPWIsYi5kb25lPSExLEQpKTpHfWZ1bmN0aW9uIHAoYSxiKXt2YXIgYyxkLGUsZj1iLmxlbmd0aDtyZXR1cm4gYSYmYS5zdGF0ZT8oYz1hLnN0YXRlLDAhPT1jLndyYXAmJmMubW9kZSE9PVY/RzpjLm1vZGU9PT1WJiYoZD0xLGQ9dChkLGIsZiwwKSxkIT09Yy5jaGVjayk/SDooZT1sKGEsYixmLGYpKT8oYy5tb2RlPW5hLEkpOihjLmhhdmVkaWN0PTEsRCkpOkd9dmFyIHEscixzPWEoXCIuLi91dGlscy9jb21tb25cIiksdD1hKFwiLi9hZGxlcjMyXCIpLHU9YShcIi4vY3JjMzJcIiksdj1hKFwiLi9pbmZmYXN0XCIpLHc9YShcIi4vaW5mdHJlZXNcIikseD0wLHk9MSx6PTIsQT00LEI9NSxDPTYsRD0wLEU9MSxGPTIsRz0tMixIPS0zLEk9LTQsSj0tNSxLPTgsTD0xLE09MixOPTMsTz00LFA9NSxRPTYsUj03LFM9OCxUPTksVT0xMCxWPTExLFc9MTIsWD0xMyxZPTE0LFo9MTUsJD0xNixfPTE3LGFhPTE4LGJhPTE5LGNhPTIwLGRhPTIxLGVhPTIyLGZhPTIzLGdhPTI0LGhhPTI1LGlhPTI2LGphPTI3LGthPTI4LGxhPTI5LG1hPTMwLG5hPTMxLG9hPTMyLHBhPTg1MixxYT01OTIscmE9MTUsc2E9cmEsdGE9ITA7Yy5pbmZsYXRlUmVzZXQ9ZyxjLmluZmxhdGVSZXNldDI9aCxjLmluZmxhdGVSZXNldEtlZXA9ZixjLmluZmxhdGVJbml0PWosYy5pbmZsYXRlSW5pdDI9aSxjLmluZmxhdGU9bSxjLmluZmxhdGVFbmQ9bixjLmluZmxhdGVHZXRIZWFkZXI9byxjLmluZmxhdGVTZXREaWN0aW9uYXJ5PXAsYy5pbmZsYXRlSW5mbz1cInBha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdClcIn0se1wiLi4vdXRpbHMvY29tbW9uXCI6NjAsXCIuL2FkbGVyMzJcIjo2MixcIi4vY3JjMzJcIjo2NCxcIi4vaW5mZmFzdFwiOjY3LFwiLi9pbmZ0cmVlc1wiOjY5fV0sNjk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1hKFwiLi4vdXRpbHMvY29tbW9uXCIpLGU9MTUsZj04NTIsZz01OTIsaD0wLGk9MSxqPTIsaz1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwwLDBdLGw9WzE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE3LDE3LDE3LDE3LDE4LDE4LDE4LDE4LDE5LDE5LDE5LDE5LDIwLDIwLDIwLDIwLDIxLDIxLDIxLDIxLDE2LDcyLDc4XSxtPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzcsMCwwXSxuPVsxNiwxNiwxNiwxNiwxNywxNywxOCwxOCwxOSwxOSwyMCwyMCwyMSwyMSwyMiwyMiwyMywyMywyNCwyNCwyNSwyNSwyNiwyNiwyNywyNywyOCwyOCwyOSwyOSw2NCw2NF07Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjLG8scCxxLHIscyl7dmFyIHQsdSx2LHcseCx5LHosQSxCLEM9cy5iaXRzLEQ9MCxFPTAsRj0wLEc9MCxIPTAsST0wLEo9MCxLPTAsTD0wLE09MCxOPW51bGwsTz0wLFA9bmV3IGQuQnVmMTYoZSsxKSxRPW5ldyBkLkJ1ZjE2KGUrMSksUj1udWxsLFM9MDtmb3IoRD0wO0Q8PWU7RCsrKVBbRF09MDtmb3IoRT0wO0U8bztFKyspUFtiW2MrRV1dKys7Zm9yKEg9QyxHPWU7Rz49MSYmMD09PVBbR107Ry0tKTtpZihIPkcmJihIPUcpLDA9PT1HKXJldHVybiBwW3ErK109MjA5NzE1MjAscFtxKytdPTIwOTcxNTIwLHMuYml0cz0xLDA7Zm9yKEY9MTtGPEcmJjA9PT1QW0ZdO0YrKyk7Zm9yKEg8RiYmKEg9RiksSz0xLEQ9MTtEPD1lO0QrKylpZihLPDw9MSxLLT1QW0RdLEs8MClyZXR1cm4tMTtpZihLPjAmJihhPT09aHx8MSE9PUcpKXJldHVybi0xO2ZvcihRWzFdPTAsRD0xO0Q8ZTtEKyspUVtEKzFdPVFbRF0rUFtEXTtmb3IoRT0wO0U8bztFKyspMCE9PWJbYytFXSYmKHJbUVtiW2MrRV1dKytdPUUpO2lmKGE9PT1oPyhOPVI9cix5PTE5KTphPT09aT8oTj1rLE8tPTI1NyxSPWwsUy09MjU3LHk9MjU2KTooTj1tLFI9bix5PS0xKSxNPTAsRT0wLEQ9Rix4PXEsST1ILEo9MCx2PS0xLEw9MTw8SCx3PUwtMSxhPT09aSYmTD5mfHxhPT09aiYmTD5nKXJldHVybiAxO2Zvcih2YXIgVD0wOzspe1QrKyx6PUQtSixyW0VdPHk/KEE9MCxCPXJbRV0pOnJbRV0+eT8oQT1SW1MrcltFXV0sQj1OW08rcltFXV0pOihBPTk2LEI9MCksdD0xPDxELUosdT0xPDxJLEY9dTtkbyB1LT10LHBbeCsoTT4+SikrdV09ejw8MjR8QTw8MTZ8QnwwO3doaWxlKDAhPT11KTtmb3IodD0xPDxELTE7TSZ0Oyl0Pj49MTtpZigwIT09dD8oTSY9dC0xLE0rPXQpOk09MCxFKyssMD09PS0tUFtEXSl7aWYoRD09PUcpYnJlYWs7RD1iW2MrcltFXV19aWYoRD5IJiYoTSZ3KSE9PXYpe2ZvcigwPT09SiYmKEo9SCkseCs9RixJPUQtSixLPTE8PEk7SStKPEcmJihLLT1QW0krSl0sIShLPD0wKSk7KUkrKyxLPDw9MTtpZihMKz0xPDxJLGE9PT1pJiZMPmZ8fGE9PT1qJiZMPmcpcmV0dXJuIDE7dj1NJncscFt2XT1IPDwyNHxJPDwxNnx4LXF8MH19cmV0dXJuIDAhPT1NJiYocFt4K01dPUQtSjw8MjR8NjQ8PDE2fDApLHMuYml0cz1ILDB9fSx7XCIuLi91dGlscy9jb21tb25cIjo2MH1dLDcwOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yi5leHBvcnRzPXsyOlwibmVlZCBkaWN0aW9uYXJ5XCIsMTpcInN0cmVhbSBlbmRcIiwwOlwiXCIsXCItMVwiOlwiZmlsZSBlcnJvclwiLFwiLTJcIjpcInN0cmVhbSBlcnJvclwiLFwiLTNcIjpcImRhdGEgZXJyb3JcIixcIi00XCI6XCJpbnN1ZmZpY2llbnQgbWVtb3J5XCIsXCItNVwiOlwiYnVmZmVyIGVycm9yXCIsXCItNlwiOlwiaW5jb21wYXRpYmxlIHZlcnNpb25cIn19LHt9XSw3MTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPWEubGVuZ3RoOy0tYj49MDspYVtiXT0wfWZ1bmN0aW9uIGUoYSxiLGMsZCxlKXt0aGlzLnN0YXRpY190cmVlPWEsdGhpcy5leHRyYV9iaXRzPWIsdGhpcy5leHRyYV9iYXNlPWMsdGhpcy5lbGVtcz1kLHRoaXMubWF4X2xlbmd0aD1lLHRoaXMuaGFzX3N0cmVlPWEmJmEubGVuZ3RofWZ1bmN0aW9uIGYoYSxiKXt0aGlzLmR5bl90cmVlPWEsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWJ9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gYTwyNTY/aWFbYV06aWFbMjU2KyhhPj4+NyldfWZ1bmN0aW9uIGgoYSxiKXthLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT0yNTUmYixhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT1iPj4+OCYyNTV9ZnVuY3Rpb24gaShhLGIsYyl7YS5iaV92YWxpZD5YLWM/KGEuYmlfYnVmfD1iPDxhLmJpX3ZhbGlkJjY1NTM1LGgoYSxhLmJpX2J1ZiksYS5iaV9idWY9Yj4+WC1hLmJpX3ZhbGlkLGEuYmlfdmFsaWQrPWMtWCk6KGEuYmlfYnVmfD1iPDxhLmJpX3ZhbGlkJjY1NTM1LGEuYmlfdmFsaWQrPWMpfWZ1bmN0aW9uIGooYSxiLGMpe2koYSxjWzIqYl0sY1syKmIrMV0pfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYz0wO2RvIGN8PTEmYSxhPj4+PTEsYzw8PTE7d2hpbGUoLS1iPjApO3JldHVybiBjPj4+MX1mdW5jdGlvbiBsKGEpezE2PT09YS5iaV92YWxpZD8oaChhLGEuYmlfYnVmKSxhLmJpX2J1Zj0wLGEuYmlfdmFsaWQ9MCk6YS5iaV92YWxpZD49OCYmKGEucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPTI1NSZhLmJpX2J1ZixhLmJpX2J1Zj4+PTgsYS5iaV92YWxpZC09OCl9ZnVuY3Rpb24gbShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpPWIuZHluX3RyZWUsaj1iLm1heF9jb2RlLGs9Yi5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsbD1iLnN0YXRfZGVzYy5oYXNfc3RyZWUsbT1iLnN0YXRfZGVzYy5leHRyYV9iaXRzLG49Yi5zdGF0X2Rlc2MuZXh0cmFfYmFzZSxvPWIuc3RhdF9kZXNjLm1heF9sZW5ndGgscD0wO2ZvcihmPTA7Zjw9VztmKyspYS5ibF9jb3VudFtmXT0wO2ZvcihpWzIqYS5oZWFwW2EuaGVhcF9tYXhdKzFdPTAsYz1hLmhlYXBfbWF4KzE7YzxWO2MrKylkPWEuaGVhcFtjXSxmPWlbMippWzIqZCsxXSsxXSsxLGY+byYmKGY9byxwKyspLGlbMipkKzFdPWYsZD5qfHwoYS5ibF9jb3VudFtmXSsrLGc9MCxkPj1uJiYoZz1tW2Qtbl0pLGg9aVsyKmRdLGEub3B0X2xlbis9aCooZitnKSxsJiYoYS5zdGF0aWNfbGVuKz1oKihrWzIqZCsxXStnKSkpO2lmKDAhPT1wKXtkb3tmb3IoZj1vLTE7MD09PWEuYmxfY291bnRbZl07KWYtLTthLmJsX2NvdW50W2ZdLS0sYS5ibF9jb3VudFtmKzFdKz0yLGEuYmxfY291bnRbb10tLSxwLT0yfXdoaWxlKHA+MCk7Zm9yKGY9bzswIT09ZjtmLS0pZm9yKGQ9YS5ibF9jb3VudFtmXTswIT09ZDspZT1hLmhlYXBbLS1jXSxlPmp8fChpWzIqZSsxXSE9PWYmJihhLm9wdF9sZW4rPShmLWlbMiplKzFdKSppWzIqZV0saVsyKmUrMV09ZiksZC0tKX19ZnVuY3Rpb24gbihhLGIsYyl7dmFyIGQsZSxmPW5ldyBBcnJheShXKzEpLGc9MDtmb3IoZD0xO2Q8PVc7ZCsrKWZbZF09Zz1nK2NbZC0xXTw8MTtmb3IoZT0wO2U8PWI7ZSsrKXt2YXIgaD1hWzIqZSsxXTswIT09aCYmKGFbMiplXT1rKGZbaF0rKyxoKSl9fWZ1bmN0aW9uIG8oKXt2YXIgYSxiLGMsZCxmLGc9bmV3IEFycmF5KFcrMSk7Zm9yKGM9MCxkPTA7ZDxRLTE7ZCsrKWZvcihrYVtkXT1jLGE9MDthPDE8PGJhW2RdO2ErKylqYVtjKytdPWQ7Zm9yKGphW2MtMV09ZCxmPTAsZD0wO2Q8MTY7ZCsrKWZvcihsYVtkXT1mLGE9MDthPDE8PGNhW2RdO2ErKylpYVtmKytdPWQ7Zm9yKGY+Pj03O2Q8VDtkKyspZm9yKGxhW2RdPWY8PDcsYT0wO2E8MTw8Y2FbZF0tNzthKyspaWFbMjU2K2YrK109ZDtmb3IoYj0wO2I8PVc7YisrKWdbYl09MDtmb3IoYT0wO2E8PTE0MzspZ2FbMiphKzFdPTgsYSsrLGdbOF0rKztmb3IoO2E8PTI1NTspZ2FbMiphKzFdPTksYSsrLGdbOV0rKztmb3IoO2E8PTI3OTspZ2FbMiphKzFdPTcsYSsrLGdbN10rKztmb3IoO2E8PTI4NzspZ2FbMiphKzFdPTgsYSsrLGdbOF0rKztmb3IobihnYSxTKzEsZyksYT0wO2E8VDthKyspaGFbMiphKzFdPTUsaGFbMiphXT1rKGEsNSk7bWE9bmV3IGUoZ2EsYmEsUisxLFMsVyksbmE9bmV3IGUoaGEsY2EsMCxULFcpLG9hPW5ldyBlKG5ldyBBcnJheSgwKSxkYSwwLFUsWSl9ZnVuY3Rpb24gcChhKXt2YXIgYjtmb3IoYj0wO2I8UztiKyspYS5keW5fbHRyZWVbMipiXT0wO2ZvcihiPTA7YjxUO2IrKylhLmR5bl9kdHJlZVsyKmJdPTA7Zm9yKGI9MDtiPFU7YisrKWEuYmxfdHJlZVsyKmJdPTA7YS5keW5fbHRyZWVbMipaXT0xLGEub3B0X2xlbj1hLnN0YXRpY19sZW49MCxhLmxhc3RfbGl0PWEubWF0Y2hlcz0wfWZ1bmN0aW9uIHEoYSl7YS5iaV92YWxpZD44P2goYSxhLmJpX2J1Zik6YS5iaV92YWxpZD4wJiYoYS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109YS5iaV9idWYpLGEuYmlfYnVmPTAsYS5iaV92YWxpZD0wfWZ1bmN0aW9uIHIoYSxiLGMsZCl7cShhKSxkJiYoaChhLGMpLGgoYSx+YykpLEcuYXJyYXlTZXQoYS5wZW5kaW5nX2J1ZixhLndpbmRvdyxiLGMsYS5wZW5kaW5nKSxhLnBlbmRpbmcrPWN9ZnVuY3Rpb24gcyhhLGIsYyxkKXt2YXIgZT0yKmIsZj0yKmM7cmV0dXJuIGFbZV08YVtmXXx8YVtlXT09PWFbZl0mJmRbYl08PWRbY107XHJcbn1mdW5jdGlvbiB0KGEsYixjKXtmb3IodmFyIGQ9YS5oZWFwW2NdLGU9Yzw8MTtlPD1hLmhlYXBfbGVuJiYoZTxhLmhlYXBfbGVuJiZzKGIsYS5oZWFwW2UrMV0sYS5oZWFwW2VdLGEuZGVwdGgpJiZlKyssIXMoYixkLGEuaGVhcFtlXSxhLmRlcHRoKSk7KWEuaGVhcFtjXT1hLmhlYXBbZV0sYz1lLGU8PD0xO2EuaGVhcFtjXT1kfWZ1bmN0aW9uIHUoYSxiLGMpe3ZhciBkLGUsZixoLGs9MDtpZigwIT09YS5sYXN0X2xpdClkbyBkPWEucGVuZGluZ19idWZbYS5kX2J1ZisyKmtdPDw4fGEucGVuZGluZ19idWZbYS5kX2J1ZisyKmsrMV0sZT1hLnBlbmRpbmdfYnVmW2EubF9idWYra10saysrLDA9PT1kP2ooYSxlLGIpOihmPWphW2VdLGooYSxmK1IrMSxiKSxoPWJhW2ZdLDAhPT1oJiYoZS09a2FbZl0saShhLGUsaCkpLGQtLSxmPWcoZCksaihhLGYsYyksaD1jYVtmXSwwIT09aCYmKGQtPWxhW2ZdLGkoYSxkLGgpKSk7d2hpbGUoazxhLmxhc3RfbGl0KTtqKGEsWixiKX1mdW5jdGlvbiB2KGEsYil7dmFyIGMsZCxlLGY9Yi5keW5fdHJlZSxnPWIuc3RhdF9kZXNjLnN0YXRpY190cmVlLGg9Yi5zdGF0X2Rlc2MuaGFzX3N0cmVlLGk9Yi5zdGF0X2Rlc2MuZWxlbXMsaj0tMTtmb3IoYS5oZWFwX2xlbj0wLGEuaGVhcF9tYXg9VixjPTA7YzxpO2MrKykwIT09ZlsyKmNdPyhhLmhlYXBbKythLmhlYXBfbGVuXT1qPWMsYS5kZXB0aFtjXT0wKTpmWzIqYysxXT0wO2Zvcig7YS5oZWFwX2xlbjwyOyllPWEuaGVhcFsrK2EuaGVhcF9sZW5dPWo8Mj8rK2o6MCxmWzIqZV09MSxhLmRlcHRoW2VdPTAsYS5vcHRfbGVuLS0saCYmKGEuc3RhdGljX2xlbi09Z1syKmUrMV0pO2ZvcihiLm1heF9jb2RlPWosYz1hLmhlYXBfbGVuPj4xO2M+PTE7Yy0tKXQoYSxmLGMpO2U9aTtkbyBjPWEuaGVhcFsxXSxhLmhlYXBbMV09YS5oZWFwW2EuaGVhcF9sZW4tLV0sdChhLGYsMSksZD1hLmhlYXBbMV0sYS5oZWFwWy0tYS5oZWFwX21heF09YyxhLmhlYXBbLS1hLmhlYXBfbWF4XT1kLGZbMiplXT1mWzIqY10rZlsyKmRdLGEuZGVwdGhbZV09KGEuZGVwdGhbY10+PWEuZGVwdGhbZF0/YS5kZXB0aFtjXTphLmRlcHRoW2RdKSsxLGZbMipjKzFdPWZbMipkKzFdPWUsYS5oZWFwWzFdPWUrKyx0KGEsZiwxKTt3aGlsZShhLmhlYXBfbGVuPj0yKTthLmhlYXBbLS1hLmhlYXBfbWF4XT1hLmhlYXBbMV0sbShhLGIpLG4oZixqLGEuYmxfY291bnQpfWZ1bmN0aW9uIHcoYSxiLGMpe3ZhciBkLGUsZj0tMSxnPWJbMV0saD0wLGk9NyxqPTQ7Zm9yKDA9PT1nJiYoaT0xMzgsaj0zKSxiWzIqKGMrMSkrMV09NjU1MzUsZD0wO2Q8PWM7ZCsrKWU9ZyxnPWJbMiooZCsxKSsxXSwrK2g8aSYmZT09PWd8fChoPGo/YS5ibF90cmVlWzIqZV0rPWg6MCE9PWU/KGUhPT1mJiZhLmJsX3RyZWVbMiplXSsrLGEuYmxfdHJlZVsyKiRdKyspOmg8PTEwP2EuYmxfdHJlZVsyKl9dKys6YS5ibF90cmVlWzIqYWFdKyssaD0wLGY9ZSwwPT09Zz8oaT0xMzgsaj0zKTplPT09Zz8oaT02LGo9Myk6KGk9NyxqPTQpKX1mdW5jdGlvbiB4KGEsYixjKXt2YXIgZCxlLGY9LTEsZz1iWzFdLGg9MCxrPTcsbD00O2ZvcigwPT09ZyYmKGs9MTM4LGw9MyksZD0wO2Q8PWM7ZCsrKWlmKGU9ZyxnPWJbMiooZCsxKSsxXSwhKCsraDxrJiZlPT09Zykpe2lmKGg8bCl7ZG8gaihhLGUsYS5ibF90cmVlKTt3aGlsZSgwIT09LS1oKX1lbHNlIDAhPT1lPyhlIT09ZiYmKGooYSxlLGEuYmxfdHJlZSksaC0tKSxqKGEsJCxhLmJsX3RyZWUpLGkoYSxoLTMsMikpOmg8PTEwPyhqKGEsXyxhLmJsX3RyZWUpLGkoYSxoLTMsMykpOihqKGEsYWEsYS5ibF90cmVlKSxpKGEsaC0xMSw3KSk7aD0wLGY9ZSwwPT09Zz8oaz0xMzgsbD0zKTplPT09Zz8oaz02LGw9Myk6KGs9NyxsPTQpfX1mdW5jdGlvbiB5KGEpe3ZhciBiO2Zvcih3KGEsYS5keW5fbHRyZWUsYS5sX2Rlc2MubWF4X2NvZGUpLHcoYSxhLmR5bl9kdHJlZSxhLmRfZGVzYy5tYXhfY29kZSksdihhLGEuYmxfZGVzYyksYj1VLTE7Yj49MyYmMD09PWEuYmxfdHJlZVsyKmVhW2JdKzFdO2ItLSk7cmV0dXJuIGEub3B0X2xlbis9MyooYisxKSs1KzUrNCxifWZ1bmN0aW9uIHooYSxiLGMsZCl7dmFyIGU7Zm9yKGkoYSxiLTI1Nyw1KSxpKGEsYy0xLDUpLGkoYSxkLTQsNCksZT0wO2U8ZDtlKyspaShhLGEuYmxfdHJlZVsyKmVhW2VdKzFdLDMpO3goYSxhLmR5bl9sdHJlZSxiLTEpLHgoYSxhLmR5bl9kdHJlZSxjLTEpfWZ1bmN0aW9uIEEoYSl7dmFyIGIsYz00MDkzNjI0NDQ3O2ZvcihiPTA7Yjw9MzE7YisrLGM+Pj49MSlpZigxJmMmJjAhPT1hLmR5bl9sdHJlZVsyKmJdKXJldHVybiBJO2lmKDAhPT1hLmR5bl9sdHJlZVsxOF18fDAhPT1hLmR5bl9sdHJlZVsyMF18fDAhPT1hLmR5bl9sdHJlZVsyNl0pcmV0dXJuIEo7Zm9yKGI9MzI7YjxSO2IrKylpZigwIT09YS5keW5fbHRyZWVbMipiXSlyZXR1cm4gSjtyZXR1cm4gSX1mdW5jdGlvbiBCKGEpe3BhfHwobygpLHBhPSEwKSxhLmxfZGVzYz1uZXcgZihhLmR5bl9sdHJlZSxtYSksYS5kX2Rlc2M9bmV3IGYoYS5keW5fZHRyZWUsbmEpLGEuYmxfZGVzYz1uZXcgZihhLmJsX3RyZWUsb2EpLGEuYmlfYnVmPTAsYS5iaV92YWxpZD0wLHAoYSl9ZnVuY3Rpb24gQyhhLGIsYyxkKXtpKGEsKEw8PDEpKyhkPzE6MCksMykscihhLGIsYywhMCl9ZnVuY3Rpb24gRChhKXtpKGEsTTw8MSwzKSxqKGEsWixnYSksbChhKX1mdW5jdGlvbiBFKGEsYixjLGQpe3ZhciBlLGYsZz0wO2EubGV2ZWw+MD8oYS5zdHJtLmRhdGFfdHlwZT09PUsmJihhLnN0cm0uZGF0YV90eXBlPUEoYSkpLHYoYSxhLmxfZGVzYyksdihhLGEuZF9kZXNjKSxnPXkoYSksZT1hLm9wdF9sZW4rMys3Pj4+MyxmPWEuc3RhdGljX2xlbiszKzc+Pj4zLGY8PWUmJihlPWYpKTplPWY9Yys1LGMrNDw9ZSYmYiE9PS0xP0MoYSxiLGMsZCk6YS5zdHJhdGVneT09PUh8fGY9PT1lPyhpKGEsKE08PDEpKyhkPzE6MCksMyksdShhLGdhLGhhKSk6KGkoYSwoTjw8MSkrKGQ/MTowKSwzKSx6KGEsYS5sX2Rlc2MubWF4X2NvZGUrMSxhLmRfZGVzYy5tYXhfY29kZSsxLGcrMSksdShhLGEuZHluX2x0cmVlLGEuZHluX2R0cmVlKSkscChhKSxkJiZxKGEpfWZ1bmN0aW9uIEYoYSxiLGMpe3JldHVybiBhLnBlbmRpbmdfYnVmW2EuZF9idWYrMiphLmxhc3RfbGl0XT1iPj4+OCYyNTUsYS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqYS5sYXN0X2xpdCsxXT0yNTUmYixhLnBlbmRpbmdfYnVmW2EubF9idWYrYS5sYXN0X2xpdF09MjU1JmMsYS5sYXN0X2xpdCsrLDA9PT1iP2EuZHluX2x0cmVlWzIqY10rKzooYS5tYXRjaGVzKyssYi0tLGEuZHluX2x0cmVlWzIqKGphW2NdK1IrMSldKyssYS5keW5fZHRyZWVbMipnKGIpXSsrKSxhLmxhc3RfbGl0PT09YS5saXRfYnVmc2l6ZS0xfXZhciBHPWEoXCIuLi91dGlscy9jb21tb25cIiksSD00LEk9MCxKPTEsSz0yLEw9MCxNPTEsTj0yLE89MyxQPTI1OCxRPTI5LFI9MjU2LFM9UisxK1EsVD0zMCxVPTE5LFY9MipTKzEsVz0xNSxYPTE2LFk9NyxaPTI1NiwkPTE2LF89MTcsYWE9MTgsYmE9WzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF0sY2E9WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdLGRhPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDIsMyw3XSxlYT1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0sZmE9NTEyLGdhPW5ldyBBcnJheSgyKihTKzIpKTtkKGdhKTt2YXIgaGE9bmV3IEFycmF5KDIqVCk7ZChoYSk7dmFyIGlhPW5ldyBBcnJheShmYSk7ZChpYSk7dmFyIGphPW5ldyBBcnJheShQLU8rMSk7ZChqYSk7dmFyIGthPW5ldyBBcnJheShRKTtkKGthKTt2YXIgbGE9bmV3IEFycmF5KFQpO2QobGEpO3ZhciBtYSxuYSxvYSxwYT0hMTtjLl90cl9pbml0PUIsYy5fdHJfc3RvcmVkX2Jsb2NrPUMsYy5fdHJfZmx1c2hfYmxvY2s9RSxjLl90cl90YWxseT1GLGMuX3RyX2FsaWduPUR9LHtcIi4uL3V0aWxzL2NvbW1vblwiOjYwfV0sNzI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPVwiXCIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfWIuZXhwb3J0cz1kfSx7fV19LHt9LFsxMF0pKDEwKX0pOyJdLCJmaWxlIjoianN6aXAubWluLmpzIn0=

(function(global){

  /*
  Channels

  delivery.connect
  file.load

  send.start
  send.success
  send.error

  receive.start
  receive.success
  receive.error
  */
  var imageFilter = /^(image\/gif|image\/jpeg|image\/png|image\/svg\+xml|image\/tiff)/i,
      pubSub;
  
  /********************************/
  /****        PUBSUB     *********/
  /********************************/
  function PubSub(){
    this.channels = {};
  };

  PubSub.prototype.subscribe = function(channel, fn){
    if (this.channels[channel] === undefined) {
      this.channels[channel] = [fn];
    }else{
      this.channels[channel].push(fn);
    };
  };

  PubSub.prototype.publish = function(channel,obj){
    var cnl = this.channels[channel];
    var numChannels = (cnl === undefined) ? 0 : cnl.length;
    for (var i = 0; i < numChannels; i++) {
      cnl[i](obj);
    };
  };

  /********************************/
  /****        FilePackage    *****/
  /********************************/
  function FilePackage(file,receiving,params){
    _this = this;
    this.name = file.name;
    this.size = file.size;
    
    if(receiving){
      this.uid = file.uid;
      this.isText = file.isText;
      this.mimeType = file.mimeType;
      this.data = file.data;
      this.dataURLPrefix = file.prefix;
      this.params = file.params;
      pubSub.publish('receive.success',this);
    }else{
      //Sending a file.
      this.params = params;
      this.uid = this.getUID();
      this.reader = new FileReader();
    
      this.reader.onerror = function(obj){};

      this.reader.onload = function(){
        _this.base64Data = _this.reader.result;
        _this.prepBatch();
      };

      this.reader.readAsDataURL(file);
    };
  };


  FilePackage.prototype.getUID = function(){
    //fix this
    return this.name + this.size + (new Date()).getTime();  
  };

  FilePackage.prototype.prepBatch = function(){
    //replace 'data:image/gif;base64,' with ''
    this.data = this.base64Data.replace(/^[^,]*,/,'');
    this.batch = {
      uid: this.uid,
      name: this.name,
      size: this.size,
      data: this.data,
      params: this.params
    };
    pubSub.publish('file.load',this);
  };

  FilePackage.prototype.isImage = function(){
    return imageFilter.test(this.mimeType);
  };

  FilePackage.prototype.isText = function(){
    return this.isText;
  }

  FilePackage.prototype.text = function(){
    return this.data;
  }

  FilePackage.prototype.dataURL = function(){
    return this.dataURLPrefix + this.data;
  };

  /********************************/
  /****        DELIVERY     *******/
  /********************************/
  function Delivery(socket){
    this.socket = socket;
    this.sending = {};
    this.receiving = {};
    this.connected = false;
    this.subscribe();
    this.connect();
  };

  Delivery.prototype.subscribe = function(){
    var _this = this;
    pubSub.subscribe('file.load',function(filePackage){
      _this.socket.emit('send.start',filePackage.batch);
    });

    pubSub.subscribe('receive.success',function(filePackage){
      _this.socket.emit('send.success',filePackage.uid);

    });

    //Socket Subscriptions
    this.socket.on('send.success',function(uid){
      pubSub.publish('send.success',_this.sending[uid]);
      delete _this.sending[uid];    
    });

    this.socket.on('receive.start',function(file){
      pubSub.publish('receive.start',file.uid);
      var filePackage = new FilePackage(file,true);
      _this.receiving[file.uid] = filePackage;
      
    });


  };

  Delivery.prototype.connect = function(){
    var _this = this;
    this.socket.on('delivery.connect',function(){
      _this.connected = true;
      pubSub.publish('delivery.connect', _this);
    });
    this.socket.emit('delivery.connecting','');
  };

  Delivery.prototype.on = function(evt,fn){
    if (evt === 'delivery.connect' && this.connected) {
      return fn(this); 
    };
    pubSub.subscribe(evt,fn);    
  };

  Delivery.prototype.off = function(evt){
    throw "Delivery.off() has not yet been implemented.";
  };

  Delivery.prototype.send = function(file, params){
    var filePackage = new FilePackage(file, false, params);
    this.sending[filePackage.uid] = filePackage;
    return filePackage.uid;
  };



  pubSub = new PubSub();

  window.Delivery = Delivery;

})(window);


/*
todo: server
Receive batch & send batch
batch should send DataURL prefix

*/
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJkZWxpdmVyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oZ2xvYmFsKXtcclxuXHJcbiAgLypcclxuICBDaGFubmVsc1xyXG5cclxuICBkZWxpdmVyeS5jb25uZWN0XHJcbiAgZmlsZS5sb2FkXHJcblxyXG4gIHNlbmQuc3RhcnRcclxuICBzZW5kLnN1Y2Nlc3NcclxuICBzZW5kLmVycm9yXHJcblxyXG4gIHJlY2VpdmUuc3RhcnRcclxuICByZWNlaXZlLnN1Y2Nlc3NcclxuICByZWNlaXZlLmVycm9yXHJcbiAgKi9cclxuICB2YXIgaW1hZ2VGaWx0ZXIgPSAvXihpbWFnZVxcL2dpZnxpbWFnZVxcL2pwZWd8aW1hZ2VcXC9wbmd8aW1hZ2VcXC9zdmdcXCt4bWx8aW1hZ2VcXC90aWZmKS9pLFxyXG4gICAgICBwdWJTdWI7XHJcbiAgXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qKioqICAgICAgICBQVUJTVUIgICAgICoqKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgZnVuY3Rpb24gUHViU3ViKCl7XHJcbiAgICB0aGlzLmNoYW5uZWxzID0ge307XHJcbiAgfTtcclxuXHJcbiAgUHViU3ViLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihjaGFubmVsLCBmbil7XHJcbiAgICBpZiAodGhpcy5jaGFubmVsc1tjaGFubmVsXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuY2hhbm5lbHNbY2hhbm5lbF0gPSBbZm5dO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIHRoaXMuY2hhbm5lbHNbY2hhbm5lbF0ucHVzaChmbik7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIFB1YlN1Yi5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uKGNoYW5uZWwsb2JqKXtcclxuICAgIHZhciBjbmwgPSB0aGlzLmNoYW5uZWxzW2NoYW5uZWxdO1xyXG4gICAgdmFyIG51bUNoYW5uZWxzID0gKGNubCA9PT0gdW5kZWZpbmVkKSA/IDAgOiBjbmwubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1DaGFubmVsczsgaSsrKSB7XHJcbiAgICAgIGNubFtpXShvYmopO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLyoqKiogICAgICAgIEZpbGVQYWNrYWdlICAgICoqKioqL1xyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICBmdW5jdGlvbiBGaWxlUGFja2FnZShmaWxlLHJlY2VpdmluZyxwYXJhbXMpe1xyXG4gICAgX3RoaXMgPSB0aGlzO1xyXG4gICAgdGhpcy5uYW1lID0gZmlsZS5uYW1lO1xyXG4gICAgdGhpcy5zaXplID0gZmlsZS5zaXplO1xyXG4gICAgXHJcbiAgICBpZihyZWNlaXZpbmcpe1xyXG4gICAgICB0aGlzLnVpZCA9IGZpbGUudWlkO1xyXG4gICAgICB0aGlzLmlzVGV4dCA9IGZpbGUuaXNUZXh0O1xyXG4gICAgICB0aGlzLm1pbWVUeXBlID0gZmlsZS5taW1lVHlwZTtcclxuICAgICAgdGhpcy5kYXRhID0gZmlsZS5kYXRhO1xyXG4gICAgICB0aGlzLmRhdGFVUkxQcmVmaXggPSBmaWxlLnByZWZpeDtcclxuICAgICAgdGhpcy5wYXJhbXMgPSBmaWxlLnBhcmFtcztcclxuICAgICAgcHViU3ViLnB1Ymxpc2goJ3JlY2VpdmUuc3VjY2VzcycsdGhpcyk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgLy9TZW5kaW5nIGEgZmlsZS5cclxuICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICAgIHRoaXMudWlkID0gdGhpcy5nZXRVSUQoKTtcclxuICAgICAgdGhpcy5yZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgXHJcbiAgICAgIHRoaXMucmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihvYmope307XHJcblxyXG4gICAgICB0aGlzLnJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIF90aGlzLmJhc2U2NERhdGEgPSBfdGhpcy5yZWFkZXIucmVzdWx0O1xyXG4gICAgICAgIF90aGlzLnByZXBCYXRjaCgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5yZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS5nZXRVSUQgPSBmdW5jdGlvbigpe1xyXG4gICAgLy9maXggdGhpc1xyXG4gICAgcmV0dXJuIHRoaXMubmFtZSArIHRoaXMuc2l6ZSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7ICBcclxuICB9O1xyXG5cclxuICBGaWxlUGFja2FnZS5wcm90b3R5cGUucHJlcEJhdGNoID0gZnVuY3Rpb24oKXtcclxuICAgIC8vcmVwbGFjZSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LCcgd2l0aCAnJ1xyXG4gICAgdGhpcy5kYXRhID0gdGhpcy5iYXNlNjREYXRhLnJlcGxhY2UoL15bXixdKiwvLCcnKTtcclxuICAgIHRoaXMuYmF0Y2ggPSB7XHJcbiAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgc2l6ZTogdGhpcy5zaXplLFxyXG4gICAgICBkYXRhOiB0aGlzLmRhdGEsXHJcbiAgICAgIHBhcmFtczogdGhpcy5wYXJhbXNcclxuICAgIH07XHJcbiAgICBwdWJTdWIucHVibGlzaCgnZmlsZS5sb2FkJyx0aGlzKTtcclxuICB9O1xyXG5cclxuICBGaWxlUGFja2FnZS5wcm90b3R5cGUuaXNJbWFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gaW1hZ2VGaWx0ZXIudGVzdCh0aGlzLm1pbWVUeXBlKTtcclxuICB9O1xyXG5cclxuICBGaWxlUGFja2FnZS5wcm90b3R5cGUuaXNUZXh0ID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLmlzVGV4dDtcclxuICB9XHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS50ZXh0ID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLmRhdGE7XHJcbiAgfVxyXG5cclxuICBGaWxlUGFja2FnZS5wcm90b3R5cGUuZGF0YVVSTCA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhVVJMUHJlZml4ICsgdGhpcy5kYXRhO1xyXG4gIH07XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKiAgICAgICAgREVMSVZFUlkgICAgICoqKioqKiovXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIGZ1bmN0aW9uIERlbGl2ZXJ5KHNvY2tldCl7XHJcbiAgICB0aGlzLnNvY2tldCA9IHNvY2tldDtcclxuICAgIHRoaXMuc2VuZGluZyA9IHt9O1xyXG4gICAgdGhpcy5yZWNlaXZpbmcgPSB7fTtcclxuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnN1YnNjcmliZSgpO1xyXG4gICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgfTtcclxuXHJcbiAgRGVsaXZlcnkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgcHViU3ViLnN1YnNjcmliZSgnZmlsZS5sb2FkJyxmdW5jdGlvbihmaWxlUGFja2FnZSl7XHJcbiAgICAgIF90aGlzLnNvY2tldC5lbWl0KCdzZW5kLnN0YXJ0JyxmaWxlUGFja2FnZS5iYXRjaCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwdWJTdWIuc3Vic2NyaWJlKCdyZWNlaXZlLnN1Y2Nlc3MnLGZ1bmN0aW9uKGZpbGVQYWNrYWdlKXtcclxuICAgICAgX3RoaXMuc29ja2V0LmVtaXQoJ3NlbmQuc3VjY2VzcycsZmlsZVBhY2thZ2UudWlkKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL1NvY2tldCBTdWJzY3JpcHRpb25zXHJcbiAgICB0aGlzLnNvY2tldC5vbignc2VuZC5zdWNjZXNzJyxmdW5jdGlvbih1aWQpe1xyXG4gICAgICBwdWJTdWIucHVibGlzaCgnc2VuZC5zdWNjZXNzJyxfdGhpcy5zZW5kaW5nW3VpZF0pO1xyXG4gICAgICBkZWxldGUgX3RoaXMuc2VuZGluZ1t1aWRdOyAgICBcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc29ja2V0Lm9uKCdyZWNlaXZlLnN0YXJ0JyxmdW5jdGlvbihmaWxlKXtcclxuICAgICAgcHViU3ViLnB1Ymxpc2goJ3JlY2VpdmUuc3RhcnQnLGZpbGUudWlkKTtcclxuICAgICAgdmFyIGZpbGVQYWNrYWdlID0gbmV3IEZpbGVQYWNrYWdlKGZpbGUsdHJ1ZSk7XHJcbiAgICAgIF90aGlzLnJlY2VpdmluZ1tmaWxlLnVpZF0gPSBmaWxlUGFja2FnZTtcclxuICAgICAgXHJcbiAgICB9KTtcclxuXHJcblxyXG4gIH07XHJcblxyXG4gIERlbGl2ZXJ5LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICB0aGlzLnNvY2tldC5vbignZGVsaXZlcnkuY29ubmVjdCcsZnVuY3Rpb24oKXtcclxuICAgICAgX3RoaXMuY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgcHViU3ViLnB1Ymxpc2goJ2RlbGl2ZXJ5LmNvbm5lY3QnLCBfdGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc29ja2V0LmVtaXQoJ2RlbGl2ZXJ5LmNvbm5lY3RpbmcnLCcnKTtcclxuICB9O1xyXG5cclxuICBEZWxpdmVyeS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldnQsZm4pe1xyXG4gICAgaWYgKGV2dCA9PT0gJ2RlbGl2ZXJ5LmNvbm5lY3QnICYmIHRoaXMuY29ubmVjdGVkKSB7XHJcbiAgICAgIHJldHVybiBmbih0aGlzKTsgXHJcbiAgICB9O1xyXG4gICAgcHViU3ViLnN1YnNjcmliZShldnQsZm4pOyAgICBcclxuICB9O1xyXG5cclxuICBEZWxpdmVyeS5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24oZXZ0KXtcclxuICAgIHRocm93IFwiRGVsaXZlcnkub2ZmKCkgaGFzIG5vdCB5ZXQgYmVlbiBpbXBsZW1lbnRlZC5cIjtcclxuICB9O1xyXG5cclxuICBEZWxpdmVyeS5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGZpbGUsIHBhcmFtcyl7XHJcbiAgICB2YXIgZmlsZVBhY2thZ2UgPSBuZXcgRmlsZVBhY2thZ2UoZmlsZSwgZmFsc2UsIHBhcmFtcyk7XHJcbiAgICB0aGlzLnNlbmRpbmdbZmlsZVBhY2thZ2UudWlkXSA9IGZpbGVQYWNrYWdlO1xyXG4gICAgcmV0dXJuIGZpbGVQYWNrYWdlLnVpZDtcclxuICB9O1xyXG5cclxuXHJcblxyXG4gIHB1YlN1YiA9IG5ldyBQdWJTdWIoKTtcclxuXHJcbiAgd2luZG93LkRlbGl2ZXJ5ID0gRGVsaXZlcnk7XHJcblxyXG59KSh3aW5kb3cpO1xyXG5cclxuXHJcbi8qXHJcbnRvZG86IHNlcnZlclxyXG5SZWNlaXZlIGJhdGNoICYgc2VuZCBiYXRjaFxyXG5iYXRjaCBzaG91bGQgc2VuZCBEYXRhVVJMIHByZWZpeFxyXG5cclxuKi8iXSwiZmlsZSI6ImRlbGl2ZXJ5LmpzIn0=

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){"object"===("undefined"==typeof t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var r,n=s(t),a=n.source,h=n.id,f=n.path,l=u[h]&&f in u[h].nsps,d=e.forceNew||e["force new connection"]||!1===e.multiplex||l;return d?(p("ignoring socket cache for %s",a),r=c(a,e)):(u[h]||(p("new io instance for %s",a),u[h]=c(a,e)),r=u[h]),n.query&&!e.query?e.query=n.query:e&&"object"===i(e.query)&&(e.query=o(e.query)),r.socket(n.path,e)}function o(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(1),a=r(6),c=r(14),p=r(3)("socket.io-client");t.exports=e=n;var u=e.managers={};e.protocol=a.protocol,e.connect=n,e.Manager=r(14),e.Socket=r(42)},function(t,e,r){(function(e){"use strict";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof r?r.protocol+"//"+t:"https://"+t),i("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=n.host.indexOf(":")!==-1,a=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2),i=r(3)("socket.io-client:url");t.exports=n}).call(e,function(){return this}())},function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=r(4),e.log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){function n(){return e.colors[u++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(p||r);t.diff=i,t.prev=p,t.curr=r,p=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=e.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(t,i),s.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=o.log||e.log||console.log.bind(console);c.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(5),e.names=[],e.skips=[],e.formatters={};var p,u=0},function(t,e){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*p;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=p?Math.round(t/p)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,p,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?o(t):n(t)}},function(t,e,r){function n(){}function o(t){var r="",n=!1;return r+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(r+=t.attachments,r+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,r+=t.nsp),null!=t.id&&(n&&(r+=",",n=!1),r+=t.id),null!=t.data&&(n&&(r+=","),r+=h.stringify(t.data)),u("encoded %j as %s",t,r),r}function i(t,e){function r(t){var r=l.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}l.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var r={},n=0;if(r.type=Number(t.charAt(0)),null==e.types[r.type])return p();if(e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type){for(var o="";"-"!=t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!=t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"==t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","==i)break;if(r.nsp+=i,n==t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n==t.length)break}r.id=Number(r.id)}if(t.charAt(++n))try{r.data=h.parse(t.substr(n))}catch(t){return p()}return u("decoded %s as %j",t,r),r}function c(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:e.ERROR,data:"parser error"}}var u=r(3)("socket.io-parser"),h=r(7),f=(r(10),r(11)),l=r(12),d=r(13);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,r){if(u("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)i(t,r);else{var n=o(t);r([n])}},f(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=a(t),e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type?(this.reconstructor=new c(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!d(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){var n;(function(t,o){(function(){function i(t,e){function r(t){if(r[t]!==g)return r[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var p=e.stringify,u="function"==typeof p&&b;if(u){(s=function(){return 1}).toJSON=s;try{u="0"===p(0)&&"0"===p(new n)&&'""'==p(new o)&&p(v)===g&&p(g)===g&&p()===g&&"1"===p(s)&&"[1]"==p([s])&&"[null]"==p([g])&&"null"==p(null)&&"[null,null,null]"==p([g,v,null])&&p({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===p(null,s)&&"[\n 1,\n 2\n]"==p([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==p(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==p(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==p(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==p(new c(-1))}catch(t){u=!1}}i=u}if("json-parse"==t){var h=e.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){s=h(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!h('"\t"')}catch(t){}if(f)try{f=1!==h("01")}catch(t){}if(f)try{f=1!==h("1.")}catch(t){}}}}catch(t){f=!1}i=f}}return r[t]=!!i}t||(t=p.Object()),e||(e=p.Object());var n=t.Number||p.Number,o=t.String||p.String,s=t.Object||p.Object,c=t.Date||p.Date,u=t.SyntaxError||p.SyntaxError,h=t.TypeError||p.TypeError,f=t.Math||p.Math,l=t.JSON||p.JSON;"object"==typeof l&&l&&(e.stringify=l.stringify,e.parse=l.parse);var d,y,g,m=s.prototype,v=m.toString,b=new c(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!r("json")){var k="[object Function]",w="[object Date]",x="[object Number]",A="[object String]",B="[object Array]",C="[object Boolean]",S=r("bug-string-char-index");if(!b)var _=f.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(t,e){return E[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};if((d=m.hasOwnProperty)||(d=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?d=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,d=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,d.call(this,t)}),y=function(t,e){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)d.call(n,o)&&i++;return r=n=null,i?y=2==i?function(t,e){var r,n={},o=v.call(t)==k;for(r in t)o&&"prototype"==r||d.call(n,r)||!(n[r]=1)||!d.call(t,r)||e(r)}:function(t,e){var r,n,o=v.call(t)==k;for(r in t)o&&"prototype"==r||!d.call(t,r)||(n="constructor"===r)||e(r);(n||d.call(t,r="constructor"))&&e(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var r,o,i=v.call(t)==k,s=!i&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(r in t)i&&"prototype"==r||!s.call(t,r)||e(r);for(o=n.length;r=n[--o];s.call(t,r)&&e(r));}),y(t,e)},!r("json-stringify")){var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",P=function(t,e){return(T+(e||0)).slice(-t)},N="\\u00",R=function(t){for(var e='"',r=0,n=t.length,o=!S||n>10,i=o&&(S?t.split(""):t);r<n;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=O[s];break;default:if(s<32){e+=N+P(2,s.toString(16));break}e+=o?i[r]:t.charAt(r)}}return e+'"'},D=function(t,e,r,n,o,i,s){var a,c,p,u,f,l,m,b,k,S,E,O,T,N,U,q;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if(c=v.call(a),c!=w||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=A&&c!=B||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(j){for(f=_(a/864e5),p=_(f/365.2425)+1970-1;j(p+1,0)<=f;p++);for(u=_((f-j(p,0))/30.42);j(p,u+1)<=f;u++);f=1+f-j(p,u),l=(a%864e5+864e5)%864e5,m=_(l/36e5)%24,b=_(l/6e4)%60,k=_(l/1e3)%60,S=l%1e3}else p=a.getUTCFullYear(),u=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),k=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(p<=0||p>=1e4?(p<0?"-":"+")+P(6,p<0?-p:p):P(4,p))+"-"+P(2,u+1)+"-"+P(2,f)+"T"+P(2,m)+":"+P(2,b)+":"+P(2,k)+"."+P(3,S)+"Z"}else a=null;if(r&&(a=r.call(e,t,a)),null===a)return"null";if(c=v.call(a),c==C)return""+a;if(c==x)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return R(""+a);if("object"==typeof a){for(N=s.length;N--;)if(s[N]===a)throw h();if(s.push(a),E=[],U=i,i+=o,c==B){for(T=0,N=a.length;T<N;T++)O=D(T,a,r,n,o,i,s),E.push(O===g?"null":O);q=E.length?o?"[\n"+i+E.join(",\n"+i)+"\n"+U+"]":"["+E.join(",")+"]":"[]"}else y(n||a,function(t){var e=D(t,a,r,n,o,i,s);e!==g&&E.push(R(t)+":"+(o?" ":"")+e)}),q=E.length?o?"{\n"+i+E.join(",\n"+i)+"\n"+U+"}":"{"+E.join(",")+"}":"{}";return s.pop(),q}};e.stringify=function(t,e,r){var n,o,i,s;if(a[typeof e]&&e)if((s=v.call(e))==k)o=e;else if(s==B){i={};for(var c,p=0,u=e.length;p<u;c=e[p++],s=v.call(c),(s==A||s==x)&&(i[c]=1));}if(r)if((s=v.call(r))==x){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else s==A&&(n=r.length<=10?r:r.slice(0,10));return D("",(c={},c[""]=t,c),o,i,n,"",[])}}if(!r("json-parse")){var U,q,L=o.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw U=q=null,u()},H=function(){for(var t,e,r,n,o,i=q,s=i.length;U<s;)switch(o=i.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?i.charAt(U):i[U],U++,t;case 34:for(t="@",U++;U<s;)if(o=i.charCodeAt(U),o<32)I();else if(92==o)switch(o=i.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=M[o],U++;break;case 117:for(e=++U,r=U+4;U<r;U++)o=i.charCodeAt(U),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||I();t+=L("0x"+i.slice(e,U));break;default:I()}else{if(34==o)break;for(o=i.charCodeAt(U),e=U;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++U);t+=i.slice(e,U)}if(34==i.charCodeAt(U))return U++,t;I();default:if(e=U,45==o&&(n=!0,o=i.charCodeAt(++U)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(U+1),o>=48&&o<=57)&&I(),n=!1;U<s&&(o=i.charCodeAt(U),o>=48&&o<=57);U++);if(46==i.charCodeAt(U)){for(r=++U;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==U&&I(),U=r}if(o=i.charCodeAt(U),101==o||69==o){for(o=i.charCodeAt(++U),43!=o&&45!=o||U++,r=U;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==U&&I(),U=r}return+i.slice(e,U)}if(n&&I(),"true"==i.slice(U,U+4))return U+=4,!0;if("false"==i.slice(U,U+5))return U+=5,!1;if("null"==i.slice(U,U+4))return U+=4,null;I()}return"$"},z=function(t){var e,r;if("$"==t&&I(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=H(),"]"!=t;r||(r=!0))r&&(","==t?(t=H(),"]"==t&&I()):I()),","==t&&I(),e.push(z(t));return e}if("{"==t){for(e={};t=H(),"}"!=t;r||(r=!0))r&&(","==t?(t=H(),"}"==t&&I()):I()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==H()||I(),e[t.slice(1)]=z(H());return e}I()}return t},J=function(t,e,r){var n=X(t,e,r);n===g?delete t[e]:t[e]=n},X=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(v.call(o)==B)for(n=o.length;n--;)J(o,n,r);else y(o,function(t){J(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return U=0,q=""+t,r=z(H()),"$"!=H()&&I(),U=q=null,e&&v.call(e)==k?X((n={},n[""]=r,n),"",e):r}}}return e.runInContext=i,e}var s=r(9),a={function:!0,object:!0},c=a[typeof e]&&e&&!e.nodeType&&e,p=a[typeof window]&&window||this,u=c&&a[typeof t]&&t&&!t.nodeType&&"object"==typeof o&&o;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(p=u),c&&!s)i(p,c);else{var h=p.JSON,f=p.JSON3,l=!1,d=i(p,p.JSON3={noConflict:function(){return l||(l=!0,p.JSON=h,p.JSON3=f,h=f=null),d}});p.JSON={parse:d.parse,stringify:d.stringify}}s&&(n=function(){return d}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}).call(this)}).call(e,r(8)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(t){var n=r(10),o=r(13);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var r=[],i=t.data,s=t;return s.data=e(i),s.attachments=r.length,{packet:s,buffers:r}},e.reconstructPacket=function(t,e){function r(t){if(t&&t._placeholder){var o=e[t.num];return o}if(n(t)){for(var i=0;i<t.length;i++)t[i]=r(t[i]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=r(t[s]);return t}return t}return t.data=r(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,r){function i(e,c,p){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){p?p[c]=this.result:a=this.result,--s||r(a)},u.readAsArrayBuffer(e)}else if(n(e))for(var h=0;h<e.length;h++)i(e[h],h,e);else if(e&&"object"==typeof e&&!o(e))for(var f in e)i(e[f],f,e)}var s=0,a=e;i(a),s||r(a)}}).call(e,function(){return this}())},function(t,e){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){return this instanceof n?(t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(15),s=r(42),a=r(43),c=r(6),p=r(45),u=r(46),h=r(3)("socket.io-client:manager"),f=r(40),l=r(49),d=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=p(r,"open",function(){n.onopen(),t&&t()}),s=p(r,"error",function(e){if(h("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(p(t,"data",u(this,"ondata"))),this.subs.push(p(t,"ping",u(this,"onping"))),this.subs.push(p(t,"pong",u(this,"onpong"))),this.subs.push(p(t,"error",u(this,"onerror"))),this.subs.push(p(t,"close",u(this,"onclose"))),this.subs.push(p(this.decoder,"decoded",u(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},n.prototype.socket=function(t,e){function r(){~f(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){t.exports=r(16)},function(t,e,r){t.exports=r(17),t.exports.parser=r(24)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=null),t?(t=u(t),r.hostname=t.host,r.secure="https"==t.protocol||"wss"==t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=u(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&"https:"==location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized;var o="object"==typeof e&&e;o.global===o&&r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(18),s=r(33),a=r(3)("engine.io-client:socket"),c=r(40),p=r(24),u=r(2),h=r(41),f=r(34);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=p.protocol,n.Socket=n,n.Transport=r(23),n.transports=r(18),n.parser=r(24),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!h)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!=f.readyState&&(a("changing transport and sending upgrade packet"),p(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=u.name,f.emit("upgradeError",r)}}))}function r(){h||(h=!0,p(),u.close(),u=null)}function o(e){var n=new Error("probe error: "+e);n.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){u&&t.name!=u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),r())}function p(){u.removeListener("open",e),u.removeListener("error",o),u.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;n.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",o),u.once("close",i),this.once("close",s),this.once("upgrading",c),u.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");
e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!=this.readyState&&"closed"!=this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~c(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p="https:"==location.protocol,u=location.port;u||(u=p?443:80),n=e.hostname!=location.hostname||u!=e.port,a=e.secure!=p}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=r(19),i=r(21),s=r(37),a=r(38);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){var n=r(20);t.exports=function(t){var e=t.xdomain,r=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(t){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),e.location){var r="https:"==location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!=e.location.hostname||n!=t.port,this.xs=t.secure!=r}else this.extraHeaders=t.extraHeaders}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(19),c=r(22),p=r(33),u=r(35),h=r(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{h("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){4==r.readyState&&(200==r.status||1223==r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},h("xhr data %s",this.data),r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var r=new Uint8Array(this.xhr.response),n=[],o=0,i=r.length;o<i;o++)n.push(r[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},e.document&&(i.requestsCount=0,i.requests={},e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(23),i=r(34),s=r(24),a=r(35),c=r(36),p=r(3)("engine.io-client:polling");t.exports=n;var u=function(){var t=r(19),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){p("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(p("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){p("pre-pause polling complete"),--n||e()})),this.writable||(p("we are currently writing - waiting to pause"),n++,this.once("drain",function(){p("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;p("polling got data %s",t);var r=function(t,r,n){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){p("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(p("transport open - closing"),t()):(p("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(r=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var o=r(24),i=r(33);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){(function(t){function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=m[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(g)return i(t,r,n);var o=new Uint8Array(1);o[0]=m[t.type];var s=new k([o.buffer,t.data]);return n(s)}function a(t,e,r){for(var n=new Array(t.length),o=f(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var c=r(25),p=r(26),u=r(28),h=r(29),f=r(30),l=r(31),d=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),g=d||y;e.protocol=3;var m=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=c(m),b={type:"error",data:"parser error"},k=r(32);e.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(k&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var p=m[e.type];return void 0!==e.data&&(p+=i?l.encode(String(e.data)):String(e.data)),a(""+p)},e.encodeBase64Packet=function(r,n){var o="b"+e.packets[r.type];if(k&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),p=0;p<a.length;p++)c[p]=a[p];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n)try{t=l.decode(t)}catch(t){return b}var o=t.charAt(0);return Number(o)==o&&v[o]?t.length>1?{type:v[o],data:t.substring(1)}:{type:v[o]}:b}var i=new Uint8Array(t),o=i[0],s=u(t,1);return k&&"blob"===r&&(s=new k([s])),{type:v[o],data:s}},e.decodeBase64Packet=function(e,r){var n=v[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=h.decode(e.substr(1));return"blob"===r&&k&&(o=new k([o])),{type:n,data:o}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function i(t,n){e.encodePacket(t,!!s&&r,!0,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var s=p(t);return r&&s?k&&!g?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void a(t,i,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==t)return n(b,0,1);for(var i,s,a="",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(i=Number(a)))return n(b,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(b,0,1);if(s.length){if(o=e.decodePacket(s,r,!0),b.type==o.type&&b.data==o.data)return n(b,0,1);var h=n(o,c+i,p);if(!1===h)return}c+=i,a=""}}return""!=a?n(b,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void a(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}e?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);r(null,c)}})}a(t,n,function(t,e){return r(new k(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],p="",h=1;255!=a[h];h++){if(p.length>310){s=!0;break}p+=a[h]}if(s)return n(b,0,1);o=u(o,2+p.length),p=parseInt(p);var f=u(o,0,p);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var l=new Uint8Array(f);f="";for(var h=0;h<l.length;h++)f+=String.fromCharCode(l[h])}i.push(f),o=u(o,p)}var d=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(27);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){!function(t){"use strict";e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(e){var r,n,o,i,s,a=.75*e.length,c=e.length,p=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(r=0;r<c;r+=4)n=t.indexOf(e[r]),o=t.indexOf(e[r+1]),i=t.indexOf(e[r+2]),s=t.indexOf(e[r+3]),h[p++]=n<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=k(e>>>10&1023|55296),e=56320|1023&e),o+=k(e);return o}function c(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function p(t,e){return k(t>>e&63|128)}function u(t){if(0==(4294967168&t))return k(t);var e="";return 0==(4294965248&t)?e=k(t>>6&31|192):0==(4294901760&t)?(c(t),e=k(t>>12&15|224),e+=p(t,6)):0==(4292870144&t)&&(e=k(t>>18&7|240),e+=p(t,12),e+=p(t,6)),e+=k(63&t|128)}function h(t){for(var e,r=s(t),n=r.length,o=-1,i="";++o<n;)e=r[o],i+=u(e);return i}function f(){if(b>=v)throw Error("Invalid byte index");var t=255&m[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,e,r,n,o;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(t=255&m[b],b++,0==(128&t))return t;if(192==(224&t)){var e=f();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=f(),r=f(),o=(15&t)<<12|e<<6|r,o>=2048)return c(o),o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=f(),r=f(),n=f(),o=(15&t)<<18|e<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function d(t){m=s(t),v=m.length,b=0;for(var e,r=[];(e=l())!==!1;)r.push(e);return a(r)}var y="object"==typeof e&&e,g=("object"==typeof t&&t&&t.exports==y&&t,"object"==typeof o&&o);g.global!==g&&g.window!==g||(i=g);var m,v,b,k=String.fromCharCode,w={version:"2.0.0",encode:h,decode:d};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(8)(t),function(){return this}())},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){"use strict";function r(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=r(+new Date);return t!==i?(p=0,i=t):t+"."+r(p++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(22),s=r(35);t.exports=o;var a,c=/\n/g,p=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(p,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,o.call(this,t)}var o=r(23),i=r(24),s=r(34),a=r(35),c=r(36),p=r(3)("engine.io-client:websocket"),u=e.WebSocket||e.MozWebSocket,h=u;if(!h&&"undefined"==typeof window)try{h=r(39)}catch(t){}t.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.ws=u?new h(t):new h(t,e,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){o.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=t.length,s=0,a=o;s<a;s++)!function(t){i.encodePacket(t,n.supportsBinary,function(i){if(!u){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{u?n.ws.send(i):n.ws.send(i,s)}catch(t){p("websocket closed before onclose event")}--o||r()})}(t[s])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=r(6),i=r(43),s=r(44),a=r(45),c=r(46),p=r(3)("socket.io-client:socket"),u=r(47);t.exports=e=n;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(h.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),r=o.EVENT;u(e)&&(r=o.BINARY_EVENT);var n={type:r,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(p("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){p("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},n.prototype.onclose=function(t){p("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(t);break;case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:this.onack(t);break;case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];p("emitting event %j",e),null!=t.id&&(p("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);p("sending ack %j",n);var i=u(n)?o.BINARY_ACK:o.ACK;e.packet({type:i,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(p("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):p("bad ack %s",t.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],
t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){p("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(p("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t,e){"use strict";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(48);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJzb2NrZXQuaW8ubWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuaW89ZSgpOnQuaW89ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUobil7aWYocltuXSlyZXR1cm4gcltuXS5leHBvcnRzO3ZhciBvPXJbbl09e2V4cG9ydHM6e30saWQ6bixsb2FkZWQ6ITF9O3JldHVybiB0W25dLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLGUpLG8ubG9hZGVkPSEwLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4gZS5tPXQsZS5jPXIsZS5wPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOmkodCkpJiYoZT10LHQ9dm9pZCAwKSxlPWV8fHt9O3ZhciByLG49cyh0KSxhPW4uc291cmNlLGg9bi5pZCxmPW4ucGF0aCxsPXVbaF0mJmYgaW4gdVtoXS5uc3BzLGQ9ZS5mb3JjZU5ld3x8ZVtcImZvcmNlIG5ldyBjb25uZWN0aW9uXCJdfHwhMT09PWUubXVsdGlwbGV4fHxsO3JldHVybiBkPyhwKFwiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlc1wiLGEpLHI9YyhhLGUpKToodVtoXXx8KHAoXCJuZXcgaW8gaW5zdGFuY2UgZm9yICVzXCIsYSksdVtoXT1jKGEsZSkpLHI9dVtoXSksbi5xdWVyeSYmIWUucXVlcnk/ZS5xdWVyeT1uLnF1ZXJ5OmUmJlwib2JqZWN0XCI9PT1pKGUucXVlcnkpJiYoZS5xdWVyeT1vKGUucXVlcnkpKSxyLnNvY2tldChuLnBhdGgsZSl9ZnVuY3Rpb24gbyh0KXt2YXIgZT1bXTtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiZlLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHIpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0W3JdKSk7cmV0dXJuIGUuam9pbihcIiZcIil9dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0scz1yKDEpLGE9cig2KSxjPXIoMTQpLHA9cigzKShcInNvY2tldC5pby1jbGllbnRcIik7dC5leHBvcnRzPWU9bjt2YXIgdT1lLm1hbmFnZXJzPXt9O2UucHJvdG9jb2w9YS5wcm90b2NvbCxlLmNvbm5lY3Q9bixlLk1hbmFnZXI9cigxNCksZS5Tb2NrZXQ9cig0Mil9LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LHIpe3ZhciBuPXQ7cj1yfHxlLmxvY2F0aW9uLG51bGw9PXQmJih0PXIucHJvdG9jb2wrXCIvL1wiK3IuaG9zdCksXCJzdHJpbmdcIj09dHlwZW9mIHQmJihcIi9cIj09PXQuY2hhckF0KDApJiYodD1cIi9cIj09PXQuY2hhckF0KDEpP3IucHJvdG9jb2wrdDpyLmhvc3QrdCksL14oaHR0cHM/fHdzcz8pOlxcL1xcLy8udGVzdCh0KXx8KGkoXCJwcm90b2NvbC1sZXNzIHVybCAlc1wiLHQpLHQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHI/ci5wcm90b2NvbCtcIi8vXCIrdDpcImh0dHBzOi8vXCIrdCksaShcInBhcnNlICVzXCIsdCksbj1vKHQpKSxuLnBvcnR8fCgvXihodHRwfHdzKSQvLnRlc3Qobi5wcm90b2NvbCk/bi5wb3J0PVwiODBcIjovXihodHRwfHdzKXMkLy50ZXN0KG4ucHJvdG9jb2wpJiYobi5wb3J0PVwiNDQzXCIpKSxuLnBhdGg9bi5wYXRofHxcIi9cIjt2YXIgcz1uLmhvc3QuaW5kZXhPZihcIjpcIikhPT0tMSxhPXM/XCJbXCIrbi5ob3N0K1wiXVwiOm4uaG9zdDtyZXR1cm4gbi5pZD1uLnByb3RvY29sK1wiOi8vXCIrYStcIjpcIituLnBvcnQsbi5ocmVmPW4ucHJvdG9jb2wrXCI6Ly9cIithKyhyJiZyLnBvcnQ9PT1uLnBvcnQ/XCJcIjpcIjpcIituLnBvcnQpLG59dmFyIG89cigyKSxpPXIoMykoXCJzb2NrZXQuaW8tY2xpZW50OnVybFwiKTt0LmV4cG9ydHM9bn0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt2YXIgcj0vXig/Oig/IVteOkBdKzpbXjpAXFwvXSpAKShodHRwfGh0dHBzfHdzfHdzcyk6XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pLyxuPVtcInNvdXJjZVwiLFwicHJvdG9jb2xcIixcImF1dGhvcml0eVwiLFwidXNlckluZm9cIixcInVzZXJcIixcInBhc3N3b3JkXCIsXCJob3N0XCIsXCJwb3J0XCIsXCJyZWxhdGl2ZVwiLFwicGF0aFwiLFwiZGlyZWN0b3J5XCIsXCJmaWxlXCIsXCJxdWVyeVwiLFwiYW5jaG9yXCJdO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT10LG89dC5pbmRleE9mKFwiW1wiKSxpPXQuaW5kZXhPZihcIl1cIik7byE9LTEmJmkhPS0xJiYodD10LnN1YnN0cmluZygwLG8pK3Quc3Vic3RyaW5nKG8saSkucmVwbGFjZSgvOi9nLFwiO1wiKSt0LnN1YnN0cmluZyhpLHQubGVuZ3RoKSk7Zm9yKHZhciBzPXIuZXhlYyh0fHxcIlwiKSxhPXt9LGM9MTQ7Yy0tOylhW25bY11dPXNbY118fFwiXCI7cmV0dXJuIG8hPS0xJiZpIT0tMSYmKGEuc291cmNlPWUsYS5ob3N0PWEuaG9zdC5zdWJzdHJpbmcoMSxhLmhvc3QubGVuZ3RoLTEpLnJlcGxhY2UoLzsvZyxcIjpcIiksYS5hdXRob3JpdHk9YS5hdXRob3JpdHkucmVwbGFjZShcIltcIixcIlwiKS5yZXBsYWNlKFwiXVwiLFwiXCIpLnJlcGxhY2UoLzsvZyxcIjpcIiksYS5pcHY2dXJpPSEwKSxhfX0sZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4oKXtyZXR1cm5cIldlYmtpdEFwcGVhcmFuY2VcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZXx8d2luZG93LmNvbnNvbGUmJihjb25zb2xlLmZpcmVidWd8fGNvbnNvbGUuZXhjZXB0aW9uJiZjb25zb2xlLnRhYmxlKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykmJnBhcnNlSW50KFJlZ0V4cC4kMSwxMCk+PTMxfWZ1bmN0aW9uIG8oKXt2YXIgdD1hcmd1bWVudHMscj10aGlzLnVzZUNvbG9ycztpZih0WzBdPShyP1wiJWNcIjpcIlwiKSt0aGlzLm5hbWVzcGFjZSsocj9cIiAlY1wiOlwiIFwiKSt0WzBdKyhyP1wiJWMgXCI6XCIgXCIpK1wiK1wiK2UuaHVtYW5pemUodGhpcy5kaWZmKSwhcilyZXR1cm4gdDt2YXIgbj1cImNvbG9yOiBcIit0aGlzLmNvbG9yO3Q9W3RbMF0sbixcImNvbG9yOiBpbmhlcml0XCJdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDEpKTt2YXIgbz0wLGk9MDtyZXR1cm4gdFswXS5yZXBsYWNlKC8lW2EteiVdL2csZnVuY3Rpb24odCl7XCIlJVwiIT09dCYmKG8rKyxcIiVjXCI9PT10JiYoaT1vKSl9KSx0LnNwbGljZShpLDAsbiksdH1mdW5jdGlvbiBpKCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUubG9nJiZGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZyxjb25zb2xlLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcyh0KXt0cnl7bnVsbD09dD9lLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpOmUuc3RvcmFnZS5kZWJ1Zz10fWNhdGNoKHQpe319ZnVuY3Rpb24gYSgpe3ZhciB0O3RyeXt0PWUuc3RvcmFnZS5kZWJ1Z31jYXRjaCh0KXt9cmV0dXJuIHR9ZnVuY3Rpb24gYygpe3RyeXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZX1jYXRjaCh0KXt9fWU9dC5leHBvcnRzPXIoNCksZS5sb2c9aSxlLmZvcm1hdEFyZ3M9byxlLnNhdmU9cyxlLmxvYWQ9YSxlLnVzZUNvbG9ycz1uLGUuc3RvcmFnZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lLnN0b3JhZ2U/Y2hyb21lLnN0b3JhZ2UubG9jYWw6YygpLGUuY29sb3JzPVtcImxpZ2h0c2VhZ3JlZW5cIixcImZvcmVzdGdyZWVuXCIsXCJnb2xkZW5yb2RcIixcImRvZGdlcmJsdWVcIixcImRhcmtvcmNoaWRcIixcImNyaW1zb25cIl0sZS5mb3JtYXR0ZXJzLmo9ZnVuY3Rpb24odCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpfSxlLmVuYWJsZShhKCkpfSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbigpe3JldHVybiBlLmNvbG9yc1t1KyslZS5jb2xvcnMubGVuZ3RoXX1mdW5jdGlvbiBvKHQpe2Z1bmN0aW9uIHIoKXt9ZnVuY3Rpb24gbygpe3ZhciB0PW8scj0rbmV3IERhdGUsaT1yLShwfHxyKTt0LmRpZmY9aSx0LnByZXY9cCx0LmN1cnI9cixwPXIsbnVsbD09dC51c2VDb2xvcnMmJih0LnVzZUNvbG9ycz1lLnVzZUNvbG9ycygpKSxudWxsPT10LmNvbG9yJiZ0LnVzZUNvbG9ycyYmKHQuY29sb3I9bigpKTt2YXIgcz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3NbMF09ZS5jb2VyY2Uoc1swXSksXCJzdHJpbmdcIiE9dHlwZW9mIHNbMF0mJihzPVtcIiVvXCJdLmNvbmNhdChzKSk7dmFyIGE9MDtzWzBdPXNbMF0ucmVwbGFjZSgvJShbYS16JV0pL2csZnVuY3Rpb24ocixuKXtpZihcIiUlXCI9PT1yKXJldHVybiByO2ErKzt2YXIgbz1lLmZvcm1hdHRlcnNbbl07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbyl7dmFyIGk9c1thXTtyPW8uY2FsbCh0LGkpLHMuc3BsaWNlKGEsMSksYS0tfXJldHVybiByfSksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5mb3JtYXRBcmdzJiYocz1lLmZvcm1hdEFyZ3MuYXBwbHkodCxzKSk7dmFyIGM9by5sb2d8fGUubG9nfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO2MuYXBwbHkodCxzKX1yLmVuYWJsZWQ9ITEsby5lbmFibGVkPSEwO3ZhciBpPWUuZW5hYmxlZCh0KT9vOnI7cmV0dXJuIGkubmFtZXNwYWNlPXQsaX1mdW5jdGlvbiBpKHQpe2Uuc2F2ZSh0KTtmb3IodmFyIHI9KHR8fFwiXCIpLnNwbGl0KC9bXFxzLF0rLyksbj1yLmxlbmd0aCxvPTA7bzxuO28rKylyW29dJiYodD1yW29dLnJlcGxhY2UoL1xcKi9nLFwiLio/XCIpLFwiLVwiPT09dFswXT9lLnNraXBzLnB1c2gobmV3IFJlZ0V4cChcIl5cIit0LnN1YnN0cigxKStcIiRcIikpOmUubmFtZXMucHVzaChuZXcgUmVnRXhwKFwiXlwiK3QrXCIkXCIpKSl9ZnVuY3Rpb24gcygpe2UuZW5hYmxlKFwiXCIpfWZ1bmN0aW9uIGEodCl7dmFyIHIsbjtmb3Iocj0wLG49ZS5za2lwcy5sZW5ndGg7cjxuO3IrKylpZihlLnNraXBzW3JdLnRlc3QodCkpcmV0dXJuITE7Zm9yKHI9MCxuPWUubmFtZXMubGVuZ3RoO3I8bjtyKyspaWYoZS5uYW1lc1tyXS50ZXN0KHQpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGModCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFcnJvcj90LnN0YWNrfHx0Lm1lc3NhZ2U6dH1lPXQuZXhwb3J0cz1vLGUuY29lcmNlPWMsZS5kaXNhYmxlPXMsZS5lbmFibGU9aSxlLmVuYWJsZWQ9YSxlLmh1bWFuaXplPXIoNSksZS5uYW1lcz1bXSxlLnNraXBzPVtdLGUuZm9ybWF0dGVycz17fTt2YXIgcCx1PTB9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0PVwiXCIrdCwhKHQubGVuZ3RoPjFlNCkpe3ZhciBlPS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWModCk7aWYoZSl7dmFyIHI9cGFyc2VGbG9hdChlWzFdKSxuPShlWzJdfHxcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKG4pe2Nhc2VcInllYXJzXCI6Y2FzZVwieWVhclwiOmNhc2VcInlyc1wiOmNhc2VcInlyXCI6Y2FzZVwieVwiOnJldHVybiByKnU7Y2FzZVwiZGF5c1wiOmNhc2VcImRheVwiOmNhc2VcImRcIjpyZXR1cm4gcipwO2Nhc2VcImhvdXJzXCI6Y2FzZVwiaG91clwiOmNhc2VcImhyc1wiOmNhc2VcImhyXCI6Y2FzZVwiaFwiOnJldHVybiByKmM7Y2FzZVwibWludXRlc1wiOmNhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnNcIjpjYXNlXCJtaW5cIjpjYXNlXCJtXCI6cmV0dXJuIHIqYTtjYXNlXCJzZWNvbmRzXCI6Y2FzZVwic2Vjb25kXCI6Y2FzZVwic2Vjc1wiOmNhc2VcInNlY1wiOmNhc2VcInNcIjpyZXR1cm4gcipzO2Nhc2VcIm1pbGxpc2Vjb25kc1wiOmNhc2VcIm1pbGxpc2Vjb25kXCI6Y2FzZVwibXNlY3NcIjpjYXNlXCJtc2VjXCI6Y2FzZVwibXNcIjpyZXR1cm4gcn19fX1mdW5jdGlvbiBuKHQpe3JldHVybiB0Pj1wP01hdGgucm91bmQodC9wKStcImRcIjp0Pj1jP01hdGgucm91bmQodC9jKStcImhcIjp0Pj1hP01hdGgucm91bmQodC9hKStcIm1cIjp0Pj1zP01hdGgucm91bmQodC9zKStcInNcIjp0K1wibXNcIn1mdW5jdGlvbiBvKHQpe3JldHVybiBpKHQscCxcImRheVwiKXx8aSh0LGMsXCJob3VyXCIpfHxpKHQsYSxcIm1pbnV0ZVwiKXx8aSh0LHMsXCJzZWNvbmRcIil8fHQrXCIgbXNcIn1mdW5jdGlvbiBpKHQsZSxyKXtpZighKHQ8ZSkpcmV0dXJuIHQ8MS41KmU/TWF0aC5mbG9vcih0L2UpK1wiIFwiK3I6TWF0aC5jZWlsKHQvZSkrXCIgXCIrcitcInNcIn12YXIgcz0xZTMsYT02MCpzLGM9NjAqYSxwPTI0KmMsdT0zNjUuMjUqcDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHx7fSxcInN0cmluZ1wiPT10eXBlb2YgdD9yKHQpOmUubG9uZz9vKHQpOm4odCl9fSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbigpe31mdW5jdGlvbiBvKHQpe3ZhciByPVwiXCIsbj0hMTtyZXR1cm4gcis9dC50eXBlLGUuQklOQVJZX0VWRU5UIT10LnR5cGUmJmUuQklOQVJZX0FDSyE9dC50eXBlfHwocis9dC5hdHRhY2htZW50cyxyKz1cIi1cIiksdC5uc3AmJlwiL1wiIT10Lm5zcCYmKG49ITAscis9dC5uc3ApLG51bGwhPXQuaWQmJihuJiYocis9XCIsXCIsbj0hMSkscis9dC5pZCksbnVsbCE9dC5kYXRhJiYobiYmKHIrPVwiLFwiKSxyKz1oLnN0cmluZ2lmeSh0LmRhdGEpKSx1KFwiZW5jb2RlZCAlaiBhcyAlc1wiLHQscikscn1mdW5jdGlvbiBpKHQsZSl7ZnVuY3Rpb24gcih0KXt2YXIgcj1sLmRlY29uc3RydWN0UGFja2V0KHQpLG49byhyLnBhY2tldCksaT1yLmJ1ZmZlcnM7aS51bnNoaWZ0KG4pLGUoaSl9bC5yZW1vdmVCbG9icyh0LHIpfWZ1bmN0aW9uIHMoKXt0aGlzLnJlY29uc3RydWN0b3I9bnVsbH1mdW5jdGlvbiBhKHQpe3ZhciByPXt9LG49MDtpZihyLnR5cGU9TnVtYmVyKHQuY2hhckF0KDApKSxudWxsPT1lLnR5cGVzW3IudHlwZV0pcmV0dXJuIHAoKTtpZihlLkJJTkFSWV9FVkVOVD09ci50eXBlfHxlLkJJTkFSWV9BQ0s9PXIudHlwZSl7Zm9yKHZhciBvPVwiXCI7XCItXCIhPXQuY2hhckF0KCsrbikmJihvKz10LmNoYXJBdChuKSxuIT10Lmxlbmd0aCk7KTtpZihvIT1OdW1iZXIobyl8fFwiLVwiIT10LmNoYXJBdChuKSl0aHJvdyBuZXcgRXJyb3IoXCJJbGxlZ2FsIGF0dGFjaG1lbnRzXCIpO3IuYXR0YWNobWVudHM9TnVtYmVyKG8pfWlmKFwiL1wiPT10LmNoYXJBdChuKzEpKWZvcihyLm5zcD1cIlwiOysrbjspe3ZhciBpPXQuY2hhckF0KG4pO2lmKFwiLFwiPT1pKWJyZWFrO2lmKHIubnNwKz1pLG49PXQubGVuZ3RoKWJyZWFrfWVsc2Ugci5uc3A9XCIvXCI7dmFyIHM9dC5jaGFyQXQobisxKTtpZihcIlwiIT09cyYmTnVtYmVyKHMpPT1zKXtmb3Ioci5pZD1cIlwiOysrbjspe3ZhciBpPXQuY2hhckF0KG4pO2lmKG51bGw9PWl8fE51bWJlcihpKSE9aSl7LS1uO2JyZWFrfWlmKHIuaWQrPXQuY2hhckF0KG4pLG49PXQubGVuZ3RoKWJyZWFrfXIuaWQ9TnVtYmVyKHIuaWQpfWlmKHQuY2hhckF0KCsrbikpdHJ5e3IuZGF0YT1oLnBhcnNlKHQuc3Vic3RyKG4pKX1jYXRjaCh0KXtyZXR1cm4gcCgpfXJldHVybiB1KFwiZGVjb2RlZCAlcyBhcyAlalwiLHQscikscn1mdW5jdGlvbiBjKHQpe3RoaXMucmVjb25QYWNrPXQsdGhpcy5idWZmZXJzPVtdfWZ1bmN0aW9uIHAodCl7cmV0dXJue3R5cGU6ZS5FUlJPUixkYXRhOlwicGFyc2VyIGVycm9yXCJ9fXZhciB1PXIoMykoXCJzb2NrZXQuaW8tcGFyc2VyXCIpLGg9cig3KSxmPShyKDEwKSxyKDExKSksbD1yKDEyKSxkPXIoMTMpO2UucHJvdG9jb2w9NCxlLnR5cGVzPVtcIkNPTk5FQ1RcIixcIkRJU0NPTk5FQ1RcIixcIkVWRU5UXCIsXCJBQ0tcIixcIkVSUk9SXCIsXCJCSU5BUllfRVZFTlRcIixcIkJJTkFSWV9BQ0tcIl0sZS5DT05ORUNUPTAsZS5ESVNDT05ORUNUPTEsZS5FVkVOVD0yLGUuQUNLPTMsZS5FUlJPUj00LGUuQklOQVJZX0VWRU5UPTUsZS5CSU5BUllfQUNLPTYsZS5FbmNvZGVyPW4sZS5EZWNvZGVyPXMsbi5wcm90b3R5cGUuZW5jb2RlPWZ1bmN0aW9uKHQscil7aWYodShcImVuY29kaW5nIHBhY2tldCAlalwiLHQpLGUuQklOQVJZX0VWRU5UPT10LnR5cGV8fGUuQklOQVJZX0FDSz09dC50eXBlKWkodCxyKTtlbHNle3ZhciBuPW8odCk7cihbbl0pfX0sZihzLnByb3RvdHlwZSkscy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciByO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXI9YSh0KSxlLkJJTkFSWV9FVkVOVD09ci50eXBlfHxlLkJJTkFSWV9BQ0s9PXIudHlwZT8odGhpcy5yZWNvbnN0cnVjdG9yPW5ldyBjKHIpLDA9PT10aGlzLnJlY29uc3RydWN0b3IucmVjb25QYWNrLmF0dGFjaG1lbnRzJiZ0aGlzLmVtaXQoXCJkZWNvZGVkXCIscikpOnRoaXMuZW1pdChcImRlY29kZWRcIixyKTtlbHNle2lmKCFkKHQpJiYhdC5iYXNlNjQpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0eXBlOiBcIit0KTtpZighdGhpcy5yZWNvbnN0cnVjdG9yKXRocm93IG5ldyBFcnJvcihcImdvdCBiaW5hcnkgZGF0YSB3aGVuIG5vdCByZWNvbnN0cnVjdGluZyBhIHBhY2tldFwiKTtyPXRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YSh0KSxyJiYodGhpcy5yZWNvbnN0cnVjdG9yPW51bGwsdGhpcy5lbWl0KFwiZGVjb2RlZFwiLHIpKX19LHMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnJlY29uc3RydWN0b3ImJnRoaXMucmVjb25zdHJ1Y3Rvci5maW5pc2hlZFJlY29uc3RydWN0aW9uKCl9LGMucHJvdG90eXBlLnRha2VCaW5hcnlEYXRhPWZ1bmN0aW9uKHQpe2lmKHRoaXMuYnVmZmVycy5wdXNoKHQpLHRoaXMuYnVmZmVycy5sZW5ndGg9PXRoaXMucmVjb25QYWNrLmF0dGFjaG1lbnRzKXt2YXIgZT1sLnJlY29uc3RydWN0UGFja2V0KHRoaXMucmVjb25QYWNrLHRoaXMuYnVmZmVycyk7cmV0dXJuIHRoaXMuZmluaXNoZWRSZWNvbnN0cnVjdGlvbigpLGV9cmV0dXJuIG51bGx9LGMucHJvdG90eXBlLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb249ZnVuY3Rpb24oKXt0aGlzLnJlY29uUGFjaz1udWxsLHRoaXMuYnVmZmVycz1bXX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbjsoZnVuY3Rpb24odCxvKXsoZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQsZSl7ZnVuY3Rpb24gcih0KXtpZihyW3RdIT09ZylyZXR1cm4gclt0XTt2YXIgaTtpZihcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiPT10KWk9XCJhXCIhPVwiYVwiWzBdO2Vsc2UgaWYoXCJqc29uXCI9PXQpaT1yKFwianNvbi1zdHJpbmdpZnlcIikmJnIoXCJqc29uLXBhcnNlXCIpO2Vsc2V7dmFyIHMsYT0ne1wiYVwiOlsxLHRydWUsZmFsc2UsbnVsbCxcIlxcXFx1MDAwMFxcXFxiXFxcXG5cXFxcZlxcXFxyXFxcXHRcIl19JztpZihcImpzb24tc3RyaW5naWZ5XCI9PXQpe3ZhciBwPWUuc3RyaW5naWZ5LHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcCYmYjtpZih1KXsocz1mdW5jdGlvbigpe3JldHVybiAxfSkudG9KU09OPXM7dHJ5e3U9XCIwXCI9PT1wKDApJiZcIjBcIj09PXAobmV3IG4pJiYnXCJcIic9PXAobmV3IG8pJiZwKHYpPT09ZyYmcChnKT09PWcmJnAoKT09PWcmJlwiMVwiPT09cChzKSYmXCJbMV1cIj09cChbc10pJiZcIltudWxsXVwiPT1wKFtnXSkmJlwibnVsbFwiPT1wKG51bGwpJiZcIltudWxsLG51bGwsbnVsbF1cIj09cChbZyx2LG51bGxdKSYmcCh7YTpbcywhMCwhMSxudWxsLFwiXFwwXFxiXFxuXFxmXFxyXFx0XCJdfSk9PWEmJlwiMVwiPT09cChudWxsLHMpJiZcIltcXG4gMSxcXG4gMlxcbl1cIj09cChbMSwyXSxudWxsLDEpJiYnXCItMjcxODIxLTA0LTIwVDAwOjAwOjAwLjAwMFpcIic9PXAobmV3IGMoLTg2NGUxMykpJiYnXCIrMjc1NzYwLTA5LTEzVDAwOjAwOjAwLjAwMFpcIic9PXAobmV3IGMoODY0ZTEzKSkmJidcIi0wMDAwMDEtMDEtMDFUMDA6MDA6MDAuMDAwWlwiJz09cChuZXcgYygtNjIxOTg3NTUyZTUpKSYmJ1wiMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaXCInPT1wKG5ldyBjKC0xKSl9Y2F0Y2godCl7dT0hMX19aT11fWlmKFwianNvbi1wYXJzZVwiPT10KXt2YXIgaD1lLnBhcnNlO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGgpdHJ5e2lmKDA9PT1oKFwiMFwiKSYmIWgoITEpKXtzPWgoYSk7dmFyIGY9NT09cy5hLmxlbmd0aCYmMT09PXMuYVswXTtpZihmKXt0cnl7Zj0haCgnXCJcXHRcIicpfWNhdGNoKHQpe31pZihmKXRyeXtmPTEhPT1oKFwiMDFcIil9Y2F0Y2godCl7fWlmKGYpdHJ5e2Y9MSE9PWgoXCIxLlwiKX1jYXRjaCh0KXt9fX19Y2F0Y2godCl7Zj0hMX1pPWZ9fXJldHVybiByW3RdPSEhaX10fHwodD1wLk9iamVjdCgpKSxlfHwoZT1wLk9iamVjdCgpKTt2YXIgbj10Lk51bWJlcnx8cC5OdW1iZXIsbz10LlN0cmluZ3x8cC5TdHJpbmcscz10Lk9iamVjdHx8cC5PYmplY3QsYz10LkRhdGV8fHAuRGF0ZSx1PXQuU3ludGF4RXJyb3J8fHAuU3ludGF4RXJyb3IsaD10LlR5cGVFcnJvcnx8cC5UeXBlRXJyb3IsZj10Lk1hdGh8fHAuTWF0aCxsPXQuSlNPTnx8cC5KU09OO1wib2JqZWN0XCI9PXR5cGVvZiBsJiZsJiYoZS5zdHJpbmdpZnk9bC5zdHJpbmdpZnksZS5wYXJzZT1sLnBhcnNlKTt2YXIgZCx5LGcsbT1zLnByb3RvdHlwZSx2PW0udG9TdHJpbmcsYj1uZXcgYygtMHhjNzgyYjViODAwY2VjKTt0cnl7Yj1iLmdldFVUQ0Z1bGxZZWFyKCk9PS0xMDkyNTImJjA9PT1iLmdldFVUQ01vbnRoKCkmJjE9PT1iLmdldFVUQ0RhdGUoKSYmMTA9PWIuZ2V0VVRDSG91cnMoKSYmMzc9PWIuZ2V0VVRDTWludXRlcygpJiY2PT1iLmdldFVUQ1NlY29uZHMoKSYmNzA4PT1iLmdldFVUQ01pbGxpc2Vjb25kcygpfWNhdGNoKHQpe31pZighcihcImpzb25cIikpe3ZhciBrPVwiW29iamVjdCBGdW5jdGlvbl1cIix3PVwiW29iamVjdCBEYXRlXVwiLHg9XCJbb2JqZWN0IE51bWJlcl1cIixBPVwiW29iamVjdCBTdHJpbmddXCIsQj1cIltvYmplY3QgQXJyYXldXCIsQz1cIltvYmplY3QgQm9vbGVhbl1cIixTPXIoXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIik7aWYoIWIpdmFyIF89Zi5mbG9vcixFPVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzRdLGo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRVtlXSszNjUqKHQtMTk3MCkrXygodC0xOTY5KyhlPSsoZT4xKSkpLzQpLV8oKHQtMTkwMStlKS8xMDApK18oKHQtMTYwMStlKS80MDApfTtpZigoZD1tLmhhc093blByb3BlcnR5KXx8KGQ9ZnVuY3Rpb24odCl7dmFyIGUscj17fTtyZXR1cm4oci5fX3Byb3RvX189bnVsbCxyLl9fcHJvdG9fXz17dG9TdHJpbmc6MX0scikudG9TdHJpbmchPXY/ZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fcHJvdG9fXyxyPXQgaW4odGhpcy5fX3Byb3RvX189bnVsbCx0aGlzKTtyZXR1cm4gdGhpcy5fX3Byb3RvX189ZSxyfTooZT1yLmNvbnN0cnVjdG9yLGQ9ZnVuY3Rpb24odCl7dmFyIHI9KHRoaXMuY29uc3RydWN0b3J8fGUpLnByb3RvdHlwZTtyZXR1cm4gdCBpbiB0aGlzJiYhKHQgaW4gciYmdGhpc1t0XT09PXJbdF0pfSkscj1udWxsLGQuY2FsbCh0aGlzLHQpfSkseT1mdW5jdGlvbih0LGUpe3ZhciByLG4sbyxpPTA7KHI9ZnVuY3Rpb24oKXt0aGlzLnZhbHVlT2Y9MH0pLnByb3RvdHlwZS52YWx1ZU9mPTAsbj1uZXcgcjtmb3IobyBpbiBuKWQuY2FsbChuLG8pJiZpKys7cmV0dXJuIHI9bj1udWxsLGk/eT0yPT1pP2Z1bmN0aW9uKHQsZSl7dmFyIHIsbj17fSxvPXYuY2FsbCh0KT09aztmb3IociBpbiB0KW8mJlwicHJvdG90eXBlXCI9PXJ8fGQuY2FsbChuLHIpfHwhKG5bcl09MSl8fCFkLmNhbGwodCxyKXx8ZShyKX06ZnVuY3Rpb24odCxlKXt2YXIgcixuLG89di5jYWxsKHQpPT1rO2ZvcihyIGluIHQpbyYmXCJwcm90b3R5cGVcIj09cnx8IWQuY2FsbCh0LHIpfHwobj1cImNvbnN0cnVjdG9yXCI9PT1yKXx8ZShyKTsobnx8ZC5jYWxsKHQscj1cImNvbnN0cnVjdG9yXCIpKSYmZShyKX06KG49W1widmFsdWVPZlwiLFwidG9TdHJpbmdcIixcInRvTG9jYWxlU3RyaW5nXCIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFwiaXNQcm90b3R5cGVPZlwiLFwiaGFzT3duUHJvcGVydHlcIixcImNvbnN0cnVjdG9yXCJdLHk9ZnVuY3Rpb24odCxlKXt2YXIgcixvLGk9di5jYWxsKHQpPT1rLHM9IWkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQuY29uc3RydWN0b3ImJmFbdHlwZW9mIHQuaGFzT3duUHJvcGVydHldJiZ0Lmhhc093blByb3BlcnR5fHxkO2ZvcihyIGluIHQpaSYmXCJwcm90b3R5cGVcIj09cnx8IXMuY2FsbCh0LHIpfHxlKHIpO2ZvcihvPW4ubGVuZ3RoO3I9blstLW9dO3MuY2FsbCh0LHIpJiZlKHIpKTt9KSx5KHQsZSl9LCFyKFwianNvbi1zdHJpbmdpZnlcIikpe3ZhciBPPXs5MjpcIlxcXFxcXFxcXCIsMzQ6J1xcXFxcIicsODpcIlxcXFxiXCIsMTI6XCJcXFxcZlwiLDEwOlwiXFxcXG5cIiwxMzpcIlxcXFxyXCIsOTpcIlxcXFx0XCJ9LFQ9XCIwMDAwMDBcIixQPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKFQrKGV8fDApKS5zbGljZSgtdCl9LE49XCJcXFxcdTAwXCIsUj1mdW5jdGlvbih0KXtmb3IodmFyIGU9J1wiJyxyPTAsbj10Lmxlbmd0aCxvPSFTfHxuPjEwLGk9byYmKFM/dC5zcGxpdChcIlwiKTp0KTtyPG47cisrKXt2YXIgcz10LmNoYXJDb2RlQXQocik7c3dpdGNoKHMpe2Nhc2UgODpjYXNlIDk6Y2FzZSAxMDpjYXNlIDEyOmNhc2UgMTM6Y2FzZSAzNDpjYXNlIDkyOmUrPU9bc107YnJlYWs7ZGVmYXVsdDppZihzPDMyKXtlKz1OK1AoMixzLnRvU3RyaW5nKDE2KSk7YnJlYWt9ZSs9bz9pW3JdOnQuY2hhckF0KHIpfX1yZXR1cm4gZSsnXCInfSxEPWZ1bmN0aW9uKHQsZSxyLG4sbyxpLHMpe3ZhciBhLGMscCx1LGYsbCxtLGIsayxTLEUsTyxULE4sVSxxO3RyeXthPWVbdF19Y2F0Y2godCl7fWlmKFwib2JqZWN0XCI9PXR5cGVvZiBhJiZhKWlmKGM9di5jYWxsKGEpLGMhPXd8fGQuY2FsbChhLFwidG9KU09OXCIpKVwiZnVuY3Rpb25cIj09dHlwZW9mIGEudG9KU09OJiYoYyE9eCYmYyE9QSYmYyE9Qnx8ZC5jYWxsKGEsXCJ0b0pTT05cIikpJiYoYT1hLnRvSlNPTih0KSk7ZWxzZSBpZihhPi0xLzAmJmE8MS8wKXtpZihqKXtmb3IoZj1fKGEvODY0ZTUpLHA9XyhmLzM2NS4yNDI1KSsxOTcwLTE7aihwKzEsMCk8PWY7cCsrKTtmb3IodT1fKChmLWoocCwwKSkvMzAuNDIpO2oocCx1KzEpPD1mO3UrKyk7Zj0xK2YtaihwLHUpLGw9KGElODY0ZTUrODY0ZTUpJTg2NGU1LG09XyhsLzM2ZTUpJTI0LGI9XyhsLzZlNCklNjAsaz1fKGwvMWUzKSU2MCxTPWwlMWUzfWVsc2UgcD1hLmdldFVUQ0Z1bGxZZWFyKCksdT1hLmdldFVUQ01vbnRoKCksZj1hLmdldFVUQ0RhdGUoKSxtPWEuZ2V0VVRDSG91cnMoKSxiPWEuZ2V0VVRDTWludXRlcygpLGs9YS5nZXRVVENTZWNvbmRzKCksUz1hLmdldFVUQ01pbGxpc2Vjb25kcygpO2E9KHA8PTB8fHA+PTFlND8ocDwwP1wiLVwiOlwiK1wiKStQKDYscDwwPy1wOnApOlAoNCxwKSkrXCItXCIrUCgyLHUrMSkrXCItXCIrUCgyLGYpK1wiVFwiK1AoMixtKStcIjpcIitQKDIsYikrXCI6XCIrUCgyLGspK1wiLlwiK1AoMyxTKStcIlpcIn1lbHNlIGE9bnVsbDtpZihyJiYoYT1yLmNhbGwoZSx0LGEpKSxudWxsPT09YSlyZXR1cm5cIm51bGxcIjtpZihjPXYuY2FsbChhKSxjPT1DKXJldHVyblwiXCIrYTtpZihjPT14KXJldHVybiBhPi0xLzAmJmE8MS8wP1wiXCIrYTpcIm51bGxcIjtpZihjPT1BKXJldHVybiBSKFwiXCIrYSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihOPXMubGVuZ3RoO04tLTspaWYoc1tOXT09PWEpdGhyb3cgaCgpO2lmKHMucHVzaChhKSxFPVtdLFU9aSxpKz1vLGM9PUIpe2ZvcihUPTAsTj1hLmxlbmd0aDtUPE47VCsrKU89RChULGEscixuLG8saSxzKSxFLnB1c2goTz09PWc/XCJudWxsXCI6Tyk7cT1FLmxlbmd0aD9vP1wiW1xcblwiK2krRS5qb2luKFwiLFxcblwiK2kpK1wiXFxuXCIrVStcIl1cIjpcIltcIitFLmpvaW4oXCIsXCIpK1wiXVwiOlwiW11cIn1lbHNlIHkobnx8YSxmdW5jdGlvbih0KXt2YXIgZT1EKHQsYSxyLG4sbyxpLHMpO2UhPT1nJiZFLnB1c2goUih0KStcIjpcIisobz9cIiBcIjpcIlwiKStlKX0pLHE9RS5sZW5ndGg/bz9cIntcXG5cIitpK0Uuam9pbihcIixcXG5cIitpKStcIlxcblwiK1UrXCJ9XCI6XCJ7XCIrRS5qb2luKFwiLFwiKStcIn1cIjpcInt9XCI7cmV0dXJuIHMucG9wKCkscX19O2Uuc3RyaW5naWZ5PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixvLGkscztpZihhW3R5cGVvZiBlXSYmZSlpZigocz12LmNhbGwoZSkpPT1rKW89ZTtlbHNlIGlmKHM9PUIpe2k9e307Zm9yKHZhciBjLHA9MCx1PWUubGVuZ3RoO3A8dTtjPWVbcCsrXSxzPXYuY2FsbChjKSwocz09QXx8cz09eCkmJihpW2NdPTEpKTt9aWYocilpZigocz12LmNhbGwocikpPT14KXtpZigoci09ciUxKT4wKWZvcihuPVwiXCIscj4xMCYmKHI9MTApO24ubGVuZ3RoPHI7bis9XCIgXCIpO31lbHNlIHM9PUEmJihuPXIubGVuZ3RoPD0xMD9yOnIuc2xpY2UoMCwxMCkpO3JldHVybiBEKFwiXCIsKGM9e30sY1tcIlwiXT10LGMpLG8saSxuLFwiXCIsW10pfX1pZighcihcImpzb24tcGFyc2VcIikpe3ZhciBVLHEsTD1vLmZyb21DaGFyQ29kZSxNPXs5MjpcIlxcXFxcIiwzNDonXCInLDQ3OlwiL1wiLDk4OlwiXFxiXCIsMTE2OlwiXFx0XCIsMTEwOlwiXFxuXCIsMTAyOlwiXFxmXCIsMTE0OlwiXFxyXCJ9LEk9ZnVuY3Rpb24oKXt0aHJvdyBVPXE9bnVsbCx1KCl9LEg9ZnVuY3Rpb24oKXtmb3IodmFyIHQsZSxyLG4sbyxpPXEscz1pLmxlbmd0aDtVPHM7KXN3aXRjaChvPWkuY2hhckNvZGVBdChVKSl7Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDMyOlUrKzticmVhaztjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDQ0OnJldHVybiB0PVM/aS5jaGFyQXQoVSk6aVtVXSxVKyssdDtjYXNlIDM0OmZvcih0PVwiQFwiLFUrKztVPHM7KWlmKG89aS5jaGFyQ29kZUF0KFUpLG88MzIpSSgpO2Vsc2UgaWYoOTI9PW8pc3dpdGNoKG89aS5jaGFyQ29kZUF0KCsrVSkpe2Nhc2UgOTI6Y2FzZSAzNDpjYXNlIDQ3OmNhc2UgOTg6Y2FzZSAxMTY6Y2FzZSAxMTA6Y2FzZSAxMDI6Y2FzZSAxMTQ6dCs9TVtvXSxVKys7YnJlYWs7Y2FzZSAxMTc6Zm9yKGU9KytVLHI9VSs0O1U8cjtVKyspbz1pLmNoYXJDb2RlQXQoVSksbz49NDgmJm88PTU3fHxvPj05NyYmbzw9MTAyfHxvPj02NSYmbzw9NzB8fEkoKTt0Kz1MKFwiMHhcIitpLnNsaWNlKGUsVSkpO2JyZWFrO2RlZmF1bHQ6SSgpfWVsc2V7aWYoMzQ9PW8pYnJlYWs7Zm9yKG89aS5jaGFyQ29kZUF0KFUpLGU9VTtvPj0zMiYmOTIhPW8mJjM0IT1vOylvPWkuY2hhckNvZGVBdCgrK1UpO3QrPWkuc2xpY2UoZSxVKX1pZigzND09aS5jaGFyQ29kZUF0KFUpKXJldHVybiBVKyssdDtJKCk7ZGVmYXVsdDppZihlPVUsNDU9PW8mJihuPSEwLG89aS5jaGFyQ29kZUF0KCsrVSkpLG8+PTQ4JiZvPD01Nyl7Zm9yKDQ4PT1vJiYobz1pLmNoYXJDb2RlQXQoVSsxKSxvPj00OCYmbzw9NTcpJiZJKCksbj0hMTtVPHMmJihvPWkuY2hhckNvZGVBdChVKSxvPj00OCYmbzw9NTcpO1UrKyk7aWYoNDY9PWkuY2hhckNvZGVBdChVKSl7Zm9yKHI9KytVO3I8cyYmKG89aS5jaGFyQ29kZUF0KHIpLG8+PTQ4JiZvPD01Nyk7cisrKTtyPT1VJiZJKCksVT1yfWlmKG89aS5jaGFyQ29kZUF0KFUpLDEwMT09b3x8Njk9PW8pe2ZvcihvPWkuY2hhckNvZGVBdCgrK1UpLDQzIT1vJiY0NSE9b3x8VSsrLHI9VTtyPHMmJihvPWkuY2hhckNvZGVBdChyKSxvPj00OCYmbzw9NTcpO3IrKyk7cj09VSYmSSgpLFU9cn1yZXR1cm4raS5zbGljZShlLFUpfWlmKG4mJkkoKSxcInRydWVcIj09aS5zbGljZShVLFUrNCkpcmV0dXJuIFUrPTQsITA7aWYoXCJmYWxzZVwiPT1pLnNsaWNlKFUsVSs1KSlyZXR1cm4gVSs9NSwhMTtpZihcIm51bGxcIj09aS5zbGljZShVLFUrNCkpcmV0dXJuIFUrPTQsbnVsbDtJKCl9cmV0dXJuXCIkXCJ9LHo9ZnVuY3Rpb24odCl7dmFyIGUscjtpZihcIiRcIj09dCYmSSgpLFwic3RyaW5nXCI9PXR5cGVvZiB0KXtpZihcIkBcIj09KFM/dC5jaGFyQXQoMCk6dFswXSkpcmV0dXJuIHQuc2xpY2UoMSk7aWYoXCJbXCI9PXQpe2ZvcihlPVtdO3Q9SCgpLFwiXVwiIT10O3J8fChyPSEwKSlyJiYoXCIsXCI9PXQ/KHQ9SCgpLFwiXVwiPT10JiZJKCkpOkkoKSksXCIsXCI9PXQmJkkoKSxlLnB1c2goeih0KSk7cmV0dXJuIGV9aWYoXCJ7XCI9PXQpe2ZvcihlPXt9O3Q9SCgpLFwifVwiIT10O3J8fChyPSEwKSlyJiYoXCIsXCI9PXQ/KHQ9SCgpLFwifVwiPT10JiZJKCkpOkkoKSksXCIsXCIhPXQmJlwic3RyaW5nXCI9PXR5cGVvZiB0JiZcIkBcIj09KFM/dC5jaGFyQXQoMCk6dFswXSkmJlwiOlwiPT1IKCl8fEkoKSxlW3Quc2xpY2UoMSldPXooSCgpKTtyZXR1cm4gZX1JKCl9cmV0dXJuIHR9LEo9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPVgodCxlLHIpO249PT1nP2RlbGV0ZSB0W2VdOnRbZV09bn0sWD1mdW5jdGlvbih0LGUscil7dmFyIG4sbz10W2VdO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBvJiZvKWlmKHYuY2FsbChvKT09Qilmb3Iobj1vLmxlbmd0aDtuLS07KUoobyxuLHIpO2Vsc2UgeShvLGZ1bmN0aW9uKHQpe0oobyx0LHIpfSk7cmV0dXJuIHIuY2FsbCh0LGUsbyl9O2UucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgcixuO3JldHVybiBVPTAscT1cIlwiK3Qscj16KEgoKSksXCIkXCIhPUgoKSYmSSgpLFU9cT1udWxsLGUmJnYuY2FsbChlKT09az9YKChuPXt9LG5bXCJcIl09cixuKSxcIlwiLGUpOnJ9fX1yZXR1cm4gZS5ydW5JbkNvbnRleHQ9aSxlfXZhciBzPXIoOSksYT17ZnVuY3Rpb246ITAsb2JqZWN0OiEwfSxjPWFbdHlwZW9mIGVdJiZlJiYhZS5ub2RlVHlwZSYmZSxwPWFbdHlwZW9mIHdpbmRvd10mJndpbmRvd3x8dGhpcyx1PWMmJmFbdHlwZW9mIHRdJiZ0JiYhdC5ub2RlVHlwZSYmXCJvYmplY3RcIj09dHlwZW9mIG8mJm87aWYoIXV8fHUuZ2xvYmFsIT09dSYmdS53aW5kb3chPT11JiZ1LnNlbGYhPT11fHwocD11KSxjJiYhcylpKHAsYyk7ZWxzZXt2YXIgaD1wLkpTT04sZj1wLkpTT04zLGw9ITEsZD1pKHAscC5KU09OMz17bm9Db25mbGljdDpmdW5jdGlvbigpe3JldHVybiBsfHwobD0hMCxwLkpTT049aCxwLkpTT04zPWYsaD1mPW51bGwpLGR9fSk7cC5KU09OPXtwYXJzZTpkLnBhcnNlLHN0cmluZ2lmeTpkLnN0cmluZ2lmeX19cyYmKG49ZnVuY3Rpb24oKXtyZXR1cm4gZH0uY2FsbChlLHIsZSx0KSwhKHZvaWQgMCE9PW4mJih0LmV4cG9ydHM9bikpKX0pLmNhbGwodGhpcyl9KS5jYWxsKGUscig4KSh0KSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQud2VicGFja1BvbHlmaWxsfHwodC5kZXByZWNhdGU9ZnVuY3Rpb24oKXt9LHQucGF0aHM9W10sdC5jaGlsZHJlbj1bXSx0LndlYnBhY2tQb2x5ZmlsbD0xKSx0fX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7dC5leHBvcnRzPWV9KS5jYWxsKGUse30pfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0KXJldHVybiBuKHQpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlIGluIHIucHJvdG90eXBlKXRbZV09ci5wcm90b3R5cGVbZV07cmV0dXJuIHR9dC5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzW3RdPXRoaXMuX2NhbGxiYWNrc1t0XXx8W10pLnB1c2goZSksdGhpc30sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXtuLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBuPXRoaXM7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHIuZm49ZSx0aGlzLm9uKHQsciksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIHI9dGhpcy5fY2FsbGJhY2tzW3RdO2lmKCFyKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0sdGhpcztmb3IodmFyIG4sbz0wO288ci5sZW5ndGg7bysrKWlmKG49cltvXSxuPT09ZXx8bi5mbj09PWUpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscj10aGlzLl9jYWxsYmFja3NbdF07aWYocil7cj1yLnNsaWNlKDApO2Zvcih2YXIgbj0wLG89ci5sZW5ndGg7bjxvOysrbilyW25dLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW3RdfHxbXX0sci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXt2YXIgbj1yKDEwKSxvPXIoMTMpO2UuZGVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtpZighdClyZXR1cm4gdDtpZihvKHQpKXt2YXIgaT17X3BsYWNlaG9sZGVyOiEwLG51bTpyLmxlbmd0aH07cmV0dXJuIHIucHVzaCh0KSxpfWlmKG4odCkpe2Zvcih2YXIgcz1uZXcgQXJyYXkodC5sZW5ndGgpLGE9MDthPHQubGVuZ3RoO2ErKylzW2FdPWUodFthXSk7cmV0dXJuIHN9aWYoXCJvYmplY3RcIj09dHlwZW9mIHQmJiEodCBpbnN0YW5jZW9mIERhdGUpKXt2YXIgcz17fTtmb3IodmFyIGMgaW4gdClzW2NdPWUodFtjXSk7cmV0dXJuIHN9cmV0dXJuIHR9dmFyIHI9W10saT10LmRhdGEscz10O3JldHVybiBzLmRhdGE9ZShpKSxzLmF0dGFjaG1lbnRzPXIubGVuZ3RoLHtwYWNrZXQ6cyxidWZmZXJzOnJ9fSxlLnJlY29uc3RydWN0UGFja2V0PWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0JiZ0Ll9wbGFjZWhvbGRlcil7dmFyIG89ZVt0Lm51bV07cmV0dXJuIG99aWYobih0KSl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXT1yKHRbaV0pO3JldHVybiB0fWlmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXtmb3IodmFyIHMgaW4gdCl0W3NdPXIodFtzXSk7cmV0dXJuIHR9cmV0dXJuIHR9cmV0dXJuIHQuZGF0YT1yKHQuZGF0YSksdC5hdHRhY2htZW50cz12b2lkIDAsdH0sZS5yZW1vdmVCbG9icz1mdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoZSxjLHApe2lmKCFlKXJldHVybiBlO2lmKHQuQmxvYiYmZSBpbnN0YW5jZW9mIEJsb2J8fHQuRmlsZSYmZSBpbnN0YW5jZW9mIEZpbGUpe3MrKzt2YXIgdT1uZXcgRmlsZVJlYWRlcjt1Lm9ubG9hZD1mdW5jdGlvbigpe3A/cFtjXT10aGlzLnJlc3VsdDphPXRoaXMucmVzdWx0LC0tc3x8cihhKX0sdS5yZWFkQXNBcnJheUJ1ZmZlcihlKX1lbHNlIGlmKG4oZSkpZm9yKHZhciBoPTA7aDxlLmxlbmd0aDtoKyspaShlW2hdLGgsZSk7ZWxzZSBpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIW8oZSkpZm9yKHZhciBmIGluIGUpaShlW2ZdLGYsZSl9dmFyIHM9MCxhPWU7aShhKSxzfHxyKGEpfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gZS5CdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyKHQpfHxlLkFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9dC5leHBvcnRzPXJ9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuPyh0JiZcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6byh0KSkmJihlPXQsdD12b2lkIDApLGU9ZXx8e30sZS5wYXRoPWUucGF0aHx8XCIvc29ja2V0LmlvXCIsdGhpcy5uc3BzPXt9LHRoaXMuc3Vicz1bXSx0aGlzLm9wdHM9ZSx0aGlzLnJlY29ubmVjdGlvbihlLnJlY29ubmVjdGlvbiE9PSExKSx0aGlzLnJlY29ubmVjdGlvbkF0dGVtcHRzKGUucmVjb25uZWN0aW9uQXR0ZW1wdHN8fDEvMCksdGhpcy5yZWNvbm5lY3Rpb25EZWxheShlLnJlY29ubmVjdGlvbkRlbGF5fHwxZTMpLHRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoZS5yZWNvbm5lY3Rpb25EZWxheU1heHx8NWUzKSx0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3IoZS5yYW5kb21pemF0aW9uRmFjdG9yfHwuNSksdGhpcy5iYWNrb2ZmPW5ldyBsKHttaW46dGhpcy5yZWNvbm5lY3Rpb25EZWxheSgpLG1heDp0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KCksaml0dGVyOnRoaXMucmFuZG9taXphdGlvbkZhY3RvcigpfSksdGhpcy50aW1lb3V0KG51bGw9PWUudGltZW91dD8yZTQ6ZS50aW1lb3V0KSx0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIix0aGlzLnVyaT10LHRoaXMuY29ubmVjdGluZz1bXSx0aGlzLmxhc3RQaW5nPW51bGwsdGhpcy5lbmNvZGluZz0hMSx0aGlzLnBhY2tldEJ1ZmZlcj1bXSx0aGlzLmVuY29kZXI9bmV3IGMuRW5jb2Rlcix0aGlzLmRlY29kZXI9bmV3IGMuRGVjb2Rlcix0aGlzLmF1dG9Db25uZWN0PWUuYXV0b0Nvbm5lY3QhPT0hMSx2b2lkKHRoaXMuYXV0b0Nvbm5lY3QmJnRoaXMub3BlbigpKSk6bmV3IG4odCxlKX12YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxpPXIoMTUpLHM9cig0MiksYT1yKDQzKSxjPXIoNikscD1yKDQ1KSx1PXIoNDYpLGg9cigzKShcInNvY2tldC5pby1jbGllbnQ6bWFuYWdlclwiKSxmPXIoNDApLGw9cig0OSksZD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1uLG4ucHJvdG90eXBlLmVtaXRBbGw9ZnVuY3Rpb24oKXt0aGlzLmVtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgdCBpbiB0aGlzLm5zcHMpZC5jYWxsKHRoaXMubnNwcyx0KSYmdGhpcy5uc3BzW3RdLmVtaXQuYXBwbHkodGhpcy5uc3BzW3RdLGFyZ3VtZW50cyl9LG4ucHJvdG90eXBlLnVwZGF0ZVNvY2tldElkcz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLm5zcHMpZC5jYWxsKHRoaXMubnNwcyx0KSYmKHRoaXMubnNwc1t0XS5pZD10aGlzLmVuZ2luZS5pZCl9LGEobi5wcm90b3R5cGUpLG4ucHJvdG90eXBlLnJlY29ubmVjdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmVjb25uZWN0aW9uPSEhdCx0aGlzKTp0aGlzLl9yZWNvbm5lY3Rpb259LG4ucHJvdG90eXBlLnJlY29ubmVjdGlvbkF0dGVtcHRzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cz10LHRoaXMpOnRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzfSxuLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmVjb25uZWN0aW9uRGVsYXk9dCx0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRNaW4odCksdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uRGVsYXl9LG4ucHJvdG90eXBlLnJhbmRvbWl6YXRpb25GYWN0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I9dCx0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRKaXR0ZXIodCksdGhpcyk6dGhpcy5fcmFuZG9taXphdGlvbkZhY3Rvcn0sbi5wcm90b3R5cGUucmVjb25uZWN0aW9uRGVsYXlNYXg9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5TWF4PXQsdGhpcy5iYWNrb2ZmJiZ0aGlzLmJhY2tvZmYuc2V0TWF4KHQpLHRoaXMpOnRoaXMuX3JlY29ubmVjdGlvbkRlbGF5TWF4fSxuLnByb3RvdHlwZS50aW1lb3V0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl90aW1lb3V0PXQsdGhpcyk6dGhpcy5fdGltZW91dH0sbi5wcm90b3R5cGUubWF5YmVSZWNvbm5lY3RPbk9wZW49ZnVuY3Rpb24oKXshdGhpcy5yZWNvbm5lY3RpbmcmJnRoaXMuX3JlY29ubmVjdGlvbiYmMD09PXRoaXMuYmFja29mZi5hdHRlbXB0cyYmdGhpcy5yZWNvbm5lY3QoKX0sbi5wcm90b3R5cGUub3Blbj1uLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKHQsZSl7aWYoaChcInJlYWR5U3RhdGUgJXNcIix0aGlzLnJlYWR5U3RhdGUpLH50aGlzLnJlYWR5U3RhdGUuaW5kZXhPZihcIm9wZW5cIikpcmV0dXJuIHRoaXM7aChcIm9wZW5pbmcgJXNcIix0aGlzLnVyaSksdGhpcy5lbmdpbmU9aSh0aGlzLnVyaSx0aGlzLm9wdHMpO3ZhciByPXRoaXMuZW5naW5lLG49dGhpczt0aGlzLnJlYWR5U3RhdGU9XCJvcGVuaW5nXCIsdGhpcy5za2lwUmVjb25uZWN0PSExO3ZhciBvPXAocixcIm9wZW5cIixmdW5jdGlvbigpe24ub25vcGVuKCksdCYmdCgpfSkscz1wKHIsXCJlcnJvclwiLGZ1bmN0aW9uKGUpe2lmKGgoXCJjb25uZWN0X2Vycm9yXCIpLG4uY2xlYW51cCgpLG4ucmVhZHlTdGF0ZT1cImNsb3NlZFwiLG4uZW1pdEFsbChcImNvbm5lY3RfZXJyb3JcIixlKSx0KXt2YXIgcj1uZXcgRXJyb3IoXCJDb25uZWN0aW9uIGVycm9yXCIpO3IuZGF0YT1lLHQocil9ZWxzZSBuLm1heWJlUmVjb25uZWN0T25PcGVuKCl9KTtpZighMSE9PXRoaXMuX3RpbWVvdXQpe3ZhciBhPXRoaXMuX3RpbWVvdXQ7aChcImNvbm5lY3QgYXR0ZW1wdCB3aWxsIHRpbWVvdXQgYWZ0ZXIgJWRcIixhKTt2YXIgYz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aChcImNvbm5lY3QgYXR0ZW1wdCB0aW1lZCBvdXQgYWZ0ZXIgJWRcIixhKSxvLmRlc3Ryb3koKSxyLmNsb3NlKCksci5lbWl0KFwiZXJyb3JcIixcInRpbWVvdXRcIiksbi5lbWl0QWxsKFwiY29ubmVjdF90aW1lb3V0XCIsYSl9LGEpO3RoaXMuc3Vicy5wdXNoKHtkZXN0cm95OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGMpfX0pfXJldHVybiB0aGlzLnN1YnMucHVzaChvKSx0aGlzLnN1YnMucHVzaChzKSx0aGlzfSxuLnByb3RvdHlwZS5vbm9wZW49ZnVuY3Rpb24oKXtoKFwib3BlblwiKSx0aGlzLmNsZWFudXAoKSx0aGlzLnJlYWR5U3RhdGU9XCJvcGVuXCIsdGhpcy5lbWl0KFwib3BlblwiKTt2YXIgdD10aGlzLmVuZ2luZTt0aGlzLnN1YnMucHVzaChwKHQsXCJkYXRhXCIsdSh0aGlzLFwib25kYXRhXCIpKSksdGhpcy5zdWJzLnB1c2gocCh0LFwicGluZ1wiLHUodGhpcyxcIm9ucGluZ1wiKSkpLHRoaXMuc3Vicy5wdXNoKHAodCxcInBvbmdcIix1KHRoaXMsXCJvbnBvbmdcIikpKSx0aGlzLnN1YnMucHVzaChwKHQsXCJlcnJvclwiLHUodGhpcyxcIm9uZXJyb3JcIikpKSx0aGlzLnN1YnMucHVzaChwKHQsXCJjbG9zZVwiLHUodGhpcyxcIm9uY2xvc2VcIikpKSx0aGlzLnN1YnMucHVzaChwKHRoaXMuZGVjb2RlcixcImRlY29kZWRcIix1KHRoaXMsXCJvbmRlY29kZWRcIikpKX0sbi5wcm90b3R5cGUub25waW5nPWZ1bmN0aW9uKCl7dGhpcy5sYXN0UGluZz1uZXcgRGF0ZSx0aGlzLmVtaXRBbGwoXCJwaW5nXCIpfSxuLnByb3RvdHlwZS5vbnBvbmc9ZnVuY3Rpb24oKXt0aGlzLmVtaXRBbGwoXCJwb25nXCIsbmV3IERhdGUtdGhpcy5sYXN0UGluZyl9LG4ucHJvdG90eXBlLm9uZGF0YT1mdW5jdGlvbih0KXt0aGlzLmRlY29kZXIuYWRkKHQpfSxuLnByb3RvdHlwZS5vbmRlY29kZWQ9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicGFja2V0XCIsdCl9LG4ucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24odCl7aChcImVycm9yXCIsdCksdGhpcy5lbWl0QWxsKFwiZXJyb3JcIix0KX0sbi5wcm90b3R5cGUuc29ja2V0PWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe35mKG8uY29ubmVjdGluZyxuKXx8by5jb25uZWN0aW5nLnB1c2gobil9dmFyIG49dGhpcy5uc3BzW3RdO2lmKCFuKXtuPW5ldyBzKHRoaXMsdCxlKSx0aGlzLm5zcHNbdF09bjt2YXIgbz10aGlzO24ub24oXCJjb25uZWN0aW5nXCIsciksbi5vbihcImNvbm5lY3RcIixmdW5jdGlvbigpe24uaWQ9by5lbmdpbmUuaWR9KSx0aGlzLmF1dG9Db25uZWN0JiZyKCl9cmV0dXJuIG59LG4ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24odCl7dmFyIGU9Zih0aGlzLmNvbm5lY3RpbmcsdCk7fmUmJnRoaXMuY29ubmVjdGluZy5zcGxpY2UoZSwxKSx0aGlzLmNvbm5lY3RpbmcubGVuZ3RofHx0aGlzLmNsb3NlKCl9LG4ucHJvdG90eXBlLnBhY2tldD1mdW5jdGlvbih0KXtoKFwid3JpdGluZyBwYWNrZXQgJWpcIix0KTt2YXIgZT10aGlzO3QucXVlcnkmJjA9PT10LnR5cGUmJih0Lm5zcCs9XCI/XCIrdC5xdWVyeSksZS5lbmNvZGluZz9lLnBhY2tldEJ1ZmZlci5wdXNoKHQpOihlLmVuY29kaW5nPSEwLHRoaXMuZW5jb2Rlci5lbmNvZGUodCxmdW5jdGlvbihyKXtmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyllLmVuZ2luZS53cml0ZShyW25dLHQub3B0aW9ucyk7ZS5lbmNvZGluZz0hMSxlLnByb2Nlc3NQYWNrZXRRdWV1ZSgpfSkpfSxuLnByb3RvdHlwZS5wcm9jZXNzUGFja2V0UXVldWU9ZnVuY3Rpb24oKXtpZih0aGlzLnBhY2tldEJ1ZmZlci5sZW5ndGg+MCYmIXRoaXMuZW5jb2Rpbmcpe3ZhciB0PXRoaXMucGFja2V0QnVmZmVyLnNoaWZ0KCk7dGhpcy5wYWNrZXQodCl9fSxuLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKCl7aChcImNsZWFudXBcIik7Zm9yKHZhciB0PXRoaXMuc3Vicy5sZW5ndGgsZT0wO2U8dDtlKyspe3ZhciByPXRoaXMuc3Vicy5zaGlmdCgpO3IuZGVzdHJveSgpfXRoaXMucGFja2V0QnVmZmVyPVtdLHRoaXMuZW5jb2Rpbmc9ITEsdGhpcy5sYXN0UGluZz1udWxsLHRoaXMuZGVjb2Rlci5kZXN0cm95KCl9LG4ucHJvdG90eXBlLmNsb3NlPW4ucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtoKFwiZGlzY29ubmVjdFwiKSx0aGlzLnNraXBSZWNvbm5lY3Q9ITAsdGhpcy5yZWNvbm5lY3Rpbmc9ITEsXCJvcGVuaW5nXCI9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMuY2xlYW51cCgpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMuZW5naW5lJiZ0aGlzLmVuZ2luZS5jbG9zZSgpfSxuLnByb3RvdHlwZS5vbmNsb3NlPWZ1bmN0aW9uKHQpe2goXCJvbmNsb3NlXCIpLHRoaXMuY2xlYW51cCgpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMuZW1pdChcImNsb3NlXCIsdCksdGhpcy5fcmVjb25uZWN0aW9uJiYhdGhpcy5za2lwUmVjb25uZWN0JiZ0aGlzLnJlY29ubmVjdCgpfSxuLnByb3RvdHlwZS5yZWNvbm5lY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLnJlY29ubmVjdGluZ3x8dGhpcy5za2lwUmVjb25uZWN0KXJldHVybiB0aGlzO3ZhciB0PXRoaXM7aWYodGhpcy5iYWNrb2ZmLmF0dGVtcHRzPj10aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cyloKFwicmVjb25uZWN0IGZhaWxlZFwiKSx0aGlzLmJhY2tvZmYucmVzZXQoKSx0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RfZmFpbGVkXCIpLHRoaXMucmVjb25uZWN0aW5nPSExO2Vsc2V7dmFyIGU9dGhpcy5iYWNrb2ZmLmR1cmF0aW9uKCk7aChcIndpbGwgd2FpdCAlZG1zIGJlZm9yZSByZWNvbm5lY3QgYXR0ZW1wdFwiLGUpLHRoaXMucmVjb25uZWN0aW5nPSEwO3ZhciByPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNraXBSZWNvbm5lY3R8fChoKFwiYXR0ZW1wdGluZyByZWNvbm5lY3RcIiksdC5lbWl0QWxsKFwicmVjb25uZWN0X2F0dGVtcHRcIix0LmJhY2tvZmYuYXR0ZW1wdHMpLHQuZW1pdEFsbChcInJlY29ubmVjdGluZ1wiLHQuYmFja29mZi5hdHRlbXB0cyksdC5za2lwUmVjb25uZWN0fHx0Lm9wZW4oZnVuY3Rpb24oZSl7ZT8oaChcInJlY29ubmVjdCBhdHRlbXB0IGVycm9yXCIpLHQucmVjb25uZWN0aW5nPSExLHQucmVjb25uZWN0KCksdC5lbWl0QWxsKFwicmVjb25uZWN0X2Vycm9yXCIsZS5kYXRhKSk6KGgoXCJyZWNvbm5lY3Qgc3VjY2Vzc1wiKSx0Lm9ucmVjb25uZWN0KCkpfSkpfSxlKTt0aGlzLnN1YnMucHVzaCh7ZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dChyKX19KX19LG4ucHJvdG90eXBlLm9ucmVjb25uZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5iYWNrb2ZmLmF0dGVtcHRzO3RoaXMucmVjb25uZWN0aW5nPSExLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMudXBkYXRlU29ja2V0SWRzKCksdGhpcy5lbWl0QWxsKFwicmVjb25uZWN0XCIsdCl9fSxmdW5jdGlvbih0LGUscil7dC5leHBvcnRzPXIoMTYpfSxmdW5jdGlvbih0LGUscil7dC5leHBvcnRzPXIoMTcpLHQuZXhwb3J0cy5wYXJzZXI9cigyNCl9LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0LHIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXJldHVybiBuZXcgbih0LHIpO3I9cnx8e30sdCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJihyPXQsdD1udWxsKSx0Pyh0PXUodCksci5ob3N0bmFtZT10Lmhvc3Qsci5zZWN1cmU9XCJodHRwc1wiPT10LnByb3RvY29sfHxcIndzc1wiPT10LnByb3RvY29sLHIucG9ydD10LnBvcnQsdC5xdWVyeSYmKHIucXVlcnk9dC5xdWVyeSkpOnIuaG9zdCYmKHIuaG9zdG5hbWU9dShyLmhvc3QpLmhvc3QpLHRoaXMuc2VjdXJlPW51bGwhPXIuc2VjdXJlP3Iuc2VjdXJlOmUubG9jYXRpb24mJlwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sLHIuaG9zdG5hbWUmJiFyLnBvcnQmJihyLnBvcnQ9dGhpcy5zZWN1cmU/XCI0NDNcIjpcIjgwXCIpLHRoaXMuYWdlbnQ9ci5hZ2VudHx8ITEsdGhpcy5ob3N0bmFtZT1yLmhvc3RuYW1lfHwoZS5sb2NhdGlvbj9sb2NhdGlvbi5ob3N0bmFtZTpcImxvY2FsaG9zdFwiKSx0aGlzLnBvcnQ9ci5wb3J0fHwoZS5sb2NhdGlvbiYmbG9jYXRpb24ucG9ydD9sb2NhdGlvbi5wb3J0OnRoaXMuc2VjdXJlPzQ0Mzo4MCksdGhpcy5xdWVyeT1yLnF1ZXJ5fHx7fSxcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5xdWVyeSYmKHRoaXMucXVlcnk9Zi5kZWNvZGUodGhpcy5xdWVyeSkpLHRoaXMudXBncmFkZT0hMSE9PXIudXBncmFkZSx0aGlzLnBhdGg9KHIucGF0aHx8XCIvZW5naW5lLmlvXCIpLnJlcGxhY2UoL1xcLyQvLFwiXCIpK1wiL1wiLHRoaXMuZm9yY2VKU09OUD0hIXIuZm9yY2VKU09OUCx0aGlzLmpzb25wPSExIT09ci5qc29ucCx0aGlzLmZvcmNlQmFzZTY0PSEhci5mb3JjZUJhc2U2NCx0aGlzLmVuYWJsZXNYRFI9ISFyLmVuYWJsZXNYRFIsdGhpcy50aW1lc3RhbXBQYXJhbT1yLnRpbWVzdGFtcFBhcmFtfHxcInRcIix0aGlzLnRpbWVzdGFtcFJlcXVlc3RzPXIudGltZXN0YW1wUmVxdWVzdHMsdGhpcy50cmFuc3BvcnRzPXIudHJhbnNwb3J0c3x8W1wicG9sbGluZ1wiLFwid2Vic29ja2V0XCJdLHRoaXMucmVhZHlTdGF0ZT1cIlwiLHRoaXMud3JpdGVCdWZmZXI9W10sdGhpcy5wb2xpY3lQb3J0PXIucG9saWN5UG9ydHx8ODQzLHRoaXMucmVtZW1iZXJVcGdyYWRlPXIucmVtZW1iZXJVcGdyYWRlfHwhMSx0aGlzLmJpbmFyeVR5cGU9bnVsbCx0aGlzLm9ubHlCaW5hcnlVcGdyYWRlcz1yLm9ubHlCaW5hcnlVcGdyYWRlcyx0aGlzLnBlck1lc3NhZ2VEZWZsYXRlPSExIT09ci5wZXJNZXNzYWdlRGVmbGF0ZSYmKHIucGVyTWVzc2FnZURlZmxhdGV8fHt9KSwhMD09PXRoaXMucGVyTWVzc2FnZURlZmxhdGUmJih0aGlzLnBlck1lc3NhZ2VEZWZsYXRlPXt9KSx0aGlzLnBlck1lc3NhZ2VEZWZsYXRlJiZudWxsPT10aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCYmKHRoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkPTEwMjQpLHRoaXMucGZ4PXIucGZ4fHxudWxsLHRoaXMua2V5PXIua2V5fHxudWxsLHRoaXMucGFzc3BocmFzZT1yLnBhc3NwaHJhc2V8fG51bGwsdGhpcy5jZXJ0PXIuY2VydHx8bnVsbCx0aGlzLmNhPXIuY2F8fG51bGwsdGhpcy5jaXBoZXJzPXIuY2lwaGVyc3x8bnVsbCx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD12b2lkIDA9PT1yLnJlamVjdFVuYXV0aG9yaXplZHx8ci5yZWplY3RVbmF1dGhvcml6ZWQ7dmFyIG89XCJvYmplY3RcIj09dHlwZW9mIGUmJmU7by5nbG9iYWw9PT1vJiZyLmV4dHJhSGVhZGVycyYmT2JqZWN0LmtleXMoci5leHRyYUhlYWRlcnMpLmxlbmd0aD4wJiYodGhpcy5leHRyYUhlYWRlcnM9ci5leHRyYUhlYWRlcnMpLHRoaXMub3BlbigpfWZ1bmN0aW9uIG8odCl7dmFyIGU9e307Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGV9dmFyIGk9cigxOCkscz1yKDMzKSxhPXIoMykoXCJlbmdpbmUuaW8tY2xpZW50OnNvY2tldFwiKSxjPXIoNDApLHA9cigyNCksdT1yKDIpLGg9cig0MSksZj1yKDM0KTt0LmV4cG9ydHM9bixuLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSxzKG4ucHJvdG90eXBlKSxuLnByb3RvY29sPXAucHJvdG9jb2wsbi5Tb2NrZXQ9bixuLlRyYW5zcG9ydD1yKDIzKSxuLnRyYW5zcG9ydHM9cigxOCksbi5wYXJzZXI9cigyNCksbi5wcm90b3R5cGUuY3JlYXRlVHJhbnNwb3J0PWZ1bmN0aW9uKHQpe2EoJ2NyZWF0aW5nIHRyYW5zcG9ydCBcIiVzXCInLHQpO3ZhciBlPW8odGhpcy5xdWVyeSk7ZS5FSU89cC5wcm90b2NvbCxlLnRyYW5zcG9ydD10LHRoaXMuaWQmJihlLnNpZD10aGlzLmlkKTt2YXIgcj1uZXcgaVt0XSh7YWdlbnQ6dGhpcy5hZ2VudCxob3N0bmFtZTp0aGlzLmhvc3RuYW1lLHBvcnQ6dGhpcy5wb3J0LHNlY3VyZTp0aGlzLnNlY3VyZSxwYXRoOnRoaXMucGF0aCxxdWVyeTplLGZvcmNlSlNPTlA6dGhpcy5mb3JjZUpTT05QLGpzb25wOnRoaXMuanNvbnAsZm9yY2VCYXNlNjQ6dGhpcy5mb3JjZUJhc2U2NCxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUix0aW1lc3RhbXBSZXF1ZXN0czp0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLHRpbWVzdGFtcFBhcmFtOnRoaXMudGltZXN0YW1wUGFyYW0scG9saWN5UG9ydDp0aGlzLnBvbGljeVBvcnQsc29ja2V0OnRoaXMscGZ4OnRoaXMucGZ4LGtleTp0aGlzLmtleSxwYXNzcGhyYXNlOnRoaXMucGFzc3BocmFzZSxjZXJ0OnRoaXMuY2VydCxjYTp0aGlzLmNhLGNpcGhlcnM6dGhpcy5jaXBoZXJzLHJlamVjdFVuYXV0aG9yaXplZDp0aGlzLnJlamVjdFVuYXV0aG9yaXplZCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLGV4dHJhSGVhZGVyczp0aGlzLmV4dHJhSGVhZGVyc30pO3JldHVybiByfSxuLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIHQ7aWYodGhpcy5yZW1lbWJlclVwZ3JhZGUmJm4ucHJpb3JXZWJzb2NrZXRTdWNjZXNzJiZ0aGlzLnRyYW5zcG9ydHMuaW5kZXhPZihcIndlYnNvY2tldFwiKSE9LTEpdD1cIndlYnNvY2tldFwiO2Vsc2V7aWYoMD09PXRoaXMudHJhbnNwb3J0cy5sZW5ndGgpe3ZhciBlPXRoaXM7cmV0dXJuIHZvaWQgc2V0VGltZW91dChmdW5jdGlvbigpe2UuZW1pdChcImVycm9yXCIsXCJObyB0cmFuc3BvcnRzIGF2YWlsYWJsZVwiKX0sMCl9dD10aGlzLnRyYW5zcG9ydHNbMF19dGhpcy5yZWFkeVN0YXRlPVwib3BlbmluZ1wiO3RyeXt0PXRoaXMuY3JlYXRlVHJhbnNwb3J0KHQpfWNhdGNoKHQpe3JldHVybiB0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKSx2b2lkIHRoaXMub3BlbigpfXQub3BlbigpLHRoaXMuc2V0VHJhbnNwb3J0KHQpfSxuLnByb3RvdHlwZS5zZXRUcmFuc3BvcnQ9ZnVuY3Rpb24odCl7YShcInNldHRpbmcgdHJhbnNwb3J0ICVzXCIsdC5uYW1lKTt2YXIgZT10aGlzO3RoaXMudHJhbnNwb3J0JiYoYShcImNsZWFyaW5nIGV4aXN0aW5nIHRyYW5zcG9ydCAlc1wiLHRoaXMudHJhbnNwb3J0Lm5hbWUpLHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpKSx0aGlzLnRyYW5zcG9ydD10LHQub24oXCJkcmFpblwiLGZ1bmN0aW9uKCl7ZS5vbkRyYWluKCl9KS5vbihcInBhY2tldFwiLGZ1bmN0aW9uKHQpe2Uub25QYWNrZXQodCl9KS5vbihcImVycm9yXCIsZnVuY3Rpb24odCl7ZS5vbkVycm9yKHQpfSkub24oXCJjbG9zZVwiLGZ1bmN0aW9uKCl7ZS5vbkNsb3NlKFwidHJhbnNwb3J0IGNsb3NlXCIpfSl9LG4ucHJvdG90eXBlLnByb2JlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtpZihmLm9ubHlCaW5hcnlVcGdyYWRlcyl7dmFyIGU9IXRoaXMuc3VwcG9ydHNCaW5hcnkmJmYudHJhbnNwb3J0LnN1cHBvcnRzQmluYXJ5O2g9aHx8ZX1ofHwoYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBvcGVuZWQnLHQpLHUuc2VuZChbe3R5cGU6XCJwaW5nXCIsZGF0YTpcInByb2JlXCJ9XSksdS5vbmNlKFwicGFja2V0XCIsZnVuY3Rpb24oZSl7aWYoIWgpaWYoXCJwb25nXCI9PWUudHlwZSYmXCJwcm9iZVwiPT1lLmRhdGEpe2lmKGEoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgcG9uZycsdCksZi51cGdyYWRpbmc9ITAsZi5lbWl0KFwidXBncmFkaW5nXCIsdSksIXUpcmV0dXJuO24ucHJpb3JXZWJzb2NrZXRTdWNjZXNzPVwid2Vic29ja2V0XCI9PXUubmFtZSxhKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0IFwiJXNcIicsZi50cmFuc3BvcnQubmFtZSksZi50cmFuc3BvcnQucGF1c2UoZnVuY3Rpb24oKXtofHxcImNsb3NlZFwiIT1mLnJlYWR5U3RhdGUmJihhKFwiY2hhbmdpbmcgdHJhbnNwb3J0IGFuZCBzZW5kaW5nIHVwZ3JhZGUgcGFja2V0XCIpLHAoKSxmLnNldFRyYW5zcG9ydCh1KSx1LnNlbmQoW3t0eXBlOlwidXBncmFkZVwifV0pLGYuZW1pdChcInVwZ3JhZGVcIix1KSx1PW51bGwsZi51cGdyYWRpbmc9ITEsZi5mbHVzaCgpKX0pfWVsc2V7YSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQnLHQpO3ZhciByPW5ldyBFcnJvcihcInByb2JlIGVycm9yXCIpO3IudHJhbnNwb3J0PXUubmFtZSxmLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIixyKX19KSl9ZnVuY3Rpb24gcigpe2h8fChoPSEwLHAoKSx1LmNsb3NlKCksdT1udWxsKX1mdW5jdGlvbiBvKGUpe3ZhciBuPW5ldyBFcnJvcihcInByb2JlIGVycm9yOiBcIitlKTtuLnRyYW5zcG9ydD11Lm5hbWUscigpLGEoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgZmFpbGVkIGJlY2F1c2Ugb2YgZXJyb3I6ICVzJyx0LGUpLGYuZW1pdChcInVwZ3JhZGVFcnJvclwiLG4pfWZ1bmN0aW9uIGkoKXtvKFwidHJhbnNwb3J0IGNsb3NlZFwiKX1mdW5jdGlvbiBzKCl7byhcInNvY2tldCBjbG9zZWRcIil9ZnVuY3Rpb24gYyh0KXt1JiZ0Lm5hbWUhPXUubmFtZSYmKGEoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsdC5uYW1lLHUubmFtZSkscigpKX1mdW5jdGlvbiBwKCl7dS5yZW1vdmVMaXN0ZW5lcihcIm9wZW5cIixlKSx1LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixvKSx1LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixpKSxmLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixzKSxmLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkaW5nXCIsYyl9YSgncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJyx0KTt2YXIgdT10aGlzLmNyZWF0ZVRyYW5zcG9ydCh0LHtwcm9iZToxfSksaD0hMSxmPXRoaXM7bi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ITEsdS5vbmNlKFwib3BlblwiLGUpLHUub25jZShcImVycm9yXCIsbyksdS5vbmNlKFwiY2xvc2VcIixpKSx0aGlzLm9uY2UoXCJjbG9zZVwiLHMpLHRoaXMub25jZShcInVwZ3JhZGluZ1wiLGMpLHUub3BlbigpfSxuLnByb3RvdHlwZS5vbk9wZW49ZnVuY3Rpb24oKXtpZihhKFwic29ja2V0IG9wZW5cIiksdGhpcy5yZWFkeVN0YXRlPVwib3BlblwiLG4ucHJpb3JXZWJzb2NrZXRTdWNjZXNzPVwid2Vic29ja2V0XCI9PXRoaXMudHJhbnNwb3J0Lm5hbWUsdGhpcy5lbWl0KFwib3BlblwiKSx0aGlzLmZsdXNoKCksXCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy51cGdyYWRlJiZ0aGlzLnRyYW5zcG9ydC5wYXVzZSl7YShcInN0YXJ0aW5nIHVwZ3JhZGUgcHJvYmVzXCIpO2Zvcih2YXIgdD0wLGU9dGhpcy51cGdyYWRlcy5sZW5ndGg7dDxlO3QrKyl0aGlzLnByb2JlKHRoaXMudXBncmFkZXNbdF0pfX0sbi5wcm90b3R5cGUub25QYWNrZXQ9ZnVuY3Rpb24odCl7aWYoXCJvcGVuaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZSlzd2l0Y2goYSgnc29ja2V0IHJlY2VpdmU6IHR5cGUgXCIlc1wiLCBkYXRhIFwiJXNcIicsdC50eXBlLHQuZGF0YSksdGhpcy5lbWl0KFwicGFja2V0XCIsdCksdGhpcy5lbWl0KFwiaGVhcnRiZWF0XCIpLHQudHlwZSl7Y2FzZVwib3BlblwiOnRoaXMub25IYW5kc2hha2UoaCh0LmRhdGEpKTticmVhaztjYXNlXCJwb25nXCI6dGhpcy5zZXRQaW5nKCksdGhpcy5lbWl0KFwicG9uZ1wiKTticmVhaztjYXNlXCJlcnJvclwiOnZhciBlPW5ldyBFcnJvcihcInNlcnZlciBlcnJvclwiKTtcclxuZS5jb2RlPXQuZGF0YSx0aGlzLm9uRXJyb3IoZSk7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOnRoaXMuZW1pdChcImRhdGFcIix0LmRhdGEpLHRoaXMuZW1pdChcIm1lc3NhZ2VcIix0LmRhdGEpfWVsc2UgYSgncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpfSxuLnByb3RvdHlwZS5vbkhhbmRzaGFrZT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJoYW5kc2hha2VcIix0KSx0aGlzLmlkPXQuc2lkLHRoaXMudHJhbnNwb3J0LnF1ZXJ5LnNpZD10LnNpZCx0aGlzLnVwZ3JhZGVzPXRoaXMuZmlsdGVyVXBncmFkZXModC51cGdyYWRlcyksdGhpcy5waW5nSW50ZXJ2YWw9dC5waW5nSW50ZXJ2YWwsdGhpcy5waW5nVGltZW91dD10LnBpbmdUaW1lb3V0LHRoaXMub25PcGVuKCksXCJjbG9zZWRcIiE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5zZXRQaW5nKCksdGhpcy5yZW1vdmVMaXN0ZW5lcihcImhlYXJ0YmVhdFwiLHRoaXMub25IZWFydGJlYXQpLHRoaXMub24oXCJoZWFydGJlYXRcIix0aGlzLm9uSGVhcnRiZWF0KSl9LG4ucHJvdG90eXBlLm9uSGVhcnRiZWF0PWZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO3ZhciBlPXRoaXM7ZS5waW5nVGltZW91dFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtcImNsb3NlZFwiIT1lLnJlYWR5U3RhdGUmJmUub25DbG9zZShcInBpbmcgdGltZW91dFwiKX0sdHx8ZS5waW5nSW50ZXJ2YWwrZS5waW5nVGltZW91dCl9LG4ucHJvdG90eXBlLnNldFBpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2NsZWFyVGltZW91dCh0LnBpbmdJbnRlcnZhbFRpbWVyKSx0LnBpbmdJbnRlcnZhbFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthKFwid3JpdGluZyBwaW5nIHBhY2tldCAtIGV4cGVjdGluZyBwb25nIHdpdGhpbiAlc21zXCIsdC5waW5nVGltZW91dCksdC5waW5nKCksdC5vbkhlYXJ0YmVhdCh0LnBpbmdUaW1lb3V0KX0sdC5waW5nSW50ZXJ2YWwpfSxuLnByb3RvdHlwZS5waW5nPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnNlbmRQYWNrZXQoXCJwaW5nXCIsZnVuY3Rpb24oKXt0LmVtaXQoXCJwaW5nXCIpfSl9LG4ucHJvdG90eXBlLm9uRHJhaW49ZnVuY3Rpb24oKXt0aGlzLndyaXRlQnVmZmVyLnNwbGljZSgwLHRoaXMucHJldkJ1ZmZlckxlbiksdGhpcy5wcmV2QnVmZmVyTGVuPTAsMD09PXRoaXMud3JpdGVCdWZmZXIubGVuZ3RoP3RoaXMuZW1pdChcImRyYWluXCIpOnRoaXMuZmx1c2goKX0sbi5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtcImNsb3NlZFwiIT10aGlzLnJlYWR5U3RhdGUmJnRoaXMudHJhbnNwb3J0LndyaXRhYmxlJiYhdGhpcy51cGdyYWRpbmcmJnRoaXMud3JpdGVCdWZmZXIubGVuZ3RoJiYoYShcImZsdXNoaW5nICVkIHBhY2tldHMgaW4gc29ja2V0XCIsdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy53cml0ZUJ1ZmZlciksdGhpcy5wcmV2QnVmZmVyTGVuPXRoaXMud3JpdGVCdWZmZXIubGVuZ3RoLHRoaXMuZW1pdChcImZsdXNoXCIpKX0sbi5wcm90b3R5cGUud3JpdGU9bi5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMuc2VuZFBhY2tldChcIm1lc3NhZ2VcIix0LGUsciksdGhpc30sbi5wcm90b3R5cGUuc2VuZFBhY2tldD1mdW5jdGlvbih0LGUscixuKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYobj1lLGU9dm9pZCAwKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYobj1yLHI9bnVsbCksXCJjbG9zaW5nXCIhPXRoaXMucmVhZHlTdGF0ZSYmXCJjbG9zZWRcIiE9dGhpcy5yZWFkeVN0YXRlKXtyPXJ8fHt9LHIuY29tcHJlc3M9ITEhPT1yLmNvbXByZXNzO3ZhciBvPXt0eXBlOnQsZGF0YTplLG9wdGlvbnM6cn07dGhpcy5lbWl0KFwicGFja2V0Q3JlYXRlXCIsbyksdGhpcy53cml0ZUJ1ZmZlci5wdXNoKG8pLG4mJnRoaXMub25jZShcImZsdXNoXCIsbiksdGhpcy5mbHVzaCgpfX0sbi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bi5vbkNsb3NlKFwiZm9yY2VkIGNsb3NlXCIpLGEoXCJzb2NrZXQgY2xvc2luZyAtIHRlbGxpbmcgdHJhbnNwb3J0IHRvIGNsb3NlXCIpLG4udHJhbnNwb3J0LmNsb3NlKCl9ZnVuY3Rpb24gZSgpe24ucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlXCIsZSksbi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVFcnJvclwiLGUpLHQoKX1mdW5jdGlvbiByKCl7bi5vbmNlKFwidXBncmFkZVwiLGUpLG4ub25jZShcInVwZ3JhZGVFcnJvclwiLGUpfWlmKFwib3BlbmluZ1wiPT10aGlzLnJlYWR5U3RhdGV8fFwib3BlblwiPT10aGlzLnJlYWR5U3RhdGUpe3RoaXMucmVhZHlTdGF0ZT1cImNsb3NpbmdcIjt2YXIgbj10aGlzO3RoaXMud3JpdGVCdWZmZXIubGVuZ3RoP3RoaXMub25jZShcImRyYWluXCIsZnVuY3Rpb24oKXt0aGlzLnVwZ3JhZGluZz9yKCk6dCgpfSk6dGhpcy51cGdyYWRpbmc/cigpOnQoKX1yZXR1cm4gdGhpc30sbi5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0KXthKFwic29ja2V0IGVycm9yICVqXCIsdCksbi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ITEsdGhpcy5lbWl0KFwiZXJyb3JcIix0KSx0aGlzLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgZXJyb3JcIix0KX0sbi5wcm90b3R5cGUub25DbG9zZT1mdW5jdGlvbih0LGUpe2lmKFwib3BlbmluZ1wiPT10aGlzLnJlYWR5U3RhdGV8fFwib3BlblwiPT10aGlzLnJlYWR5U3RhdGV8fFwiY2xvc2luZ1wiPT10aGlzLnJlYWR5U3RhdGUpe2EoJ3NvY2tldCBjbG9zZSB3aXRoIHJlYXNvbjogXCIlc1wiJyx0KTt2YXIgcj10aGlzO2NsZWFyVGltZW91dCh0aGlzLnBpbmdJbnRlcnZhbFRpbWVyKSxjbGVhclRpbWVvdXQodGhpcy5waW5nVGltZW91dFRpbWVyKSx0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJjbG9zZVwiKSx0aGlzLnRyYW5zcG9ydC5jbG9zZSgpLHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMuaWQ9bnVsbCx0aGlzLmVtaXQoXCJjbG9zZVwiLHQsZSksci53cml0ZUJ1ZmZlcj1bXSxyLnByZXZCdWZmZXJMZW49MH19LG4ucHJvdG90eXBlLmZpbHRlclVwZ3JhZGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTAsbj10Lmxlbmd0aDtyPG47cisrKX5jKHRoaXMudHJhbnNwb3J0cyx0W3JdKSYmZS5wdXNoKHRbcl0pO3JldHVybiBlfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXtmdW5jdGlvbiBuKGUpe3ZhciByLG49ITEsYT0hMSxjPSExIT09ZS5qc29ucDtpZih0LmxvY2F0aW9uKXt2YXIgcD1cImh0dHBzOlwiPT1sb2NhdGlvbi5wcm90b2NvbCx1PWxvY2F0aW9uLnBvcnQ7dXx8KHU9cD80NDM6ODApLG49ZS5ob3N0bmFtZSE9bG9jYXRpb24uaG9zdG5hbWV8fHUhPWUucG9ydCxhPWUuc2VjdXJlIT1wfWlmKGUueGRvbWFpbj1uLGUueHNjaGVtZT1hLHI9bmV3IG8oZSksXCJvcGVuXCJpbiByJiYhZS5mb3JjZUpTT05QKXJldHVybiBuZXcgaShlKTtpZighYyl0aHJvdyBuZXcgRXJyb3IoXCJKU09OUCBkaXNhYmxlZFwiKTtyZXR1cm4gbmV3IHMoZSl9dmFyIG89cigxOSksaT1yKDIxKSxzPXIoMzcpLGE9cigzOCk7ZS5wb2xsaW5nPW4sZS53ZWJzb2NrZXQ9YX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMjApO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT10Lnhkb21haW4scj10LnhzY2hlbWUsbz10LmVuYWJsZXNYRFI7dHJ5e2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdCYmKCFlfHxuKSlyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe310cnl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0JiYhciYmbylyZXR1cm4gbmV3IFhEb21haW5SZXF1ZXN0fWNhdGNoKHQpe31pZighZSl0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIil9Y2F0Y2godCl7fX19LGZ1bmN0aW9uKHQsZSl7dHJ5e3QuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7dC5leHBvcnRzPSExfX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIG8odCl7aWYoYy5jYWxsKHRoaXMsdCksZS5sb2NhdGlvbil7dmFyIHI9XCJodHRwczpcIj09bG9jYXRpb24ucHJvdG9jb2wsbj1sb2NhdGlvbi5wb3J0O258fChuPXI/NDQzOjgwKSx0aGlzLnhkPXQuaG9zdG5hbWUhPWUubG9jYXRpb24uaG9zdG5hbWV8fG4hPXQucG9ydCx0aGlzLnhzPXQuc2VjdXJlIT1yfWVsc2UgdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnN9ZnVuY3Rpb24gaSh0KXt0aGlzLm1ldGhvZD10Lm1ldGhvZHx8XCJHRVRcIix0aGlzLnVyaT10LnVyaSx0aGlzLnhkPSEhdC54ZCx0aGlzLnhzPSEhdC54cyx0aGlzLmFzeW5jPSExIT09dC5hc3luYyx0aGlzLmRhdGE9dm9pZCAwIT10LmRhdGE/dC5kYXRhOm51bGwsdGhpcy5hZ2VudD10LmFnZW50LHRoaXMuaXNCaW5hcnk9dC5pc0JpbmFyeSx0aGlzLnN1cHBvcnRzQmluYXJ5PXQuc3VwcG9ydHNCaW5hcnksdGhpcy5lbmFibGVzWERSPXQuZW5hYmxlc1hEUix0aGlzLnBmeD10LnBmeCx0aGlzLmtleT10LmtleSx0aGlzLnBhc3NwaHJhc2U9dC5wYXNzcGhyYXNlLHRoaXMuY2VydD10LmNlcnQsdGhpcy5jYT10LmNhLHRoaXMuY2lwaGVycz10LmNpcGhlcnMsdGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ9dC5yZWplY3RVbmF1dGhvcml6ZWQsdGhpcy5leHRyYUhlYWRlcnM9dC5leHRyYUhlYWRlcnMsdGhpcy5jcmVhdGUoKX1mdW5jdGlvbiBzKCl7Zm9yKHZhciB0IGluIGkucmVxdWVzdHMpaS5yZXF1ZXN0cy5oYXNPd25Qcm9wZXJ0eSh0KSYmaS5yZXF1ZXN0c1t0XS5hYm9ydCgpfXZhciBhPXIoMTkpLGM9cigyMikscD1yKDMzKSx1PXIoMzUpLGg9cigzKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZy14aHJcIik7dC5leHBvcnRzPW8sdC5leHBvcnRzLlJlcXVlc3Q9aSx1KG8sYyksby5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnk9ITAsby5wcm90b3R5cGUucmVxdWVzdD1mdW5jdGlvbih0KXtyZXR1cm4gdD10fHx7fSx0LnVyaT10aGlzLnVyaSgpLHQueGQ9dGhpcy54ZCx0LnhzPXRoaXMueHMsdC5hZ2VudD10aGlzLmFnZW50fHwhMSx0LnN1cHBvcnRzQmluYXJ5PXRoaXMuc3VwcG9ydHNCaW5hcnksdC5lbmFibGVzWERSPXRoaXMuZW5hYmxlc1hEUix0LnBmeD10aGlzLnBmeCx0LmtleT10aGlzLmtleSx0LnBhc3NwaHJhc2U9dGhpcy5wYXNzcGhyYXNlLHQuY2VydD10aGlzLmNlcnQsdC5jYT10aGlzLmNhLHQuY2lwaGVycz10aGlzLmNpcGhlcnMsdC5yZWplY3RVbmF1dGhvcml6ZWQ9dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQsdC5leHRyYUhlYWRlcnM9dGhpcy5leHRyYUhlYWRlcnMsbmV3IGkodCl9LG8ucHJvdG90eXBlLmRvV3JpdGU9ZnVuY3Rpb24odCxlKXt2YXIgcj1cInN0cmluZ1wiIT10eXBlb2YgdCYmdm9pZCAwIT09dCxuPXRoaXMucmVxdWVzdCh7bWV0aG9kOlwiUE9TVFwiLGRhdGE6dCxpc0JpbmFyeTpyfSksbz10aGlzO24ub24oXCJzdWNjZXNzXCIsZSksbi5vbihcImVycm9yXCIsZnVuY3Rpb24odCl7by5vbkVycm9yKFwieGhyIHBvc3QgZXJyb3JcIix0KX0pLHRoaXMuc2VuZFhocj1ufSxvLnByb3RvdHlwZS5kb1BvbGw9ZnVuY3Rpb24oKXtoKFwieGhyIHBvbGxcIik7dmFyIHQ9dGhpcy5yZXF1ZXN0KCksZT10aGlzO3Qub24oXCJkYXRhXCIsZnVuY3Rpb24odCl7ZS5vbkRhdGEodCl9KSx0Lm9uKFwiZXJyb3JcIixmdW5jdGlvbih0KXtlLm9uRXJyb3IoXCJ4aHIgcG9sbCBlcnJvclwiLHQpfSksdGhpcy5wb2xsWGhyPXR9LHAoaS5wcm90b3R5cGUpLGkucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PXthZ2VudDp0aGlzLmFnZW50LHhkb21haW46dGhpcy54ZCx4c2NoZW1lOnRoaXMueHMsZW5hYmxlc1hEUjp0aGlzLmVuYWJsZXNYRFJ9O3QucGZ4PXRoaXMucGZ4LHQua2V5PXRoaXMua2V5LHQucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2UsdC5jZXJ0PXRoaXMuY2VydCx0LmNhPXRoaXMuY2EsdC5jaXBoZXJzPXRoaXMuY2lwaGVycyx0LnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgcj10aGlzLnhocj1uZXcgYSh0KSxuPXRoaXM7dHJ5e2goXCJ4aHIgb3BlbiAlczogJXNcIix0aGlzLm1ldGhvZCx0aGlzLnVyaSksci5vcGVuKHRoaXMubWV0aG9kLHRoaXMudXJpLHRoaXMuYXN5bmMpO3RyeXtpZih0aGlzLmV4dHJhSGVhZGVycyl7ci5zZXREaXNhYmxlSGVhZGVyQ2hlY2soITApO2Zvcih2YXIgbyBpbiB0aGlzLmV4dHJhSGVhZGVycyl0aGlzLmV4dHJhSGVhZGVycy5oYXNPd25Qcm9wZXJ0eShvKSYmci5zZXRSZXF1ZXN0SGVhZGVyKG8sdGhpcy5leHRyYUhlYWRlcnNbb10pfX1jYXRjaCh0KXt9aWYodGhpcy5zdXBwb3J0c0JpbmFyeSYmKHIucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIiksXCJQT1NUXCI9PXRoaXMubWV0aG9kKXRyeXt0aGlzLmlzQmluYXJ5P3Iuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpOnIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04XCIpfWNhdGNoKHQpe31cIndpdGhDcmVkZW50aWFsc1wiaW4gciYmKHIud2l0aENyZWRlbnRpYWxzPSEwKSx0aGlzLmhhc1hEUigpPyhyLm9ubG9hZD1mdW5jdGlvbigpe24ub25Mb2FkKCl9LHIub25lcnJvcj1mdW5jdGlvbigpe24ub25FcnJvcihyLnJlc3BvbnNlVGV4dCl9KTpyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PXIucmVhZHlTdGF0ZSYmKDIwMD09ci5zdGF0dXN8fDEyMjM9PXIuc3RhdHVzP24ub25Mb2FkKCk6c2V0VGltZW91dChmdW5jdGlvbigpe24ub25FcnJvcihyLnN0YXR1cyl9LDApKX0saChcInhociBkYXRhICVzXCIsdGhpcy5kYXRhKSxyLnNlbmQodGhpcy5kYXRhKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5vbkVycm9yKHQpfSwwKX1lLmRvY3VtZW50JiYodGhpcy5pbmRleD1pLnJlcXVlc3RzQ291bnQrKyxpLnJlcXVlc3RzW3RoaXMuaW5kZXhdPXRoaXMpfSxpLnByb3RvdHlwZS5vblN1Y2Nlc3M9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJzdWNjZXNzXCIpLHRoaXMuY2xlYW51cCgpfSxpLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiZGF0YVwiLHQpLHRoaXMub25TdWNjZXNzKCl9LGkucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiZXJyb3JcIix0KSx0aGlzLmNsZWFudXAoITApfSxpLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLnhociYmbnVsbCE9PXRoaXMueGhyKXtpZih0aGlzLmhhc1hEUigpP3RoaXMueGhyLm9ubG9hZD10aGlzLnhoci5vbmVycm9yPW46dGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlPW4sdCl0cnl7dGhpcy54aHIuYWJvcnQoKX1jYXRjaCh0KXt9ZS5kb2N1bWVudCYmZGVsZXRlIGkucmVxdWVzdHNbdGhpcy5pbmRleF0sdGhpcy54aHI9bnVsbH19LGkucHJvdG90eXBlLm9uTG9hZD1mdW5jdGlvbigpe3ZhciB0O3RyeXt2YXIgZTt0cnl7ZT10aGlzLnhoci5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKS5zcGxpdChcIjtcIilbMF19Y2F0Y2godCl7fWlmKFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI9PT1lKXQ9dGhpcy54aHIucmVzcG9uc2U7ZWxzZSBpZih0aGlzLnN1cHBvcnRzQmluYXJ5KXRyeXt0PVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSkpfWNhdGNoKGUpe2Zvcih2YXIgcj1uZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSksbj1bXSxvPTAsaT1yLmxlbmd0aDtvPGk7bysrKW4ucHVzaChyW29dKTt0PVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuKX1lbHNlIHQ9dGhpcy54aHIucmVzcG9uc2VUZXh0fWNhdGNoKHQpe3RoaXMub25FcnJvcih0KX1udWxsIT10JiZ0aGlzLm9uRGF0YSh0KX0saS5wcm90b3R5cGUuaGFzWERSPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUuWERvbWFpblJlcXVlc3QmJiF0aGlzLnhzJiZ0aGlzLmVuYWJsZXNYRFJ9LGkucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhbnVwKCl9LGUuZG9jdW1lbnQmJihpLnJlcXVlc3RzQ291bnQ9MCxpLnJlcXVlc3RzPXt9LGUuYXR0YWNoRXZlbnQ/ZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIscyk6ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixzLCExKSl9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQpe3ZhciBlPXQmJnQuZm9yY2VCYXNlNjQ7dSYmIWV8fCh0aGlzLnN1cHBvcnRzQmluYXJ5PSExKSxvLmNhbGwodGhpcyx0KX12YXIgbz1yKDIzKSxpPXIoMzQpLHM9cigyNCksYT1yKDM1KSxjPXIoMzYpLHA9cigzKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZ1wiKTt0LmV4cG9ydHM9bjt2YXIgdT1mdW5jdGlvbigpe3ZhciB0PXIoMTkpLGU9bmV3IHQoe3hkb21haW46ITF9KTtyZXR1cm4gbnVsbCE9ZS5yZXNwb25zZVR5cGV9KCk7YShuLG8pLG4ucHJvdG90eXBlLm5hbWU9XCJwb2xsaW5nXCIsbi5wcm90b3R5cGUuZG9PcGVuPWZ1bmN0aW9uKCl7dGhpcy5wb2xsKCl9LG4ucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKFwicGF1c2VkXCIpLHIucmVhZHlTdGF0ZT1cInBhdXNlZFwiLHQoKX12YXIgcj10aGlzO2lmKHRoaXMucmVhZHlTdGF0ZT1cInBhdXNpbmdcIix0aGlzLnBvbGxpbmd8fCF0aGlzLndyaXRhYmxlKXt2YXIgbj0wO3RoaXMucG9sbGluZyYmKHAoXCJ3ZSBhcmUgY3VycmVudGx5IHBvbGxpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpLG4rKyx0aGlzLm9uY2UoXCJwb2xsQ29tcGxldGVcIixmdW5jdGlvbigpe3AoXCJwcmUtcGF1c2UgcG9sbGluZyBjb21wbGV0ZVwiKSwtLW58fGUoKX0pKSx0aGlzLndyaXRhYmxlfHwocChcIndlIGFyZSBjdXJyZW50bHkgd3JpdGluZyAtIHdhaXRpbmcgdG8gcGF1c2VcIiksbisrLHRoaXMub25jZShcImRyYWluXCIsZnVuY3Rpb24oKXtwKFwicHJlLXBhdXNlIHdyaXRpbmcgY29tcGxldGVcIiksLS1ufHxlKCl9KSl9ZWxzZSBlKCl9LG4ucHJvdG90eXBlLnBvbGw9ZnVuY3Rpb24oKXtwKFwicG9sbGluZ1wiKSx0aGlzLnBvbGxpbmc9ITAsdGhpcy5kb1BvbGwoKSx0aGlzLmVtaXQoXCJwb2xsXCIpfSxuLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztwKFwicG9sbGluZyBnb3QgZGF0YSAlc1wiLHQpO3ZhciByPWZ1bmN0aW9uKHQscixuKXtyZXR1cm5cIm9wZW5pbmdcIj09ZS5yZWFkeVN0YXRlJiZlLm9uT3BlbigpLFwiY2xvc2VcIj09dC50eXBlPyhlLm9uQ2xvc2UoKSwhMSk6dm9pZCBlLm9uUGFja2V0KHQpfTtzLmRlY29kZVBheWxvYWQodCx0aGlzLnNvY2tldC5iaW5hcnlUeXBlLHIpLFwiY2xvc2VkXCIhPXRoaXMucmVhZHlTdGF0ZSYmKHRoaXMucG9sbGluZz0hMSx0aGlzLmVtaXQoXCJwb2xsQ29tcGxldGVcIiksXCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZT90aGlzLnBvbGwoKTpwKCdpZ25vcmluZyBwb2xsIC0gdHJhbnNwb3J0IHN0YXRlIFwiJXNcIicsdGhpcy5yZWFkeVN0YXRlKSl9LG4ucHJvdG90eXBlLmRvQ2xvc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cChcIndyaXRpbmcgY2xvc2UgcGFja2V0XCIpLGUud3JpdGUoW3t0eXBlOlwiY2xvc2VcIn1dKX12YXIgZT10aGlzO1wib3BlblwiPT10aGlzLnJlYWR5U3RhdGU/KHAoXCJ0cmFuc3BvcnQgb3BlbiAtIGNsb3NpbmdcIiksdCgpKToocChcInRyYW5zcG9ydCBub3Qgb3BlbiAtIGRlZmVycmluZyBjbG9zZVwiKSx0aGlzLm9uY2UoXCJvcGVuXCIsdCkpfSxuLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMud3JpdGFibGU9ITE7dmFyIHI9ZnVuY3Rpb24oKXtlLndyaXRhYmxlPSEwLGUuZW1pdChcImRyYWluXCIpfSxlPXRoaXM7cy5lbmNvZGVQYXlsb2FkKHQsdGhpcy5zdXBwb3J0c0JpbmFyeSxmdW5jdGlvbih0KXtlLmRvV3JpdGUodCxyKX0pfSxuLnByb3RvdHlwZS51cmk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnF1ZXJ5fHx7fSxlPXRoaXMuc2VjdXJlP1wiaHR0cHNcIjpcImh0dHBcIixyPVwiXCI7ITEhPT10aGlzLnRpbWVzdGFtcFJlcXVlc3RzJiYodFt0aGlzLnRpbWVzdGFtcFBhcmFtXT1jKCkpLHRoaXMuc3VwcG9ydHNCaW5hcnl8fHQuc2lkfHwodC5iNjQ9MSksdD1pLmVuY29kZSh0KSx0aGlzLnBvcnQmJihcImh0dHBzXCI9PWUmJjQ0MyE9dGhpcy5wb3J0fHxcImh0dHBcIj09ZSYmODAhPXRoaXMucG9ydCkmJihyPVwiOlwiK3RoaXMucG9ydCksdC5sZW5ndGgmJih0PVwiP1wiK3QpO3ZhciBuPXRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikhPT0tMTtyZXR1cm4gZStcIjovL1wiKyhuP1wiW1wiK3RoaXMuaG9zdG5hbWUrXCJdXCI6dGhpcy5ob3N0bmFtZSkrcit0aGlzLnBhdGgrdH19LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQpe3RoaXMucGF0aD10LnBhdGgsdGhpcy5ob3N0bmFtZT10Lmhvc3RuYW1lLHRoaXMucG9ydD10LnBvcnQsdGhpcy5zZWN1cmU9dC5zZWN1cmUsdGhpcy5xdWVyeT10LnF1ZXJ5LHRoaXMudGltZXN0YW1wUGFyYW09dC50aW1lc3RhbXBQYXJhbSx0aGlzLnRpbWVzdGFtcFJlcXVlc3RzPXQudGltZXN0YW1wUmVxdWVzdHMsdGhpcy5yZWFkeVN0YXRlPVwiXCIsdGhpcy5hZ2VudD10LmFnZW50fHwhMSx0aGlzLnNvY2tldD10LnNvY2tldCx0aGlzLmVuYWJsZXNYRFI9dC5lbmFibGVzWERSLHRoaXMucGZ4PXQucGZ4LHRoaXMua2V5PXQua2V5LHRoaXMucGFzc3BocmFzZT10LnBhc3NwaHJhc2UsdGhpcy5jZXJ0PXQuY2VydCx0aGlzLmNhPXQuY2EsdGhpcy5jaXBoZXJzPXQuY2lwaGVycyx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD10LnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycz10LmV4dHJhSGVhZGVyc312YXIgbz1yKDI0KSxpPXIoMzMpO3QuZXhwb3J0cz1uLGkobi5wcm90b3R5cGUpLG4ucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24odCxlKXt2YXIgcj1uZXcgRXJyb3IodCk7cmV0dXJuIHIudHlwZT1cIlRyYW5zcG9ydEVycm9yXCIsci5kZXNjcmlwdGlvbj1lLHRoaXMuZW1pdChcImVycm9yXCIsciksdGhpc30sbi5wcm90b3R5cGUub3Blbj1mdW5jdGlvbigpe3JldHVyblwiY2xvc2VkXCIhPXRoaXMucmVhZHlTdGF0ZSYmXCJcIiE9dGhpcy5yZWFkeVN0YXRlfHwodGhpcy5yZWFkeVN0YXRlPVwib3BlbmluZ1wiLHRoaXMuZG9PcGVuKCkpLHRoaXN9LG4ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuXCJvcGVuaW5nXCIhPXRoaXMucmVhZHlTdGF0ZSYmXCJvcGVuXCIhPXRoaXMucmVhZHlTdGF0ZXx8KHRoaXMuZG9DbG9zZSgpLHRoaXMub25DbG9zZSgpKSx0aGlzfSxuLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQpe2lmKFwib3BlblwiIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IG5vdCBvcGVuXCIpO3RoaXMud3JpdGUodCl9LG4ucHJvdG90eXBlLm9uT3Blbj1mdW5jdGlvbigpe3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIix0aGlzLndyaXRhYmxlPSEwLHRoaXMuZW1pdChcIm9wZW5cIil9LG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt2YXIgZT1vLmRlY29kZVBhY2tldCh0LHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO3RoaXMub25QYWNrZXQoZSl9LG4ucHJvdG90eXBlLm9uUGFja2V0PWZ1bmN0aW9uKHQpe3RoaXMuZW1pdChcInBhY2tldFwiLHQpfSxuLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbWl0KFwiY2xvc2VcIil9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4odCxyKXt2YXIgbj1cImJcIitlLnBhY2tldHNbdC50eXBlXSt0LmRhdGEuZGF0YTtyZXR1cm4gcihuKX1mdW5jdGlvbiBvKHQscixuKXtpZighcilyZXR1cm4gZS5lbmNvZGVCYXNlNjRQYWNrZXQodCxuKTt2YXIgbz10LmRhdGEsaT1uZXcgVWludDhBcnJheShvKSxzPW5ldyBVaW50OEFycmF5KDErby5ieXRlTGVuZ3RoKTtzWzBdPW1bdC50eXBlXTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylzW2ErMV09aVthXTtyZXR1cm4gbihzLmJ1ZmZlcil9ZnVuY3Rpb24gaSh0LHIsbil7aWYoIXIpcmV0dXJuIGUuZW5jb2RlQmFzZTY0UGFja2V0KHQsbik7dmFyIG89bmV3IEZpbGVSZWFkZXI7cmV0dXJuIG8ub25sb2FkPWZ1bmN0aW9uKCl7dC5kYXRhPW8ucmVzdWx0LGUuZW5jb2RlUGFja2V0KHQsciwhMCxuKX0sby5yZWFkQXNBcnJheUJ1ZmZlcih0LmRhdGEpfWZ1bmN0aW9uIHModCxyLG4pe2lmKCFyKXJldHVybiBlLmVuY29kZUJhc2U2NFBhY2tldCh0LG4pO2lmKGcpcmV0dXJuIGkodCxyLG4pO3ZhciBvPW5ldyBVaW50OEFycmF5KDEpO29bMF09bVt0LnR5cGVdO3ZhciBzPW5ldyBrKFtvLmJ1ZmZlcix0LmRhdGFdKTtyZXR1cm4gbihzKX1mdW5jdGlvbiBhKHQsZSxyKXtmb3IodmFyIG49bmV3IEFycmF5KHQubGVuZ3RoKSxvPWYodC5sZW5ndGgsciksaT1mdW5jdGlvbih0LHIsbyl7ZShyLGZ1bmN0aW9uKGUscil7blt0XT1yLG8oZSxuKX0pfSxzPTA7czx0Lmxlbmd0aDtzKyspaShzLHRbc10sbyl9dmFyIGM9cigyNSkscD1yKDI2KSx1PXIoMjgpLGg9cigyOSksZj1yKDMwKSxsPXIoMzEpLGQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKSx5PS9QaGFudG9tSlMvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGc9ZHx8eTtlLnByb3RvY29sPTM7dmFyIG09ZS5wYWNrZXRzPXtvcGVuOjAsY2xvc2U6MSxwaW5nOjIscG9uZzozLG1lc3NhZ2U6NCx1cGdyYWRlOjUsbm9vcDo2fSx2PWMobSksYj17dHlwZTpcImVycm9yXCIsZGF0YTpcInBhcnNlciBlcnJvclwifSxrPXIoMzIpO2UuZW5jb2RlUGFja2V0PWZ1bmN0aW9uKGUscixpLGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJihhPXIscj0hMSksXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGE9aSxpPW51bGwpO3ZhciBjPXZvaWQgMD09PWUuZGF0YT92b2lkIDA6ZS5kYXRhLmJ1ZmZlcnx8ZS5kYXRhO2lmKHQuQXJyYXlCdWZmZXImJmMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4gbyhlLHIsYSk7aWYoayYmYyBpbnN0YW5jZW9mIHQuQmxvYilyZXR1cm4gcyhlLHIsYSk7aWYoYyYmYy5iYXNlNjQpcmV0dXJuIG4oZSxhKTt2YXIgcD1tW2UudHlwZV07cmV0dXJuIHZvaWQgMCE9PWUuZGF0YSYmKHArPWk/bC5lbmNvZGUoU3RyaW5nKGUuZGF0YSkpOlN0cmluZyhlLmRhdGEpKSxhKFwiXCIrcCl9LGUuZW5jb2RlQmFzZTY0UGFja2V0PWZ1bmN0aW9uKHIsbil7dmFyIG89XCJiXCIrZS5wYWNrZXRzW3IudHlwZV07aWYoayYmci5kYXRhIGluc3RhbmNlb2YgdC5CbG9iKXt2YXIgaT1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gaS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD1pLnJlc3VsdC5zcGxpdChcIixcIilbMV07bihvK3QpfSxpLnJlYWRBc0RhdGFVUkwoci5kYXRhKX12YXIgczt0cnl7cz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoci5kYXRhKSl9Y2F0Y2godCl7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KHIuZGF0YSksYz1uZXcgQXJyYXkoYS5sZW5ndGgpLHA9MDtwPGEubGVuZ3RoO3ArKyljW3BdPWFbcF07cz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYyl9cmV0dXJuIG8rPXQuYnRvYShzKSxuKG8pfSxlLmRlY29kZVBhY2tldD1mdW5jdGlvbih0LHIsbil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fHZvaWQgMD09PXQpe2lmKFwiYlwiPT10LmNoYXJBdCgwKSlyZXR1cm4gZS5kZWNvZGVCYXNlNjRQYWNrZXQodC5zdWJzdHIoMSkscik7aWYobil0cnl7dD1sLmRlY29kZSh0KX1jYXRjaCh0KXtyZXR1cm4gYn12YXIgbz10LmNoYXJBdCgwKTtyZXR1cm4gTnVtYmVyKG8pPT1vJiZ2W29dP3QubGVuZ3RoPjE/e3R5cGU6dltvXSxkYXRhOnQuc3Vic3RyaW5nKDEpfTp7dHlwZTp2W29dfTpifXZhciBpPW5ldyBVaW50OEFycmF5KHQpLG89aVswXSxzPXUodCwxKTtyZXR1cm4gayYmXCJibG9iXCI9PT1yJiYocz1uZXcgayhbc10pKSx7dHlwZTp2W29dLGRhdGE6c319LGUuZGVjb2RlQmFzZTY0UGFja2V0PWZ1bmN0aW9uKGUscil7dmFyIG49dltlLmNoYXJBdCgwKV07aWYoIXQuQXJyYXlCdWZmZXIpcmV0dXJue3R5cGU6bixkYXRhOntiYXNlNjQ6ITAsZGF0YTplLnN1YnN0cigxKX19O3ZhciBvPWguZGVjb2RlKGUuc3Vic3RyKDEpKTtyZXR1cm5cImJsb2JcIj09PXImJmsmJihvPW5ldyBrKFtvXSkpLHt0eXBlOm4sZGF0YTpvfX0sZS5lbmNvZGVQYXlsb2FkPWZ1bmN0aW9uKHQscixuKXtmdW5jdGlvbiBvKHQpe3JldHVybiB0Lmxlbmd0aCtcIjpcIit0fWZ1bmN0aW9uIGkodCxuKXtlLmVuY29kZVBhY2tldCh0LCEhcyYmciwhMCxmdW5jdGlvbih0KXtuKG51bGwsbyh0KSl9KX1cImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYobj1yLHI9bnVsbCk7dmFyIHM9cCh0KTtyZXR1cm4gciYmcz9rJiYhZz9lLmVuY29kZVBheWxvYWRBc0Jsb2IodCxuKTplLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyKHQsbik6dC5sZW5ndGg/dm9pZCBhKHQsaSxmdW5jdGlvbih0LGUpe3JldHVybiBuKGUuam9pbihcIlwiKSl9KTpuKFwiMDpcIil9LGUuZGVjb2RlUGF5bG9hZD1mdW5jdGlvbih0LHIsbil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIGUuZGVjb2RlUGF5bG9hZEFzQmluYXJ5KHQscixuKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYobj1yLHI9bnVsbCk7dmFyIG87aWYoXCJcIj09dClyZXR1cm4gbihiLDAsMSk7Zm9yKHZhciBpLHMsYT1cIlwiLGM9MCxwPXQubGVuZ3RoO2M8cDtjKyspe3ZhciB1PXQuY2hhckF0KGMpO2lmKFwiOlwiIT11KWErPXU7ZWxzZXtpZihcIlwiPT1hfHxhIT0oaT1OdW1iZXIoYSkpKXJldHVybiBuKGIsMCwxKTtpZihzPXQuc3Vic3RyKGMrMSxpKSxhIT1zLmxlbmd0aClyZXR1cm4gbihiLDAsMSk7aWYocy5sZW5ndGgpe2lmKG89ZS5kZWNvZGVQYWNrZXQocyxyLCEwKSxiLnR5cGU9PW8udHlwZSYmYi5kYXRhPT1vLmRhdGEpcmV0dXJuIG4oYiwwLDEpO3ZhciBoPW4obyxjK2kscCk7aWYoITE9PT1oKXJldHVybn1jKz1pLGE9XCJcIn19cmV0dXJuXCJcIiE9YT9uKGIsMCwxKTp2b2lkIDB9LGUuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXI9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKHQscil7ZS5lbmNvZGVQYWNrZXQodCwhMCwhMCxmdW5jdGlvbih0KXtyZXR1cm4gcihudWxsLHQpfSl9cmV0dXJuIHQubGVuZ3RoP3ZvaWQgYSh0LG4sZnVuY3Rpb24odCxlKXt2YXIgbj1lLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciByO3JldHVybiByPVwic3RyaW5nXCI9PXR5cGVvZiBlP2UubGVuZ3RoOmUuYnl0ZUxlbmd0aCx0K3IudG9TdHJpbmcoKS5sZW5ndGgrcisyfSwwKSxvPW5ldyBVaW50OEFycmF5KG4pLGk9MDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPVwic3RyaW5nXCI9PXR5cGVvZiB0LHI9dDtpZihlKXtmb3IodmFyIG49bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLHM9MDtzPHQubGVuZ3RoO3MrKyluW3NdPXQuY2hhckNvZGVBdChzKTtyPW4uYnVmZmVyfWU/b1tpKytdPTA6b1tpKytdPTE7Zm9yKHZhciBhPXIuYnl0ZUxlbmd0aC50b1N0cmluZygpLHM9MDtzPGEubGVuZ3RoO3MrKylvW2krK109cGFyc2VJbnQoYVtzXSk7b1tpKytdPTI1NTtmb3IodmFyIG49bmV3IFVpbnQ4QXJyYXkocikscz0wO3M8bi5sZW5ndGg7cysrKW9baSsrXT1uW3NdfSkscihvLmJ1ZmZlcil9KTpyKG5ldyBBcnJheUJ1ZmZlcigwKSl9LGUuZW5jb2RlUGF5bG9hZEFzQmxvYj1mdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4odCxyKXtlLmVuY29kZVBhY2tldCh0LCEwLCEwLGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50OEFycmF5KDEpO2lmKGVbMF09MSxcInN0cmluZ1wiPT10eXBlb2YgdCl7Zm9yKHZhciBuPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKSxvPTA7bzx0Lmxlbmd0aDtvKyspbltvXT10LmNoYXJDb2RlQXQobyk7dD1uLmJ1ZmZlcixlWzBdPTB9Zm9yKHZhciBpPXQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj90LmJ5dGVMZW5ndGg6dC5zaXplLHM9aS50b1N0cmluZygpLGE9bmV3IFVpbnQ4QXJyYXkocy5sZW5ndGgrMSksbz0wO288cy5sZW5ndGg7bysrKWFbb109cGFyc2VJbnQoc1tvXSk7aWYoYVtzLmxlbmd0aF09MjU1LGspe3ZhciBjPW5ldyBrKFtlLmJ1ZmZlcixhLmJ1ZmZlcix0XSk7cihudWxsLGMpfX0pfWEodCxuLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIobmV3IGsoZSkpfSl9LGUuZGVjb2RlUGF5bG9hZEFzQmluYXJ5PWZ1bmN0aW9uKHQscixuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYobj1yLHI9bnVsbCk7Zm9yKHZhciBvPXQsaT1bXSxzPSExO28uYnl0ZUxlbmd0aD4wOyl7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KG8pLGM9MD09PWFbMF0scD1cIlwiLGg9MTsyNTUhPWFbaF07aCsrKXtpZihwLmxlbmd0aD4zMTApe3M9ITA7YnJlYWt9cCs9YVtoXX1pZihzKXJldHVybiBuKGIsMCwxKTtvPXUobywyK3AubGVuZ3RoKSxwPXBhcnNlSW50KHApO3ZhciBmPXUobywwLHApO2lmKGMpdHJ5e2Y9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KGYpKX1jYXRjaCh0KXt2YXIgbD1uZXcgVWludDhBcnJheShmKTtmPVwiXCI7Zm9yKHZhciBoPTA7aDxsLmxlbmd0aDtoKyspZis9U3RyaW5nLmZyb21DaGFyQ29kZShsW2hdKX1pLnB1c2goZiksbz11KG8scCl9dmFyIGQ9aS5sZW5ndGg7aS5mb3JFYWNoKGZ1bmN0aW9uKHQsbyl7bihlLmRlY29kZVBhY2tldCh0LHIsITApLG8sZCl9KX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXt2YXIgZT1bXSxyPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7Zm9yKHZhciBuIGluIHQpci5jYWxsKHQsbikmJmUucHVzaChuKTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiByKHQpe2lmKCF0KXJldHVybiExO2lmKGUuQnVmZmVyJiZlLkJ1ZmZlci5pc0J1ZmZlcih0KXx8ZS5BcnJheUJ1ZmZlciYmdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxlLkJsb2ImJnQgaW5zdGFuY2VvZiBCbG9ifHxlLkZpbGUmJnQgaW5zdGFuY2VvZiBGaWxlKXJldHVybiEwO2lmKG8odCkpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKHIodFtuXSkpcmV0dXJuITB9ZWxzZSBpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7dC50b0pTT04mJih0PXQudG9KU09OKCkpO2Zvcih2YXIgaSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiZyKHRbaV0pKXJldHVybiEwfXJldHVybiExfXJldHVybiByKHQpfXZhciBvPXIoMjcpO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj10LmJ5dGVMZW5ndGg7aWYoZT1lfHwwLHI9cnx8bix0LnNsaWNlKXJldHVybiB0LnNsaWNlKGUscik7aWYoZTwwJiYoZSs9bikscjwwJiYocis9bikscj5uJiYocj1uKSxlPj1ufHxlPj1yfHwwPT09bilyZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO2Zvcih2YXIgbz1uZXcgVWludDhBcnJheSh0KSxpPW5ldyBVaW50OEFycmF5KHItZSkscz1lLGE9MDtzPHI7cysrLGErKylpW2FdPW9bc107cmV0dXJuIGkuYnVmZmVyfX0sZnVuY3Rpb24odCxlKXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZS5lbmNvZGU9ZnVuY3Rpb24oZSl7dmFyIHIsbj1uZXcgVWludDhBcnJheShlKSxvPW4ubGVuZ3RoLGk9XCJcIjtmb3Iocj0wO3I8bztyKz0zKWkrPXRbbltyXT4+Ml0saSs9dFsoMyZuW3JdKTw8NHxuW3IrMV0+PjRdLGkrPXRbKDE1Jm5bcisxXSk8PDJ8bltyKzJdPj42XSxpKz10WzYzJm5bcisyXV07cmV0dXJuIG8lMz09PTI/aT1pLnN1YnN0cmluZygwLGkubGVuZ3RoLTEpK1wiPVwiOm8lMz09PTEmJihpPWkuc3Vic3RyaW5nKDAsaS5sZW5ndGgtMikrXCI9PVwiKSxpfSxlLmRlY29kZT1mdW5jdGlvbihlKXt2YXIgcixuLG8saSxzLGE9Ljc1KmUubGVuZ3RoLGM9ZS5sZW5ndGgscD0wO1wiPVwiPT09ZVtlLmxlbmd0aC0xXSYmKGEtLSxcIj1cIj09PWVbZS5sZW5ndGgtMl0mJmEtLSk7dmFyIHU9bmV3IEFycmF5QnVmZmVyKGEpLGg9bmV3IFVpbnQ4QXJyYXkodSk7Zm9yKHI9MDtyPGM7cis9NCluPXQuaW5kZXhPZihlW3JdKSxvPXQuaW5kZXhPZihlW3IrMV0pLGk9dC5pbmRleE9mKGVbcisyXSkscz10LmluZGV4T2YoZVtyKzNdKSxoW3ArK109bjw8MnxvPj40LGhbcCsrXT0oMTUmbyk8PDR8aT4+MixoW3ArK109KDMmaSk8PDZ8NjMmcztyZXR1cm4gdX19KFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQsZSxyKXtmdW5jdGlvbiBvKHQsbil7aWYoby5jb3VudDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJhZnRlciBjYWxsZWQgdG9vIG1hbnkgdGltZXNcIik7LS1vLmNvdW50LHQ/KGk9ITAsZSh0KSxlPXIpOjAhPT1vLmNvdW50fHxpfHxlKG51bGwsbil9dmFyIGk9ITE7cmV0dXJuIHI9cnx8bixvLmNvdW50PXQsMD09PXQ/ZSgpOm99ZnVuY3Rpb24gbigpe310LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlLHIpe3ZhciBuOyhmdW5jdGlvbih0LG8peyFmdW5jdGlvbihpKXtmdW5jdGlvbiBzKHQpe2Zvcih2YXIgZSxyLG49W10sbz0wLGk9dC5sZW5ndGg7bzxpOyllPXQuY2hhckNvZGVBdChvKyspLGU+PTU1Mjk2JiZlPD01NjMxOSYmbzxpPyhyPXQuY2hhckNvZGVBdChvKyspLDU2MzIwPT0oNjQ1MTImcik/bi5wdXNoKCgoMTAyMyZlKTw8MTApKygxMDIzJnIpKzY1NTM2KToobi5wdXNoKGUpLG8tLSkpOm4ucHVzaChlKTtyZXR1cm4gbn1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgZSxyPXQubGVuZ3RoLG49LTEsbz1cIlwiOysrbjxyOyllPXRbbl0sZT42NTUzNSYmKGUtPTY1NTM2LG8rPWsoZT4+PjEwJjEwMjN8NTUyOTYpLGU9NTYzMjB8MTAyMyZlKSxvKz1rKGUpO3JldHVybiBvfWZ1bmN0aW9uIGModCl7aWYodD49NTUyOTYmJnQ8PTU3MzQzKXRocm93IEVycm9yKFwiTG9uZSBzdXJyb2dhdGUgVStcIit0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpK1wiIGlzIG5vdCBhIHNjYWxhciB2YWx1ZVwiKX1mdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGsodD4+ZSY2M3wxMjgpfWZ1bmN0aW9uIHUodCl7aWYoMD09KDQyOTQ5NjcxNjgmdCkpcmV0dXJuIGsodCk7dmFyIGU9XCJcIjtyZXR1cm4gMD09KDQyOTQ5NjUyNDgmdCk/ZT1rKHQ+PjYmMzF8MTkyKTowPT0oNDI5NDkwMTc2MCZ0KT8oYyh0KSxlPWsodD4+MTImMTV8MjI0KSxlKz1wKHQsNikpOjA9PSg0MjkyODcwMTQ0JnQpJiYoZT1rKHQ+PjE4Jjd8MjQwKSxlKz1wKHQsMTIpLGUrPXAodCw2KSksZSs9ayg2MyZ0fDEyOCl9ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGUscj1zKHQpLG49ci5sZW5ndGgsbz0tMSxpPVwiXCI7KytvPG47KWU9cltvXSxpKz11KGUpO3JldHVybiBpfWZ1bmN0aW9uIGYoKXtpZihiPj12KXRocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpO3ZhciB0PTI1NSZtW2JdO2lmKGIrKywxMjg9PSgxOTImdCkpcmV0dXJuIDYzJnQ7dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWZ1bmN0aW9uIGwoKXt2YXIgdCxlLHIsbixvO2lmKGI+dil0aHJvdyBFcnJvcihcIkludmFsaWQgYnl0ZSBpbmRleFwiKTtpZihiPT12KXJldHVybiExO2lmKHQ9MjU1Jm1bYl0sYisrLDA9PSgxMjgmdCkpcmV0dXJuIHQ7aWYoMTkyPT0oMjI0JnQpKXt2YXIgZT1mKCk7aWYobz0oMzEmdCk8PDZ8ZSxvPj0xMjgpcmV0dXJuIG87dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWlmKDIyND09KDI0MCZ0KSl7aWYoZT1mKCkscj1mKCksbz0oMTUmdCk8PDEyfGU8PDZ8cixvPj0yMDQ4KXJldHVybiBjKG8pLG87dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWlmKDI0MD09KDI0OCZ0KSYmKGU9ZigpLHI9ZigpLG49ZigpLG89KDE1JnQpPDwxOHxlPDwxMnxyPDw2fG4sbz49NjU1MzYmJm88PTExMTQxMTEpKXJldHVybiBvO3Rocm93IEVycm9yKFwiSW52YWxpZCBVVEYtOCBkZXRlY3RlZFwiKX1mdW5jdGlvbiBkKHQpe209cyh0KSx2PW0ubGVuZ3RoLGI9MDtmb3IodmFyIGUscj1bXTsoZT1sKCkpIT09ITE7KXIucHVzaChlKTtyZXR1cm4gYShyKX12YXIgeT1cIm9iamVjdFwiPT10eXBlb2YgZSYmZSxnPShcIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmdC5leHBvcnRzPT15JiZ0LFwib2JqZWN0XCI9PXR5cGVvZiBvJiZvKTtnLmdsb2JhbCE9PWcmJmcud2luZG93IT09Z3x8KGk9Zyk7dmFyIG0sdixiLGs9U3RyaW5nLmZyb21DaGFyQ29kZSx3PXt2ZXJzaW9uOlwiMi4wLjBcIixlbmNvZGU6aCxkZWNvZGU6ZH07bj1mdW5jdGlvbigpe3JldHVybiB3fS5jYWxsKGUscixlLHQpLCEodm9pZCAwIT09biYmKHQuZXhwb3J0cz1uKSl9KHRoaXMpfSkuY2FsbChlLHIoOCkodCksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIodCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciByPXRbZV07aWYoci5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7dmFyIG49ci5idWZmZXI7aWYoci5ieXRlTGVuZ3RoIT09bi5ieXRlTGVuZ3RoKXt2YXIgbz1uZXcgVWludDhBcnJheShyLmJ5dGVMZW5ndGgpO28uc2V0KG5ldyBVaW50OEFycmF5KG4sci5ieXRlT2Zmc2V0LHIuYnl0ZUxlbmd0aCkpLG49by5idWZmZXJ9dFtlXT1ufX19ZnVuY3Rpb24gbih0LGUpe2U9ZXx8e307dmFyIG49bmV3IGk7cih0KTtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKyluLmFwcGVuZCh0W29dKTtyZXR1cm4gZS50eXBlP24uZ2V0QmxvYihlLnR5cGUpOm4uZ2V0QmxvYigpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gcih0KSxuZXcgQmxvYih0LGV8fHt9KX12YXIgaT1lLkJsb2JCdWlsZGVyfHxlLldlYktpdEJsb2JCdWlsZGVyfHxlLk1TQmxvYkJ1aWxkZXJ8fGUuTW96QmxvYkJ1aWxkZXIscz1mdW5jdGlvbigpe3RyeXt2YXIgdD1uZXcgQmxvYihbXCJoaVwiXSk7cmV0dXJuIDI9PT10LnNpemV9Y2F0Y2godCl7cmV0dXJuITF9fSgpLGE9cyYmZnVuY3Rpb24oKXt0cnl7dmFyIHQ9bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLDJdKV0pO3JldHVybiAyPT09dC5zaXplfWNhdGNoKHQpe3JldHVybiExfX0oKSxjPWkmJmkucHJvdG90eXBlLmFwcGVuZCYmaS5wcm90b3R5cGUuZ2V0QmxvYjt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gcz9hP2UuQmxvYjpvOmM/bjp2b2lkIDB9KCl9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0KXJldHVybiBuKHQpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlIGluIHIucHJvdG90eXBlKXRbZV09ci5wcm90b3R5cGVbZV07cmV0dXJuIHR9dC5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzW3RdPXRoaXMuX2NhbGxiYWNrc1t0XXx8W10pLnB1c2goZSksdGhpc30sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXtuLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBuPXRoaXM7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHIuZm49ZSx0aGlzLm9uKHQsciksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIHI9dGhpcy5fY2FsbGJhY2tzW3RdO2lmKCFyKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0sdGhpcztmb3IodmFyIG4sbz0wO288ci5sZW5ndGg7bysrKWlmKG49cltvXSxuPT09ZXx8bi5mbj09PWUpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscj10aGlzLl9jYWxsYmFja3NbdF07aWYocil7cj1yLnNsaWNlKDApO2Zvcih2YXIgbj0wLG89ci5sZW5ndGg7bjxvOysrbilyW25dLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW3RdfHxbXX0sci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlKXtlLmVuY29kZT1mdW5jdGlvbih0KXt2YXIgZT1cIlwiO2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJihlLmxlbmd0aCYmKGUrPVwiJlwiKSxlKz1lbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbcl0pKTtyZXR1cm4gZX0sZS5kZWNvZGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LHI9dC5zcGxpdChcIiZcIiksbj0wLG89ci5sZW5ndGg7bjxvO24rKyl7dmFyIGk9cltuXS5zcGxpdChcIj1cIik7ZVtkZWNvZGVVUklDb21wb25lbnQoaVswXSldPWRlY29kZVVSSUNvbXBvbmVudChpWzFdKX1yZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9ZnVuY3Rpb24oKXt9O3IucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyByLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXR9fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIGU9XCJcIjtkbyBlPXNbdCVhXStlLHQ9TWF0aC5mbG9vcih0L2EpO3doaWxlKHQ+MCk7cmV0dXJuIGV9ZnVuY3Rpb24gbih0KXt2YXIgZT0wO2Zvcih1PTA7dTx0Lmxlbmd0aDt1KyspZT1lKmErY1t0LmNoYXJBdCh1KV07cmV0dXJuIGV9ZnVuY3Rpb24gbygpe3ZhciB0PXIoK25ldyBEYXRlKTtyZXR1cm4gdCE9PWk/KHA9MCxpPXQpOnQrXCIuXCIrcihwKyspfWZvcih2YXIgaSxzPVwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXotX1wiLnNwbGl0KFwiXCIpLGE9NjQsYz17fSxwPTAsdT0wO3U8YTt1KyspY1tzW3VdXT11O28uZW5jb2RlPXIsby5kZWNvZGU9bix0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIG8odCl7aS5jYWxsKHRoaXMsdCksdGhpcy5xdWVyeT10aGlzLnF1ZXJ5fHx7fSxhfHwoZS5fX19laW98fChlLl9fX2Vpbz1bXSksYT1lLl9fX2VpbyksdGhpcy5pbmRleD1hLmxlbmd0aDt2YXIgcj10aGlzO2EucHVzaChmdW5jdGlvbih0KXtyLm9uRGF0YSh0KX0pLHRoaXMucXVlcnkuaj10aGlzLmluZGV4LGUuZG9jdW1lbnQmJmUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsZnVuY3Rpb24oKXtyLnNjcmlwdCYmKHIuc2NyaXB0Lm9uZXJyb3I9bil9LCExKX12YXIgaT1yKDIyKSxzPXIoMzUpO3QuZXhwb3J0cz1vO3ZhciBhLGM9L1xcbi9nLHA9L1xcXFxuL2c7cyhvLGkpLG8ucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PSExLG8ucHJvdG90eXBlLmRvQ2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnNjcmlwdCYmKHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpLHRoaXMuc2NyaXB0PW51bGwpLHRoaXMuZm9ybSYmKHRoaXMuZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZm9ybSksdGhpcy5mb3JtPW51bGwsdGhpcy5pZnJhbWU9bnVsbCksaS5wcm90b3R5cGUuZG9DbG9zZS5jYWxsKHRoaXMpfSxvLnByb3RvdHlwZS5kb1BvbGw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTt0aGlzLnNjcmlwdCYmKHRoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpLHRoaXMuc2NyaXB0PW51bGwpLGUuYXN5bmM9ITAsZS5zcmM9dGhpcy51cmkoKSxlLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dC5vbkVycm9yKFwianNvbnAgcG9sbCBlcnJvclwiLGUpfTt2YXIgcj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtyP3IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSxyKTooZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoZSksdGhpcy5zY3JpcHQ9ZTt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvZ2Vja28vaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO24mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KX0sMTAwKX0sby5wcm90b3R5cGUuZG9Xcml0ZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXtuKCksZSgpfWZ1bmN0aW9uIG4oKXtpZihvLmlmcmFtZSl0cnl7by5mb3JtLnJlbW92ZUNoaWxkKG8uaWZyYW1lKX1jYXRjaCh0KXtvLm9uRXJyb3IoXCJqc29ucCBwb2xsaW5nIGlmcmFtZSByZW1vdmFsIGVycm9yXCIsdCl9dHJ5e3ZhciB0PSc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIG5hbWU9XCInK28uaWZyYW1lSWQrJ1wiPic7aT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfWNhdGNoKHQpe2k9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKSxpLm5hbWU9by5pZnJhbWVJZCxpLnNyYz1cImphdmFzY3JpcHQ6MFwifWkuaWQ9by5pZnJhbWVJZCxvLmZvcm0uYXBwZW5kQ2hpbGQoaSksby5pZnJhbWU9aX12YXIgbz10aGlzO2lmKCF0aGlzLmZvcm0pe3ZhciBpLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIiksYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIiksdT10aGlzLmlmcmFtZUlkPVwiZWlvX2lmcmFtZV9cIit0aGlzLmluZGV4O3MuY2xhc3NOYW1lPVwic29ja2V0aW9cIixzLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixzLnN0eWxlLnRvcD1cIi0xMDAwcHhcIixzLnN0eWxlLmxlZnQ9XCItMTAwMHB4XCIscy50YXJnZXQ9dSxzLm1ldGhvZD1cIlBPU1RcIixzLnNldEF0dHJpYnV0ZShcImFjY2VwdC1jaGFyc2V0XCIsXCJ1dGYtOFwiKSxhLm5hbWU9XCJkXCIscy5hcHBlbmRDaGlsZChhKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHMpLHRoaXMuZm9ybT1zLHRoaXMuYXJlYT1hfXRoaXMuZm9ybS5hY3Rpb249dGhpcy51cmkoKSxuKCksdD10LnJlcGxhY2UocCxcIlxcXFxcXG5cIiksdGhpcy5hcmVhLnZhbHVlPXQucmVwbGFjZShjLFwiXFxcXG5cIik7dHJ5e3RoaXMuZm9ybS5zdWJtaXQoKX1jYXRjaCh0KXt9dGhpcy5pZnJhbWUuYXR0YWNoRXZlbnQ/dGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7XCJjb21wbGV0ZVwiPT1vLmlmcmFtZS5yZWFkeVN0YXRlJiZyKCl9OnRoaXMuaWZyYW1lLm9ubG9hZD1yfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQpe3ZhciBlPXQmJnQuZm9yY2VCYXNlNjQ7ZSYmKHRoaXMuc3VwcG9ydHNCaW5hcnk9ITEpLHRoaXMucGVyTWVzc2FnZURlZmxhdGU9dC5wZXJNZXNzYWdlRGVmbGF0ZSxvLmNhbGwodGhpcyx0KX12YXIgbz1yKDIzKSxpPXIoMjQpLHM9cigzNCksYT1yKDM1KSxjPXIoMzYpLHA9cigzKShcImVuZ2luZS5pby1jbGllbnQ6d2Vic29ja2V0XCIpLHU9ZS5XZWJTb2NrZXR8fGUuTW96V2ViU29ja2V0LGg9dTtpZighaCYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyl0cnl7aD1yKDM5KX1jYXRjaCh0KXt9dC5leHBvcnRzPW4sYShuLG8pLG4ucHJvdG90eXBlLm5hbWU9XCJ3ZWJzb2NrZXRcIixuLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT0hMCxuLnByb3RvdHlwZS5kb09wZW49ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrKCkpe3ZhciB0PXRoaXMudXJpKCksZT12b2lkIDAscj17YWdlbnQ6dGhpcy5hZ2VudCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlfTtyLnBmeD10aGlzLnBmeCxyLmtleT10aGlzLmtleSxyLnBhc3NwaHJhc2U9dGhpcy5wYXNzcGhyYXNlLHIuY2VydD10aGlzLmNlcnQsci5jYT10aGlzLmNhLHIuY2lwaGVycz10aGlzLmNpcGhlcnMsci5yZWplY3RVbmF1dGhvcml6ZWQ9dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQsdGhpcy5leHRyYUhlYWRlcnMmJihyLmhlYWRlcnM9dGhpcy5leHRyYUhlYWRlcnMpLHRoaXMud3M9dT9uZXcgaCh0KTpuZXcgaCh0LGUsciksdm9pZCAwPT09dGhpcy53cy5iaW5hcnlUeXBlJiYodGhpcy5zdXBwb3J0c0JpbmFyeT0hMSksdGhpcy53cy5zdXBwb3J0cyYmdGhpcy53cy5zdXBwb3J0cy5iaW5hcnk/KHRoaXMuc3VwcG9ydHNCaW5hcnk9ITAsdGhpcy53cy5iaW5hcnlUeXBlPVwiYnVmZmVyXCIpOnRoaXMud3MuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdGhpcy5hZGRFdmVudExpc3RlbmVycygpfX0sbi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMud3Mub25vcGVuPWZ1bmN0aW9uKCl7dC5vbk9wZW4oKX0sdGhpcy53cy5vbmNsb3NlPWZ1bmN0aW9uKCl7dC5vbkNsb3NlKCl9LHRoaXMud3Mub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3Qub25EYXRhKGUuZGF0YSl9LHRoaXMud3Mub25lcnJvcj1mdW5jdGlvbihlKXt0Lm9uRXJyb3IoXCJ3ZWJzb2NrZXQgZXJyb3JcIixlKX19LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9pUGFkfGlQaG9uZXxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmKG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtvLnByb3RvdHlwZS5vbkRhdGEuY2FsbChlLHQpfSwwKX0pLG4ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXtuLmVtaXQoXCJmbHVzaFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi53cml0YWJsZT0hMCxuLmVtaXQoXCJkcmFpblwiKX0sMCl9dmFyIG49dGhpczt0aGlzLndyaXRhYmxlPSExO2Zvcih2YXIgbz10Lmxlbmd0aCxzPTAsYT1vO3M8YTtzKyspIWZ1bmN0aW9uKHQpe2kuZW5jb2RlUGFja2V0KHQsbi5zdXBwb3J0c0JpbmFyeSxmdW5jdGlvbihpKXtpZighdSl7dmFyIHM9e307aWYodC5vcHRpb25zJiYocy5jb21wcmVzcz10Lm9wdGlvbnMuY29tcHJlc3MpLG4ucGVyTWVzc2FnZURlZmxhdGUpe3ZhciBhPVwic3RyaW5nXCI9PXR5cGVvZiBpP2UuQnVmZmVyLmJ5dGVMZW5ndGgoaSk6aS5sZW5ndGg7YTxuLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCYmKHMuY29tcHJlc3M9ITEpfX10cnl7dT9uLndzLnNlbmQoaSk6bi53cy5zZW5kKGkscyl9Y2F0Y2godCl7cChcIndlYnNvY2tldCBjbG9zZWQgYmVmb3JlIG9uY2xvc2UgZXZlbnRcIil9LS1vfHxyKCl9KX0odFtzXSl9LG4ucHJvdG90eXBlLm9uQ2xvc2U9ZnVuY3Rpb24oKXtvLnByb3RvdHlwZS5vbkNsb3NlLmNhbGwodGhpcyl9LG4ucHJvdG90eXBlLmRvQ2xvc2U9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcy53cyYmdGhpcy53cy5jbG9zZSgpfSxuLnByb3RvdHlwZS51cmk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnF1ZXJ5fHx7fSxlPXRoaXMuc2VjdXJlP1wid3NzXCI6XCJ3c1wiLHI9XCJcIjt0aGlzLnBvcnQmJihcIndzc1wiPT1lJiY0NDMhPXRoaXMucG9ydHx8XCJ3c1wiPT1lJiY4MCE9dGhpcy5wb3J0KSYmKHI9XCI6XCIrdGhpcy5wb3J0KSx0aGlzLnRpbWVzdGFtcFJlcXVlc3RzJiYodFt0aGlzLnRpbWVzdGFtcFBhcmFtXT1jKCkpLHRoaXMuc3VwcG9ydHNCaW5hcnl8fCh0LmI2ND0xKSx0PXMuZW5jb2RlKHQpLHQubGVuZ3RoJiYodD1cIj9cIit0KTt2YXIgbj10aGlzLmhvc3RuYW1lLmluZGV4T2YoXCI6XCIpIT09LTE7cmV0dXJuIGUrXCI6Ly9cIisobj9cIltcIit0aGlzLmhvc3RuYW1lK1wiXVwiOnRoaXMuaG9zdG5hbWUpK3IrdGhpcy5wYXRoK3R9LG4ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuISghaHx8XCJfX2luaXRpYWxpemVcImluIGgmJnRoaXMubmFtZT09PW4ucHJvdG90eXBlLm5hbWUpfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSl7dmFyIHI9W10uaW5kZXhPZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihyKXJldHVybiB0LmluZGV4T2YoZSk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24paWYodFtuXT09PWUpcmV0dXJuIG47cmV0dXJuLTF9fSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXt2YXIgcj0vXltcXF0sOnt9XFxzXSokLyxuPS9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csbz0vXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2csaT0vKD86Xnw6fCwpKD86XFxzKlxcWykrL2cscz0vXlxccysvLGE9L1xccyskLzt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQ/KHQ9dC5yZXBsYWNlKHMsXCJcIikucmVwbGFjZShhLFwiXCIpLGUuSlNPTiYmSlNPTi5wYXJzZT9KU09OLnBhcnNlKHQpOnIudGVzdCh0LnJlcGxhY2UobixcIkBcIikucmVwbGFjZShvLFwiXVwiKS5yZXBsYWNlKGksXCJcIikpP25ldyBGdW5jdGlvbihcInJldHVybiBcIit0KSgpOnZvaWQgMCk6bnVsbH19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSxyKXt0aGlzLmlvPXQsdGhpcy5uc3A9ZSx0aGlzLmpzb249dGhpcyx0aGlzLmlkcz0wLHRoaXMuYWNrcz17fSx0aGlzLnJlY2VpdmVCdWZmZXI9W10sdGhpcy5zZW5kQnVmZmVyPVtdLHRoaXMuY29ubmVjdGVkPSExLHRoaXMuZGlzY29ubmVjdGVkPSEwLHImJnIucXVlcnkmJih0aGlzLnF1ZXJ5PXIucXVlcnkpLHRoaXMuaW8uYXV0b0Nvbm5lY3QmJnRoaXMub3BlbigpfXZhciBvPXIoNiksaT1yKDQzKSxzPXIoNDQpLGE9cig0NSksYz1yKDQ2KSxwPXIoMykoXCJzb2NrZXQuaW8tY2xpZW50OnNvY2tldFwiKSx1PXIoNDcpO3QuZXhwb3J0cz1lPW47dmFyIGg9e2Nvbm5lY3Q6MSxjb25uZWN0X2Vycm9yOjEsY29ubmVjdF90aW1lb3V0OjEsY29ubmVjdGluZzoxLGRpc2Nvbm5lY3Q6MSxlcnJvcjoxLHJlY29ubmVjdDoxLHJlY29ubmVjdF9hdHRlbXB0OjEscmVjb25uZWN0X2ZhaWxlZDoxLHJlY29ubmVjdF9lcnJvcjoxLHJlY29ubmVjdGluZzoxLHBpbmc6MSxwb25nOjF9LGY9aS5wcm90b3R5cGUuZW1pdDtpKG4ucHJvdG90eXBlKSxuLnByb3RvdHlwZS5zdWJFdmVudHM9ZnVuY3Rpb24oKXtpZighdGhpcy5zdWJzKXt2YXIgdD10aGlzLmlvO3RoaXMuc3Vicz1bYSh0LFwib3BlblwiLGModGhpcyxcIm9ub3BlblwiKSksYSh0LFwicGFja2V0XCIsYyh0aGlzLFwib25wYWNrZXRcIikpLGEodCxcImNsb3NlXCIsYyh0aGlzLFwib25jbG9zZVwiKSldfX0sbi5wcm90b3R5cGUub3Blbj1uLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdGVkP3RoaXM6KHRoaXMuc3ViRXZlbnRzKCksdGhpcy5pby5vcGVuKCksXCJvcGVuXCI9PT10aGlzLmlvLnJlYWR5U3RhdGUmJnRoaXMub25vcGVuKCksdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiKSx0aGlzKX0sbi5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciB0PXMoYXJndW1lbnRzKTtyZXR1cm4gdC51bnNoaWZ0KFwibWVzc2FnZVwiKSx0aGlzLmVtaXQuYXBwbHkodGhpcyx0KSx0aGlzfSxuLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe2lmKGguaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXM7dmFyIGU9cyhhcmd1bWVudHMpLHI9by5FVkVOVDt1KGUpJiYocj1vLkJJTkFSWV9FVkVOVCk7dmFyIG49e3R5cGU6cixkYXRhOmV9O3JldHVybiBuLm9wdGlvbnM9e30sbi5vcHRpb25zLmNvbXByZXNzPSF0aGlzLmZsYWdzfHwhMSE9PXRoaXMuZmxhZ3MuY29tcHJlc3MsXCJmdW5jdGlvblwiPT10eXBlb2YgZVtlLmxlbmd0aC0xXSYmKHAoXCJlbWl0dGluZyBwYWNrZXQgd2l0aCBhY2sgaWQgJWRcIix0aGlzLmlkcyksdGhpcy5hY2tzW3RoaXMuaWRzXT1lLnBvcCgpLG4uaWQ9dGhpcy5pZHMrKyksdGhpcy5jb25uZWN0ZWQ/dGhpcy5wYWNrZXQobik6dGhpcy5zZW5kQnVmZmVyLnB1c2gobiksZGVsZXRlIHRoaXMuZmxhZ3MsdGhpc30sbi5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHQpe3QubnNwPXRoaXMubnNwLHRoaXMuaW8ucGFja2V0KHQpfSxuLnByb3RvdHlwZS5vbm9wZW49ZnVuY3Rpb24oKXtwKFwidHJhbnNwb3J0IGlzIG9wZW4gLSBjb25uZWN0aW5nXCIpLFwiL1wiIT09dGhpcy5uc3AmJih0aGlzLnF1ZXJ5P3RoaXMucGFja2V0KHt0eXBlOm8uQ09OTkVDVCxxdWVyeTp0aGlzLnF1ZXJ5fSk6dGhpcy5wYWNrZXQoe3R5cGU6by5DT05ORUNUfSkpfSxuLnByb3RvdHlwZS5vbmNsb3NlPWZ1bmN0aW9uKHQpe3AoXCJjbG9zZSAoJXMpXCIsdCksdGhpcy5jb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0ZWQ9ITAsZGVsZXRlIHRoaXMuaWQsdGhpcy5lbWl0KFwiZGlzY29ubmVjdFwiLHQpfSxuLnByb3RvdHlwZS5vbnBhY2tldD1mdW5jdGlvbih0KXtpZih0Lm5zcD09PXRoaXMubnNwKXN3aXRjaCh0LnR5cGUpe2Nhc2Ugby5DT05ORUNUOnRoaXMub25jb25uZWN0KCk7YnJlYWs7Y2FzZSBvLkVWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIG8uQklOQVJZX0VWRU5UOnRoaXMub25ldmVudCh0KTticmVhaztjYXNlIG8uQUNLOnRoaXMub25hY2sodCk7YnJlYWs7Y2FzZSBvLkJJTkFSWV9BQ0s6dGhpcy5vbmFjayh0KTticmVhaztjYXNlIG8uRElTQ09OTkVDVDp0aGlzLm9uZGlzY29ubmVjdCgpO2JyZWFrO2Nhc2Ugby5FUlJPUjp0aGlzLmVtaXQoXCJlcnJvclwiLHQuZGF0YSl9fSxuLnByb3RvdHlwZS5vbmV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YXx8W107cChcImVtaXR0aW5nIGV2ZW50ICVqXCIsZSksbnVsbCE9dC5pZCYmKHAoXCJhdHRhY2hpbmcgYWNrIGNhbGxiYWNrIHRvIGV2ZW50XCIpLGUucHVzaCh0aGlzLmFjayh0LmlkKSkpLHRoaXMuY29ubmVjdGVkP2YuYXBwbHkodGhpcyxlKTp0aGlzLnJlY2VpdmVCdWZmZXIucHVzaChlKX0sbi5wcm90b3R5cGUuYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMscj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtpZighcil7cj0hMDt2YXIgbj1zKGFyZ3VtZW50cyk7cChcInNlbmRpbmcgYWNrICVqXCIsbik7dmFyIGk9dShuKT9vLkJJTkFSWV9BQ0s6by5BQ0s7ZS5wYWNrZXQoe3R5cGU6aSxpZDp0LGRhdGE6bn0pfX19LG4ucHJvdG90eXBlLm9uYWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWNrc1t0LmlkXTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlPyhwKFwiY2FsbGluZyBhY2sgJXMgd2l0aCAlalwiLHQuaWQsdC5kYXRhKSxlLmFwcGx5KHRoaXMsdC5kYXRhKSxkZWxldGUgdGhpcy5hY2tzW3QuaWRdKTpwKFwiYmFkIGFjayAlc1wiLHQuaWQpfSxuLnByb3RvdHlwZS5vbmNvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmNvbm5lY3RlZD0hMCx0aGlzLmRpc2Nvbm5lY3RlZD0hMSx0aGlzLmVtaXQoXCJjb25uZWN0XCIpLHRoaXMuZW1pdEJ1ZmZlcmVkKCl9LG4ucHJvdG90eXBlLmVtaXRCdWZmZXJlZD1mdW5jdGlvbigpe3ZhciB0O2Zvcih0PTA7dDx0aGlzLnJlY2VpdmVCdWZmZXIubGVuZ3RoO3QrKylmLmFwcGx5KHRoaXMsdGhpcy5yZWNlaXZlQnVmZmVyW3RdKTtmb3IodGhpcy5yZWNlaXZlQnVmZmVyPVtdLFxyXG50PTA7dDx0aGlzLnNlbmRCdWZmZXIubGVuZ3RoO3QrKyl0aGlzLnBhY2tldCh0aGlzLnNlbmRCdWZmZXJbdF0pO3RoaXMuc2VuZEJ1ZmZlcj1bXX0sbi5wcm90b3R5cGUub25kaXNjb25uZWN0PWZ1bmN0aW9uKCl7cChcInNlcnZlciBkaXNjb25uZWN0ICglcylcIix0aGlzLm5zcCksdGhpcy5kZXN0cm95KCksdGhpcy5vbmNsb3NlKFwiaW8gc2VydmVyIGRpc2Nvbm5lY3RcIil9LG4ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLnN1YnMpe2Zvcih2YXIgdD0wO3Q8dGhpcy5zdWJzLmxlbmd0aDt0KyspdGhpcy5zdWJzW3RdLmRlc3Ryb3koKTt0aGlzLnN1YnM9bnVsbH10aGlzLmlvLmRlc3Ryb3kodGhpcyl9LG4ucHJvdG90eXBlLmNsb3NlPW4ucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0ZWQmJihwKFwicGVyZm9ybWluZyBkaXNjb25uZWN0ICglcylcIix0aGlzLm5zcCksdGhpcy5wYWNrZXQoe3R5cGU6by5ESVNDT05ORUNUfSkpLHRoaXMuZGVzdHJveSgpLHRoaXMuY29ubmVjdGVkJiZ0aGlzLm9uY2xvc2UoXCJpbyBjbGllbnQgZGlzY29ubmVjdFwiKSx0aGlzfSxuLnByb3RvdHlwZS5jb21wcmVzcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5mbGFncz10aGlzLmZsYWdzfHx7fSx0aGlzLmZsYWdzLmNvbXByZXNzPXQsdGhpc319LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXtpZih0KXJldHVybiBuKHQpfWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlIGluIHIucHJvdG90eXBlKXRbZV09ci5wcm90b3R5cGVbZV07cmV0dXJuIHR9dC5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdPXRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XXx8W10pLnB1c2goZSksdGhpc30sci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXt0aGlzLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiByLmZuPWUsdGhpcy5vbih0LHIpLHRoaXN9LHIucHJvdG90eXBlLm9mZj1yLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1yLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ci5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LDA9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX2NhbGxiYWNrcz17fSx0aGlzO3ZhciByPXRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XTtpZighcilyZXR1cm4gdGhpcztpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdLHRoaXM7Zm9yKHZhciBuLG89MDtvPHIubGVuZ3RoO28rKylpZihuPXJbb10sbj09PWV8fG4uZm49PT1lKXtyLnNwbGljZShvLDEpO2JyZWFrfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3RoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9O3ZhciBlPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHI9dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdO2lmKHIpe3I9ci5zbGljZSgwKTtmb3IodmFyIG49MCxvPXIubGVuZ3RoO248bzsrK24pcltuXS5hcHBseSh0aGlzLGUpfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LHRoaXMuX2NhbGxiYWNrc1tcIiRcIit0XXx8W119LHIucHJvdG90eXBlLmhhc0xpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMubGlzdGVuZXJzKHQpLmxlbmd0aH19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0LGUpe3ZhciByPVtdO2U9ZXx8MDtmb3IodmFyIG49ZXx8MDtuPHQubGVuZ3RoO24rKylyW24tZV09dFtuXTtyZXR1cm4gcn10LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsZSxyKXtyZXR1cm4gdC5vbihlLHIpLHtkZXN0cm95OmZ1bmN0aW9uKCl7dC5yZW1vdmVMaXN0ZW5lcihlLHIpfX19dC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSl7dmFyIHI9W10uc2xpY2U7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXRbZV0pLFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKFwiYmluZCgpIHJlcXVpcmVzIGEgZnVuY3Rpb25cIik7dmFyIG49ci5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LG4uY29uY2F0KHIuY2FsbChhcmd1bWVudHMpKSl9fX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIHIodCl7aWYoIXQpcmV0dXJuITE7aWYoZS5CdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyJiZlLkJ1ZmZlci5pc0J1ZmZlcih0KXx8ZS5BcnJheUJ1ZmZlciYmdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxlLkJsb2ImJnQgaW5zdGFuY2VvZiBCbG9ifHxlLkZpbGUmJnQgaW5zdGFuY2VvZiBGaWxlKXJldHVybiEwO2lmKG8odCkpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKHIodFtuXSkpcmV0dXJuITB9ZWxzZSBpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7dC50b0pTT04mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQudG9KU09OJiYodD10LnRvSlNPTigpKTtmb3IodmFyIGkgaW4gdClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmcih0W2ldKSlyZXR1cm4hMH1yZXR1cm4hMX1yZXR1cm4gcih0KX12YXIgbz1yKDQ4KTt0LmV4cG9ydHM9bn0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIodCl7dD10fHx7fSx0aGlzLm1zPXQubWlufHwxMDAsdGhpcy5tYXg9dC5tYXh8fDFlNCx0aGlzLmZhY3Rvcj10LmZhY3Rvcnx8Mix0aGlzLmppdHRlcj10LmppdHRlcj4wJiZ0LmppdHRlcjw9MT90LmppdHRlcjowLHRoaXMuYXR0ZW1wdHM9MH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMubXMqTWF0aC5wb3codGhpcy5mYWN0b3IsdGhpcy5hdHRlbXB0cysrKTtpZih0aGlzLmppdHRlcil7dmFyIGU9TWF0aC5yYW5kb20oKSxyPU1hdGguZmxvb3IoZSp0aGlzLmppdHRlcip0KTt0PTA9PSgxJk1hdGguZmxvb3IoMTAqZSkpP3Qtcjp0K3J9cmV0dXJuIDB8TWF0aC5taW4odCx0aGlzLm1heCl9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5hdHRlbXB0cz0wfSxyLnByb3RvdHlwZS5zZXRNaW49ZnVuY3Rpb24odCl7dGhpcy5tcz10fSxyLnByb3RvdHlwZS5zZXRNYXg9ZnVuY3Rpb24odCl7dGhpcy5tYXg9dH0sci5wcm90b3R5cGUuc2V0Sml0dGVyPWZ1bmN0aW9uKHQpe3RoaXMuaml0dGVyPXR9fV0pfSk7Il0sImZpbGUiOiJzb2NrZXQuaW8ubWluLmpzIn0=

var cspx = function (n) {
    return 88 - 8 * (n - 2);
};

var ars = function (n) {
    return parseFloat((1.2 - (n >= 5 ? (n - 5) * 0.15 : (n - 5) * 0.12)).toFixed(4));
};

var ods = function (n) {
    return [0.0795 - 0.006 * n, 0.1395 - 0.008 * n, 0.1995 - 0.01 * n];
};

var e = function (img) { // check if image is empty
    return img.width === 0 && img.height === 0;
};

var snap = function (n, a, b) {
    return Math.max(0, Math.round((Math.round((n - a) / b) * b + a) * 1000) / 1000);
};

var concatImages = function (arr, overlap) {
    if (!overlap) overlap = 0;
    var canvas = document.createElement('canvas');
    var maxh = arr[0].height,
        w = arr[0].width;
    for (var i = 1; i < arr.length; i++) {
        if (arr[i].height > maxh) maxh = arr[i].height;
        w += arr[i].width - overlap;
    }
    canvas.width = w;
    canvas.height = maxh;
    var x = 0;
    var ctx = canvas.getContext('2d');
    for (i = 0; i < arr.length; i++) {
        ctx.drawImage(arr[i], x, (maxh - arr[i].height) / 2);
        x += arr[i].width - overlap;
    }
    return canvas;
};

var tint = function (img, col) {
    if (col === undefined) return img;
    var canvas = document.createElement('canvas');
    canvas.height = img.height;
    canvas.width = img.width;
    var ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);
    var w = img.width,
        h = img.height;
    if (!w || !h) return img;
    var imgdata = ctx.getImageData(0, 0, w, h);
    var rgba = imgdata.data;
    //console.log(imgdata.data);
    for (var px = 0, ct = w * h * 4; px < ct; px += 4) {
        rgba[px] *= col[0] / 255;
        rgba[px + 1] *= col[1] / 255;
        rgba[px + 2] *= col[2] / 255;
    }
    ctx.putImageData(imgdata, 0, 0);
    return canvas;
};

var colorToArray = function (s) {
    var color = s.split(',');
    var temp = [];
    for (var i = 0; i < color.length; i++) {
        temp.push(parseFloat(color[i]));
    }
    return temp;
};

var pow = Math.pow;

Array.prototype.equals = function (other) {
    if (this.length !== other.length) return false;
    for (var i = 0; i < this.length; i++) {
        if (this[i] != other[i]) return false;
    }
    return true;
};

var toRGB = function (arr) { // from an array of numbers in range 0-255 to rgb or rgba color string
    var [r, g, b, a] = arr;
    return a === undefined ? 'rgb(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')' : 'rgba(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ',' + a + ')';
};

var min = function (arr) {
    var m = arr[0];
    for (var i = 1; i < arr.length; i++) {
        if (arr[i] < m) m = arr[i];
    }
    return m;
};

var max = function (arr) {
    var m = arr[0];
    for (var i = 1; i < arr.length; i++) {
        if (arr[i] > m) m = arr[i];
    }
    return m;
};

var sum = function (arr) {
    var r = 0;
    for (var i = 0; i < arr.length; i++) r += arr[i];
    return r;
};

var fa = function (n) {
    var r = 1;
    for (var i = 2; i <= n; i++)
        r *= i;
    return r;
};

var bcoef = function (n, k) {
    return fa(n) / fa(k) / fa(n - k);
};

var spline_len = function (p) {
    var l = 0;
    for (var i = 0; i < p.length - 1; i++) {
        l += dist(p[i], p[i + 1]);
    }
    return l;
};

var lenp = function (p) {
    var n = p.length - 1;
    if (n == 1) return p[0].distanceTo(p[1]);
    var [px, py] = p[0].toArray();
    var l = 0;
    for (var s = 0; s < 101; s++) {
        var t = s / 100;
        var x = 0;
        for (var i = 0; i < n + 1; i++) {
            x += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].x;
        }
        var y = 0;
        for (i = 0; i < n + 1; i++) {
            y += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].y;
        }
        l += new Vector(x, y).distanceTo(new Vector(px, py));
        px = x;
        py = y;
    }
    return l;
};

var bezier2 = function (p, l) {
    if (l === undefined) l = lenp(p);
    var prec = l / 40;
    var n = p.length - 1;

    function b(t) {
        var x = 0;
        for (var i = 0; i < n + 1; i++) {
            x += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].x;
        }
        var y = 0;
        for (i = 0; i < n + 1; i++) {
            y += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].y;
        }
        return [x, y];
    }
    var arr = [],
        l1 = 0;
    var [px, py] = p[0].toArray();
    var x, y, dx, dy, m, t;
    for (var i = 0; i < Math.floor(l / prec); i++) {
        t = i * prec / l;
        [x, y] = b(t);
        dx = x - px;
        dy = y - py;
        m = Math.sqrt(pow(dx, 2) + pow(dy, 2));
        if (m !== 0 && l1 + m >= l) return [arr.concat([
            [px + dx / m * (l1 - l), py + dy / m * (l1 - l)]
        ]), l];
        arr.push([x, y]);
        l1 += m;
        px = x;
        py = y;
    }
    return [arr, l1];
};

var line = function (p, l) {
    // if (l === undefined) l = -1;
    // if (step === undefined) step = 10;
    var dx = p[1].x - p[0].x,
        dy = p[1].y - p[0].y;
    var m = Math.sqrt(pow(dx, 2) + pow(dy, 2));
    if (l === undefined) l = m;
    dx /= m;
    dy /= m;
    // var a = [];
    // for (var i = 0; i < Math.round(l / step); i++) {
    //   a.push([p[0][0] + dx * i, p[0][1] + dy * i]);
    // }
    return [
        [
            [p[0].x, p[0].y],
            [p[0].x + dx * l, p[0].y + dy * l]
        ], l
    ];
};

var bezier = function (p, l) {
    if (p.length == 2) return line(p, l)[0];
    var arr = [];
    var prev = 0;
    var part, c;
    for (var i = 1; i < p.length + 1; i++) {
        if (i == p.length) {
            part = p.slice(prev, i);
            c = bezier2(part, l);
            arr = arr.concat(c[0]);
        } else if (i < p.length && p[i].equals(p[i - 1])) {
            part = p.slice(prev, i);
            c = part.length == 2 ? line(part) : bezier2(part);
            c[0].pop();
            arr = arr.concat(c[0]);
            l -= c[1];
            prev = i;
        }
    }
    if (arr.length === 0) arr = bezier2(p)[0];
    return arr;
};

var passthrough = function (p, l, step) {
    if (step === undefined) step = 4;
    var [a, b, c] = p;
    var [x1, y1] = p[0].midpoint(p[1]);
    var [x2, y2] = p[1].midpoint(p[2]);
    if (a.y == b.y && b.y == c.y) return line(p, l)[0];
    var m, x, y;
    if (a.y == b.y) {
        m = -(b.x - c.x) / (b.y - c.y);
        x = x1;
        y = m * (x - x2) + y2;
    } else if (b.y == c.y) {
        m = -(b.x - a.x) / (b.y - a.y);
        x = x2;
        y = m * (x - x1) + y1;
    } else {
        var m1 = -(b.x - a.x) / (b.y - a.y),
            m2 = -(b.x - c.x) / (b.y - c.y);
        if (m1 == m2) return line(p, l)[0];
        x = (m1 * x1 - m2 * x2 - y1 + y2) / (m1 - m2);
        y = m1 * (x - x1) + y1;
    }
    var r = new Vector(x, y).distanceTo(a),
        t = l / r,
        t1 = Math.atan2(a.y - y, a.x - x),
        dt = step * t / l,
        d = ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0 ? -1 : 1;
    //if(p[0][0]==296 && p[1][0]==368) console.log(m1,m2,x1,y1,x2,y2);
    p = [];
    for (var i = 0; i < Math.floor(t / dt); i++) {
        var j = i * d;
        p.push([x + r * Math.cos(t1 + dt * j), y + r * Math.sin(t1 + dt * j)]);
    }
    p.push([x + r * Math.cos(t1 + t * d), y + r * Math.sin(t1 + t * d)]);
    return p;
};

var render_curve = function (p, cs, c1, c2) {
    if (cs === undefined) cs = 72 * 2;
    if (c1 === undefined) c1 = [0, 0, 0];
    if (c2 === undefined) c2 = [1, 1, 1];
    var k = 2.5;
    cs *= 22 / 12;
    var x = [],
        y = [];
    for (var i = 0; i < p.length; i++) {
        x.push(p[i][0] * 2);
        y.push(p[i][1] * 2);
    }
    var minx = min(x),
        miny = min(y),
        maxx = max(x),
        maxy = max(y);
    var w = maxx - minx,
        h = maxy - miny;
    // for(var i = 0; i < y.length; i++){
    //   y[i] -= h;
    // }
    var canvas = document.createElement('canvas');
    canvas.width = Math.ceil(w + cs);
    canvas.height = Math.ceil(h + cs);
    var ctx = canvas.getContext('2d');
    var canvas2 = document.createElement('canvas');
    canvas2.width = Math.ceil(w + cs);
    canvas2.height = Math.ceil(h + cs);
    var ctx2 = canvas2.getContext('2d');
    var a = 0;
    ctx.beginPath();
    ctx2.beginPath();
    ctx.lineCap = ctx2.lineCap = 'round';
    ctx.lineJoin = ctx2.lineJoin = 'round';
    ctx.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
    ctx2.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
    for (i = 1; i < p.length; i++) {
        ctx.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
        ctx2.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
    }
    i = 0;
    while (a < cs / k) {
        ctx.lineWidth = ctx2.lineWidth = cs - a * k;
        if (i === 0) {
            ctx2.strokeStyle = toRGB(c2);
            a += cs / 10 / k;
            ctx2.stroke();
        } else {
            var c = a / cs * k / 4 * 255;
            ctx.strokeStyle = toRGB([c1[0] + c, c1[1] + c, c1[2] + c]);
            a += k;
            ctx.stroke();
            ctx2.globalCompositeOperation = 'destination-out';
            ctx2.stroke();
            ctx2.globalCompositeOperation = 'source-over';
        }
        i++;
    }
    ctx2.globalAlpha = 0.75;
    ctx2.drawImage(canvas, 0, 0);
    return [canvas2, [minx / 2 - cs / 4, miny / 2 - cs / 4]];
};

// p: array of points
// cs: circle size
// c1: border color
// returns: [[border, body, overlay], [positionx, positiony]]
var render_curve2 = function (p, cs) {
    var csi = cs;
    if (cs === undefined) cs = 72 * 2;
    var k = 2.5;
    cs *= 22 / 12;
    var x = [],
        y = [];
    for (var i = 0; i < p.length; i++) {
        x.push(p[i][0] * 2);
        y.push(p[i][1] * 2);
    }
    var minx = min(x),
        miny = min(y),
        maxx = max(x),
        maxy = max(y);
    var w = maxx - minx,
        h = maxy - miny;
    // for(var i = 0; i < y.length; i++){
    //   y[i] -= h;
    // }
    var overlay = document.createElement('canvas');
    overlay.width = Math.ceil(w + cs);
    overlay.height = Math.ceil(h + cs);
    var ctx = overlay.getContext('2d');
    var border = document.createElement('canvas');
    border.width = Math.ceil(w + cs);
    border.height = Math.ceil(h + cs);
    var ctx2 = border.getContext('2d');
    var body = document.createElement('canvas');
    body.width = Math.ceil(w + cs);
    body.height = Math.ceil(h + cs);
    var ctx3 = body.getContext('2d');
    var a = 0;
    ctx.beginPath();
    ctx2.beginPath();
    ctx3.beginPath();
    ctx.lineCap = ctx2.lineCap = 'round';
    ctx.lineJoin = ctx2.lineJoin = 'round';
    ctx2.lineCap = ctx2.lineCap = 'round';
    ctx2.lineJoin = ctx2.lineJoin = 'round';
    ctx3.lineCap = ctx2.lineCap = 'round';
    ctx3.lineJoin = ctx2.lineJoin = 'round';
    ctx.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
    ctx2.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
    ctx3.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
    for (i = 1; i < p.length; i++) {
        ctx.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
        ctx2.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
        ctx3.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
    }
    i = 0;
    while (a < cs / k) {
        ctx.lineWidth = ctx2.lineWidth = ctx3.lineWidth = cs - a * k;
        if (i === 0) {
            ctx2.strokeStyle = '#FFF';
            a += cs / 10 / k;
            ctx2.stroke();
        } else {
            var c = a / cs * k / 8;
            ctx.globalAlpha = c;
            ctx.strokeStyle = '#FFF';
            a += k;
            ctx.stroke();
            if (i == 1) {
                ctx3.fillStyle = '#FFF';
                ctx3.fillRect(0, 0, body.width, body.height);
                ctx3.globalCompositeOperation = 'destination-in';
                ctx3.stroke();
            }
            ctx.globalCompositeOperation = 'source-over';
        }
        i++;
    }
    ctx.globalCompositeOperation = 'copy';
    ctx.globalAlpha = 0.5;
    ctx.drawImage(overlay, 0, 0);
    return [
        [border, body, overlay],
        [minx / 2 - cs / 4, miny / 2 - cs / 4]
    ];
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJuc291dGlsczIuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGNzcHggPSBmdW5jdGlvbiAobikge1xyXG4gICAgcmV0dXJuIDg4IC0gOCAqIChuIC0gMik7XHJcbn07XHJcblxyXG52YXIgYXJzID0gZnVuY3Rpb24gKG4pIHtcclxuICAgIHJldHVybiBwYXJzZUZsb2F0KCgxLjIgLSAobiA+PSA1ID8gKG4gLSA1KSAqIDAuMTUgOiAobiAtIDUpICogMC4xMikpLnRvRml4ZWQoNCkpO1xyXG59O1xyXG5cclxudmFyIG9kcyA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICByZXR1cm4gWzAuMDc5NSAtIDAuMDA2ICogbiwgMC4xMzk1IC0gMC4wMDggKiBuLCAwLjE5OTUgLSAwLjAxICogbl07XHJcbn07XHJcblxyXG52YXIgZSA9IGZ1bmN0aW9uIChpbWcpIHsgLy8gY2hlY2sgaWYgaW1hZ2UgaXMgZW1wdHlcclxuICAgIHJldHVybiBpbWcud2lkdGggPT09IDAgJiYgaW1nLmhlaWdodCA9PT0gMDtcclxufTtcclxuXHJcbnZhciBzbmFwID0gZnVuY3Rpb24gKG4sIGEsIGIpIHtcclxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKChNYXRoLnJvdW5kKChuIC0gYSkgLyBiKSAqIGIgKyBhKSAqIDEwMDApIC8gMTAwMCk7XHJcbn07XHJcblxyXG52YXIgY29uY2F0SW1hZ2VzID0gZnVuY3Rpb24gKGFyciwgb3ZlcmxhcCkge1xyXG4gICAgaWYgKCFvdmVybGFwKSBvdmVybGFwID0gMDtcclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIHZhciBtYXhoID0gYXJyWzBdLmhlaWdodCxcclxuICAgICAgICB3ID0gYXJyWzBdLndpZHRoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoYXJyW2ldLmhlaWdodCA+IG1heGgpIG1heGggPSBhcnJbaV0uaGVpZ2h0O1xyXG4gICAgICAgIHcgKz0gYXJyW2ldLndpZHRoIC0gb3ZlcmxhcDtcclxuICAgIH1cclxuICAgIGNhbnZhcy53aWR0aCA9IHc7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gbWF4aDtcclxuICAgIHZhciB4ID0gMDtcclxuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGFycltpXSwgeCwgKG1heGggLSBhcnJbaV0uaGVpZ2h0KSAvIDIpO1xyXG4gICAgICAgIHggKz0gYXJyW2ldLndpZHRoIC0gb3ZlcmxhcDtcclxuICAgIH1cclxuICAgIHJldHVybiBjYW52YXM7XHJcbn07XHJcblxyXG52YXIgdGludCA9IGZ1bmN0aW9uIChpbWcsIGNvbCkge1xyXG4gICAgaWYgKGNvbCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gaW1nO1xyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XHJcbiAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XHJcbiAgICB2YXIgdyA9IGltZy53aWR0aCxcclxuICAgICAgICBoID0gaW1nLmhlaWdodDtcclxuICAgIGlmICghdyB8fCAhaCkgcmV0dXJuIGltZztcclxuICAgIHZhciBpbWdkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3LCBoKTtcclxuICAgIHZhciByZ2JhID0gaW1nZGF0YS5kYXRhO1xyXG4gICAgLy9jb25zb2xlLmxvZyhpbWdkYXRhLmRhdGEpO1xyXG4gICAgZm9yICh2YXIgcHggPSAwLCBjdCA9IHcgKiBoICogNDsgcHggPCBjdDsgcHggKz0gNCkge1xyXG4gICAgICAgIHJnYmFbcHhdICo9IGNvbFswXSAvIDI1NTtcclxuICAgICAgICByZ2JhW3B4ICsgMV0gKj0gY29sWzFdIC8gMjU1O1xyXG4gICAgICAgIHJnYmFbcHggKyAyXSAqPSBjb2xbMl0gLyAyNTU7XHJcbiAgICB9XHJcbiAgICBjdHgucHV0SW1hZ2VEYXRhKGltZ2RhdGEsIDAsIDApO1xyXG4gICAgcmV0dXJuIGNhbnZhcztcclxufTtcclxuXHJcbnZhciBjb2xvclRvQXJyYXkgPSBmdW5jdGlvbiAocykge1xyXG4gICAgdmFyIGNvbG9yID0gcy5zcGxpdCgnLCcpO1xyXG4gICAgdmFyIHRlbXAgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3IubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0ZW1wLnB1c2gocGFyc2VGbG9hdChjb2xvcltpXSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRlbXA7XHJcbn07XHJcblxyXG52YXIgcG93ID0gTWF0aC5wb3c7XHJcblxyXG5BcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICBpZiAodGhpcy5sZW5ndGggIT09IG90aGVyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHRoaXNbaV0gIT0gb3RoZXJbaV0pIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxudmFyIHRvUkdCID0gZnVuY3Rpb24gKGFycikgeyAvLyBmcm9tIGFuIGFycmF5IG9mIG51bWJlcnMgaW4gcmFuZ2UgMC0yNTUgdG8gcmdiIG9yIHJnYmEgY29sb3Igc3RyaW5nXHJcbiAgICB2YXIgW3IsIGcsIGIsIGFdID0gYXJyO1xyXG4gICAgcmV0dXJuIGEgPT09IHVuZGVmaW5lZCA/ICdyZ2IoJyArIE1hdGgucm91bmQocikgKyAnLCcgKyBNYXRoLnJvdW5kKGcpICsgJywnICsgTWF0aC5yb3VuZChiKSArICcpJyA6ICdyZ2JhKCcgKyBNYXRoLnJvdW5kKHIpICsgJywnICsgTWF0aC5yb3VuZChnKSArICcsJyArIE1hdGgucm91bmQoYikgKyAnLCcgKyBhICsgJyknO1xyXG59O1xyXG5cclxudmFyIG1pbiA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgIHZhciBtID0gYXJyWzBdO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoYXJyW2ldIDwgbSkgbSA9IGFycltpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBtO1xyXG59O1xyXG5cclxudmFyIG1heCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgIHZhciBtID0gYXJyWzBdO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoYXJyW2ldID4gbSkgbSA9IGFycltpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBtO1xyXG59O1xyXG5cclxudmFyIHN1bSA9IGZ1bmN0aW9uIChhcnIpIHtcclxuICAgIHZhciByID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSByICs9IGFycltpXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5cclxudmFyIGZhID0gZnVuY3Rpb24gKG4pIHtcclxuICAgIHZhciByID0gMTtcclxuICAgIGZvciAodmFyIGkgPSAyOyBpIDw9IG47IGkrKylcclxuICAgICAgICByICo9IGk7XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbnZhciBiY29lZiA9IGZ1bmN0aW9uIChuLCBrKSB7XHJcbiAgICByZXR1cm4gZmEobikgLyBmYShrKSAvIGZhKG4gLSBrKTtcclxufTtcclxuXHJcbnZhciBzcGxpbmVfbGVuID0gZnVuY3Rpb24gKHApIHtcclxuICAgIHZhciBsID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBsICs9IGRpc3QocFtpXSwgcFtpICsgMV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGw7XHJcbn07XHJcblxyXG52YXIgbGVucCA9IGZ1bmN0aW9uIChwKSB7XHJcbiAgICB2YXIgbiA9IHAubGVuZ3RoIC0gMTtcclxuICAgIGlmIChuID09IDEpIHJldHVybiBwWzBdLmRpc3RhbmNlVG8ocFsxXSk7XHJcbiAgICB2YXIgW3B4LCBweV0gPSBwWzBdLnRvQXJyYXkoKTtcclxuICAgIHZhciBsID0gMDtcclxuICAgIGZvciAodmFyIHMgPSAwOyBzIDwgMTAxOyBzKyspIHtcclxuICAgICAgICB2YXIgdCA9IHMgLyAxMDA7XHJcbiAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbiArIDE7IGkrKykge1xyXG4gICAgICAgICAgICB4ICs9IGJjb2VmKG4sIGkpICogcG93KDEgLSB0LCBuIC0gaSkgKiBwb3codCwgaSkgKiBwW2ldLng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB5ID0gMDtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbiArIDE7IGkrKykge1xyXG4gICAgICAgICAgICB5ICs9IGJjb2VmKG4sIGkpICogcG93KDEgLSB0LCBuIC0gaSkgKiBwb3codCwgaSkgKiBwW2ldLnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGwgKz0gbmV3IFZlY3Rvcih4LCB5KS5kaXN0YW5jZVRvKG5ldyBWZWN0b3IocHgsIHB5KSk7XHJcbiAgICAgICAgcHggPSB4O1xyXG4gICAgICAgIHB5ID0geTtcclxuICAgIH1cclxuICAgIHJldHVybiBsO1xyXG59O1xyXG5cclxudmFyIGJlemllcjIgPSBmdW5jdGlvbiAocCwgbCkge1xyXG4gICAgaWYgKGwgPT09IHVuZGVmaW5lZCkgbCA9IGxlbnAocCk7XHJcbiAgICB2YXIgcHJlYyA9IGwgLyA0MDtcclxuICAgIHZhciBuID0gcC5sZW5ndGggLSAxO1xyXG5cclxuICAgIGZ1bmN0aW9uIGIodCkge1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG4gKyAxOyBpKyspIHtcclxuICAgICAgICAgICAgeCArPSBiY29lZihuLCBpKSAqIHBvdygxIC0gdCwgbiAtIGkpICogcG93KHQsIGkpICogcFtpXS54O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG4gKyAxOyBpKyspIHtcclxuICAgICAgICAgICAgeSArPSBiY29lZihuLCBpKSAqIHBvdygxIC0gdCwgbiAtIGkpICogcG93KHQsIGkpICogcFtpXS55O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3gsIHldO1xyXG4gICAgfVxyXG4gICAgdmFyIGFyciA9IFtdLFxyXG4gICAgICAgIGwxID0gMDtcclxuICAgIHZhciBbcHgsIHB5XSA9IHBbMF0udG9BcnJheSgpO1xyXG4gICAgdmFyIHgsIHksIGR4LCBkeSwgbSwgdDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcihsIC8gcHJlYyk7IGkrKykge1xyXG4gICAgICAgIHQgPSBpICogcHJlYyAvIGw7XHJcbiAgICAgICAgW3gsIHldID0gYih0KTtcclxuICAgICAgICBkeCA9IHggLSBweDtcclxuICAgICAgICBkeSA9IHkgLSBweTtcclxuICAgICAgICBtID0gTWF0aC5zcXJ0KHBvdyhkeCwgMikgKyBwb3coZHksIDIpKTtcclxuICAgICAgICBpZiAobSAhPT0gMCAmJiBsMSArIG0gPj0gbCkgcmV0dXJuIFthcnIuY29uY2F0KFtcclxuICAgICAgICAgICAgW3B4ICsgZHggLyBtICogKGwxIC0gbCksIHB5ICsgZHkgLyBtICogKGwxIC0gbCldXHJcbiAgICAgICAgXSksIGxdO1xyXG4gICAgICAgIGFyci5wdXNoKFt4LCB5XSk7XHJcbiAgICAgICAgbDEgKz0gbTtcclxuICAgICAgICBweCA9IHg7XHJcbiAgICAgICAgcHkgPSB5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFthcnIsIGwxXTtcclxufTtcclxuXHJcbnZhciBsaW5lID0gZnVuY3Rpb24gKHAsIGwpIHtcclxuICAgIC8vIGlmIChsID09PSB1bmRlZmluZWQpIGwgPSAtMTtcclxuICAgIC8vIGlmIChzdGVwID09PSB1bmRlZmluZWQpIHN0ZXAgPSAxMDtcclxuICAgIHZhciBkeCA9IHBbMV0ueCAtIHBbMF0ueCxcclxuICAgICAgICBkeSA9IHBbMV0ueSAtIHBbMF0ueTtcclxuICAgIHZhciBtID0gTWF0aC5zcXJ0KHBvdyhkeCwgMikgKyBwb3coZHksIDIpKTtcclxuICAgIGlmIChsID09PSB1bmRlZmluZWQpIGwgPSBtO1xyXG4gICAgZHggLz0gbTtcclxuICAgIGR5IC89IG07XHJcbiAgICAvLyB2YXIgYSA9IFtdO1xyXG4gICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLnJvdW5kKGwgLyBzdGVwKTsgaSsrKSB7XHJcbiAgICAvLyAgIGEucHVzaChbcFswXVswXSArIGR4ICogaSwgcFswXVsxXSArIGR5ICogaV0pO1xyXG4gICAgLy8gfVxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIFtwWzBdLngsIHBbMF0ueV0sXHJcbiAgICAgICAgICAgIFtwWzBdLnggKyBkeCAqIGwsIHBbMF0ueSArIGR5ICogbF1cclxuICAgICAgICBdLCBsXHJcbiAgICBdO1xyXG59O1xyXG5cclxudmFyIGJlemllciA9IGZ1bmN0aW9uIChwLCBsKSB7XHJcbiAgICBpZiAocC5sZW5ndGggPT0gMikgcmV0dXJuIGxpbmUocCwgbClbMF07XHJcbiAgICB2YXIgYXJyID0gW107XHJcbiAgICB2YXIgcHJldiA9IDA7XHJcbiAgICB2YXIgcGFydCwgYztcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcC5sZW5ndGggKyAxOyBpKyspIHtcclxuICAgICAgICBpZiAoaSA9PSBwLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBwYXJ0ID0gcC5zbGljZShwcmV2LCBpKTtcclxuICAgICAgICAgICAgYyA9IGJlemllcjIocGFydCwgbCk7XHJcbiAgICAgICAgICAgIGFyciA9IGFyci5jb25jYXQoY1swXSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpIDwgcC5sZW5ndGggJiYgcFtpXS5lcXVhbHMocFtpIC0gMV0pKSB7XHJcbiAgICAgICAgICAgIHBhcnQgPSBwLnNsaWNlKHByZXYsIGkpO1xyXG4gICAgICAgICAgICBjID0gcGFydC5sZW5ndGggPT0gMiA/IGxpbmUocGFydCkgOiBiZXppZXIyKHBhcnQpO1xyXG4gICAgICAgICAgICBjWzBdLnBvcCgpO1xyXG4gICAgICAgICAgICBhcnIgPSBhcnIuY29uY2F0KGNbMF0pO1xyXG4gICAgICAgICAgICBsIC09IGNbMV07XHJcbiAgICAgICAgICAgIHByZXYgPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSBhcnIgPSBiZXppZXIyKHApWzBdO1xyXG4gICAgcmV0dXJuIGFycjtcclxufTtcclxuXHJcbnZhciBwYXNzdGhyb3VnaCA9IGZ1bmN0aW9uIChwLCBsLCBzdGVwKSB7XHJcbiAgICBpZiAoc3RlcCA9PT0gdW5kZWZpbmVkKSBzdGVwID0gNDtcclxuICAgIHZhciBbYSwgYiwgY10gPSBwO1xyXG4gICAgdmFyIFt4MSwgeTFdID0gcFswXS5taWRwb2ludChwWzFdKTtcclxuICAgIHZhciBbeDIsIHkyXSA9IHBbMV0ubWlkcG9pbnQocFsyXSk7XHJcbiAgICBpZiAoYS55ID09IGIueSAmJiBiLnkgPT0gYy55KSByZXR1cm4gbGluZShwLCBsKVswXTtcclxuICAgIHZhciBtLCB4LCB5O1xyXG4gICAgaWYgKGEueSA9PSBiLnkpIHtcclxuICAgICAgICBtID0gLShiLnggLSBjLngpIC8gKGIueSAtIGMueSk7XHJcbiAgICAgICAgeCA9IHgxO1xyXG4gICAgICAgIHkgPSBtICogKHggLSB4MikgKyB5MjtcclxuICAgIH0gZWxzZSBpZiAoYi55ID09IGMueSkge1xyXG4gICAgICAgIG0gPSAtKGIueCAtIGEueCkgLyAoYi55IC0gYS55KTtcclxuICAgICAgICB4ID0geDI7XHJcbiAgICAgICAgeSA9IG0gKiAoeCAtIHgxKSArIHkxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgbTEgPSAtKGIueCAtIGEueCkgLyAoYi55IC0gYS55KSxcclxuICAgICAgICAgICAgbTIgPSAtKGIueCAtIGMueCkgLyAoYi55IC0gYy55KTtcclxuICAgICAgICBpZiAobTEgPT0gbTIpIHJldHVybiBsaW5lKHAsIGwpWzBdO1xyXG4gICAgICAgIHggPSAobTEgKiB4MSAtIG0yICogeDIgLSB5MSArIHkyKSAvIChtMSAtIG0yKTtcclxuICAgICAgICB5ID0gbTEgKiAoeCAtIHgxKSArIHkxO1xyXG4gICAgfVxyXG4gICAgdmFyIHIgPSBuZXcgVmVjdG9yKHgsIHkpLmRpc3RhbmNlVG8oYSksXHJcbiAgICAgICAgdCA9IGwgLyByLFxyXG4gICAgICAgIHQxID0gTWF0aC5hdGFuMihhLnkgLSB5LCBhLnggLSB4KSxcclxuICAgICAgICBkdCA9IHN0ZXAgKiB0IC8gbCxcclxuICAgICAgICBkID0gKChiLnggLSBhLngpICogKGMueSAtIGEueSkgLSAoYi55IC0gYS55KSAqIChjLnggLSBhLngpKSA8IDAgPyAtMSA6IDE7XHJcbiAgICAvL2lmKHBbMF1bMF09PTI5NiAmJiBwWzFdWzBdPT0zNjgpIGNvbnNvbGUubG9nKG0xLG0yLHgxLHkxLHgyLHkyKTtcclxuICAgIHAgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcih0IC8gZHQpOyBpKyspIHtcclxuICAgICAgICB2YXIgaiA9IGkgKiBkO1xyXG4gICAgICAgIHAucHVzaChbeCArIHIgKiBNYXRoLmNvcyh0MSArIGR0ICogaiksIHkgKyByICogTWF0aC5zaW4odDEgKyBkdCAqIGopXSk7XHJcbiAgICB9XHJcbiAgICBwLnB1c2goW3ggKyByICogTWF0aC5jb3ModDEgKyB0ICogZCksIHkgKyByICogTWF0aC5zaW4odDEgKyB0ICogZCldKTtcclxuICAgIHJldHVybiBwO1xyXG59O1xyXG5cclxudmFyIHJlbmRlcl9jdXJ2ZSA9IGZ1bmN0aW9uIChwLCBjcywgYzEsIGMyKSB7XHJcbiAgICBpZiAoY3MgPT09IHVuZGVmaW5lZCkgY3MgPSA3MiAqIDI7XHJcbiAgICBpZiAoYzEgPT09IHVuZGVmaW5lZCkgYzEgPSBbMCwgMCwgMF07XHJcbiAgICBpZiAoYzIgPT09IHVuZGVmaW5lZCkgYzIgPSBbMSwgMSwgMV07XHJcbiAgICB2YXIgayA9IDIuNTtcclxuICAgIGNzICo9IDIyIC8gMTI7XHJcbiAgICB2YXIgeCA9IFtdLFxyXG4gICAgICAgIHkgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHgucHVzaChwW2ldWzBdICogMik7XHJcbiAgICAgICAgeS5wdXNoKHBbaV1bMV0gKiAyKTtcclxuICAgIH1cclxuICAgIHZhciBtaW54ID0gbWluKHgpLFxyXG4gICAgICAgIG1pbnkgPSBtaW4oeSksXHJcbiAgICAgICAgbWF4eCA9IG1heCh4KSxcclxuICAgICAgICBtYXh5ID0gbWF4KHkpO1xyXG4gICAgdmFyIHcgPSBtYXh4IC0gbWlueCxcclxuICAgICAgICBoID0gbWF4eSAtIG1pbnk7XHJcbiAgICAvLyBmb3IodmFyIGkgPSAwOyBpIDwgeS5sZW5ndGg7IGkrKyl7XHJcbiAgICAvLyAgIHlbaV0gLT0gaDtcclxuICAgIC8vIH1cclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGNhbnZhcy53aWR0aCA9IE1hdGguY2VpbCh3ICsgY3MpO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IE1hdGguY2VpbChoICsgY3MpO1xyXG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgdmFyIGNhbnZhczIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGNhbnZhczIud2lkdGggPSBNYXRoLmNlaWwodyArIGNzKTtcclxuICAgIGNhbnZhczIuaGVpZ2h0ID0gTWF0aC5jZWlsKGggKyBjcyk7XHJcbiAgICB2YXIgY3R4MiA9IGNhbnZhczIuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHZhciBhID0gMDtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eDIuYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubGluZUNhcCA9IGN0eDIubGluZUNhcCA9ICdyb3VuZCc7XHJcbiAgICBjdHgubGluZUpvaW4gPSBjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuICAgIGN0eC5tb3ZlVG8oeFswXSAtIG1pbnggKyBjcyAvIDIsIHlbMF0gLSBtaW55ICsgY3MgLyAyKTtcclxuICAgIGN0eDIubW92ZVRvKHhbMF0gLSBtaW54ICsgY3MgLyAyLCB5WzBdIC0gbWlueSArIGNzIC8gMik7XHJcbiAgICBmb3IgKGkgPSAxOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGN0eC5saW5lVG8oeFtpXSAtIG1pbnggKyBjcyAvIDIsIHlbaV0gLSBtaW55ICsgY3MgLyAyKTtcclxuICAgICAgICBjdHgyLmxpbmVUbyh4W2ldIC0gbWlueCArIGNzIC8gMiwgeVtpXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gICAgfVxyXG4gICAgaSA9IDA7XHJcbiAgICB3aGlsZSAoYSA8IGNzIC8gaykge1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBjdHgyLmxpbmVXaWR0aCA9IGNzIC0gYSAqIGs7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgY3R4Mi5zdHJva2VTdHlsZSA9IHRvUkdCKGMyKTtcclxuICAgICAgICAgICAgYSArPSBjcyAvIDEwIC8gaztcclxuICAgICAgICAgICAgY3R4Mi5zdHJva2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGEgLyBjcyAqIGsgLyA0ICogMjU1O1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0b1JHQihbYzFbMF0gKyBjLCBjMVsxXSArIGMsIGMxWzJdICsgY10pO1xyXG4gICAgICAgICAgICBhICs9IGs7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4Mi5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcclxuICAgICAgICAgICAgY3R4Mi5zdHJva2UoKTtcclxuICAgICAgICAgICAgY3R4Mi5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpKys7XHJcbiAgICB9XHJcbiAgICBjdHgyLmdsb2JhbEFscGhhID0gMC43NTtcclxuICAgIGN0eDIuZHJhd0ltYWdlKGNhbnZhcywgMCwgMCk7XHJcbiAgICByZXR1cm4gW2NhbnZhczIsIFttaW54IC8gMiAtIGNzIC8gNCwgbWlueSAvIDIgLSBjcyAvIDRdXTtcclxufTtcclxuXHJcbi8vIHA6IGFycmF5IG9mIHBvaW50c1xyXG4vLyBjczogY2lyY2xlIHNpemVcclxuLy8gYzE6IGJvcmRlciBjb2xvclxyXG4vLyByZXR1cm5zOiBbW2JvcmRlciwgYm9keSwgb3ZlcmxheV0sIFtwb3NpdGlvbngsIHBvc2l0aW9ueV1dXHJcbnZhciByZW5kZXJfY3VydmUyID0gZnVuY3Rpb24gKHAsIGNzKSB7XHJcbiAgICB2YXIgY3NpID0gY3M7XHJcbiAgICBpZiAoY3MgPT09IHVuZGVmaW5lZCkgY3MgPSA3MiAqIDI7XHJcbiAgICB2YXIgayA9IDIuNTtcclxuICAgIGNzICo9IDIyIC8gMTI7XHJcbiAgICB2YXIgeCA9IFtdLFxyXG4gICAgICAgIHkgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHgucHVzaChwW2ldWzBdICogMik7XHJcbiAgICAgICAgeS5wdXNoKHBbaV1bMV0gKiAyKTtcclxuICAgIH1cclxuICAgIHZhciBtaW54ID0gbWluKHgpLFxyXG4gICAgICAgIG1pbnkgPSBtaW4oeSksXHJcbiAgICAgICAgbWF4eCA9IG1heCh4KSxcclxuICAgICAgICBtYXh5ID0gbWF4KHkpO1xyXG4gICAgdmFyIHcgPSBtYXh4IC0gbWlueCxcclxuICAgICAgICBoID0gbWF4eSAtIG1pbnk7XHJcbiAgICAvLyBmb3IodmFyIGkgPSAwOyBpIDwgeS5sZW5ndGg7IGkrKyl7XHJcbiAgICAvLyAgIHlbaV0gLT0gaDtcclxuICAgIC8vIH1cclxuICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBvdmVybGF5LndpZHRoID0gTWF0aC5jZWlsKHcgKyBjcyk7XHJcbiAgICBvdmVybGF5LmhlaWdodCA9IE1hdGguY2VpbChoICsgY3MpO1xyXG4gICAgdmFyIGN0eCA9IG92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHZhciBib3JkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIGJvcmRlci53aWR0aCA9IE1hdGguY2VpbCh3ICsgY3MpO1xyXG4gICAgYm9yZGVyLmhlaWdodCA9IE1hdGguY2VpbChoICsgY3MpO1xyXG4gICAgdmFyIGN0eDIgPSBib3JkZXIuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHZhciBib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBib2R5LndpZHRoID0gTWF0aC5jZWlsKHcgKyBjcyk7XHJcbiAgICBib2R5LmhlaWdodCA9IE1hdGguY2VpbChoICsgY3MpO1xyXG4gICAgdmFyIGN0eDMgPSBib2R5LmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB2YXIgYSA9IDA7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgyLmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4My5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5saW5lQ2FwID0gY3R4Mi5saW5lQ2FwID0gJ3JvdW5kJztcclxuICAgIGN0eC5saW5lSm9pbiA9IGN0eDIubGluZUpvaW4gPSAncm91bmQnO1xyXG4gICAgY3R4Mi5saW5lQ2FwID0gY3R4Mi5saW5lQ2FwID0gJ3JvdW5kJztcclxuICAgIGN0eDIubGluZUpvaW4gPSBjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuICAgIGN0eDMubGluZUNhcCA9IGN0eDIubGluZUNhcCA9ICdyb3VuZCc7XHJcbiAgICBjdHgzLmxpbmVKb2luID0gY3R4Mi5saW5lSm9pbiA9ICdyb3VuZCc7XHJcbiAgICBjdHgubW92ZVRvKHhbMF0gLSBtaW54ICsgY3MgLyAyLCB5WzBdIC0gbWlueSArIGNzIC8gMik7XHJcbiAgICBjdHgyLm1vdmVUbyh4WzBdIC0gbWlueCArIGNzIC8gMiwgeVswXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gICAgY3R4My5tb3ZlVG8oeFswXSAtIG1pbnggKyBjcyAvIDIsIHlbMF0gLSBtaW55ICsgY3MgLyAyKTtcclxuICAgIGZvciAoaSA9IDE7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY3R4LmxpbmVUbyh4W2ldIC0gbWlueCArIGNzIC8gMiwgeVtpXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gICAgICAgIGN0eDIubGluZVRvKHhbaV0gLSBtaW54ICsgY3MgLyAyLCB5W2ldIC0gbWlueSArIGNzIC8gMik7XHJcbiAgICAgICAgY3R4My5saW5lVG8oeFtpXSAtIG1pbnggKyBjcyAvIDIsIHlbaV0gLSBtaW55ICsgY3MgLyAyKTtcclxuICAgIH1cclxuICAgIGkgPSAwO1xyXG4gICAgd2hpbGUgKGEgPCBjcyAvIGspIHtcclxuICAgICAgICBjdHgubGluZVdpZHRoID0gY3R4Mi5saW5lV2lkdGggPSBjdHgzLmxpbmVXaWR0aCA9IGNzIC0gYSAqIGs7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgY3R4Mi5zdHJva2VTdHlsZSA9ICcjRkZGJztcclxuICAgICAgICAgICAgYSArPSBjcyAvIDEwIC8gaztcclxuICAgICAgICAgICAgY3R4Mi5zdHJva2UoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGEgLyBjcyAqIGsgLyA4O1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBjO1xyXG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRic7XHJcbiAgICAgICAgICAgIGEgKz0gaztcclxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjdHgzLmZpbGxTdHlsZSA9ICcjRkZGJztcclxuICAgICAgICAgICAgICAgIGN0eDMuZmlsbFJlY3QoMCwgMCwgYm9keS53aWR0aCwgYm9keS5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgY3R4My5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24taW4nO1xyXG4gICAgICAgICAgICAgICAgY3R4My5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcclxuICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNTtcclxuICAgIGN0eC5kcmF3SW1hZ2Uob3ZlcmxheSwgMCwgMCk7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIFtib3JkZXIsIGJvZHksIG92ZXJsYXldLFxyXG4gICAgICAgIFttaW54IC8gMiAtIGNzIC8gNCwgbWlueSAvIDIgLSBjcyAvIDRdXHJcbiAgICBdO1xyXG59OyJdLCJmaWxlIjoibnNvdXRpbHMyLmpzIn0=

(function() {
	var lastTime = 0;
	var vendors = ["ms", "moz", "webkit", "o"];
	for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
		window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];
		window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] ||
			window[vendors[x] + "CancelRequestAnimationFrame"];
	}

	if (!window.requestAnimationFrame)
		window.requestAnimationFrame = function(callback, element) {
			var currTime = new Date().getTime();
			var timeToCall = Math.max(0, 16 - (currTime - lastTime));
			var id = window.setTimeout(function() {
					callback(currTime + timeToCall);
				},
				timeToCall);
			lastTime = currTime + timeToCall;
			return id;
		};

	if (!window.cancelAnimationFrame)
		window.cancelAnimationFrame = function(id) {
			clearTimeout(id);
		};
}());

String.prototype.pad = function(length, fill) {
	fill = fill || "0";
	var padded = Array(length + 1).join("0") + this;
	return padded.substring(padded.length - length);
};

Array.prototype.equals = function(other) {
	if (this.length !== other.length) return false;
	for (var i = 0; i < this.length; i++) {
		if (this[i] != other[i]) return false;
	}
	return true;
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJQb2x5ZmlsbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcblx0dmFyIGxhc3RUaW1lID0gMDtcclxuXHR2YXIgdmVuZG9ycyA9IFtcIm1zXCIsIFwibW96XCIsIFwid2Via2l0XCIsIFwib1wiXTtcclxuXHRmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcclxuXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArIFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xyXG5cdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdIHx8XHJcblx0XHRcdHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XHJcblx0fVxyXG5cclxuXHRpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXHJcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcclxuXHRcdFx0dmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xyXG5cdFx0XHR2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR0aW1lVG9DYWxsKTtcclxuXHRcdFx0bGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XHJcblx0XHRcdHJldHVybiBpZDtcclxuXHRcdH07XHJcblxyXG5cdGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxyXG5cdFx0d2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KGlkKTtcclxuXHRcdH07XHJcbn0oKSk7XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnBhZCA9IGZ1bmN0aW9uKGxlbmd0aCwgZmlsbCkge1xyXG5cdGZpbGwgPSBmaWxsIHx8IFwiMFwiO1xyXG5cdHZhciBwYWRkZWQgPSBBcnJheShsZW5ndGggKyAxKS5qb2luKFwiMFwiKSArIHRoaXM7XHJcblx0cmV0dXJuIHBhZGRlZC5zdWJzdHJpbmcocGFkZGVkLmxlbmd0aCAtIGxlbmd0aCk7XHJcbn07XHJcblxyXG5BcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24ob3RoZXIpIHtcclxuXHRpZiAodGhpcy5sZW5ndGggIT09IG90aGVyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKHRoaXNbaV0gIT0gb3RoZXJbaV0pIHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn07Il0sImZpbGUiOiJQb2x5ZmlsbC5qcyJ9

var Editor = Editor || {};

class Color {
	static hex(red, green, blue) {
		red = Math.floor(Math.min(red, 255));
		green = Math.floor(Math.min(green, 255));
		blue = Math.floor(Math.min(blue, 255));

		var redH = red.toString(16),
			greenH = green.toString(16),
			blueH = blue.toString(16);

		return redH.pad(2) + greenH.pad(2) + blueH.pad(2);
	}
	static fromArray(colors) {
		return new Color(colors[0], colors[1], colors[2]);
	}
	constructor(_red, _green, _blue) {
		this.red = parseFloat(_red);
		this.green = parseFloat(_green);
		this.blue = parseFloat(_blue);
	}
	hex() {
		return Color.hex(this.red, this.green, this.blue);
	}

	toArray() {
		return [this.red, this.green, this.blue];
	}
}

if (typeof module !== "undefined") {
	module.exports = Color;
} else {
	window.Color = Editor.Color = Color;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJDb2xvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxuY2xhc3MgQ29sb3Ige1xyXG5cdHN0YXRpYyBoZXgocmVkLCBncmVlbiwgYmx1ZSkge1xyXG5cdFx0cmVkID0gTWF0aC5mbG9vcihNYXRoLm1pbihyZWQsIDI1NSkpO1xyXG5cdFx0Z3JlZW4gPSBNYXRoLmZsb29yKE1hdGgubWluKGdyZWVuLCAyNTUpKTtcclxuXHRcdGJsdWUgPSBNYXRoLmZsb29yKE1hdGgubWluKGJsdWUsIDI1NSkpO1xyXG5cclxuXHRcdHZhciByZWRIID0gcmVkLnRvU3RyaW5nKDE2KSxcclxuXHRcdFx0Z3JlZW5IID0gZ3JlZW4udG9TdHJpbmcoMTYpLFxyXG5cdFx0XHRibHVlSCA9IGJsdWUudG9TdHJpbmcoMTYpO1xyXG5cclxuXHRcdHJldHVybiByZWRILnBhZCgyKSArIGdyZWVuSC5wYWQoMikgKyBibHVlSC5wYWQoMik7XHJcblx0fVxyXG5cdHN0YXRpYyBmcm9tQXJyYXkoY29sb3JzKSB7XHJcblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yc1swXSwgY29sb3JzWzFdLCBjb2xvcnNbMl0pO1xyXG5cdH1cclxuXHRjb25zdHJ1Y3RvcihfcmVkLCBfZ3JlZW4sIF9ibHVlKSB7XHJcblx0XHR0aGlzLnJlZCA9IHBhcnNlRmxvYXQoX3JlZCk7XHJcblx0XHR0aGlzLmdyZWVuID0gcGFyc2VGbG9hdChfZ3JlZW4pO1xyXG5cdFx0dGhpcy5ibHVlID0gcGFyc2VGbG9hdChfYmx1ZSk7XHJcblx0fVxyXG5cdGhleCgpIHtcclxuXHRcdHJldHVybiBDb2xvci5oZXgodGhpcy5yZWQsIHRoaXMuZ3JlZW4sIHRoaXMuYmx1ZSk7XHJcblx0fVxyXG5cclxuXHR0b0FycmF5KCkge1xyXG5cdFx0cmV0dXJuIFt0aGlzLnJlZCwgdGhpcy5ncmVlbiwgdGhpcy5ibHVlXTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBDb2xvcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuQ29sb3IgPSBFZGl0b3IuQ29sb3IgPSBDb2xvcjtcclxufSJdLCJmaWxlIjoiQ29sb3IuanMifQ==

var Editor = Editor || {};

var array_values = function (array) {
	var out = [];
	for (var key in array) out.push(array[key]);
	return out;
};

class Math2 {
	static Cpn(p, n) {
		var out;
		if (p < 0 || p > n)
			return 0;
		p = Math.min(p, n - p);
		out = 1;
		for (var i = 1; i < p + 1; i += 1)
			out = out * (n - p + i) / i;
		return out;
	}
	static distanceFromPoints(array) {
		var distance = 0;
		for (var i = 1; i < array.length; i += 1) {
			distance += array[i].distanceTo(array[i - 1]);
		}
		return distance;
	}
	static isLeft(a, b, c) {
		return ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0;
	}
	static getCircumCircle(p1, p2, p3) {
		var x1 = p1.x,
			y1 = p1.y,
			x2 = p2.x,
			y2 = p2.y,
			x3 = p3.x,
			y3 = p3.y;
		var D = 2 * (x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2));
		var Ux = ((x1 * x1 + y1 * y1) * (y2 - y3) + (x2 * x2 + y2 * y2) * (y3 - y1) + (x3 * x3 + y3 * y3) * (y1 - y2)) / D;
		var Uy = ((x1 * x1 + y1 * y1) * (x3 - x2) + (x2 * x2 + y2 * y2) * (x1 - x3) + (x3 * x3 + y3 * y3) * (x2 - x1)) / D;
		var center = new Vector(Ux, Uy);
		var r = center.distanceTo(new Vector(x1, y1));
		return [center, r];
	}
	static pointAtDistance(array, distance) {
		var current_distance = 0,
			last_distance = 0,
			coord, angle, cart, new_distance;
		if (array.length < 2)
			return [new Vector(0, 0), new Vector(0, 0)];
		if (distance === 0) {
			angle = array[0].angleTo(array[1]);
			return [array[0], new Vector(angle, 0)];
		}
		if (Math2.distanceFromPoints(array) <= distance) {
			angle = array[array.length - 2].angleTo(array[array.length - 1]);
			return [array[array.length - 1], new Vector(angle, array.length - 2)];
		}
		for (var i = 0; i < array.length - 1; i += 1) {
			new_distance = array[i].distanceTo(array[i + 1]);
			current_distance += new_distance;
			if (distance <= current_distance) break;
		}
		current_distance -= new_distance;
		if (distance == current_distance) {
			coord = array[i];
			angle = array[i].angleTo(array[i + 1]);
		} else {
			angle = array[i].angleTo(array[i + 1]);
			cart = new Vector(distance - current_distance, angle);
			if (array[i].x > array[i + 1].x)
				coord = new Vector(array[i].x - cart.x, array[i].y - cart.y);
			else
				coord = new Vector(array[i].x + cart.x, array[i].y + cart.y);
		}
		return [coord, new Vector(angle, i)];
	}
	static pointOnLine(p1, p2, length) {
		var fullLength = p1.distanceTo(p2);
		var n = fullLength - length;

		var x = (n * p1.x + length * p2.x) / fullLength;
		var y = (n * p1.y + length * p2.y) / fullLength;
		return new Vector(x, y);
	}
	static rotate(center, point, angle) {
		var nx = Math.cos(angle),
			ny = Math.sin(angle);
		return new Vector(nx * (point.x - center.x) - ny * (point.y - center.y) + center.x, ny * (point.x - center.x) + nx * (point.y - center.y) + center.y);
	}
}

class Bezier {
	constructor(points) {
		this.points = points;
		this.order = points.length;

		this.step = 0.0025 / this.order;
		this.pos = {};
		this.calcPoints();
	}
	at(t) {
		if (typeof this.pos[t] !== "undefined") return this.pos[t];
		var x = 0,
			y = 0;
		var n = this.order - 1;
		for (var i = 0; i <= n; i += 1) {
			var c = Math2.Cpn(i, n) * Math.pow((1 - t), (n - i)) * Math.pow(t, i);
			x += c * this.points[i].x;
			y += c * this.points[i].y;
		}
		this.pos[t] = new Vector(x, y);
		return new Vector(x, y);
	}
	calcPoints() {
		if (Object.keys(this.pos).length)
			return;
		this.pxLength = 0;
		var prev = this.at(0),
			current;
		for (var i = 0; i < 1 + this.step; i += this.step) {
			current = this.at(i);
			this.pxLength += prev.distanceTo(current);
			prev = current;
		}
	}
	pointAtDistance(dist) {
		switch (this.order) {
			case 0:
				return false;
			case 1:
				return this.points[0];
			default:
				this.calcPoints();
				return Math2.pointAtDistance(array_values(this.pos), dist)[0];
		}
	}
}

if (typeof module !== "undefined") {
	module.exports = Math2;
	module.exports.Bezier = Bezier;
} else {
	window.Math2 = Editor.Math2 = Math2;
	window.Bezier = Editor.Bezier = Bezier;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJNYXRoMi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxudmFyIGFycmF5X3ZhbHVlcyA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG5cdHZhciBvdXQgPSBbXTtcclxuXHRmb3IgKHZhciBrZXkgaW4gYXJyYXkpIG91dC5wdXNoKGFycmF5W2tleV0pO1xyXG5cdHJldHVybiBvdXQ7XHJcbn07XHJcblxyXG5jbGFzcyBNYXRoMiB7XHJcblx0c3RhdGljIENwbihwLCBuKSB7XHJcblx0XHR2YXIgb3V0O1xyXG5cdFx0aWYgKHAgPCAwIHx8IHAgPiBuKVxyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdHAgPSBNYXRoLm1pbihwLCBuIC0gcCk7XHJcblx0XHRvdXQgPSAxO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBwICsgMTsgaSArPSAxKVxyXG5cdFx0XHRvdXQgPSBvdXQgKiAobiAtIHAgKyBpKSAvIGk7XHJcblx0XHRyZXR1cm4gb3V0O1xyXG5cdH1cclxuXHRzdGF0aWMgZGlzdGFuY2VGcm9tUG9pbnRzKGFycmF5KSB7XHJcblx0XHR2YXIgZGlzdGFuY2UgPSAwO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBhcnJheS5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHRkaXN0YW5jZSArPSBhcnJheVtpXS5kaXN0YW5jZVRvKGFycmF5W2kgLSAxXSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGlzdGFuY2U7XHJcblx0fVxyXG5cdHN0YXRpYyBpc0xlZnQoYSwgYiwgYykge1xyXG5cdFx0cmV0dXJuICgoYi54IC0gYS54KSAqIChjLnkgLSBhLnkpIC0gKGIueSAtIGEueSkgKiAoYy54IC0gYS54KSkgPCAwO1xyXG5cdH1cclxuXHRzdGF0aWMgZ2V0Q2lyY3VtQ2lyY2xlKHAxLCBwMiwgcDMpIHtcclxuXHRcdHZhciB4MSA9IHAxLngsXHJcblx0XHRcdHkxID0gcDEueSxcclxuXHRcdFx0eDIgPSBwMi54LFxyXG5cdFx0XHR5MiA9IHAyLnksXHJcblx0XHRcdHgzID0gcDMueCxcclxuXHRcdFx0eTMgPSBwMy55O1xyXG5cdFx0dmFyIEQgPSAyICogKHgxICogKHkyIC0geTMpICsgeDIgKiAoeTMgLSB5MSkgKyB4MyAqICh5MSAtIHkyKSk7XHJcblx0XHR2YXIgVXggPSAoKHgxICogeDEgKyB5MSAqIHkxKSAqICh5MiAtIHkzKSArICh4MiAqIHgyICsgeTIgKiB5MikgKiAoeTMgLSB5MSkgKyAoeDMgKiB4MyArIHkzICogeTMpICogKHkxIC0geTIpKSAvIEQ7XHJcblx0XHR2YXIgVXkgPSAoKHgxICogeDEgKyB5MSAqIHkxKSAqICh4MyAtIHgyKSArICh4MiAqIHgyICsgeTIgKiB5MikgKiAoeDEgLSB4MykgKyAoeDMgKiB4MyArIHkzICogeTMpICogKHgyIC0geDEpKSAvIEQ7XHJcblx0XHR2YXIgY2VudGVyID0gbmV3IFZlY3RvcihVeCwgVXkpO1xyXG5cdFx0dmFyIHIgPSBjZW50ZXIuZGlzdGFuY2VUbyhuZXcgVmVjdG9yKHgxLCB5MSkpO1xyXG5cdFx0cmV0dXJuIFtjZW50ZXIsIHJdO1xyXG5cdH1cclxuXHRzdGF0aWMgcG9pbnRBdERpc3RhbmNlKGFycmF5LCBkaXN0YW5jZSkge1xyXG5cdFx0dmFyIGN1cnJlbnRfZGlzdGFuY2UgPSAwLFxyXG5cdFx0XHRsYXN0X2Rpc3RhbmNlID0gMCxcclxuXHRcdFx0Y29vcmQsIGFuZ2xlLCBjYXJ0LCBuZXdfZGlzdGFuY2U7XHJcblx0XHRpZiAoYXJyYXkubGVuZ3RoIDwgMilcclxuXHRcdFx0cmV0dXJuIFtuZXcgVmVjdG9yKDAsIDApLCBuZXcgVmVjdG9yKDAsIDApXTtcclxuXHRcdGlmIChkaXN0YW5jZSA9PT0gMCkge1xyXG5cdFx0XHRhbmdsZSA9IGFycmF5WzBdLmFuZ2xlVG8oYXJyYXlbMV0pO1xyXG5cdFx0XHRyZXR1cm4gW2FycmF5WzBdLCBuZXcgVmVjdG9yKGFuZ2xlLCAwKV07XHJcblx0XHR9XHJcblx0XHRpZiAoTWF0aDIuZGlzdGFuY2VGcm9tUG9pbnRzKGFycmF5KSA8PSBkaXN0YW5jZSkge1xyXG5cdFx0XHRhbmdsZSA9IGFycmF5W2FycmF5Lmxlbmd0aCAtIDJdLmFuZ2xlVG8oYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV0pO1xyXG5cdFx0XHRyZXR1cm4gW2FycmF5W2FycmF5Lmxlbmd0aCAtIDFdLCBuZXcgVmVjdG9yKGFuZ2xlLCBhcnJheS5sZW5ndGggLSAyKV07XHJcblx0XHR9XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aCAtIDE7IGkgKz0gMSkge1xyXG5cdFx0XHRuZXdfZGlzdGFuY2UgPSBhcnJheVtpXS5kaXN0YW5jZVRvKGFycmF5W2kgKyAxXSk7XHJcblx0XHRcdGN1cnJlbnRfZGlzdGFuY2UgKz0gbmV3X2Rpc3RhbmNlO1xyXG5cdFx0XHRpZiAoZGlzdGFuY2UgPD0gY3VycmVudF9kaXN0YW5jZSkgYnJlYWs7XHJcblx0XHR9XHJcblx0XHRjdXJyZW50X2Rpc3RhbmNlIC09IG5ld19kaXN0YW5jZTtcclxuXHRcdGlmIChkaXN0YW5jZSA9PSBjdXJyZW50X2Rpc3RhbmNlKSB7XHJcblx0XHRcdGNvb3JkID0gYXJyYXlbaV07XHJcblx0XHRcdGFuZ2xlID0gYXJyYXlbaV0uYW5nbGVUbyhhcnJheVtpICsgMV0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YW5nbGUgPSBhcnJheVtpXS5hbmdsZVRvKGFycmF5W2kgKyAxXSk7XHJcblx0XHRcdGNhcnQgPSBuZXcgVmVjdG9yKGRpc3RhbmNlIC0gY3VycmVudF9kaXN0YW5jZSwgYW5nbGUpO1xyXG5cdFx0XHRpZiAoYXJyYXlbaV0ueCA+IGFycmF5W2kgKyAxXS54KVxyXG5cdFx0XHRcdGNvb3JkID0gbmV3IFZlY3RvcihhcnJheVtpXS54IC0gY2FydC54LCBhcnJheVtpXS55IC0gY2FydC55KTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGNvb3JkID0gbmV3IFZlY3RvcihhcnJheVtpXS54ICsgY2FydC54LCBhcnJheVtpXS55ICsgY2FydC55KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBbY29vcmQsIG5ldyBWZWN0b3IoYW5nbGUsIGkpXTtcclxuXHR9XHJcblx0c3RhdGljIHBvaW50T25MaW5lKHAxLCBwMiwgbGVuZ3RoKSB7XHJcblx0XHR2YXIgZnVsbExlbmd0aCA9IHAxLmRpc3RhbmNlVG8ocDIpO1xyXG5cdFx0dmFyIG4gPSBmdWxsTGVuZ3RoIC0gbGVuZ3RoO1xyXG5cclxuXHRcdHZhciB4ID0gKG4gKiBwMS54ICsgbGVuZ3RoICogcDIueCkgLyBmdWxsTGVuZ3RoO1xyXG5cdFx0dmFyIHkgPSAobiAqIHAxLnkgKyBsZW5ndGggKiBwMi55KSAvIGZ1bGxMZW5ndGg7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3Rvcih4LCB5KTtcclxuXHR9XHJcblx0c3RhdGljIHJvdGF0ZShjZW50ZXIsIHBvaW50LCBhbmdsZSkge1xyXG5cdFx0dmFyIG54ID0gTWF0aC5jb3MoYW5nbGUpLFxyXG5cdFx0XHRueSA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yKG54ICogKHBvaW50LnggLSBjZW50ZXIueCkgLSBueSAqIChwb2ludC55IC0gY2VudGVyLnkpICsgY2VudGVyLngsIG55ICogKHBvaW50LnggLSBjZW50ZXIueCkgKyBueCAqIChwb2ludC55IC0gY2VudGVyLnkpICsgY2VudGVyLnkpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgQmV6aWVyIHtcclxuXHRjb25zdHJ1Y3Rvcihwb2ludHMpIHtcclxuXHRcdHRoaXMucG9pbnRzID0gcG9pbnRzO1xyXG5cdFx0dGhpcy5vcmRlciA9IHBvaW50cy5sZW5ndGg7XHJcblxyXG5cdFx0dGhpcy5zdGVwID0gMC4wMDI1IC8gdGhpcy5vcmRlcjtcclxuXHRcdHRoaXMucG9zID0ge307XHJcblx0XHR0aGlzLmNhbGNQb2ludHMoKTtcclxuXHR9XHJcblx0YXQodCkge1xyXG5cdFx0aWYgKHR5cGVvZiB0aGlzLnBvc1t0XSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHRoaXMucG9zW3RdO1xyXG5cdFx0dmFyIHggPSAwLFxyXG5cdFx0XHR5ID0gMDtcclxuXHRcdHZhciBuID0gdGhpcy5vcmRlciAtIDE7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8PSBuOyBpICs9IDEpIHtcclxuXHRcdFx0dmFyIGMgPSBNYXRoMi5DcG4oaSwgbikgKiBNYXRoLnBvdygoMSAtIHQpLCAobiAtIGkpKSAqIE1hdGgucG93KHQsIGkpO1xyXG5cdFx0XHR4ICs9IGMgKiB0aGlzLnBvaW50c1tpXS54O1xyXG5cdFx0XHR5ICs9IGMgKiB0aGlzLnBvaW50c1tpXS55O1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5wb3NbdF0gPSBuZXcgVmVjdG9yKHgsIHkpO1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IoeCwgeSk7XHJcblx0fVxyXG5cdGNhbGNQb2ludHMoKSB7XHJcblx0XHRpZiAoT2JqZWN0LmtleXModGhpcy5wb3MpLmxlbmd0aClcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0dGhpcy5weExlbmd0aCA9IDA7XHJcblx0XHR2YXIgcHJldiA9IHRoaXMuYXQoMCksXHJcblx0XHRcdGN1cnJlbnQ7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDEgKyB0aGlzLnN0ZXA7IGkgKz0gdGhpcy5zdGVwKSB7XHJcblx0XHRcdGN1cnJlbnQgPSB0aGlzLmF0KGkpO1xyXG5cdFx0XHR0aGlzLnB4TGVuZ3RoICs9IHByZXYuZGlzdGFuY2VUbyhjdXJyZW50KTtcclxuXHRcdFx0cHJldiA9IGN1cnJlbnQ7XHJcblx0XHR9XHJcblx0fVxyXG5cdHBvaW50QXREaXN0YW5jZShkaXN0KSB7XHJcblx0XHRzd2l0Y2ggKHRoaXMub3JkZXIpIHtcclxuXHRcdFx0Y2FzZSAwOlxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdHJldHVybiB0aGlzLnBvaW50c1swXTtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHR0aGlzLmNhbGNQb2ludHMoKTtcclxuXHRcdFx0XHRyZXR1cm4gTWF0aDIucG9pbnRBdERpc3RhbmNlKGFycmF5X3ZhbHVlcyh0aGlzLnBvcyksIGRpc3QpWzBdO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hdGgyO1xyXG5cdG1vZHVsZS5leHBvcnRzLkJlemllciA9IEJlemllcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuTWF0aDIgPSBFZGl0b3IuTWF0aDIgPSBNYXRoMjtcclxuXHR3aW5kb3cuQmV6aWVyID0gRWRpdG9yLkJlemllciA9IEJlemllcjtcclxufSJdLCJmaWxlIjoiTWF0aDIuanMifQ==

var Editor = Editor || {};

class Vector {
	constructor(_x, _y) {
		this.x = _x;
		this.y = _y;
	}
	angleTo(other) {
		var dx = other.x - this.x;
		var dy = other.y - this.y;
		return Math.atan(dy / dx);
	}
	distanceTo(other) {
		var dx = other.x - this.x;
		var dy = other.y - this.y;
		return Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
	}
	midpoint(other) {
		return [(this.x + other.x) / 2, (this.y + other.y) / 2];
	}
	equals(other) {
		return this.x == other.x && this.y == other.y;
	}
	toPol() {
		// treating x, y as r, theta
		var x = this.x * Math.cos(this.y);
		var y = this.x * Math.sin(this.y);
		return new Vector(x, y);
	}
	get m() {
		return Math.pow(this.x * this.x + this.y * this.y, 0.5);
	}
	add(v) {
		return new Vector(this.x + v.x, this.y + v.y);
	}
	sub(v) {
		return new Vector(this.x - v.x, this.y - v.y);
	}
	norm() {
		return Vector(this.x / this.m, this.y / this.m);
	}
	toString(separator) {
		separator = separator || ",";
		return [this.x, this.y].join(separator);
	}
	toArray() {
		return [this.x, this.y];
	}
}

if (typeof module !== "undefined") {
	module.exports = Vector;
} else {
	window.Vector = Editor.Vector = Vector;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJWZWN0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbmNsYXNzIFZlY3RvciB7XHJcblx0Y29uc3RydWN0b3IoX3gsIF95KSB7XHJcblx0XHR0aGlzLnggPSBfeDtcclxuXHRcdHRoaXMueSA9IF95O1xyXG5cdH1cclxuXHRhbmdsZVRvKG90aGVyKSB7XHJcblx0XHR2YXIgZHggPSBvdGhlci54IC0gdGhpcy54O1xyXG5cdFx0dmFyIGR5ID0gb3RoZXIueSAtIHRoaXMueTtcclxuXHRcdHJldHVybiBNYXRoLmF0YW4oZHkgLyBkeCk7XHJcblx0fVxyXG5cdGRpc3RhbmNlVG8ob3RoZXIpIHtcclxuXHRcdHZhciBkeCA9IG90aGVyLnggLSB0aGlzLng7XHJcblx0XHR2YXIgZHkgPSBvdGhlci55IC0gdGhpcy55O1xyXG5cdFx0cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhkeCwgMikgKyBNYXRoLnBvdyhkeSwgMikpO1xyXG5cdH1cclxuXHRtaWRwb2ludChvdGhlcikge1xyXG5cdFx0cmV0dXJuIFsodGhpcy54ICsgb3RoZXIueCkgLyAyLCAodGhpcy55ICsgb3RoZXIueSkgLyAyXTtcclxuXHR9XHJcblx0ZXF1YWxzKG90aGVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy54ID09IG90aGVyLnggJiYgdGhpcy55ID09IG90aGVyLnk7XHJcblx0fVxyXG5cdHRvUG9sKCkge1xyXG5cdFx0Ly8gdHJlYXRpbmcgeCwgeSBhcyByLCB0aGV0YVxyXG5cdFx0dmFyIHggPSB0aGlzLnggKiBNYXRoLmNvcyh0aGlzLnkpO1xyXG5cdFx0dmFyIHkgPSB0aGlzLnggKiBNYXRoLnNpbih0aGlzLnkpO1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IoeCwgeSk7XHJcblx0fVxyXG5cdGdldCBtKCkge1xyXG5cdFx0cmV0dXJuIE1hdGgucG93KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSwgMC41KTtcclxuXHR9XHJcblx0YWRkKHYpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KTtcclxuXHR9XHJcblx0c3ViKHYpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55KTtcclxuXHR9XHJcblx0bm9ybSgpIHtcclxuXHRcdHJldHVybiBWZWN0b3IodGhpcy54IC8gdGhpcy5tLCB0aGlzLnkgLyB0aGlzLm0pO1xyXG5cdH1cclxuXHR0b1N0cmluZyhzZXBhcmF0b3IpIHtcclxuXHRcdHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCBcIixcIjtcclxuXHRcdHJldHVybiBbdGhpcy54LCB0aGlzLnldLmpvaW4oc2VwYXJhdG9yKTtcclxuXHR9XHJcblx0dG9BcnJheSgpIHtcclxuXHRcdHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRtb2R1bGUuZXhwb3J0cyA9IFZlY3RvcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuVmVjdG9yID0gRWRpdG9yLlZlY3RvciA9IFZlY3RvcjtcclxufVxyXG4iXSwiZmlsZSI6IlZlY3Rvci5qcyJ9

var Editor = Editor || {};

if (typeof require !== "undefined") {
	Math2 = require("./../Math2");
	Bezier = Math2.Bezier;
	Vector = require("./../Vector");
}

var curveTypes = {
	"C": "catmull",
	"B": "bezier",
	"L": "linear",
	"P": "pass-through",
	"catmull": "C",
	"bezier": "B",
	"linear": "L",
	"pass-through": "P"
};
var additionTypes = [null, "normal", "soft", "drum"];

class HitObject {
	static serializeSoundTypes(array) {
		var number = 0;
		if (array.indexOf("whistle") >= 0) number |= 2;
		if (array.indexOf("finish") >= 0) number |= 4;
		if (array.indexOf("clap") >= 0) number |= 8;
		return number;
	}
	static parseAdditions(str) {
		var additions = {};
		if (!str) return additions;
		var parts = str.split(":");

		if (parts[0] && parts[0] !== "0")
			additions.sample = additionTypes[parseInt(parts[0])];
		if (parts[1] && parts[1] !== "0")
			additions.additionalSample = additionTypes[parseInt(parts[1])];
		if (parts[2] && parts[2] !== "0")
			additions.customSampleIndex = parseInt(parts[2]);
		if (parts[3] && parts[3] !== "0")
			additions.hitsoundVolume = parseInt(parts[3]);
		if (parts[4] && parts[4] !== "0")
			additions.hitsound = parts[4];
		return additions;
	}
	static parseEdgeAdditions(str) {
		var additions = {};
		if (!str) return additions;
		var parts = str.split(":");

		if (parts[0] && parts[0] !== "0")
			additions.sampleset = additionTypes[parseInt(parts[0])];
		if (parts[1] && parts[1] !== "0")
			additions.additionsSampleset = additionTypes[parseInt(parts[1])];
		return additions;
	}
	static parse(line) {
		var parts = line.split(",");
		var soundType = parseInt(parts[4]);
		var objectType = parseInt(parts[3]);
		var properties = {};
		var i;

		properties.originalLine = line;
		properties.startTime = parseInt(parts[2]);
		properties.soundTypes = [];
		properties.newCombo = (objectType & 4) == 4;
		properties.position = new Vector(parseInt(parts[0]), parseInt(parts[1]));
		if ((objectType & 8) != 8) properties.customColor = (objectType >> 4) & 7;

		if ((soundType & 2) == 2) properties.soundTypes.push("whistle");
		if ((soundType & 4) == 4) properties.soundTypes.push("finish");
		if ((soundType & 8) == 8) properties.soundTypes.push("clap");
		if (properties.soundTypes.length === 0) properties.soundTypes.push("normal");

		if ((objectType & 1) == 1) {
			properties.additions = HitObject.parseAdditions(parts[5]);
			return new HitCircle(properties);
		} else if ((objectType & 2) == 2) {
			properties.repeatCount = parseInt(parts[6]);
			properties.pixelLength = parseFloat(parts[7]);
			properties.additions = HitObject.parseAdditions(parts[10]);
			properties.edges = [];
			properties.points = [properties.position];
			var points = (parts[5] || "").split("|");
			if (points.length) {
				properties.curveType = curveTypes[points[0]] || "unknown";
				for (i = 1; i < points.length; i += 1) {
					var coordinates = points[i].split(":");
					properties.points.push(new Vector(
						parseInt(coordinates[0]),
						parseInt(coordinates[1])
					));
				}
			}
			var edgeSounds = [];
			var edgeAdditions = [];
			if (parts[8]) edgeSounds = parts[8].split("|");
			if (parts[9]) edgeAdditions = parts[9].split("|");

			for (i = 0; i < properties.repeatCount + 1; i += 1) {
				var edge = {
					"soundTypes": [],
					"additions": HitObject.parseEdgeAdditions(edgeAdditions[i])
				};
				if (edgeSounds[i]) {
					var sound = parseInt(edgeSounds[i]);
					if ((sound & 2) == 2) edge.soundTypes.push("whistle");
					if ((sound & 4) == 4) edge.soundTypes.push("finish");
					if ((sound & 8) == 8) edge.soundTypes.push("clap");
					if (edge.soundTypes.length === 0) edge.soundTypes.push("normal");
				} else {
					edge.soundTypes.push("normal");
				}
				properties.edges.push(edge);
			}

			return new Slider(properties);
		} else if ((objectType & 8) == 8) {
			properties.endTime = parseInt(parts[5]);
			properties.duration = properties.endTime - properties.startTime;
			properties.additions = HitObject.parseAdditions(parts[6]);
			return new Spinner(properties);
		}
	}
	constructor(properties) {
		for (var key in properties) {
			this[key] = properties[key];
		}
		this.selected = false;
	}
	serialize() {
		throw "Not implemented.";
	}
	render() {
		throw "Not implemented.";
	}
	renderTimeline() {
		throw "Not implemented.";
	}
}

class HitCircle extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = 0.8;
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(1 | (this.newCombo ? 4 : 0) | ((this.customColor & 7) << 4));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	render(t, colIndex, comboNumber) {
		var r_as;
		var i = this.beatmap.HitObjects.indexOf(this);
		if (!t) t = Editor.source.t;
		if (!colIndex || !comboNumber) {
			if (!colIndex) colIndex = Editor.objc[i][0] % Editor.cols.length;
			if (!comboNumber) comboNumber = Editor.objc[i][1];
		}
		var ar = ars(parseFloat(this.beatmap.ApproachRate));
		var cs = cspx(parseFloat(this.beatmap.CircleSize));
		var offset = this.startTime / 1000;
		var x = this.position.x - cs / 2,
			y = this.position.y - cs / 2;
		var td = offset - t;
		if (td > ar || td < -this.fadetime) return false;
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		if (td > 0) {
			ctx.globalAlpha = 2 - 2 * td / ar;
			r_as = cs * (2.5 * td / ar + 1);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		} else {
			ctx.globalAlpha = Math.max(1 + td / this.fadetime, 0);
			r_as = cs * Math.min(-td / ar + 1, 13 / 12);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin.hitcircle, x, y, cs, cs);
		}

		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin.hitcircle.height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);

		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		ctx.restore();
		return true;
	}
	timelineRender() {
		var i = this.beatmap.HitObjects.indexOf(this);
		var colIndex = Editor.objc[i][0] % Editor.cols.length;
		var comboNumber = Editor.objc[i][1];
		var ctx = document.getElementById('timeline2').getContext('2d');
		var width = $(window).width() * 0.8;
		var height = $(window).height() * 0.12;
		var cs = height * 0.8;
		var x = ((this.startTime / 1000 - Editor.source.t) * Editor.options.timelinezoom / 6 + .5) * width - cs / 2;
		if (x < -cs || x > width) return false;
		var y = height / 5;
		ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin.hitcircle.height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);
		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		if (this.selected)
			ctx.drawImage(Editor.skin.hitcircleselect, x, y, cs, cs);
		return true;
	}
}

class Slider extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = 0.25;
		this.cache = { flag: true };
	}
	static getEndPoint(curveType, sliderLength, points) {
		if (!curveType || !sliderLength || !points) return;
		switch (curveType) {
			case "linear":
				return Math2.pointOnLine(points[0], points[1], sliderLength);
			case "catmull":
				// not supported
				return;
			case "bezier":
				if (!points || points.length < 2)
					return undefined;
				if (points.length == 2) {
					return Math2.pointOnLine(points[0], points[1], sliderLength);
				}
				points = points.slice();
				var bezier, previous, point;
				for (var i = 0, l = points.length; i < l; i += 1) {
					point = points[i];
					if (!point)
						continue;
					if (!previous) {
						previous = point;
						continue;
					}
					if (point.equals(previous)) {
						bezier = new Bezier(points.splice(0, i));
						sliderLength -= bezier.pxLength;
						i = 0; //, length = points.length;
					}
					previous = point;
				}
				bezier = new Bezier(points);
				return bezier.pointAtDistance(sliderLength);
			case "pass-through":
				if (!points || points.length < 2)
					return undefined;
				if (points.length == 2)
					return Math2.pointOnLine(points[0], points[1], sliderLength);
				if (points.length > 3)
					return Slider.getEndPoint("bezier", sliderLength, points);
				var [circumCenter, radius] = Math2.getCircumCircle(points[0], points[1], points[2]);
				var radians = sliderLength / radius;
				if (Math2.isLeft(points[0], points[1], points[2]))
					radians *= -1;
				return Math2.rotate(circumCenter, points[0], radians);
		}
	}
	calculate() {
		var timing = this.beatmap.getTimingPoint(this.startTime);
		if (timing) {
			var pxPerBeat = this.beatmap.SliderMultiplier * 100 * Math.max(0.1, timing.velocity);
			var beatsNumber = (this.pixelLength * this.repeatCount) / pxPerBeat;
			this.duration = Math.ceil(beatsNumber * timing.beatLength);
			this.endTime = this.startTime + this.duration;
		}
		var endPoint = Slider.getEndPoint(this.curveType, this.pixelLength, this.points);
		if (endPoint) {
			this.endPosition = endPoint;
		} else {
			this.endPosition = this.points[this.points.length - 1];
		}
		if (this.curveType == "pass-through") {
			this.passthroughcircle = Math2.getCircumCircle(this.points[0], this.points[1], this.points[2]);
		}
		if (typeof passthrough != "undefined" && typeof line != "undefined" && typeof bezier != "undefined") {
			if (this.curveType == 'pass-through') {
				this.spline = passthrough(this.points, this.pixelLength);
			} else if (this.curveType == 'line') {
				this.spline = line(this.points, this.pixelLength)[0];
			} else { //assume it's a Bezier
				this.spline = bezier(this.points, this.pixelLength);
			}
			this.spline.splice(-1, 1);
			this.spline.push(this.endPosition.toArray());
		}
		if (typeof Path2D != "undefined") {
			this.path = new Path2D();
			for (var j = 0; j < this.spline.length; j++) {
				this.path.lineTo(this.spline[j][0], this.spline[j][1]);
			}
		}
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(2 | (this.newCombo ? 4 : 0) | ((this.customColor & 7) << 4));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		var sliderPoints = [curveTypes[this.curveType]];
		sliderPoints.push(...this.points.slice(1).map(function (item) {
			return item.toString(":");
		}));
		parts.push(sliderPoints.join("|"));
		parts.push(this.repeatCount);
		parts.push(this.pixelLength);
		var edgeSounds = [],
			edgeAdditions = [];
		this.edges.forEach(edge => {
			edgeSounds.push(HitObject.serializeSoundTypes(edge.soundTypes));
			edgeAdditions.push((edge.additions.sampleset ? additionTypes.indexOf(edge.additions.sampleset) : 0) + ":" +
				(edge.additions.additionsSampleset ? additionTypes.indexOf(edge.additions.additionsSampleset) : 0));
		});
		parts.push(edgeSounds.join('|'));
		parts.push(edgeAdditions.join('|'));
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	hover() {
		var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
		ctx2.lineWidth = 0.5;
		ctx2.strokeStyle = '#555';
		ctx2.beginPath();
		var skip = false;
		for (var i = 0; i < this.points.length; i++) {
			var in_box = this.points[i].x - 2.5 < mouseX && this.points[i].x + 2.5 > mouseX && this.points[i].y - 2.5 < mouseY && this.points[i].y + 2.5 > mouseY;
			if (in_box) Editor.sliderpt_hovered = this.points[i];
			if (skip) {
				skip = false;
				continue;
			}
			if (i < this.points.length - 1 && this.points[i].equals(this.points[i + 1])) {
				skip = true;
				ctx2.fillStyle = in_box ? '#F00' : '#E00';
			} else
				ctx2.fillStyle = in_box ? '#FFF' : '#DDD';
			ctx2.globalAlpha = in_box ? 1 : 0.75;
			ctx2.fillRect(this.points[i].x - 2, this.points[i].y - 2, 4, 4);
			ctx2.globalAlpha = 1;
			ctx2.strokeRect(this.points[i].x - 2, this.points[i].y - 2, 4, 4);
			ctx2.lineTo(this.points[i].x, this.points[i].y);
		}
		ctx2.lineWidth = 0.25;
		ctx2.strokeStyle = '#FFF';
		ctx2.stroke();
	}
	render(t, colIndex, comboNumber) {
		var posx, posy, r_as;
		var i = this.beatmap.HitObjects.indexOf(this);
		if (!t) t = Editor.source.t;
		if (!colIndex || !comboNumber) {
			if (!colIndex) colIndex = Editor.objc[i][0] % Editor.cols.length;
			if (!comboNumber) comboNumber = Editor.objc[i][1];
		}
		var ar = ars(parseFloat(this.beatmap.ApproachRate));
		var cs = cspx(parseFloat(this.beatmap.CircleSize));
		var offset = this.startTime / 1000;
		var x = this.position.x - cs / 2,
			y = this.position.y - cs / 2;
		var td = offset - t;
		var endTime = this.endTime / 1000;
		var duration = this.duration / 1000;
		if (td > ar || t > endTime + 0.8) return false;
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
		ctx2.save();
		if (td > 0) ctx.globalAlpha = 2 - 2 * td / ar;
		else {
			ctx.globalAlpha = Math.max(1 - (t - endTime) / this.fadetime, 0);
			ctx2.globalAlpha = Math.max(1 - (t - endTime) / this.fadetime, 0);
		}
		if (this.cache.col != Editor.cols[colIndex] || this.cache.cs != cs || this.cache.flag) {
			if (this.cache.cs != cs || !this.cache.cached || this.cache.flag) {
				this.cache.render = render_curve2(this.spline, cs);
				this.cache.flag = false;
			}
			this.cache.col = Editor.cols[colIndex];
			this.cache.cs = cs;
			var slider_border = Editor.skin._meta.options.SliderBorder ? colorToArray(Editor.skin._meta.options.SliderBorder) : undefined;
			var slider_trackcolor = Editor.skin._meta.options.SliderTrackOverride ? colorToArray(Editor.skin._meta.options.SliderTrackOverride) : Editor.cols[colIndex];
			if ('USE_BEATMAP_SKIN_PLACEHOLDER') {
				if (Editor.beatmap.SliderBorder) slider_border = Editor.beatmap.SliderBorder.toArray();
				if (Editor.beatmap.SliderTrackOverride) slider_trackcolor = Editor.beatmap.SliderTrackOverride.toArray();
			}
			this.cache.cached = document.createElement('canvas');
			this.cache.cached.width = this.cache.render[0][0].width;
			this.cache.cached.height = this.cache.render[0][0].height;
			var tempctx = this.cache.cached.getContext('2d');
			tempctx.drawImage(tint(this.cache.render[0][0], slider_border), 0, 0);
			tempctx.globalCompositeOperation = 'destination-out';
			tempctx.drawImage(this.cache.render[0][1], 0, 0);
			tempctx.globalCompositeOperation = 'source-over';
			tempctx.globalAlpha = 0.75;
			tempctx.drawImage(tint(this.cache.render[0][1], slider_trackcolor), 0, 0);
			tempctx.drawImage(this.cache.render[0][2], 0, 0);
		}
		ctx.drawImage(this.cache.cached, this.cache.render[1][0], this.cache.render[1][1], this.cache.cached.width / 2, this.cache.cached.height / 2);
		var r = this.repeatCount;
		if (r > 1) {
			var pulse = (t - this.startTime / 1000) % 0.6;
			var rarrowscale = Editor.skin.reversearrow.height / Editor.skin.hitcircle.height;
			var rarrowh = rarrowscale * cs + pulse * 20;
			var rarroww = rarrowh / Editor.skin.reversearrow.height * Editor.skin.reversearrow.width;
			var i0 = (t - offset) / (duration / r);
			for (var i = r - 1; i > 0; i--) {
				break;
				var tempt = this.startTime + i * duration / r;
				if (tempt + 0.8 > t) continue;
				if (i > i0 + 2) break;
				var p = this.spline[i % 2 ? this.spline.length - 1 : 0];
				
			}
		}
		if (td <= 0 && duration + td > -0.2) {
			var prog = -td / duration; // progress percentage (0-1)
			var curp = prog * r; // current progress (equivalent to distance traveled divided by slider length)
			var dir = 1 - 2 * (Math.floor(curp) % 2); // direction the ball is traveling, 1 for normal, -1 for reverse
			var distance = curp % 1 * this.pixelLength;
			var j = dir == 1 ? 0 : this.spline.length - 1;
			var jend = dir == 1 ? this.spline.length - 1 : 0;
			while (j != jend) {
				var p1 = this.spline[j];
				var p2 = this.spline[j + dir];
				var dpart = Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));
				if (dpart > distance / 1.5) {
					//without extra interpolation stuff
					//ctx.drawImage(Editor.skin['sliderb0'], p1[0] - cs / 2, p1[1] - cs / 2, cs, cs);
					if (duration + td >= 0.002) {
						posx = p1[0] + distance / dpart * (p2[0] - p1[0]);
						posy = p1[1] + distance / dpart * (p2[1] - p1[1]);
						var cs2 = cs * 11 / 12;
						ctx2.save();
						ctx2.translate(posx, posy);
						ctx2.rotate(Math.atan2(p2[1] - p1[1], p2[0] - p1[0]) + (Editor.skin._meta.options.SliderBallFlip == "0" && dir == -1 ? Math.PI : 0));
						ctx2.drawImage(Editor.skin['sliderb0' + colIndex], -cs2 / 2, -cs2 / 2, cs2, cs2);
						ctx2.restore();
					} else {
						var temp = r % 2 ? this.spline.length - 1 : 0;
						posx = this.spline[temp][0];
						posy = this.spline[temp][1];
					}
					ctx2.save();
					if (td > -0.05) ctx2.globalAlpha = -td / 0.05;
					else ctx2.globalAlpha = Math.max(1 - (t - endTime) / this.fadetime, 0);
					var r_fs = td > -0.1 ? cs * (1 - td * 10) : (td < -duration ? 2 * cs + (td + duration) * 5 * 0.5 * cs : 2 * cs);
					ctx2.drawImage(Editor.skin.sliderfollowcircle, posx - r_fs / 2, posy - r_fs / 2, r_fs, r_fs);
					ctx2.restore();
					break;
				} else {
					distance -= dpart;
				}
				j += dir;
			}
		}
		if (td > 0) {
			r_as = cs * (2.5 * td / ar + 1);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		} else {
			ctx.globalAlpha = Math.max(1 + td / 0.8, 0);
			r_as = cs * Math.min(-td / ar + 1, 13 / 12);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin.hitcircle, x, y, cs, cs);
		}

		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin.hitcircle.height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);
		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		ctx.restore();
		ctx2.restore();
		return true;
	}
	timelineRender() {
		var i = this.beatmap.HitObjects.indexOf(this);
		var colIndex = Editor.objc[i][0] % Editor.cols.length;
		var color = Editor.cols[colIndex];
		var comboNumber = Editor.objc[i][1];
		var ctx = document.getElementById('timeline2').getContext('2d');
		var width = $(window).width() * 0.8;
		var height = $(window).height() * 0.12;
		var cs = height * 0.8;
		var x = ((this.startTime / 1000 - Editor.source.t) * Editor.options.timelinezoom / 6 + .5) * width - cs / 2;
		var x2 = ((this.endTime / 1000 - Editor.source.t) * Editor.options.timelinezoom / 6 + .5) * width - cs / 2;
		if (x2 < -cs || x > width) return false;
		var y = height / 5;
		var r = this.repeatCount;

		ctx.save();
		ctx.strokeStyle = 'rgba(' + color[0] + ', ' + color[1] + ', ' + color[2] + ', ' + (this.selected ? 0.8 : 0.5) + ')';
		ctx.lineJoin = 'round';
		ctx.lineCap = 'round';
		ctx.lineWidth = 11 * cs / 12;
		ctx.beginPath();
		ctx.moveTo(x + cs / 2, y + cs / 2);
		ctx.lineTo(x2 + cs / 2, y + cs / 2);
		ctx.stroke();
		ctx.restore();

		ctx.drawImage(Editor.skin['hitcircle' + colIndex], x2, y, cs, cs);
		ctx.drawImage(Editor.skin.hitcircleoverlay, x2, y, cs, cs);
		if (this.selected)
			ctx.drawImage(Editor.skin.hitcircleselect, x2, y, cs, cs);
		var dx = (x2 - x) / r;
		var rarrowscale = Editor.skin.reversearrow.height / Editor.skin.hitcircle.height;
		var rarrowh = rarrowscale * cs;
		var rarroww = rarrowh / Editor.skin.reversearrow.height * Editor.skin.reversearrow.width;
		for (var i = 1; i < r; i++) {
			ctx.drawImage(Editor.skin['hitcircle' + colIndex], x2 - dx * i, y, cs, cs);
			ctx.drawImage(Editor.skin.hitcircleoverlay, x2 - dx * i, y, cs, cs);
			ctx.drawImage(Editor.skin.reversearrow, x2 - dx * i + (cs - rarroww) / 2, y + (cs - rarrowh) / 2, rarroww, rarrowh);
		}	
		ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin.hitcircle.height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);
		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		if (this.selected)
			ctx.drawImage(Editor.skin.hitcircleselect, x, y, cs, cs);
		return true;
	}
}

class Spinner extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = 0.25;
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(8 | (this.newCombo ? 4 : 0));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		parts.push(this.endTime);
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	render(t, colIndex, comboNumber) {
		var dur = this.duration / 1000;
		var td = this.startTime / 1000 - t;
		if (this.endTime / 1000 + this.fadetime < t || td > 0.4) return false;
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		ctx.globalCompositeOperation = "destination-over";
		ctx.translate(256, 192);
		var drawspinner = function (r, a, t, middle) {
			ctx.globalAlpha = a;
			if (!middle) middle = Editor.skin['spinner-middle'];
			ctx.drawImage(middle, -r * 1.01, -r * 1.01, 2.02 * r, 2.02 * r);
			ctx.drawImage(Editor.skin['spinner-middle2'], -r * 0.025, -r * 0.025, 2 * r * 0.025, 2 * r * 0.025);
			ctx.save();
			ctx.rotate(t * 4 * Math.PI);
			ctx.drawImage(Editor.skin['spinner-top'], -r, -r, 2 * r, 2 * r);
			ctx.restore();
			ctx.drawImage(Editor.skin['spinner-bottom'], -r, -r, 2 * r, 2 * r);
		};
		if (td < 0 && -td < dur) {
			//first one gradually has it turn red, lags more
			//drawspinner(172 + 40 * Math.sqrt(-td / dur), 1, td, tint(Editor.skin['spinner-middle'], [255, 255 * (1 + td / dur), 255 * (1 + td / dur)]));
			drawspinner(172 + 40 * Math.sqrt(-td / dur), 1, td);
		} else if (td > 0 && td < 0.4) {
			drawspinner(172, 1 - td / 0.4, 0);
		} else if (td < 0 && -td < dur + this.fadetime) {
			drawspinner(212, 1 + (dur + td) / 0.25, dur);
		}
		ctx.restore();
		return true;
	}
	timelineRender() {
		var i = this.beatmap.HitObjects.indexOf(this);
		var color = [128, 128, 128];
		var ctx = document.getElementById('timeline2').getContext('2d');
		var width = $(window).width() * 0.8;
		var height = $(window).height() * 0.12;
		var cs = height * 0.8;
		var x = ((this.startTime / 1000 - Editor.source.t) * Editor.options.timelinezoom / 6 + .5) * width - cs / 2;
		var x2 = ((this.endTime / 1000 - Editor.source.t) * Editor.options.timelinezoom / 6 + .5) * width - cs / 2;
		if (x2 <-cs || x > width) return false;
		var y = height / 5;
		
		ctx.save();
		ctx.strokeStyle = 'rgba(' + color[0] + ', ' + color[1] + ', ' + color[2] + ', 0.5)';
		ctx.lineJoin = 'round';
		ctx.lineCap = 'round';
		ctx.lineWidth = 11 * cs / 12;
		ctx.beginPath();
		ctx.moveTo(x + cs / 2, y + cs / 2);
		ctx.lineTo(x2 + cs / 2, y + cs / 2);
		ctx.stroke();
		ctx.restore();

		ctx.drawImage(Editor.skin['hitcircle-1'], x2, y, cs, cs);
		ctx.drawImage(Editor.skin.hitcircleoverlay, x2, y, cs, cs);
		if (this.selected)
			ctx.drawImage(Editor.skin.hitcircleselect, x2, y, cs, cs);
		ctx.drawImage(Editor.skin['hitcircle-1'], x, y, cs, cs);
		ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		if (this.selected)
			ctx.drawImage(Editor.skin.hitcircleselect, x, y, cs, cs);
		var num = Editor.skin['default-1'];
		var newh = num.height / Editor.skin.hitcircle.height * cs * 3 / 4;
		var dh = newh / num.height;
		ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);
		return true;
	}
}

if (typeof module !== "undefined") {
	module.exports = HitObject;
	module.exports.HitCircle = HitCircle;
	module.exports.Slider = Slider;
	module.exports.Spinner = Spinner;
} else {
	window.HitObject = Editor.HitObject = HitObject;
	window.HitCircle = Editor.HitCircle = HitCircle;
	window.Slider = Editor.Slider = Slider;
	window.Spinner = Editor.Spinner = Spinner;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJIaXRPYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbmlmICh0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdE1hdGgyID0gcmVxdWlyZShcIi4vLi4vTWF0aDJcIik7XHJcblx0QmV6aWVyID0gTWF0aDIuQmV6aWVyO1xyXG5cdFZlY3RvciA9IHJlcXVpcmUoXCIuLy4uL1ZlY3RvclwiKTtcclxufVxyXG5cclxudmFyIGN1cnZlVHlwZXMgPSB7XHJcblx0XCJDXCI6IFwiY2F0bXVsbFwiLFxyXG5cdFwiQlwiOiBcImJlemllclwiLFxyXG5cdFwiTFwiOiBcImxpbmVhclwiLFxyXG5cdFwiUFwiOiBcInBhc3MtdGhyb3VnaFwiLFxyXG5cdFwiY2F0bXVsbFwiOiBcIkNcIixcclxuXHRcImJlemllclwiOiBcIkJcIixcclxuXHRcImxpbmVhclwiOiBcIkxcIixcclxuXHRcInBhc3MtdGhyb3VnaFwiOiBcIlBcIlxyXG59O1xyXG52YXIgYWRkaXRpb25UeXBlcyA9IFtudWxsLCBcIm5vcm1hbFwiLCBcInNvZnRcIiwgXCJkcnVtXCJdO1xyXG5cclxuY2xhc3MgSGl0T2JqZWN0IHtcclxuXHRzdGF0aWMgc2VyaWFsaXplU291bmRUeXBlcyhhcnJheSkge1xyXG5cdFx0dmFyIG51bWJlciA9IDA7XHJcblx0XHRpZiAoYXJyYXkuaW5kZXhPZihcIndoaXN0bGVcIikgPj0gMCkgbnVtYmVyIHw9IDI7XHJcblx0XHRpZiAoYXJyYXkuaW5kZXhPZihcImZpbmlzaFwiKSA+PSAwKSBudW1iZXIgfD0gNDtcclxuXHRcdGlmIChhcnJheS5pbmRleE9mKFwiY2xhcFwiKSA+PSAwKSBudW1iZXIgfD0gODtcclxuXHRcdHJldHVybiBudW1iZXI7XHJcblx0fVxyXG5cdHN0YXRpYyBwYXJzZUFkZGl0aW9ucyhzdHIpIHtcclxuXHRcdHZhciBhZGRpdGlvbnMgPSB7fTtcclxuXHRcdGlmICghc3RyKSByZXR1cm4gYWRkaXRpb25zO1xyXG5cdFx0dmFyIHBhcnRzID0gc3RyLnNwbGl0KFwiOlwiKTtcclxuXHJcblx0XHRpZiAocGFydHNbMF0gJiYgcGFydHNbMF0gIT09IFwiMFwiKVxyXG5cdFx0XHRhZGRpdGlvbnMuc2FtcGxlID0gYWRkaXRpb25UeXBlc1twYXJzZUludChwYXJ0c1swXSldO1xyXG5cdFx0aWYgKHBhcnRzWzFdICYmIHBhcnRzWzFdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUgPSBhZGRpdGlvblR5cGVzW3BhcnNlSW50KHBhcnRzWzFdKV07XHJcblx0XHRpZiAocGFydHNbMl0gJiYgcGFydHNbMl0gIT09IFwiMFwiKVxyXG5cdFx0XHRhZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggPSBwYXJzZUludChwYXJ0c1syXSk7XHJcblx0XHRpZiAocGFydHNbM10gJiYgcGFydHNbM10gIT09IFwiMFwiKVxyXG5cdFx0XHRhZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgPSBwYXJzZUludChwYXJ0c1szXSk7XHJcblx0XHRpZiAocGFydHNbNF0gJiYgcGFydHNbNF0gIT09IFwiMFwiKVxyXG5cdFx0XHRhZGRpdGlvbnMuaGl0c291bmQgPSBwYXJ0c1s0XTtcclxuXHRcdHJldHVybiBhZGRpdGlvbnM7XHJcblx0fVxyXG5cdHN0YXRpYyBwYXJzZUVkZ2VBZGRpdGlvbnMoc3RyKSB7XHJcblx0XHR2YXIgYWRkaXRpb25zID0ge307XHJcblx0XHRpZiAoIXN0cikgcmV0dXJuIGFkZGl0aW9ucztcclxuXHRcdHZhciBwYXJ0cyA9IHN0ci5zcGxpdChcIjpcIik7XHJcblxyXG5cdFx0aWYgKHBhcnRzWzBdICYmIHBhcnRzWzBdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLnNhbXBsZXNldCA9IGFkZGl0aW9uVHlwZXNbcGFyc2VJbnQocGFydHNbMF0pXTtcclxuXHRcdGlmIChwYXJ0c1sxXSAmJiBwYXJ0c1sxXSAhPT0gXCIwXCIpXHJcblx0XHRcdGFkZGl0aW9ucy5hZGRpdGlvbnNTYW1wbGVzZXQgPSBhZGRpdGlvblR5cGVzW3BhcnNlSW50KHBhcnRzWzFdKV07XHJcblx0XHRyZXR1cm4gYWRkaXRpb25zO1xyXG5cdH1cclxuXHRzdGF0aWMgcGFyc2UobGluZSkge1xyXG5cdFx0dmFyIHBhcnRzID0gbGluZS5zcGxpdChcIixcIik7XHJcblx0XHR2YXIgc291bmRUeXBlID0gcGFyc2VJbnQocGFydHNbNF0pO1xyXG5cdFx0dmFyIG9iamVjdFR5cGUgPSBwYXJzZUludChwYXJ0c1szXSk7XHJcblx0XHR2YXIgcHJvcGVydGllcyA9IHt9O1xyXG5cdFx0dmFyIGk7XHJcblxyXG5cdFx0cHJvcGVydGllcy5vcmlnaW5hbExpbmUgPSBsaW5lO1xyXG5cdFx0cHJvcGVydGllcy5zdGFydFRpbWUgPSBwYXJzZUludChwYXJ0c1syXSk7XHJcblx0XHRwcm9wZXJ0aWVzLnNvdW5kVHlwZXMgPSBbXTtcclxuXHRcdHByb3BlcnRpZXMubmV3Q29tYm8gPSAob2JqZWN0VHlwZSAmIDQpID09IDQ7XHJcblx0XHRwcm9wZXJ0aWVzLnBvc2l0aW9uID0gbmV3IFZlY3RvcihwYXJzZUludChwYXJ0c1swXSksIHBhcnNlSW50KHBhcnRzWzFdKSk7XHJcblx0XHRpZiAoKG9iamVjdFR5cGUgJiA4KSAhPSA4KSBwcm9wZXJ0aWVzLmN1c3RvbUNvbG9yID0gKG9iamVjdFR5cGUgPj4gNCkgJiA3O1xyXG5cclxuXHRcdGlmICgoc291bmRUeXBlICYgMikgPT0gMikgcHJvcGVydGllcy5zb3VuZFR5cGVzLnB1c2goXCJ3aGlzdGxlXCIpO1xyXG5cdFx0aWYgKChzb3VuZFR5cGUgJiA0KSA9PSA0KSBwcm9wZXJ0aWVzLnNvdW5kVHlwZXMucHVzaChcImZpbmlzaFwiKTtcclxuXHRcdGlmICgoc291bmRUeXBlICYgOCkgPT0gOCkgcHJvcGVydGllcy5zb3VuZFR5cGVzLnB1c2goXCJjbGFwXCIpO1xyXG5cdFx0aWYgKHByb3BlcnRpZXMuc291bmRUeXBlcy5sZW5ndGggPT09IDApIHByb3BlcnRpZXMuc291bmRUeXBlcy5wdXNoKFwibm9ybWFsXCIpO1xyXG5cclxuXHRcdGlmICgob2JqZWN0VHlwZSAmIDEpID09IDEpIHtcclxuXHRcdFx0cHJvcGVydGllcy5hZGRpdGlvbnMgPSBIaXRPYmplY3QucGFyc2VBZGRpdGlvbnMocGFydHNbNV0pO1xyXG5cdFx0XHRyZXR1cm4gbmV3IEhpdENpcmNsZShwcm9wZXJ0aWVzKTtcclxuXHRcdH0gZWxzZSBpZiAoKG9iamVjdFR5cGUgJiAyKSA9PSAyKSB7XHJcblx0XHRcdHByb3BlcnRpZXMucmVwZWF0Q291bnQgPSBwYXJzZUludChwYXJ0c1s2XSk7XHJcblx0XHRcdHByb3BlcnRpZXMucGl4ZWxMZW5ndGggPSBwYXJzZUZsb2F0KHBhcnRzWzddKTtcclxuXHRcdFx0cHJvcGVydGllcy5hZGRpdGlvbnMgPSBIaXRPYmplY3QucGFyc2VBZGRpdGlvbnMocGFydHNbMTBdKTtcclxuXHRcdFx0cHJvcGVydGllcy5lZGdlcyA9IFtdO1xyXG5cdFx0XHRwcm9wZXJ0aWVzLnBvaW50cyA9IFtwcm9wZXJ0aWVzLnBvc2l0aW9uXTtcclxuXHRcdFx0dmFyIHBvaW50cyA9IChwYXJ0c1s1XSB8fCBcIlwiKS5zcGxpdChcInxcIik7XHJcblx0XHRcdGlmIChwb2ludHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0cHJvcGVydGllcy5jdXJ2ZVR5cGUgPSBjdXJ2ZVR5cGVzW3BvaW50c1swXV0gfHwgXCJ1bmtub3duXCI7XHJcblx0XHRcdFx0Zm9yIChpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHRcdFx0dmFyIGNvb3JkaW5hdGVzID0gcG9pbnRzW2ldLnNwbGl0KFwiOlwiKTtcclxuXHRcdFx0XHRcdHByb3BlcnRpZXMucG9pbnRzLnB1c2gobmV3IFZlY3RvcihcclxuXHRcdFx0XHRcdFx0cGFyc2VJbnQoY29vcmRpbmF0ZXNbMF0pLFxyXG5cdFx0XHRcdFx0XHRwYXJzZUludChjb29yZGluYXRlc1sxXSlcclxuXHRcdFx0XHRcdCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgZWRnZVNvdW5kcyA9IFtdO1xyXG5cdFx0XHR2YXIgZWRnZUFkZGl0aW9ucyA9IFtdO1xyXG5cdFx0XHRpZiAocGFydHNbOF0pIGVkZ2VTb3VuZHMgPSBwYXJ0c1s4XS5zcGxpdChcInxcIik7XHJcblx0XHRcdGlmIChwYXJ0c1s5XSkgZWRnZUFkZGl0aW9ucyA9IHBhcnRzWzldLnNwbGl0KFwifFwiKTtcclxuXHJcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLnJlcGVhdENvdW50ICsgMTsgaSArPSAxKSB7XHJcblx0XHRcdFx0dmFyIGVkZ2UgPSB7XHJcblx0XHRcdFx0XHRcInNvdW5kVHlwZXNcIjogW10sXHJcblx0XHRcdFx0XHRcImFkZGl0aW9uc1wiOiBIaXRPYmplY3QucGFyc2VFZGdlQWRkaXRpb25zKGVkZ2VBZGRpdGlvbnNbaV0pXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRpZiAoZWRnZVNvdW5kc1tpXSkge1xyXG5cdFx0XHRcdFx0dmFyIHNvdW5kID0gcGFyc2VJbnQoZWRnZVNvdW5kc1tpXSk7XHJcblx0XHRcdFx0XHRpZiAoKHNvdW5kICYgMikgPT0gMikgZWRnZS5zb3VuZFR5cGVzLnB1c2goXCJ3aGlzdGxlXCIpO1xyXG5cdFx0XHRcdFx0aWYgKChzb3VuZCAmIDQpID09IDQpIGVkZ2Uuc291bmRUeXBlcy5wdXNoKFwiZmluaXNoXCIpO1xyXG5cdFx0XHRcdFx0aWYgKChzb3VuZCAmIDgpID09IDgpIGVkZ2Uuc291bmRUeXBlcy5wdXNoKFwiY2xhcFwiKTtcclxuXHRcdFx0XHRcdGlmIChlZGdlLnNvdW5kVHlwZXMubGVuZ3RoID09PSAwKSBlZGdlLnNvdW5kVHlwZXMucHVzaChcIm5vcm1hbFwiKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZWRnZS5zb3VuZFR5cGVzLnB1c2goXCJub3JtYWxcIik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHByb3BlcnRpZXMuZWRnZXMucHVzaChlZGdlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIG5ldyBTbGlkZXIocHJvcGVydGllcyk7XHJcblx0XHR9IGVsc2UgaWYgKChvYmplY3RUeXBlICYgOCkgPT0gOCkge1xyXG5cdFx0XHRwcm9wZXJ0aWVzLmVuZFRpbWUgPSBwYXJzZUludChwYXJ0c1s1XSk7XHJcblx0XHRcdHByb3BlcnRpZXMuZHVyYXRpb24gPSBwcm9wZXJ0aWVzLmVuZFRpbWUgLSBwcm9wZXJ0aWVzLnN0YXJ0VGltZTtcclxuXHRcdFx0cHJvcGVydGllcy5hZGRpdGlvbnMgPSBIaXRPYmplY3QucGFyc2VBZGRpdGlvbnMocGFydHNbNl0pO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFNwaW5uZXIocHJvcGVydGllcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcclxuXHRcdGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XHJcblx0XHRcdHRoaXNba2V5XSA9IHByb3BlcnRpZXNba2V5XTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHR9XHJcblx0c2VyaWFsaXplKCkge1xyXG5cdFx0dGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQuXCI7XHJcblx0fVxyXG5cdHJlbmRlcigpIHtcclxuXHRcdHRocm93IFwiTm90IGltcGxlbWVudGVkLlwiO1xyXG5cdH1cclxuXHRyZW5kZXJUaW1lbGluZSgpIHtcclxuXHRcdHRocm93IFwiTm90IGltcGxlbWVudGVkLlwiO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgSGl0Q2lyY2xlIGV4dGVuZHMgSGl0T2JqZWN0IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XHJcblx0XHRzdXBlcihwcm9wZXJ0aWVzKTtcclxuXHRcdHRoaXMuZmFkZXRpbWUgPSAwLjg7XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDEgfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSB8ICgodGhpcy5jdXN0b21Db2xvciAmIDcpIDw8IDQpKTtcclxuXHRcdHBhcnRzLnB1c2goSGl0T2JqZWN0LnNlcmlhbGl6ZVNvdW5kVHlwZXModGhpcy5zb3VuZFR5cGVzKSk7XHJcblx0XHR2YXIgYWRkaXRpb25zID0gW107XHJcblx0XHRhZGRpdGlvbnMucHVzaCh0aGlzLmFkZGl0aW9ucy5zYW1wbGUgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YodGhpcy5hZGRpdGlvbnMuc2FtcGxlKSA6IDApO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuYWRkaXRpb25hbFNhbXBsZSA/IGFkZGl0aW9uVHlwZXMuaW5kZXhPZih0aGlzLmFkZGl0aW9ucy5hZGRpdGlvbmFsU2FtcGxlKSA6IDApO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggPyB0aGlzLmFkZGl0aW9ucy5jdXN0b21TYW1wbGVJbmRleCA6IDApO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgPyB0aGlzLmFkZGl0aW9ucy5oaXRzb3VuZFZvbHVtZSA6IDApO1xyXG5cdFx0YWRkaXRpb25zLnB1c2goXCJcIik7XHJcblx0XHRwYXJ0cy5wdXNoKGFkZGl0aW9ucy5qb2luKFwiOlwiKSk7XHJcblx0XHRyZXR1cm4gcGFydHMuam9pbihcIixcIik7XHJcblx0fVxyXG5cdHJlbmRlcih0LCBjb2xJbmRleCwgY29tYm9OdW1iZXIpIHtcclxuXHRcdHZhciByX2FzO1xyXG5cdFx0dmFyIGkgPSB0aGlzLmJlYXRtYXAuSGl0T2JqZWN0cy5pbmRleE9mKHRoaXMpO1xyXG5cdFx0aWYgKCF0KSB0ID0gRWRpdG9yLnNvdXJjZS50O1xyXG5cdFx0aWYgKCFjb2xJbmRleCB8fCAhY29tYm9OdW1iZXIpIHtcclxuXHRcdFx0aWYgKCFjb2xJbmRleCkgY29sSW5kZXggPSBFZGl0b3Iub2JqY1tpXVswXSAlIEVkaXRvci5jb2xzLmxlbmd0aDtcclxuXHRcdFx0aWYgKCFjb21ib051bWJlcikgY29tYm9OdW1iZXIgPSBFZGl0b3Iub2JqY1tpXVsxXTtcclxuXHRcdH1cclxuXHRcdHZhciBhciA9IGFycyhwYXJzZUZsb2F0KHRoaXMuYmVhdG1hcC5BcHByb2FjaFJhdGUpKTtcclxuXHRcdHZhciBjcyA9IGNzcHgocGFyc2VGbG9hdCh0aGlzLmJlYXRtYXAuQ2lyY2xlU2l6ZSkpO1xyXG5cdFx0dmFyIG9mZnNldCA9IHRoaXMuc3RhcnRUaW1lIC8gMTAwMDtcclxuXHRcdHZhciB4ID0gdGhpcy5wb3NpdGlvbi54IC0gY3MgLyAyLFxyXG5cdFx0XHR5ID0gdGhpcy5wb3NpdGlvbi55IC0gY3MgLyAyO1xyXG5cdFx0dmFyIHRkID0gb2Zmc2V0IC0gdDtcclxuXHRcdGlmICh0ZCA+IGFyIHx8IHRkIDwgLXRoaXMuZmFkZXRpbWUpIHJldHVybiBmYWxzZTtcclxuXHRcdHZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZGNhbnZhcycpLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRjdHguc2F2ZSgpO1xyXG5cdFx0aWYgKHRkID4gMCkge1xyXG5cdFx0XHRjdHguZ2xvYmFsQWxwaGEgPSAyIC0gMiAqIHRkIC8gYXI7XHJcblx0XHRcdHJfYXMgPSBjcyAqICgyLjUgKiB0ZCAvIGFyICsgMSk7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2FwcHJvYWNoY2lyY2xlJyArIGNvbEluZGV4XSwgeCArIGNzIC8gMiAtIHJfYXMgLyAyLCB5ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHJfYXMsIHJfYXMpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUnICsgY29sSW5kZXhdLCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y3R4Lmdsb2JhbEFscGhhID0gTWF0aC5tYXgoMSArIHRkIC8gdGhpcy5mYWRldGltZSwgMCk7XHJcblx0XHRcdHJfYXMgPSBjcyAqIE1hdGgubWluKC10ZCAvIGFyICsgMSwgMTMgLyAxMik7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2FwcHJvYWNoY2lyY2xlJyArIGNvbEluZGV4XSwgeCArIGNzIC8gMiAtIHJfYXMgLyAyLCB5ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHJfYXMsIHJfYXMpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgZHJhd092ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlb3ZlcmxheSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH07XHJcblx0XHR2YXIgZHJhd051bWJlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG51bSA9IEVkaXRvci5za2luWydkZWZhdWx0LScgKyBjb21ib051bWJlcl07XHJcblx0XHRcdHZhciBuZXdoID0gbnVtLmhlaWdodCAvIEVkaXRvci5za2luLmhpdGNpcmNsZS5oZWlnaHQgKiBjcyAqIDMgLyA0O1xyXG5cdFx0XHR2YXIgZGggPSBuZXdoIC8gbnVtLmhlaWdodDtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShudW0sIHggLSBudW0ud2lkdGggKiBkaCAvIDIgKyBjcyAvIDIsIHkgLSBuZXdoIC8gMiArIGNzIC8gMiwgbnVtLndpZHRoICogZGgsIG5ld2gpO1xyXG5cclxuXHRcdH07XHJcblx0XHRpZiAocGFyc2VJbnQoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1iZXIgfHwgRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1lciwgMTApKSB7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdFx0ZHJhd092ZXJsYXkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRyYXdPdmVybGF5KCk7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdH1cclxuXHRcdGN0eC5yZXN0b3JlKCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0dGltZWxpbmVSZW5kZXIoKSB7XHJcblx0XHR2YXIgaSA9IHRoaXMuYmVhdG1hcC5IaXRPYmplY3RzLmluZGV4T2YodGhpcyk7XHJcblx0XHR2YXIgY29sSW5kZXggPSBFZGl0b3Iub2JqY1tpXVswXSAlIEVkaXRvci5jb2xzLmxlbmd0aDtcclxuXHRcdHZhciBjb21ib051bWJlciA9IEVkaXRvci5vYmpjW2ldWzFdO1xyXG5cdFx0dmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lbGluZTInKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0dmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCkgKiAwLjg7XHJcblx0XHR2YXIgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpICogMC4xMjtcclxuXHRcdHZhciBjcyA9IGhlaWdodCAqIDAuODtcclxuXHRcdHZhciB4ID0gKCh0aGlzLnN0YXJ0VGltZSAvIDEwMDAgLSBFZGl0b3Iuc291cmNlLnQpICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tIC8gNiArIC41KSAqIHdpZHRoIC0gY3MgLyAyO1xyXG5cdFx0aWYgKHggPCAtY3MgfHwgeCA+IHdpZHRoKSByZXR1cm4gZmFsc2U7XHJcblx0XHR2YXIgeSA9IGhlaWdodCAvIDU7XHJcblx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUnICsgY29sSW5kZXhdLCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0dmFyIGRyYXdPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZW92ZXJsYXksIHgsIHksIGNzLCBjcyk7XHJcblx0XHR9O1xyXG5cdFx0dmFyIGRyYXdOdW1iZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBudW0gPSBFZGl0b3Iuc2tpblsnZGVmYXVsdC0nICsgY29tYm9OdW1iZXJdO1xyXG5cdFx0XHR2YXIgbmV3aCA9IG51bS5oZWlnaHQgLyBFZGl0b3Iuc2tpbi5oaXRjaXJjbGUuaGVpZ2h0ICogY3MgKiAzIC8gNDtcclxuXHRcdFx0dmFyIGRoID0gbmV3aCAvIG51bS5oZWlnaHQ7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UobnVtLCB4IC0gbnVtLndpZHRoICogZGggLyAyICsgY3MgLyAyLCB5IC0gbmV3aCAvIDIgKyBjcyAvIDIsIG51bS53aWR0aCAqIGRoLCBuZXdoKTtcclxuXHRcdH07XHJcblx0XHRpZiAocGFyc2VJbnQoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1iZXIgfHwgRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1lciwgMTApKSB7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdFx0ZHJhd092ZXJsYXkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRyYXdPdmVybGF5KCk7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkKVxyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZXNlbGVjdCwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgU2xpZGVyIGV4dGVuZHMgSGl0T2JqZWN0IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XHJcblx0XHRzdXBlcihwcm9wZXJ0aWVzKTtcclxuXHRcdHRoaXMuZmFkZXRpbWUgPSAwLjI1O1xyXG5cdFx0dGhpcy5jYWNoZSA9IHsgZmxhZzogdHJ1ZSB9O1xyXG5cdH1cclxuXHRzdGF0aWMgZ2V0RW5kUG9pbnQoY3VydmVUeXBlLCBzbGlkZXJMZW5ndGgsIHBvaW50cykge1xyXG5cdFx0aWYgKCFjdXJ2ZVR5cGUgfHwgIXNsaWRlckxlbmd0aCB8fCAhcG9pbnRzKSByZXR1cm47XHJcblx0XHRzd2l0Y2ggKGN1cnZlVHlwZSkge1xyXG5cdFx0XHRjYXNlIFwibGluZWFyXCI6XHJcblx0XHRcdFx0cmV0dXJuIE1hdGgyLnBvaW50T25MaW5lKHBvaW50c1swXSwgcG9pbnRzWzFdLCBzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRjYXNlIFwiY2F0bXVsbFwiOlxyXG5cdFx0XHRcdC8vIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgXCJiZXppZXJcIjpcclxuXHRcdFx0XHRpZiAoIXBvaW50cyB8fCBwb2ludHMubGVuZ3RoIDwgMilcclxuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKHBvaW50cy5sZW5ndGggPT0gMikge1xyXG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgyLnBvaW50T25MaW5lKHBvaW50c1swXSwgcG9pbnRzWzFdLCBzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwb2ludHMgPSBwb2ludHMuc2xpY2UoKTtcclxuXHRcdFx0XHR2YXIgYmV6aWVyLCBwcmV2aW91cywgcG9pbnQ7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGwgPSBwb2ludHMubGVuZ3RoOyBpIDwgbDsgaSArPSAxKSB7XHJcblx0XHRcdFx0XHRwb2ludCA9IHBvaW50c1tpXTtcclxuXHRcdFx0XHRcdGlmICghcG9pbnQpXHJcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0aWYgKCFwcmV2aW91cykge1xyXG5cdFx0XHRcdFx0XHRwcmV2aW91cyA9IHBvaW50O1xyXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChwb2ludC5lcXVhbHMocHJldmlvdXMpKSB7XHJcblx0XHRcdFx0XHRcdGJlemllciA9IG5ldyBCZXppZXIocG9pbnRzLnNwbGljZSgwLCBpKSk7XHJcblx0XHRcdFx0XHRcdHNsaWRlckxlbmd0aCAtPSBiZXppZXIucHhMZW5ndGg7XHJcblx0XHRcdFx0XHRcdGkgPSAwOyAvLywgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHByZXZpb3VzID0gcG9pbnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJlemllciA9IG5ldyBCZXppZXIocG9pbnRzKTtcclxuXHRcdFx0XHRyZXR1cm4gYmV6aWVyLnBvaW50QXREaXN0YW5jZShzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRjYXNlIFwicGFzcy10aHJvdWdoXCI6XHJcblx0XHRcdFx0aWYgKCFwb2ludHMgfHwgcG9pbnRzLmxlbmd0aCA8IDIpXHJcblx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdGlmIChwb2ludHMubGVuZ3RoID09IDIpXHJcblx0XHRcdFx0XHRyZXR1cm4gTWF0aDIucG9pbnRPbkxpbmUocG9pbnRzWzBdLCBwb2ludHNbMV0sIHNsaWRlckxlbmd0aCk7XHJcblx0XHRcdFx0aWYgKHBvaW50cy5sZW5ndGggPiAzKVxyXG5cdFx0XHRcdFx0cmV0dXJuIFNsaWRlci5nZXRFbmRQb2ludChcImJlemllclwiLCBzbGlkZXJMZW5ndGgsIHBvaW50cyk7XHJcblx0XHRcdFx0dmFyIFtjaXJjdW1DZW50ZXIsIHJhZGl1c10gPSBNYXRoMi5nZXRDaXJjdW1DaXJjbGUocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSk7XHJcblx0XHRcdFx0dmFyIHJhZGlhbnMgPSBzbGlkZXJMZW5ndGggLyByYWRpdXM7XHJcblx0XHRcdFx0aWYgKE1hdGgyLmlzTGVmdChwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdKSlcclxuXHRcdFx0XHRcdHJhZGlhbnMgKj0gLTE7XHJcblx0XHRcdFx0cmV0dXJuIE1hdGgyLnJvdGF0ZShjaXJjdW1DZW50ZXIsIHBvaW50c1swXSwgcmFkaWFucyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGNhbGN1bGF0ZSgpIHtcclxuXHRcdHZhciB0aW1pbmcgPSB0aGlzLmJlYXRtYXAuZ2V0VGltaW5nUG9pbnQodGhpcy5zdGFydFRpbWUpO1xyXG5cdFx0aWYgKHRpbWluZykge1xyXG5cdFx0XHR2YXIgcHhQZXJCZWF0ID0gdGhpcy5iZWF0bWFwLlNsaWRlck11bHRpcGxpZXIgKiAxMDAgKiBNYXRoLm1heCgwLjEsIHRpbWluZy52ZWxvY2l0eSk7XHJcblx0XHRcdHZhciBiZWF0c051bWJlciA9ICh0aGlzLnBpeGVsTGVuZ3RoICogdGhpcy5yZXBlYXRDb3VudCkgLyBweFBlckJlYXQ7XHJcblx0XHRcdHRoaXMuZHVyYXRpb24gPSBNYXRoLmNlaWwoYmVhdHNOdW1iZXIgKiB0aW1pbmcuYmVhdExlbmd0aCk7XHJcblx0XHRcdHRoaXMuZW5kVGltZSA9IHRoaXMuc3RhcnRUaW1lICsgdGhpcy5kdXJhdGlvbjtcclxuXHRcdH1cclxuXHRcdHZhciBlbmRQb2ludCA9IFNsaWRlci5nZXRFbmRQb2ludCh0aGlzLmN1cnZlVHlwZSwgdGhpcy5waXhlbExlbmd0aCwgdGhpcy5wb2ludHMpO1xyXG5cdFx0aWYgKGVuZFBvaW50KSB7XHJcblx0XHRcdHRoaXMuZW5kUG9zaXRpb24gPSBlbmRQb2ludDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZW5kUG9zaXRpb24gPSB0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAxXTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmN1cnZlVHlwZSA9PSBcInBhc3MtdGhyb3VnaFwiKSB7XHJcblx0XHRcdHRoaXMucGFzc3Rocm91Z2hjaXJjbGUgPSBNYXRoMi5nZXRDaXJjdW1DaXJjbGUodGhpcy5wb2ludHNbMF0sIHRoaXMucG9pbnRzWzFdLCB0aGlzLnBvaW50c1syXSk7XHJcblx0XHR9XHJcblx0XHRpZiAodHlwZW9mIHBhc3N0aHJvdWdoICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGxpbmUgIT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgYmV6aWVyICE9IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0aWYgKHRoaXMuY3VydmVUeXBlID09ICdwYXNzLXRocm91Z2gnKSB7XHJcblx0XHRcdFx0dGhpcy5zcGxpbmUgPSBwYXNzdGhyb3VnaCh0aGlzLnBvaW50cywgdGhpcy5waXhlbExlbmd0aCk7XHJcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJ2ZVR5cGUgPT0gJ2xpbmUnKSB7XHJcblx0XHRcdFx0dGhpcy5zcGxpbmUgPSBsaW5lKHRoaXMucG9pbnRzLCB0aGlzLnBpeGVsTGVuZ3RoKVswXTtcclxuXHRcdFx0fSBlbHNlIHsgLy9hc3N1bWUgaXQncyBhIEJlemllclxyXG5cdFx0XHRcdHRoaXMuc3BsaW5lID0gYmV6aWVyKHRoaXMucG9pbnRzLCB0aGlzLnBpeGVsTGVuZ3RoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnNwbGluZS5zcGxpY2UoLTEsIDEpO1xyXG5cdFx0XHR0aGlzLnNwbGluZS5wdXNoKHRoaXMuZW5kUG9zaXRpb24udG9BcnJheSgpKTtcclxuXHRcdH1cclxuXHRcdGlmICh0eXBlb2YgUGF0aDJEICE9IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0dGhpcy5wYXRoID0gbmV3IFBhdGgyRCgpO1xyXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc3BsaW5lLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0dGhpcy5wYXRoLmxpbmVUbyh0aGlzLnNwbGluZVtqXVswXSwgdGhpcy5zcGxpbmVbal1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDIgfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSB8ICgodGhpcy5jdXN0b21Db2xvciAmIDcpIDw8IDQpKTtcclxuXHRcdHBhcnRzLnB1c2goSGl0T2JqZWN0LnNlcmlhbGl6ZVNvdW5kVHlwZXModGhpcy5zb3VuZFR5cGVzKSk7XHJcblx0XHR2YXIgc2xpZGVyUG9pbnRzID0gW2N1cnZlVHlwZXNbdGhpcy5jdXJ2ZVR5cGVdXTtcclxuXHRcdHNsaWRlclBvaW50cy5wdXNoKC4uLnRoaXMucG9pbnRzLnNsaWNlKDEpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG5cdFx0XHRyZXR1cm4gaXRlbS50b1N0cmluZyhcIjpcIik7XHJcblx0XHR9KSk7XHJcblx0XHRwYXJ0cy5wdXNoKHNsaWRlclBvaW50cy5qb2luKFwifFwiKSk7XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMucmVwZWF0Q291bnQpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBpeGVsTGVuZ3RoKTtcclxuXHRcdHZhciBlZGdlU291bmRzID0gW10sXHJcblx0XHRcdGVkZ2VBZGRpdGlvbnMgPSBbXTtcclxuXHRcdHRoaXMuZWRnZXMuZm9yRWFjaChlZGdlID0+IHtcclxuXHRcdFx0ZWRnZVNvdW5kcy5wdXNoKEhpdE9iamVjdC5zZXJpYWxpemVTb3VuZFR5cGVzKGVkZ2Uuc291bmRUeXBlcykpO1xyXG5cdFx0XHRlZGdlQWRkaXRpb25zLnB1c2goKGVkZ2UuYWRkaXRpb25zLnNhbXBsZXNldCA/IGFkZGl0aW9uVHlwZXMuaW5kZXhPZihlZGdlLmFkZGl0aW9ucy5zYW1wbGVzZXQpIDogMCkgKyBcIjpcIiArXHJcblx0XHRcdFx0KGVkZ2UuYWRkaXRpb25zLmFkZGl0aW9uc1NhbXBsZXNldCA/IGFkZGl0aW9uVHlwZXMuaW5kZXhPZihlZGdlLmFkZGl0aW9ucy5hZGRpdGlvbnNTYW1wbGVzZXQpIDogMCkpO1xyXG5cdFx0fSk7XHJcblx0XHRwYXJ0cy5wdXNoKGVkZ2VTb3VuZHMuam9pbignfCcpKTtcclxuXHRcdHBhcnRzLnB1c2goZWRnZUFkZGl0aW9ucy5qb2luKCd8JykpO1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IFtdO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuc2FtcGxlID8gYWRkaXRpb25UeXBlcy5pbmRleE9mKHRoaXMuYWRkaXRpb25zLnNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YodGhpcy5hZGRpdGlvbnMuYWRkaXRpb25hbFNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4ID8gdGhpcy5hZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lID8gdGhpcy5hZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKFwiXCIpO1xyXG5cdFx0cGFydHMucHVzaChhZGRpdGlvbnMuam9pbihcIjpcIikpO1xyXG5cdFx0cmV0dXJuIHBhcnRzLmpvaW4oXCIsXCIpO1xyXG5cdH1cclxuXHRob3ZlcigpIHtcclxuXHRcdHZhciBjdHgyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMyJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdGN0eDIubGluZVdpZHRoID0gMC41O1xyXG5cdFx0Y3R4Mi5zdHJva2VTdHlsZSA9ICcjNTU1JztcclxuXHRcdGN0eDIuYmVnaW5QYXRoKCk7XHJcblx0XHR2YXIgc2tpcCA9IGZhbHNlO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaW5fYm94ID0gdGhpcy5wb2ludHNbaV0ueCAtIDIuNSA8IG1vdXNlWCAmJiB0aGlzLnBvaW50c1tpXS54ICsgMi41ID4gbW91c2VYICYmIHRoaXMucG9pbnRzW2ldLnkgLSAyLjUgPCBtb3VzZVkgJiYgdGhpcy5wb2ludHNbaV0ueSArIDIuNSA+IG1vdXNlWTtcclxuXHRcdFx0aWYgKGluX2JveCkgRWRpdG9yLnNsaWRlcnB0X2hvdmVyZWQgPSB0aGlzLnBvaW50c1tpXTtcclxuXHRcdFx0aWYgKHNraXApIHtcclxuXHRcdFx0XHRza2lwID0gZmFsc2U7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGkgPCB0aGlzLnBvaW50cy5sZW5ndGggLSAxICYmIHRoaXMucG9pbnRzW2ldLmVxdWFscyh0aGlzLnBvaW50c1tpICsgMV0pKSB7XHJcblx0XHRcdFx0c2tpcCA9IHRydWU7XHJcblx0XHRcdFx0Y3R4Mi5maWxsU3R5bGUgPSBpbl9ib3ggPyAnI0YwMCcgOiAnI0UwMCc7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGN0eDIuZmlsbFN0eWxlID0gaW5fYm94ID8gJyNGRkYnIDogJyNEREQnO1xyXG5cdFx0XHRjdHgyLmdsb2JhbEFscGhhID0gaW5fYm94ID8gMSA6IDAuNzU7XHJcblx0XHRcdGN0eDIuZmlsbFJlY3QodGhpcy5wb2ludHNbaV0ueCAtIDIsIHRoaXMucG9pbnRzW2ldLnkgLSAyLCA0LCA0KTtcclxuXHRcdFx0Y3R4Mi5nbG9iYWxBbHBoYSA9IDE7XHJcblx0XHRcdGN0eDIuc3Ryb2tlUmVjdCh0aGlzLnBvaW50c1tpXS54IC0gMiwgdGhpcy5wb2ludHNbaV0ueSAtIDIsIDQsIDQpO1xyXG5cdFx0XHRjdHgyLmxpbmVUbyh0aGlzLnBvaW50c1tpXS54LCB0aGlzLnBvaW50c1tpXS55KTtcclxuXHRcdH1cclxuXHRcdGN0eDIubGluZVdpZHRoID0gMC4yNTtcclxuXHRcdGN0eDIuc3Ryb2tlU3R5bGUgPSAnI0ZGRic7XHJcblx0XHRjdHgyLnN0cm9rZSgpO1xyXG5cdH1cclxuXHRyZW5kZXIodCwgY29sSW5kZXgsIGNvbWJvTnVtYmVyKSB7XHJcblx0XHR2YXIgcG9zeCwgcG9zeSwgcl9hcztcclxuXHRcdHZhciBpID0gdGhpcy5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZih0aGlzKTtcclxuXHRcdGlmICghdCkgdCA9IEVkaXRvci5zb3VyY2UudDtcclxuXHRcdGlmICghY29sSW5kZXggfHwgIWNvbWJvTnVtYmVyKSB7XHJcblx0XHRcdGlmICghY29sSW5kZXgpIGNvbEluZGV4ID0gRWRpdG9yLm9iamNbaV1bMF0gJSBFZGl0b3IuY29scy5sZW5ndGg7XHJcblx0XHRcdGlmICghY29tYm9OdW1iZXIpIGNvbWJvTnVtYmVyID0gRWRpdG9yLm9iamNbaV1bMV07XHJcblx0XHR9XHJcblx0XHR2YXIgYXIgPSBhcnMocGFyc2VGbG9hdCh0aGlzLmJlYXRtYXAuQXBwcm9hY2hSYXRlKSk7XHJcblx0XHR2YXIgY3MgPSBjc3B4KHBhcnNlRmxvYXQodGhpcy5iZWF0bWFwLkNpcmNsZVNpemUpKTtcclxuXHRcdHZhciBvZmZzZXQgPSB0aGlzLnN0YXJ0VGltZSAvIDEwMDA7XHJcblx0XHR2YXIgeCA9IHRoaXMucG9zaXRpb24ueCAtIGNzIC8gMixcclxuXHRcdFx0eSA9IHRoaXMucG9zaXRpb24ueSAtIGNzIC8gMjtcclxuXHRcdHZhciB0ZCA9IG9mZnNldCAtIHQ7XHJcblx0XHR2YXIgZW5kVGltZSA9IHRoaXMuZW5kVGltZSAvIDEwMDA7XHJcblx0XHR2YXIgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uIC8gMTAwMDtcclxuXHRcdGlmICh0ZCA+IGFyIHx8IHQgPiBlbmRUaW1lICsgMC44KSByZXR1cm4gZmFsc2U7XHJcblx0XHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0Y3R4LnNhdmUoKTtcclxuXHRcdHZhciBjdHgyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMyJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdGN0eDIuc2F2ZSgpO1xyXG5cdFx0aWYgKHRkID4gMCkgY3R4Lmdsb2JhbEFscGhhID0gMiAtIDIgKiB0ZCAvIGFyO1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWF4KDEgLSAodCAtIGVuZFRpbWUpIC8gdGhpcy5mYWRldGltZSwgMCk7XHJcblx0XHRcdGN0eDIuZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgxIC0gKHQgLSBlbmRUaW1lKSAvIHRoaXMuZmFkZXRpbWUsIDApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY2FjaGUuY29sICE9IEVkaXRvci5jb2xzW2NvbEluZGV4XSB8fCB0aGlzLmNhY2hlLmNzICE9IGNzIHx8IHRoaXMuY2FjaGUuZmxhZykge1xyXG5cdFx0XHRpZiAodGhpcy5jYWNoZS5jcyAhPSBjcyB8fCAhdGhpcy5jYWNoZS5jYWNoZWQgfHwgdGhpcy5jYWNoZS5mbGFnKSB7XHJcblx0XHRcdFx0dGhpcy5jYWNoZS5yZW5kZXIgPSByZW5kZXJfY3VydmUyKHRoaXMuc3BsaW5lLCBjcyk7XHJcblx0XHRcdFx0dGhpcy5jYWNoZS5mbGFnID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5jYWNoZS5jb2wgPSBFZGl0b3IuY29sc1tjb2xJbmRleF07XHJcblx0XHRcdHRoaXMuY2FjaGUuY3MgPSBjcztcclxuXHRcdFx0dmFyIHNsaWRlcl9ib3JkZXIgPSBFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLlNsaWRlckJvcmRlciA/IGNvbG9yVG9BcnJheShFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLlNsaWRlckJvcmRlcikgOiB1bmRlZmluZWQ7XHJcblx0XHRcdHZhciBzbGlkZXJfdHJhY2tjb2xvciA9IEVkaXRvci5za2luLl9tZXRhLm9wdGlvbnMuU2xpZGVyVHJhY2tPdmVycmlkZSA/IGNvbG9yVG9BcnJheShFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLlNsaWRlclRyYWNrT3ZlcnJpZGUpIDogRWRpdG9yLmNvbHNbY29sSW5kZXhdO1xyXG5cdFx0XHRpZiAoJ1VTRV9CRUFUTUFQX1NLSU5fUExBQ0VIT0xERVInKSB7XHJcblx0XHRcdFx0aWYgKEVkaXRvci5iZWF0bWFwLlNsaWRlckJvcmRlcikgc2xpZGVyX2JvcmRlciA9IEVkaXRvci5iZWF0bWFwLlNsaWRlckJvcmRlci50b0FycmF5KCk7XHJcblx0XHRcdFx0aWYgKEVkaXRvci5iZWF0bWFwLlNsaWRlclRyYWNrT3ZlcnJpZGUpIHNsaWRlcl90cmFja2NvbG9yID0gRWRpdG9yLmJlYXRtYXAuU2xpZGVyVHJhY2tPdmVycmlkZS50b0FycmF5KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQud2lkdGggPSB0aGlzLmNhY2hlLnJlbmRlclswXVswXS53aWR0aDtcclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQuaGVpZ2h0ID0gdGhpcy5jYWNoZS5yZW5kZXJbMF1bMF0uaGVpZ2h0O1xyXG5cdFx0XHR2YXIgdGVtcGN0eCA9IHRoaXMuY2FjaGUuY2FjaGVkLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRcdHRlbXBjdHguZHJhd0ltYWdlKHRpbnQodGhpcy5jYWNoZS5yZW5kZXJbMF1bMF0sIHNsaWRlcl9ib3JkZXIpLCAwLCAwKTtcclxuXHRcdFx0dGVtcGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcclxuXHRcdFx0dGVtcGN0eC5kcmF3SW1hZ2UodGhpcy5jYWNoZS5yZW5kZXJbMF1bMV0sIDAsIDApO1xyXG5cdFx0XHR0ZW1wY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XHJcblx0XHRcdHRlbXBjdHguZ2xvYmFsQWxwaGEgPSAwLjc1O1xyXG5cdFx0XHR0ZW1wY3R4LmRyYXdJbWFnZSh0aW50KHRoaXMuY2FjaGUucmVuZGVyWzBdWzFdLCBzbGlkZXJfdHJhY2tjb2xvciksIDAsIDApO1xyXG5cdFx0XHR0ZW1wY3R4LmRyYXdJbWFnZSh0aGlzLmNhY2hlLnJlbmRlclswXVsyXSwgMCwgMCk7XHJcblx0XHR9XHJcblx0XHRjdHguZHJhd0ltYWdlKHRoaXMuY2FjaGUuY2FjaGVkLCB0aGlzLmNhY2hlLnJlbmRlclsxXVswXSwgdGhpcy5jYWNoZS5yZW5kZXJbMV1bMV0sIHRoaXMuY2FjaGUuY2FjaGVkLndpZHRoIC8gMiwgdGhpcy5jYWNoZS5jYWNoZWQuaGVpZ2h0IC8gMik7XHJcblx0XHR2YXIgciA9IHRoaXMucmVwZWF0Q291bnQ7XHJcblx0XHRpZiAociA+IDEpIHtcclxuXHRcdFx0dmFyIHB1bHNlID0gKHQgLSB0aGlzLnN0YXJ0VGltZSAvIDEwMDApICUgMC42O1xyXG5cdFx0XHR2YXIgcmFycm93c2NhbGUgPSBFZGl0b3Iuc2tpbi5yZXZlcnNlYXJyb3cuaGVpZ2h0IC8gRWRpdG9yLnNraW4uaGl0Y2lyY2xlLmhlaWdodDtcclxuXHRcdFx0dmFyIHJhcnJvd2ggPSByYXJyb3dzY2FsZSAqIGNzICsgcHVsc2UgKiAyMDtcclxuXHRcdFx0dmFyIHJhcnJvd3cgPSByYXJyb3doIC8gRWRpdG9yLnNraW4ucmV2ZXJzZWFycm93LmhlaWdodCAqIEVkaXRvci5za2luLnJldmVyc2VhcnJvdy53aWR0aDtcclxuXHRcdFx0dmFyIGkwID0gKHQgLSBvZmZzZXQpIC8gKGR1cmF0aW9uIC8gcik7XHJcblx0XHRcdGZvciAodmFyIGkgPSByIC0gMTsgaSA+IDA7IGktLSkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdHZhciB0ZW1wdCA9IHRoaXMuc3RhcnRUaW1lICsgaSAqIGR1cmF0aW9uIC8gcjtcclxuXHRcdFx0XHRpZiAodGVtcHQgKyAwLjggPiB0KSBjb250aW51ZTtcclxuXHRcdFx0XHRpZiAoaSA+IGkwICsgMikgYnJlYWs7XHJcblx0XHRcdFx0dmFyIHAgPSB0aGlzLnNwbGluZVtpICUgMiA/IHRoaXMuc3BsaW5lLmxlbmd0aCAtIDEgOiAwXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKHRkIDw9IDAgJiYgZHVyYXRpb24gKyB0ZCA+IC0wLjIpIHtcclxuXHRcdFx0dmFyIHByb2cgPSAtdGQgLyBkdXJhdGlvbjsgLy8gcHJvZ3Jlc3MgcGVyY2VudGFnZSAoMC0xKVxyXG5cdFx0XHR2YXIgY3VycCA9IHByb2cgKiByOyAvLyBjdXJyZW50IHByb2dyZXNzIChlcXVpdmFsZW50IHRvIGRpc3RhbmNlIHRyYXZlbGVkIGRpdmlkZWQgYnkgc2xpZGVyIGxlbmd0aClcclxuXHRcdFx0dmFyIGRpciA9IDEgLSAyICogKE1hdGguZmxvb3IoY3VycCkgJSAyKTsgLy8gZGlyZWN0aW9uIHRoZSBiYWxsIGlzIHRyYXZlbGluZywgMSBmb3Igbm9ybWFsLCAtMSBmb3IgcmV2ZXJzZVxyXG5cdFx0XHR2YXIgZGlzdGFuY2UgPSBjdXJwICUgMSAqIHRoaXMucGl4ZWxMZW5ndGg7XHJcblx0XHRcdHZhciBqID0gZGlyID09IDEgPyAwIDogdGhpcy5zcGxpbmUubGVuZ3RoIC0gMTtcclxuXHRcdFx0dmFyIGplbmQgPSBkaXIgPT0gMSA/IHRoaXMuc3BsaW5lLmxlbmd0aCAtIDEgOiAwO1xyXG5cdFx0XHR3aGlsZSAoaiAhPSBqZW5kKSB7XHJcblx0XHRcdFx0dmFyIHAxID0gdGhpcy5zcGxpbmVbal07XHJcblx0XHRcdFx0dmFyIHAyID0gdGhpcy5zcGxpbmVbaiArIGRpcl07XHJcblx0XHRcdFx0dmFyIGRwYXJ0ID0gTWF0aC5zcXJ0KE1hdGgucG93KHAxWzBdIC0gcDJbMF0sIDIpICsgTWF0aC5wb3cocDFbMV0gLSBwMlsxXSwgMikpO1xyXG5cdFx0XHRcdGlmIChkcGFydCA+IGRpc3RhbmNlIC8gMS41KSB7XHJcblx0XHRcdFx0XHQvL3dpdGhvdXQgZXh0cmEgaW50ZXJwb2xhdGlvbiBzdHVmZlxyXG5cdFx0XHRcdFx0Ly9jdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydzbGlkZXJiMCddLCBwMVswXSAtIGNzIC8gMiwgcDFbMV0gLSBjcyAvIDIsIGNzLCBjcyk7XHJcblx0XHRcdFx0XHRpZiAoZHVyYXRpb24gKyB0ZCA+PSAwLjAwMikge1xyXG5cdFx0XHRcdFx0XHRwb3N4ID0gcDFbMF0gKyBkaXN0YW5jZSAvIGRwYXJ0ICogKHAyWzBdIC0gcDFbMF0pO1xyXG5cdFx0XHRcdFx0XHRwb3N5ID0gcDFbMV0gKyBkaXN0YW5jZSAvIGRwYXJ0ICogKHAyWzFdIC0gcDFbMV0pO1xyXG5cdFx0XHRcdFx0XHR2YXIgY3MyID0gY3MgKiAxMSAvIDEyO1xyXG5cdFx0XHRcdFx0XHRjdHgyLnNhdmUoKTtcclxuXHRcdFx0XHRcdFx0Y3R4Mi50cmFuc2xhdGUocG9zeCwgcG9zeSk7XHJcblx0XHRcdFx0XHRcdGN0eDIucm90YXRlKE1hdGguYXRhbjIocDJbMV0gLSBwMVsxXSwgcDJbMF0gLSBwMVswXSkgKyAoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5TbGlkZXJCYWxsRmxpcCA9PSBcIjBcIiAmJiBkaXIgPT0gLTEgPyBNYXRoLlBJIDogMCkpO1xyXG5cdFx0XHRcdFx0XHRjdHgyLmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnc2xpZGVyYjAnICsgY29sSW5kZXhdLCAtY3MyIC8gMiwgLWNzMiAvIDIsIGNzMiwgY3MyKTtcclxuXHRcdFx0XHRcdFx0Y3R4Mi5yZXN0b3JlKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR2YXIgdGVtcCA9IHIgJSAyID8gdGhpcy5zcGxpbmUubGVuZ3RoIC0gMSA6IDA7XHJcblx0XHRcdFx0XHRcdHBvc3ggPSB0aGlzLnNwbGluZVt0ZW1wXVswXTtcclxuXHRcdFx0XHRcdFx0cG9zeSA9IHRoaXMuc3BsaW5lW3RlbXBdWzFdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y3R4Mi5zYXZlKCk7XHJcblx0XHRcdFx0XHRpZiAodGQgPiAtMC4wNSkgY3R4Mi5nbG9iYWxBbHBoYSA9IC10ZCAvIDAuMDU7XHJcblx0XHRcdFx0XHRlbHNlIGN0eDIuZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgxIC0gKHQgLSBlbmRUaW1lKSAvIHRoaXMuZmFkZXRpbWUsIDApO1xyXG5cdFx0XHRcdFx0dmFyIHJfZnMgPSB0ZCA+IC0wLjEgPyBjcyAqICgxIC0gdGQgKiAxMCkgOiAodGQgPCAtZHVyYXRpb24gPyAyICogY3MgKyAodGQgKyBkdXJhdGlvbikgKiA1ICogMC41ICogY3MgOiAyICogY3MpO1xyXG5cdFx0XHRcdFx0Y3R4Mi5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uc2xpZGVyZm9sbG93Y2lyY2xlLCBwb3N4IC0gcl9mcyAvIDIsIHBvc3kgLSByX2ZzIC8gMiwgcl9mcywgcl9mcyk7XHJcblx0XHRcdFx0XHRjdHgyLnJlc3RvcmUoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkaXN0YW5jZSAtPSBkcGFydDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aiArPSBkaXI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmICh0ZCA+IDApIHtcclxuXHRcdFx0cl9hcyA9IGNzICogKDIuNSAqIHRkIC8gYXIgKyAxKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnYXBwcm9hY2hjaXJjbGUnICsgY29sSW5kZXhdLCB4ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHkgKyBjcyAvIDIgLSByX2FzIC8gMiwgcl9hcywgcl9hcyk7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2hpdGNpcmNsZScgKyBjb2xJbmRleF0sIHgsIHksIGNzLCBjcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjdHguZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgxICsgdGQgLyAwLjgsIDApO1xyXG5cdFx0XHRyX2FzID0gY3MgKiBNYXRoLm1pbigtdGQgLyBhciArIDEsIDEzIC8gMTIpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydhcHByb2FjaGNpcmNsZScgKyBjb2xJbmRleF0sIHggKyBjcyAvIDIgLSByX2FzIC8gMiwgeSArIGNzIC8gMiAtIHJfYXMgLyAyLCByX2FzLCByX2FzKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGUsIHgsIHksIGNzLCBjcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIGRyYXdPdmVybGF5ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZW92ZXJsYXksIHgsIHksIGNzLCBjcyk7XHJcblx0XHR9O1xyXG5cdFx0dmFyIGRyYXdOdW1iZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBudW0gPSBFZGl0b3Iuc2tpblsnZGVmYXVsdC0nICsgY29tYm9OdW1iZXJdO1xyXG5cdFx0XHR2YXIgbmV3aCA9IG51bS5oZWlnaHQgLyBFZGl0b3Iuc2tpbi5oaXRjaXJjbGUuaGVpZ2h0ICogY3MgKiAzIC8gNDtcclxuXHRcdFx0dmFyIGRoID0gbmV3aCAvIG51bS5oZWlnaHQ7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UobnVtLCB4IC0gbnVtLndpZHRoICogZGggLyAyICsgY3MgLyAyLCB5IC0gbmV3aCAvIDIgKyBjcyAvIDIsIG51bS53aWR0aCAqIGRoLCBuZXdoKTtcclxuXHRcdH07XHJcblx0XHRpZiAocGFyc2VJbnQoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1iZXIgfHwgRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1lciwgMTApKSB7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdFx0ZHJhd092ZXJsYXkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRyYXdPdmVybGF5KCk7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdH1cclxuXHRcdGN0eC5yZXN0b3JlKCk7XHJcblx0XHRjdHgyLnJlc3RvcmUoKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHR0aW1lbGluZVJlbmRlcigpIHtcclxuXHRcdHZhciBpID0gdGhpcy5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZih0aGlzKTtcclxuXHRcdHZhciBjb2xJbmRleCA9IEVkaXRvci5vYmpjW2ldWzBdICUgRWRpdG9yLmNvbHMubGVuZ3RoO1xyXG5cdFx0dmFyIGNvbG9yID0gRWRpdG9yLmNvbHNbY29sSW5kZXhdO1xyXG5cdFx0dmFyIGNvbWJvTnVtYmVyID0gRWRpdG9yLm9iamNbaV1bMV07XHJcblx0XHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVsaW5lMicpLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHR2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKSAqIDAuODtcclxuXHRcdHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKiAwLjEyO1xyXG5cdFx0dmFyIGNzID0gaGVpZ2h0ICogMC44O1xyXG5cdFx0dmFyIHggPSAoKHRoaXMuc3RhcnRUaW1lIC8gMTAwMCAtIEVkaXRvci5zb3VyY2UudCkgKiBFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gLyA2ICsgLjUpICogd2lkdGggLSBjcyAvIDI7XHJcblx0XHR2YXIgeDIgPSAoKHRoaXMuZW5kVGltZSAvIDEwMDAgLSBFZGl0b3Iuc291cmNlLnQpICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tIC8gNiArIC41KSAqIHdpZHRoIC0gY3MgLyAyO1xyXG5cdFx0aWYgKHgyIDwgLWNzIHx8IHggPiB3aWR0aCkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0dmFyIHkgPSBoZWlnaHQgLyA1O1xyXG5cdFx0dmFyIHIgPSB0aGlzLnJlcGVhdENvdW50O1xyXG5cclxuXHRcdGN0eC5zYXZlKCk7XHJcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgnICsgY29sb3JbMF0gKyAnLCAnICsgY29sb3JbMV0gKyAnLCAnICsgY29sb3JbMl0gKyAnLCAnICsgKHRoaXMuc2VsZWN0ZWQgPyAwLjggOiAwLjUpICsgJyknO1xyXG5cdFx0Y3R4LmxpbmVKb2luID0gJ3JvdW5kJztcclxuXHRcdGN0eC5saW5lQ2FwID0gJ3JvdW5kJztcclxuXHRcdGN0eC5saW5lV2lkdGggPSAxMSAqIGNzIC8gMTI7XHJcblx0XHRjdHguYmVnaW5QYXRoKCk7XHJcblx0XHRjdHgubW92ZVRvKHggKyBjcyAvIDIsIHkgKyBjcyAvIDIpO1xyXG5cdFx0Y3R4LmxpbmVUbyh4MiArIGNzIC8gMiwgeSArIGNzIC8gMik7XHJcblx0XHRjdHguc3Ryb2tlKCk7XHJcblx0XHRjdHgucmVzdG9yZSgpO1xyXG5cclxuXHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2hpdGNpcmNsZScgKyBjb2xJbmRleF0sIHgyLCB5LCBjcywgY3MpO1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVvdmVybGF5LCB4MiwgeSwgY3MsIGNzKTtcclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkKVxyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZXNlbGVjdCwgeDIsIHksIGNzLCBjcyk7XHJcblx0XHR2YXIgZHggPSAoeDIgLSB4KSAvIHI7XHJcblx0XHR2YXIgcmFycm93c2NhbGUgPSBFZGl0b3Iuc2tpbi5yZXZlcnNlYXJyb3cuaGVpZ2h0IC8gRWRpdG9yLnNraW4uaGl0Y2lyY2xlLmhlaWdodDtcclxuXHRcdHZhciByYXJyb3doID0gcmFycm93c2NhbGUgKiBjcztcclxuXHRcdHZhciByYXJyb3d3ID0gcmFycm93aCAvIEVkaXRvci5za2luLnJldmVyc2VhcnJvdy5oZWlnaHQgKiBFZGl0b3Iuc2tpbi5yZXZlcnNlYXJyb3cud2lkdGg7XHJcblx0XHRmb3IgKHZhciBpID0gMTsgaSA8IHI7IGkrKykge1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUnICsgY29sSW5kZXhdLCB4MiAtIGR4ICogaSwgeSwgY3MsIGNzKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVvdmVybGF5LCB4MiAtIGR4ICogaSwgeSwgY3MsIGNzKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5yZXZlcnNlYXJyb3csIHgyIC0gZHggKiBpICsgKGNzIC0gcmFycm93dykgLyAyLCB5ICsgKGNzIC0gcmFycm93aCkgLyAyLCByYXJyb3d3LCByYXJyb3doKTtcclxuXHRcdH1cdFxyXG5cdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnaGl0Y2lyY2xlJyArIGNvbEluZGV4XSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdHZhciBkcmF3T3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVvdmVybGF5LCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0fTtcclxuXHRcdHZhciBkcmF3TnVtYmVyID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgbnVtID0gRWRpdG9yLnNraW5bJ2RlZmF1bHQtJyArIGNvbWJvTnVtYmVyXTtcclxuXHRcdFx0dmFyIG5ld2ggPSBudW0uaGVpZ2h0IC8gRWRpdG9yLnNraW4uaGl0Y2lyY2xlLmhlaWdodCAqIGNzICogMyAvIDQ7XHJcblx0XHRcdHZhciBkaCA9IG5ld2ggLyBudW0uaGVpZ2h0O1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKG51bSwgeCAtIG51bS53aWR0aCAqIGRoIC8gMiArIGNzIC8gMiwgeSAtIG5ld2ggLyAyICsgY3MgLyAyLCBudW0ud2lkdGggKiBkaCwgbmV3aCk7XHJcblx0XHR9O1xyXG5cdFx0aWYgKHBhcnNlSW50KEVkaXRvci5za2luLl9tZXRhLm9wdGlvbnMuSGl0Q2lyY2xlT3ZlcmxheUFib3ZlTnVtYmVyIHx8IEVkaXRvci5za2luLl9tZXRhLm9wdGlvbnMuSGl0Q2lyY2xlT3ZlcmxheUFib3ZlTnVtZXIsIDEwKSkge1xyXG5cdFx0XHRkcmF3TnVtYmVyKCk7XHJcblx0XHRcdGRyYXdPdmVybGF5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkcmF3T3ZlcmxheSgpO1xyXG5cdFx0XHRkcmF3TnVtYmVyKCk7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zZWxlY3RlZClcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVzZWxlY3QsIHgsIHksIGNzLCBjcyk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFNwaW5uZXIgZXh0ZW5kcyBIaXRPYmplY3Qge1xyXG5cdGNvbnN0cnVjdG9yKHByb3BlcnRpZXMpIHtcclxuXHRcdHN1cGVyKHByb3BlcnRpZXMpO1xyXG5cdFx0dGhpcy5mYWRldGltZSA9IDAuMjU7XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDggfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSk7XHJcblx0XHRwYXJ0cy5wdXNoKEhpdE9iamVjdC5zZXJpYWxpemVTb3VuZFR5cGVzKHRoaXMuc291bmRUeXBlcykpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLmVuZFRpbWUpO1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IFtdO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuc2FtcGxlID8gYWRkaXRpb25UeXBlcy5pbmRleE9mKHRoaXMuYWRkaXRpb25zLnNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YodGhpcy5hZGRpdGlvbnMuYWRkaXRpb25hbFNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4ID8gdGhpcy5hZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lID8gdGhpcy5hZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKFwiXCIpO1xyXG5cdFx0cGFydHMucHVzaChhZGRpdGlvbnMuam9pbihcIjpcIikpO1xyXG5cdFx0cmV0dXJuIHBhcnRzLmpvaW4oXCIsXCIpO1xyXG5cdH1cclxuXHRyZW5kZXIodCwgY29sSW5kZXgsIGNvbWJvTnVtYmVyKSB7XHJcblx0XHR2YXIgZHVyID0gdGhpcy5kdXJhdGlvbiAvIDEwMDA7XHJcblx0XHR2YXIgdGQgPSB0aGlzLnN0YXJ0VGltZSAvIDEwMDAgLSB0O1xyXG5cdFx0aWYgKHRoaXMuZW5kVGltZSAvIDEwMDAgKyB0aGlzLmZhZGV0aW1lIDwgdCB8fCB0ZCA+IDAuNCkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0dmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdGN0eC5zYXZlKCk7XHJcblx0XHRjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJkZXN0aW5hdGlvbi1vdmVyXCI7XHJcblx0XHRjdHgudHJhbnNsYXRlKDI1NiwgMTkyKTtcclxuXHRcdHZhciBkcmF3c3Bpbm5lciA9IGZ1bmN0aW9uIChyLCBhLCB0LCBtaWRkbGUpIHtcclxuXHRcdFx0Y3R4Lmdsb2JhbEFscGhhID0gYTtcclxuXHRcdFx0aWYgKCFtaWRkbGUpIG1pZGRsZSA9IEVkaXRvci5za2luWydzcGlubmVyLW1pZGRsZSddO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKG1pZGRsZSwgLXIgKiAxLjAxLCAtciAqIDEuMDEsIDIuMDIgKiByLCAyLjAyICogcik7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ3NwaW5uZXItbWlkZGxlMiddLCAtciAqIDAuMDI1LCAtciAqIDAuMDI1LCAyICogciAqIDAuMDI1LCAyICogciAqIDAuMDI1KTtcclxuXHRcdFx0Y3R4LnNhdmUoKTtcclxuXHRcdFx0Y3R4LnJvdGF0ZSh0ICogNCAqIE1hdGguUEkpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydzcGlubmVyLXRvcCddLCAtciwgLXIsIDIgKiByLCAyICogcik7XHJcblx0XHRcdGN0eC5yZXN0b3JlKCk7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ3NwaW5uZXItYm90dG9tJ10sIC1yLCAtciwgMiAqIHIsIDIgKiByKTtcclxuXHRcdH07XHJcblx0XHRpZiAodGQgPCAwICYmIC10ZCA8IGR1cikge1xyXG5cdFx0XHQvL2ZpcnN0IG9uZSBncmFkdWFsbHkgaGFzIGl0IHR1cm4gcmVkLCBsYWdzIG1vcmVcclxuXHRcdFx0Ly9kcmF3c3Bpbm5lcigxNzIgKyA0MCAqIE1hdGguc3FydCgtdGQgLyBkdXIpLCAxLCB0ZCwgdGludChFZGl0b3Iuc2tpblsnc3Bpbm5lci1taWRkbGUnXSwgWzI1NSwgMjU1ICogKDEgKyB0ZCAvIGR1ciksIDI1NSAqICgxICsgdGQgLyBkdXIpXSkpO1xyXG5cdFx0XHRkcmF3c3Bpbm5lcigxNzIgKyA0MCAqIE1hdGguc3FydCgtdGQgLyBkdXIpLCAxLCB0ZCk7XHJcblx0XHR9IGVsc2UgaWYgKHRkID4gMCAmJiB0ZCA8IDAuNCkge1xyXG5cdFx0XHRkcmF3c3Bpbm5lcigxNzIsIDEgLSB0ZCAvIDAuNCwgMCk7XHJcblx0XHR9IGVsc2UgaWYgKHRkIDwgMCAmJiAtdGQgPCBkdXIgKyB0aGlzLmZhZGV0aW1lKSB7XHJcblx0XHRcdGRyYXdzcGlubmVyKDIxMiwgMSArIChkdXIgKyB0ZCkgLyAwLjI1LCBkdXIpO1xyXG5cdFx0fVxyXG5cdFx0Y3R4LnJlc3RvcmUoKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHR0aW1lbGluZVJlbmRlcigpIHtcclxuXHRcdHZhciBpID0gdGhpcy5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZih0aGlzKTtcclxuXHRcdHZhciBjb2xvciA9IFsxMjgsIDEyOCwgMTI4XTtcclxuXHRcdHZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZWxpbmUyJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdHZhciB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpICogMC44O1xyXG5cdFx0dmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTI7XHJcblx0XHR2YXIgY3MgPSBoZWlnaHQgKiAwLjg7XHJcblx0XHR2YXIgeCA9ICgodGhpcy5zdGFydFRpbWUgLyAxMDAwIC0gRWRpdG9yLnNvdXJjZS50KSAqIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSAvIDYgKyAuNSkgKiB3aWR0aCAtIGNzIC8gMjtcclxuXHRcdHZhciB4MiA9ICgodGhpcy5lbmRUaW1lIC8gMTAwMCAtIEVkaXRvci5zb3VyY2UudCkgKiBFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gLyA2ICsgLjUpICogd2lkdGggLSBjcyAvIDI7XHJcblx0XHRpZiAoeDIgPC1jcyB8fCB4ID4gd2lkdGgpIHJldHVybiBmYWxzZTtcclxuXHRcdHZhciB5ID0gaGVpZ2h0IC8gNTtcclxuXHRcdFxyXG5cdFx0Y3R4LnNhdmUoKTtcclxuXHRcdGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKCcgKyBjb2xvclswXSArICcsICcgKyBjb2xvclsxXSArICcsICcgKyBjb2xvclsyXSArICcsIDAuNSknO1xyXG5cdFx0Y3R4LmxpbmVKb2luID0gJ3JvdW5kJztcclxuXHRcdGN0eC5saW5lQ2FwID0gJ3JvdW5kJztcclxuXHRcdGN0eC5saW5lV2lkdGggPSAxMSAqIGNzIC8gMTI7XHJcblx0XHRjdHguYmVnaW5QYXRoKCk7XHJcblx0XHRjdHgubW92ZVRvKHggKyBjcyAvIDIsIHkgKyBjcyAvIDIpO1xyXG5cdFx0Y3R4LmxpbmVUbyh4MiArIGNzIC8gMiwgeSArIGNzIC8gMik7XHJcblx0XHRjdHguc3Ryb2tlKCk7XHJcblx0XHRjdHgucmVzdG9yZSgpO1xyXG5cclxuXHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2hpdGNpcmNsZS0xJ10sIHgyLCB5LCBjcywgY3MpO1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVvdmVybGF5LCB4MiwgeSwgY3MsIGNzKTtcclxuXHRcdGlmICh0aGlzLnNlbGVjdGVkKVxyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luLmhpdGNpcmNsZXNlbGVjdCwgeDIsIHksIGNzLCBjcyk7XHJcblx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUtMSddLCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpbi5oaXRjaXJjbGVvdmVybGF5LCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQpXHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlc2VsZWN0LCB4LCB5LCBjcywgY3MpO1xyXG5cdFx0dmFyIG51bSA9IEVkaXRvci5za2luWydkZWZhdWx0LTEnXTtcclxuXHRcdHZhciBuZXdoID0gbnVtLmhlaWdodCAvIEVkaXRvci5za2luLmhpdGNpcmNsZS5oZWlnaHQgKiBjcyAqIDMgLyA0O1xyXG5cdFx0dmFyIGRoID0gbmV3aCAvIG51bS5oZWlnaHQ7XHJcblx0XHRjdHguZHJhd0ltYWdlKG51bSwgeCAtIG51bS53aWR0aCAqIGRoIC8gMiArIGNzIC8gMiwgeSAtIG5ld2ggLyAyICsgY3MgLyAyLCBudW0ud2lkdGggKiBkaCwgbmV3aCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBIaXRPYmplY3Q7XHJcblx0bW9kdWxlLmV4cG9ydHMuSGl0Q2lyY2xlID0gSGl0Q2lyY2xlO1xyXG5cdG1vZHVsZS5leHBvcnRzLlNsaWRlciA9IFNsaWRlcjtcclxuXHRtb2R1bGUuZXhwb3J0cy5TcGlubmVyID0gU3Bpbm5lcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuSGl0T2JqZWN0ID0gRWRpdG9yLkhpdE9iamVjdCA9IEhpdE9iamVjdDtcclxuXHR3aW5kb3cuSGl0Q2lyY2xlID0gRWRpdG9yLkhpdENpcmNsZSA9IEhpdENpcmNsZTtcclxuXHR3aW5kb3cuU2xpZGVyID0gRWRpdG9yLlNsaWRlciA9IFNsaWRlcjtcclxuXHR3aW5kb3cuU3Bpbm5lciA9IEVkaXRvci5TcGlubmVyID0gU3Bpbm5lcjtcclxufVxyXG4iXSwiZmlsZSI6IkhpdE9iamVjdC5qcyJ9

var Editor = Editor || {};

class TimingPoint {
	constructor(line) {
		var parts = line.split(",");

		this.offset = parseInt(parts[0]);
		this.velocity = 1;
		this.beatLength = parseFloat(parts[1]);
		this.timingSignature = parseInt(parts[2]);
		this.sampleSetId = parseInt(parts[3]);
		this.customSampleIndex = parseInt(parts[4]);
		this.sampleVolume = parseInt(parts[5]);
		this.timingChange = (parts[6] == 1);
		this.kiaiTimeActive = (parts[7] == 1);

		if (!isNaN(this.beatLength) && this.beatLength !== 0) {
			if (this.beatLength > 0) {
				this.bpm = Math.round(60000 / this.beatLength);
				this.baseOffset = this.offset;
			} else {
				this.velocity = Math.abs(100 / this.beatLength);
			}
		}
	}
	serialize() {
		var parts = [];
		parts.push(this.offset);
		parts.push(this.timingChange ? this.beatLength : -100 / this.velocity);
		parts.push(this.timingSignature);
		parts.push(this.sampleSetId);
		parts.push(this.customSampleIndex);
		parts.push(this.sampleVolume);
		parts.push(this.timingChange ? '1' : '0');
		parts.push(this.kiaiTimeActive ? '1' : '0');
		return parts.join(",");
	}
}

if (typeof module !== "undefined") {
	module.exports = TimingPoint;
} else {
	window.TimingPoint = Editor.TimingPoint = TimingPoint;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJUaW1pbmdQb2ludC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxuY2xhc3MgVGltaW5nUG9pbnQge1xyXG5cdGNvbnN0cnVjdG9yKGxpbmUpIHtcclxuXHRcdHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoXCIsXCIpO1xyXG5cclxuXHRcdHRoaXMub2Zmc2V0ID0gcGFyc2VJbnQocGFydHNbMF0pO1xyXG5cdFx0dGhpcy52ZWxvY2l0eSA9IDE7XHJcblx0XHR0aGlzLmJlYXRMZW5ndGggPSBwYXJzZUZsb2F0KHBhcnRzWzFdKTtcclxuXHRcdHRoaXMudGltaW5nU2lnbmF0dXJlID0gcGFyc2VJbnQocGFydHNbMl0pO1xyXG5cdFx0dGhpcy5zYW1wbGVTZXRJZCA9IHBhcnNlSW50KHBhcnRzWzNdKTtcclxuXHRcdHRoaXMuY3VzdG9tU2FtcGxlSW5kZXggPSBwYXJzZUludChwYXJ0c1s0XSk7XHJcblx0XHR0aGlzLnNhbXBsZVZvbHVtZSA9IHBhcnNlSW50KHBhcnRzWzVdKTtcclxuXHRcdHRoaXMudGltaW5nQ2hhbmdlID0gKHBhcnRzWzZdID09IDEpO1xyXG5cdFx0dGhpcy5raWFpVGltZUFjdGl2ZSA9IChwYXJ0c1s3XSA9PSAxKTtcclxuXHJcblx0XHRpZiAoIWlzTmFOKHRoaXMuYmVhdExlbmd0aCkgJiYgdGhpcy5iZWF0TGVuZ3RoICE9PSAwKSB7XHJcblx0XHRcdGlmICh0aGlzLmJlYXRMZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5icG0gPSBNYXRoLnJvdW5kKDYwMDAwIC8gdGhpcy5iZWF0TGVuZ3RoKTtcclxuXHRcdFx0XHR0aGlzLmJhc2VPZmZzZXQgPSB0aGlzLm9mZnNldDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnZlbG9jaXR5ID0gTWF0aC5hYnMoMTAwIC8gdGhpcy5iZWF0TGVuZ3RoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRzZXJpYWxpemUoKSB7XHJcblx0XHR2YXIgcGFydHMgPSBbXTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy5vZmZzZXQpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnRpbWluZ0NoYW5nZSA/IHRoaXMuYmVhdExlbmd0aCA6IC0xMDAgLyB0aGlzLnZlbG9jaXR5KTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy50aW1pbmdTaWduYXR1cmUpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnNhbXBsZVNldElkKTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy5jdXN0b21TYW1wbGVJbmRleCk7XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMuc2FtcGxlVm9sdW1lKTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy50aW1pbmdDaGFuZ2UgPyAnMScgOiAnMCcpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLmtpYWlUaW1lQWN0aXZlID8gJzEnIDogJzAnKTtcclxuXHRcdHJldHVybiBwYXJ0cy5qb2luKFwiLFwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBUaW1pbmdQb2ludDtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuVGltaW5nUG9pbnQgPSBFZGl0b3IuVGltaW5nUG9pbnQgPSBUaW1pbmdQb2ludDtcclxufVxyXG4iXSwiZmlsZSI6IlRpbWluZ1BvaW50LmpzIn0=

var Editor = Editor || {};

var sectionPattern = /^\[([a-zA-Z0-9]+)\]$/,
	keyPairPattern = /^([a-zA-Z0-9]+)[ ]*:[ ]*(.+)?$/;
var fs = null;
const KEEP_THROUGH_SERIALIZATION = [
	"Bookmarks", "Tags", "FileFormat", "AudioFilename",
	"AudioLeadIn", "PreviewTime", "Countdown", "SampleSet", "StackLeniency",
	"Mode", "LetterboxInBreaks", "WidescreenStoryboard", "DistanceSpacing",
	"BeatDivisor", "GridSize", "TimelineZoom", "Title", "TitleUnicode",
	"Artist", "ArtistUnicode", "Creator", "Version", "Source", "BeatmapID",
	"BeatmapSetID", "HPDrainRate", "CircleSize", "OverallDifficulty",
	"ApproachRate", "SliderMultiplier", "SliderTickRate", "breakTimes",
	"bgFilename", "BpmMin", "BpmMax"
];

if (typeof require !== "undefined") {
	var fs = require("fs");
	Color = require("./Color");
	HitObject = require("./beatmap/HitObject");
	Slider = HitObject.Slider;
	TimingPoint = require("./beatmap/TimingPoint");
	var Util = require("./Util");
}

class Beatmap {
	constructor() { }
	static ParseFile(file, callback) {
		fs.exists(file, function (exists) {
			if (!exists) {
				callback(new Error("File doesn't exist."));
			}
			Beatmap.ParseStream(fs.createReadStream(file), function (beatmap) {
				callback(beatmap);
			});
		});
	}
	static ParseFileSync(file) {
		if (!fs.existsSync(file)) {
			return new Error("File doesn't exist.");
		}
		return Beatmap.ParseString(fs.readFileSync(file, "utf-8"));
	}
	static ParseStream(stream, callback) {
		var buffer = "";
		stream.on("data", function (chunk) {
			buffer += chunk;
		});
		stream.on("error", function (err) {
			callback(err);
		});
		stream.on("end", function () {
			callback(Beatmap.ParseString(buffer));
		});
	}
	newID() {
		var id;
		while (true) {
			id = Util.randomString();
			if (id in this.HitObjects) continue;
			if (id in this.TimingPoints) continue;
			break;
		}
		return id;
	}
	static ParseString(data) {
		var i, id;
		var beatmap = new Beatmap();
		var lines = data.split(/\r?\n/);
		var osuSection;
		var sections = {};
		beatmap.ComboColors = [];
		beatmap.Bookmarks = [];
		beatmap.Tags = [];
		var parseBookmark = function (bookmark) {
			return parseInt(bookmark); // avoid http://stackoverflow.com/questions/14528397/strange-behavior-for-map-parseint
		};
		for (i = 0; i < lines.length; i += 1) {
			var line = lines[i].trim();
			if (!line) continue;
			var match = sectionPattern.exec(line);
			if (match) {
				osuSection = match[1].toLowerCase();
				continue;
			}
			switch (osuSection) {
				case "timingpoints":
					if (!("TimingPoints" in sections))
						sections.TimingPoints = [];
					sections.TimingPoints.push(line);
					break;
				case "hitobjects":
					if (!("HitObjects" in sections))
						sections.HitObjects = [];
					sections.HitObjects.push(line);
					break;
				case "events":
					if (!("Events" in sections))
						sections.Events = [];
					sections.Events.push(line);
					break;
				default:
					if (!osuSection) {
						match = /^osu file format (v[0-9]+)$/.exec(line);
						if (match) {
							beatmap.FileFormat = match[1];
							continue;
						}
					} else {
						match = keyPairPattern.exec(line);
						if (match) {
							if (!match[2]) match[2] = '';
							if (/combo(\d+)/i.exec(match[1])) {
								beatmap.ComboColors.push(Color.fromArray(match[2].split(",")));
								continue;
							}
							switch (match[1].toLowerCase()) {
								case "sliderborder":
								case "slidertrackoverride":
									beatmap[match[1]] = Color.fromArray(match[2].split(","));
									break;
								case "tags":
									beatmap[match[1]] = match[2].split(" ");
									break;
								case "bookmarks":
									beatmap[match[1]] = match[2].split(",").map(parseBookmark);
									break;
								case "stackleniency":
								case "distancespacing":
								case "beatdivisor":
								case "gridsize":
								case "previewtime":
								case "mode":
								case "hpdrainrate":
								case "circlesize":
								case "approachrate":
								case "overalldifficulty":
								case "slidermultiplier":
								case "slidertickrate":
									beatmap[match[1]] = parseFloat(match[2]);
									break;
								default:
									beatmap[match[1]] = match[2];
									break;
							}
						}
					}
					break;
			}
		}

		beatmap.TimingPoints = [];
		beatmap.HitObjects = [];

		beatmap.BpmMin = Infinity;
		beatmap.BpmMax = 0;
		var prev = null;
		for (i = 0; i < sections.TimingPoints.length; i += 1) {
			var timingPoint = new TimingPoint(sections.TimingPoints[i]);
			id = beatmap.newID();
			timingPoint.id = id;
			beatmap.TimingPoints.push(timingPoint);
		}

		beatmap.TimingPoints.sort(function (a, b) {
			return a.offset - b.offset || b.timingChange - a.timingChange;
		});
		
		for (i = 0; i < sections.TimingPoints.length; i += 1) {
			if (timingPoint.bpm) {
				beatmap.BpmMin = Math.min(beatmap.BpmMin, timingPoint.bpm);
				beatmap.BpmMax = Math.max(beatmap.BpmMax, timingPoint.bpm);
				timingPoint.baseOffset = timingPoint.offset;
			} else if (prev) {
				timingPoint.beatLength = prev.beatLength;
				timingPoint.bpm = prev.bpm;
				timingPoint.baseOffset = prev.baseOffset;
			}
			prev = timingPoint;
		}

		for (i = 0; i < sections.HitObjects.length; i += 1) {
			var hitObject = HitObject.parse(sections.HitObjects[i]);
			hitObject.beatmap = beatmap;
			if (hitObject instanceof Slider) {
				hitObject.calculate();
			}
			id = beatmap.newID();
			hitObject.id = id;
			beatmap.HitObjects.push(hitObject);
		}
		beatmap.HitObjects.sort(function (a, b) {
			return a.startTime - b.startTime;
		});

		beatmap.breakTimes = [];
		beatmap.originalEvents = sections.Events.join('\n');
		for (i = 0; i < sections.Events.length; i += 1) {
			var members = sections.Events[i].split(',');

			if (members[0] == '0' && members[1] == '0' && members[2]) {
				var bgName = members[2].trim();

				if (bgName.charAt(0) == '"' && bgName.charAt(bgName.length - 1) == '"') {
					beatmap.bgFilename = bgName.substring(1, bgName.length - 1);
				} else {
					beatmap.bgFilename = bgName;
				}
			} else if (members[0] == '2' && /^[0-9]+$/.test(members[1]) && /^[0-9]+$/.test(members[2])) {
				beatmap.breakTimes.push({
					startTime: parseInt(members[1]),
					endTime: parseInt(members[2])
				});
			}
		}

		// console.log(sections);

		// random stuff
		if (!beatmap.ApproachRate) beatmap.ApproachRate = beatmap.OverallDifficulty;

		return beatmap;
	}
	serialize() {
		var osu = `osu file format ${this.FileFormat}\n`;
		osu += '\n[General]\n';
		['AudioFilename', 'AudioLeadIn', 'PreviewTime', 'Countdown', 'SampleSet',
			'StackLeniency', 'Mode', 'LetterboxInBreaks', 'WidescreenStoryboard'
		].forEach(property => {
			osu += `${property}: ${this[property]}\n`;
		});

		osu += '\n[Editor]\n';
		if (this.hasOwnProperty('Bookmarks') && this.Bookmarks.length > 0)
			osu += `Bookmarks: ${this.Bookmarks.join(',')}\n`;
		['DistanceSpacing', 'BeatDivisor', 'GridSize', 'TimelineZoom'].forEach(property => {
			osu += `${property}: ${this[property]}\n`;
		});

		osu += '\n[Metadata]\n';
		['Title', 'TitleUnicode', 'Artist', 'ArtistUnicode', 'Creator',
			'Version', 'Source', 'Tags', 'BeatmapID', 'BeatmapSetID'
		].forEach(property => {
			osu += `${property}:${property == 'Tags' ? this[property].join(' ') : this[property]}\n`;
		});

		osu += '\n[Difficulty]\n';
		['HPDrainRate', 'CircleSize', 'OverallDifficulty',
			'ApproachRate', 'SliderMultiplier', 'SliderTickRate'
		].forEach(property => {
			osu += `${property}:${this[property]}\n`;
		});

		osu += '\n[Events]\n';
		osu += this.originalEvents + '\n';

		osu += '\n[TimingPoints]\n';
		this.TimingPoints.sort((a, b) => a.offset - b.offset || b.timingChange - a.timingChange);
		this.TimingPoints.forEach(tpt => {
			osu += tpt.serialize() + '\n';
		});

		osu += '\n';
		if ((this.hasOwnProperty('ComboColors') && this.ComboColors.length > 0) || this.hasOwnProperty('SliderBorder') || this.hasOwnProperty('SliderTrackOverride')) {
			osu += '\n[Colours]\n';
			for (var i = 0; i < this.ComboColors.length; i++) {
				osu += `Combo${i + 1} : ${this.ComboColors[i].toArray().join(',')}\n`;
			}
			if (this.hasOwnProperty('SliderBorder'))
				osu += `SliderBorder:${this.SliderBorder.toArray().join(',')}\n`;
			if (this.hasOwnProperty('SliderTrackOverride'))
				osu += `SliderTrackOverride:${this.SliderTrackOverride.toArray().join(',')}\n`;
		}

		osu += '\n[HitObjects]\n';
		this.HitObjects.sort((a, b) => a.offset - b.offset);
		this.HitObjects.forEach(obj => {
			osu += obj.serialize() + '\n';
		});

		return osu + '\n';
	}
	getTimingPoint(offset) {
		var left = 0,
			right = this.TimingPoints.length - 1;
		var result = 0;
		while (left <= right) {
			var midpoint = ~~((left + right) / 2);
			if (this.TimingPoints[midpoint].offset > offset) {
				right = midpoint - 1;
			} else {
				result = midpoint;
				left = midpoint + 1;
			}
		}

		if (result < this.TimingPoints.length - 1 &&
			this.TimingPoints[result].offset == this.TimingPoints[result + 1].offset)
			result++;

		return this.TimingPoints[result];
		// for (var i = this.TimingPoints.length - 1; i >= 0; i -= 1) {
		// 	if (this.TimingPoints[i].offset <= offset)
		// 		return this.TimingPoints[i];
		// }
		// return this.TimingPoints[0];
	}

	getIndexAt(offset) {
		for (var i = 1; i < this.HitObjects.length; i++) {
			var obj = this.HitObjects[i];
			if (obj.startTime > offset)
				return i - 1;
		}
		return i - 1;
	}

	matchObj(id) {
		for (var i = 0; i < this.HitObjects.length; i++) {
			if (this.HitObjects[i].id == id)
				return this.HitObjects[i];
		}
	}

	static unjson(object) {
		var beatmap = new Beatmap();
		for (var key of KEEP_THROUGH_SERIALIZATION) {
			if (object.hasOwnProperty(key)) {
				beatmap[key] = object[key];
			}
		}
		if (object.hasOwnProperty("ComboColors")) {
			beatmap.ComboColors = object.ComboColors.map(function (color) {
				return Color.fromArray(color);
			});
		}
		if (object.hasOwnProperty('SliderBorder'))
			beatmap.SliderBorder = Color.fromArray(object.SliderBorder);
		if (object.hasOwnProperty('SliderTrackOverride'))
			beatmap.SliderTrackOverride = Color.fromArray(object.SliderTrackOverride);
		if (object.hasOwnProperty("TimingPoints")) {
			beatmap.TimingPoints = object.TimingPoints.map(function (data) {
				var point = new TimingPoint(data.serialized);
				point.id = data.id;
				return point;
			});

			beatmap.TimingPoints.sort(function (a, b) {
				return a.offset - b.offset || b.timingChange - a.timingChange;
			});

			var prev;
			beatmap.TimingPoints = beatmap.TimingPoints.map(function (point) {
				if (point.bpm) {
					beatmap.BpmMin = Math.min(beatmap.BpmMin, point.bpm);
					beatmap.BpmMax = Math.max(beatmap.BpmMax, point.bpm);
					point.baseOffset = point.offset;
				} else if (prev) {
					point.beatLength = prev.beatLength;
					point.bpm = prev.bpm;
					point.baseOffset = prev.baseOffset;
				}
				prev = point;
				return point;
			});
		}
		if (object.hasOwnProperty("HitObjects")) {
			beatmap.HitObjects = object.HitObjects.map(function (data) {
				var object = HitObject.parse(data.serialized);
				object.id = data.id;
				object.beatmap = beatmap;
				if (object instanceof Slider) {
					object.calculate();
				}
				return object;
			});
			beatmap.HitObjects.sort(function (a, b) {
				return a.startTime - b.startTime;
			});
		}
		return beatmap;
	}

	json() {
		var obj = {};
		for (var key of KEEP_THROUGH_SERIALIZATION) {
			obj[key] = this[key];
		}
		obj.ComboColors = this.ComboColors.map(function (color) {
			return color.toArray();
		});
		if (this.hasOwnProperty('SliderBorder'))
			obj.SliderBorder = this.SliderBorder.toArray();
		if (this.hasOwnProperty('SliderTrackOverride'))
			obj.SliderTrackOverride = this.SliderTrackOverride.toArray();
		obj.TimingPoints = this.TimingPoints.map(function (point) {
			return {
				id: point.id,
				serialized: point.serialize()
			};
		});
		obj.HitObjects = this.HitObjects.map(function (object) {
			return {
				id: object.id,
				serialized: object.serialize()
			};
		});
		return obj;
	}
}


if (typeof module !== "undefined") {
	module.exports = Beatmap;
} else {
	window.Beatmap = Editor.Beatmap = Beatmap;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJCZWF0bWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBFZGl0b3IgPSBFZGl0b3IgfHwge307XHJcblxyXG52YXIgc2VjdGlvblBhdHRlcm4gPSAvXlxcWyhbYS16QS1aMC05XSspXFxdJC8sXHJcblx0a2V5UGFpclBhdHRlcm4gPSAvXihbYS16QS1aMC05XSspWyBdKjpbIF0qKC4rKT8kLztcclxudmFyIGZzID0gbnVsbDtcclxuY29uc3QgS0VFUF9USFJPVUdIX1NFUklBTElaQVRJT04gPSBbXHJcblx0XCJCb29rbWFya3NcIiwgXCJUYWdzXCIsIFwiRmlsZUZvcm1hdFwiLCBcIkF1ZGlvRmlsZW5hbWVcIixcclxuXHRcIkF1ZGlvTGVhZEluXCIsIFwiUHJldmlld1RpbWVcIiwgXCJDb3VudGRvd25cIiwgXCJTYW1wbGVTZXRcIiwgXCJTdGFja0xlbmllbmN5XCIsXHJcblx0XCJNb2RlXCIsIFwiTGV0dGVyYm94SW5CcmVha3NcIiwgXCJXaWRlc2NyZWVuU3Rvcnlib2FyZFwiLCBcIkRpc3RhbmNlU3BhY2luZ1wiLFxyXG5cdFwiQmVhdERpdmlzb3JcIiwgXCJHcmlkU2l6ZVwiLCBcIlRpbWVsaW5lWm9vbVwiLCBcIlRpdGxlXCIsIFwiVGl0bGVVbmljb2RlXCIsXHJcblx0XCJBcnRpc3RcIiwgXCJBcnRpc3RVbmljb2RlXCIsIFwiQ3JlYXRvclwiLCBcIlZlcnNpb25cIiwgXCJTb3VyY2VcIiwgXCJCZWF0bWFwSURcIixcclxuXHRcIkJlYXRtYXBTZXRJRFwiLCBcIkhQRHJhaW5SYXRlXCIsIFwiQ2lyY2xlU2l6ZVwiLCBcIk92ZXJhbGxEaWZmaWN1bHR5XCIsXHJcblx0XCJBcHByb2FjaFJhdGVcIiwgXCJTbGlkZXJNdWx0aXBsaWVyXCIsIFwiU2xpZGVyVGlja1JhdGVcIiwgXCJicmVha1RpbWVzXCIsXHJcblx0XCJiZ0ZpbGVuYW1lXCIsIFwiQnBtTWluXCIsIFwiQnBtTWF4XCJcclxuXTtcclxuXHJcbmlmICh0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdHZhciBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcclxuXHRDb2xvciA9IHJlcXVpcmUoXCIuL0NvbG9yXCIpO1xyXG5cdEhpdE9iamVjdCA9IHJlcXVpcmUoXCIuL2JlYXRtYXAvSGl0T2JqZWN0XCIpO1xyXG5cdFNsaWRlciA9IEhpdE9iamVjdC5TbGlkZXI7XHJcblx0VGltaW5nUG9pbnQgPSByZXF1aXJlKFwiLi9iZWF0bWFwL1RpbWluZ1BvaW50XCIpO1xyXG5cdHZhciBVdGlsID0gcmVxdWlyZShcIi4vVXRpbFwiKTtcclxufVxyXG5cclxuY2xhc3MgQmVhdG1hcCB7XHJcblx0Y29uc3RydWN0b3IoKSB7IH1cclxuXHRzdGF0aWMgUGFyc2VGaWxlKGZpbGUsIGNhbGxiYWNrKSB7XHJcblx0XHRmcy5leGlzdHMoZmlsZSwgZnVuY3Rpb24gKGV4aXN0cykge1xyXG5cdFx0XHRpZiAoIWV4aXN0cykge1xyXG5cdFx0XHRcdGNhbGxiYWNrKG5ldyBFcnJvcihcIkZpbGUgZG9lc24ndCBleGlzdC5cIikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEJlYXRtYXAuUGFyc2VTdHJlYW0oZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlKSwgZnVuY3Rpb24gKGJlYXRtYXApIHtcclxuXHRcdFx0XHRjYWxsYmFjayhiZWF0bWFwKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0c3RhdGljIFBhcnNlRmlsZVN5bmMoZmlsZSkge1xyXG5cdFx0aWYgKCFmcy5leGlzdHNTeW5jKGZpbGUpKSB7XHJcblx0XHRcdHJldHVybiBuZXcgRXJyb3IoXCJGaWxlIGRvZXNuJ3QgZXhpc3QuXCIpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIEJlYXRtYXAuUGFyc2VTdHJpbmcoZnMucmVhZEZpbGVTeW5jKGZpbGUsIFwidXRmLThcIikpO1xyXG5cdH1cclxuXHRzdGF0aWMgUGFyc2VTdHJlYW0oc3RyZWFtLCBjYWxsYmFjaykge1xyXG5cdFx0dmFyIGJ1ZmZlciA9IFwiXCI7XHJcblx0XHRzdHJlYW0ub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChjaHVuaykge1xyXG5cdFx0XHRidWZmZXIgKz0gY2h1bms7XHJcblx0XHR9KTtcclxuXHRcdHN0cmVhbS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlcnIpIHtcclxuXHRcdFx0Y2FsbGJhY2soZXJyKTtcclxuXHRcdH0pO1xyXG5cdFx0c3RyZWFtLm9uKFwiZW5kXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y2FsbGJhY2soQmVhdG1hcC5QYXJzZVN0cmluZyhidWZmZXIpKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRuZXdJRCgpIHtcclxuXHRcdHZhciBpZDtcclxuXHRcdHdoaWxlICh0cnVlKSB7XHJcblx0XHRcdGlkID0gVXRpbC5yYW5kb21TdHJpbmcoKTtcclxuXHRcdFx0aWYgKGlkIGluIHRoaXMuSGl0T2JqZWN0cykgY29udGludWU7XHJcblx0XHRcdGlmIChpZCBpbiB0aGlzLlRpbWluZ1BvaW50cykgY29udGludWU7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGlkO1xyXG5cdH1cclxuXHRzdGF0aWMgUGFyc2VTdHJpbmcoZGF0YSkge1xyXG5cdFx0dmFyIGksIGlkO1xyXG5cdFx0dmFyIGJlYXRtYXAgPSBuZXcgQmVhdG1hcCgpO1xyXG5cdFx0dmFyIGxpbmVzID0gZGF0YS5zcGxpdCgvXFxyP1xcbi8pO1xyXG5cdFx0dmFyIG9zdVNlY3Rpb247XHJcblx0XHR2YXIgc2VjdGlvbnMgPSB7fTtcclxuXHRcdGJlYXRtYXAuQ29tYm9Db2xvcnMgPSBbXTtcclxuXHRcdGJlYXRtYXAuQm9va21hcmtzID0gW107XHJcblx0XHRiZWF0bWFwLlRhZ3MgPSBbXTtcclxuXHRcdHZhciBwYXJzZUJvb2ttYXJrID0gZnVuY3Rpb24gKGJvb2ttYXJrKSB7XHJcblx0XHRcdHJldHVybiBwYXJzZUludChib29rbWFyayk7IC8vIGF2b2lkIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQ1MjgzOTcvc3RyYW5nZS1iZWhhdmlvci1mb3ItbWFwLXBhcnNlaW50XHJcblx0XHR9O1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSArPSAxKSB7XHJcblx0XHRcdHZhciBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xyXG5cdFx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xyXG5cdFx0XHR2YXIgbWF0Y2ggPSBzZWN0aW9uUGF0dGVybi5leGVjKGxpbmUpO1xyXG5cdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRvc3VTZWN0aW9uID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzd2l0Y2ggKG9zdVNlY3Rpb24pIHtcclxuXHRcdFx0XHRjYXNlIFwidGltaW5ncG9pbnRzXCI6XHJcblx0XHRcdFx0XHRpZiAoIShcIlRpbWluZ1BvaW50c1wiIGluIHNlY3Rpb25zKSlcclxuXHRcdFx0XHRcdFx0c2VjdGlvbnMuVGltaW5nUG9pbnRzID0gW107XHJcblx0XHRcdFx0XHRzZWN0aW9ucy5UaW1pbmdQb2ludHMucHVzaChsaW5lKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJoaXRvYmplY3RzXCI6XHJcblx0XHRcdFx0XHRpZiAoIShcIkhpdE9iamVjdHNcIiBpbiBzZWN0aW9ucykpXHJcblx0XHRcdFx0XHRcdHNlY3Rpb25zLkhpdE9iamVjdHMgPSBbXTtcclxuXHRcdFx0XHRcdHNlY3Rpb25zLkhpdE9iamVjdHMucHVzaChsaW5lKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJldmVudHNcIjpcclxuXHRcdFx0XHRcdGlmICghKFwiRXZlbnRzXCIgaW4gc2VjdGlvbnMpKVxyXG5cdFx0XHRcdFx0XHRzZWN0aW9ucy5FdmVudHMgPSBbXTtcclxuXHRcdFx0XHRcdHNlY3Rpb25zLkV2ZW50cy5wdXNoKGxpbmUpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGlmICghb3N1U2VjdGlvbikge1xyXG5cdFx0XHRcdFx0XHRtYXRjaCA9IC9eb3N1IGZpbGUgZm9ybWF0ICh2WzAtOV0rKSQvLmV4ZWMobGluZSk7XHJcblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdGJlYXRtYXAuRmlsZUZvcm1hdCA9IG1hdGNoWzFdO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRtYXRjaCA9IGtleVBhaXJQYXR0ZXJuLmV4ZWMobGluZSk7XHJcblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2hbMl0pIG1hdGNoWzJdID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0aWYgKC9jb21ibyhcXGQrKS9pLmV4ZWMobWF0Y2hbMV0pKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwLkNvbWJvQ29sb3JzLnB1c2goQ29sb3IuZnJvbUFycmF5KG1hdGNoWzJdLnNwbGl0KFwiLFwiKSkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHN3aXRjaCAobWF0Y2hbMV0udG9Mb3dlckNhc2UoKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInNsaWRlcmJvcmRlclwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInNsaWRlcnRyYWNrb3ZlcnJpZGVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdFx0YmVhdG1hcFttYXRjaFsxXV0gPSBDb2xvci5mcm9tQXJyYXkobWF0Y2hbMl0uc3BsaXQoXCIsXCIpKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwidGFnc1wiOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwW21hdGNoWzFdXSA9IG1hdGNoWzJdLnNwbGl0KFwiIFwiKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiYm9va21hcmtzXCI6XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJlYXRtYXBbbWF0Y2hbMV1dID0gbWF0Y2hbMl0uc3BsaXQoXCIsXCIpLm1hcChwYXJzZUJvb2ttYXJrKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwic3RhY2tsZW5pZW5jeVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImRpc3RhbmNlc3BhY2luZ1wiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImJlYXRkaXZpc29yXCI6XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3JpZHNpemVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJwcmV2aWV3dGltZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcIm1vZGVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJocGRyYWlucmF0ZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImNpcmNsZXNpemVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJhcHByb2FjaHJhdGVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJvdmVyYWxsZGlmZmljdWx0eVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInNsaWRlcm11bHRpcGxpZXJcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJzbGlkZXJ0aWNrcmF0ZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwW21hdGNoWzFdXSA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJlYXRtYXBbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRiZWF0bWFwLlRpbWluZ1BvaW50cyA9IFtdO1xyXG5cdFx0YmVhdG1hcC5IaXRPYmplY3RzID0gW107XHJcblxyXG5cdFx0YmVhdG1hcC5CcG1NaW4gPSBJbmZpbml0eTtcclxuXHRcdGJlYXRtYXAuQnBtTWF4ID0gMDtcclxuXHRcdHZhciBwcmV2ID0gbnVsbDtcclxuXHRcdGZvciAoaSA9IDA7IGkgPCBzZWN0aW9ucy5UaW1pbmdQb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuXHRcdFx0dmFyIHRpbWluZ1BvaW50ID0gbmV3IFRpbWluZ1BvaW50KHNlY3Rpb25zLlRpbWluZ1BvaW50c1tpXSk7XHJcblx0XHRcdGlkID0gYmVhdG1hcC5uZXdJRCgpO1xyXG5cdFx0XHR0aW1pbmdQb2ludC5pZCA9IGlkO1xyXG5cdFx0XHRiZWF0bWFwLlRpbWluZ1BvaW50cy5wdXNoKHRpbWluZ1BvaW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRiZWF0bWFwLlRpbWluZ1BvaW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0XHRcdHJldHVybiBhLm9mZnNldCAtIGIub2Zmc2V0IHx8IGIudGltaW5nQ2hhbmdlIC0gYS50aW1pbmdDaGFuZ2U7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlY3Rpb25zLlRpbWluZ1BvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHRpZiAodGltaW5nUG9pbnQuYnBtKSB7XHJcblx0XHRcdFx0YmVhdG1hcC5CcG1NaW4gPSBNYXRoLm1pbihiZWF0bWFwLkJwbU1pbiwgdGltaW5nUG9pbnQuYnBtKTtcclxuXHRcdFx0XHRiZWF0bWFwLkJwbU1heCA9IE1hdGgubWF4KGJlYXRtYXAuQnBtTWF4LCB0aW1pbmdQb2ludC5icG0pO1xyXG5cdFx0XHRcdHRpbWluZ1BvaW50LmJhc2VPZmZzZXQgPSB0aW1pbmdQb2ludC5vZmZzZXQ7XHJcblx0XHRcdH0gZWxzZSBpZiAocHJldikge1xyXG5cdFx0XHRcdHRpbWluZ1BvaW50LmJlYXRMZW5ndGggPSBwcmV2LmJlYXRMZW5ndGg7XHJcblx0XHRcdFx0dGltaW5nUG9pbnQuYnBtID0gcHJldi5icG07XHJcblx0XHRcdFx0dGltaW5nUG9pbnQuYmFzZU9mZnNldCA9IHByZXYuYmFzZU9mZnNldDtcclxuXHRcdFx0fVxyXG5cdFx0XHRwcmV2ID0gdGltaW5nUG9pbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlY3Rpb25zLkhpdE9iamVjdHMubGVuZ3RoOyBpICs9IDEpIHtcclxuXHRcdFx0dmFyIGhpdE9iamVjdCA9IEhpdE9iamVjdC5wYXJzZShzZWN0aW9ucy5IaXRPYmplY3RzW2ldKTtcclxuXHRcdFx0aGl0T2JqZWN0LmJlYXRtYXAgPSBiZWF0bWFwO1xyXG5cdFx0XHRpZiAoaGl0T2JqZWN0IGluc3RhbmNlb2YgU2xpZGVyKSB7XHJcblx0XHRcdFx0aGl0T2JqZWN0LmNhbGN1bGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlkID0gYmVhdG1hcC5uZXdJRCgpO1xyXG5cdFx0XHRoaXRPYmplY3QuaWQgPSBpZDtcclxuXHRcdFx0YmVhdG1hcC5IaXRPYmplY3RzLnB1c2goaGl0T2JqZWN0KTtcclxuXHRcdH1cclxuXHRcdGJlYXRtYXAuSGl0T2JqZWN0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0XHRcdHJldHVybiBhLnN0YXJ0VGltZSAtIGIuc3RhcnRUaW1lO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YmVhdG1hcC5icmVha1RpbWVzID0gW107XHJcblx0XHRiZWF0bWFwLm9yaWdpbmFsRXZlbnRzID0gc2VjdGlvbnMuRXZlbnRzLmpvaW4oJ1xcbicpO1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IHNlY3Rpb25zLkV2ZW50cy5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHR2YXIgbWVtYmVycyA9IHNlY3Rpb25zLkV2ZW50c1tpXS5zcGxpdCgnLCcpO1xyXG5cclxuXHRcdFx0aWYgKG1lbWJlcnNbMF0gPT0gJzAnICYmIG1lbWJlcnNbMV0gPT0gJzAnICYmIG1lbWJlcnNbMl0pIHtcclxuXHRcdFx0XHR2YXIgYmdOYW1lID0gbWVtYmVyc1syXS50cmltKCk7XHJcblxyXG5cdFx0XHRcdGlmIChiZ05hbWUuY2hhckF0KDApID09ICdcIicgJiYgYmdOYW1lLmNoYXJBdChiZ05hbWUubGVuZ3RoIC0gMSkgPT0gJ1wiJykge1xyXG5cdFx0XHRcdFx0YmVhdG1hcC5iZ0ZpbGVuYW1lID0gYmdOYW1lLnN1YnN0cmluZygxLCBiZ05hbWUubGVuZ3RoIC0gMSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGJlYXRtYXAuYmdGaWxlbmFtZSA9IGJnTmFtZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAobWVtYmVyc1swXSA9PSAnMicgJiYgL15bMC05XSskLy50ZXN0KG1lbWJlcnNbMV0pICYmIC9eWzAtOV0rJC8udGVzdChtZW1iZXJzWzJdKSkge1xyXG5cdFx0XHRcdGJlYXRtYXAuYnJlYWtUaW1lcy5wdXNoKHtcclxuXHRcdFx0XHRcdHN0YXJ0VGltZTogcGFyc2VJbnQobWVtYmVyc1sxXSksXHJcblx0XHRcdFx0XHRlbmRUaW1lOiBwYXJzZUludChtZW1iZXJzWzJdKVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY29uc29sZS5sb2coc2VjdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJhbmRvbSBzdHVmZlxyXG5cdFx0aWYgKCFiZWF0bWFwLkFwcHJvYWNoUmF0ZSkgYmVhdG1hcC5BcHByb2FjaFJhdGUgPSBiZWF0bWFwLk92ZXJhbGxEaWZmaWN1bHR5O1xyXG5cclxuXHRcdHJldHVybiBiZWF0bWFwO1xyXG5cdH1cclxuXHRzZXJpYWxpemUoKSB7XHJcblx0XHR2YXIgb3N1ID0gYG9zdSBmaWxlIGZvcm1hdCAke3RoaXMuRmlsZUZvcm1hdH1cXG5gO1xyXG5cdFx0b3N1ICs9ICdcXG5bR2VuZXJhbF1cXG4nO1xyXG5cdFx0WydBdWRpb0ZpbGVuYW1lJywgJ0F1ZGlvTGVhZEluJywgJ1ByZXZpZXdUaW1lJywgJ0NvdW50ZG93bicsICdTYW1wbGVTZXQnLFxyXG5cdFx0XHQnU3RhY2tMZW5pZW5jeScsICdNb2RlJywgJ0xldHRlcmJveEluQnJlYWtzJywgJ1dpZGVzY3JlZW5TdG9yeWJvYXJkJ1xyXG5cdFx0XS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fTogJHt0aGlzW3Byb3BlcnR5XX1cXG5gO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0b3N1ICs9ICdcXG5bRWRpdG9yXVxcbic7XHJcblx0XHRpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnQm9va21hcmtzJykgJiYgdGhpcy5Cb29rbWFya3MubGVuZ3RoID4gMClcclxuXHRcdFx0b3N1ICs9IGBCb29rbWFya3M6ICR7dGhpcy5Cb29rbWFya3Muam9pbignLCcpfVxcbmA7XHJcblx0XHRbJ0Rpc3RhbmNlU3BhY2luZycsICdCZWF0RGl2aXNvcicsICdHcmlkU2l6ZScsICdUaW1lbGluZVpvb20nXS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fTogJHt0aGlzW3Byb3BlcnR5XX1cXG5gO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0b3N1ICs9ICdcXG5bTWV0YWRhdGFdXFxuJztcclxuXHRcdFsnVGl0bGUnLCAnVGl0bGVVbmljb2RlJywgJ0FydGlzdCcsICdBcnRpc3RVbmljb2RlJywgJ0NyZWF0b3InLFxyXG5cdFx0XHQnVmVyc2lvbicsICdTb3VyY2UnLCAnVGFncycsICdCZWF0bWFwSUQnLCAnQmVhdG1hcFNldElEJ1xyXG5cdFx0XS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fToke3Byb3BlcnR5ID09ICdUYWdzJyA/IHRoaXNbcHJvcGVydHldLmpvaW4oJyAnKSA6IHRoaXNbcHJvcGVydHldfVxcbmA7XHJcblx0XHR9KTtcclxuXHJcblx0XHRvc3UgKz0gJ1xcbltEaWZmaWN1bHR5XVxcbic7XHJcblx0XHRbJ0hQRHJhaW5SYXRlJywgJ0NpcmNsZVNpemUnLCAnT3ZlcmFsbERpZmZpY3VsdHknLFxyXG5cdFx0XHQnQXBwcm9hY2hSYXRlJywgJ1NsaWRlck11bHRpcGxpZXInLCAnU2xpZGVyVGlja1JhdGUnXHJcblx0XHRdLmZvckVhY2gocHJvcGVydHkgPT4ge1xyXG5cdFx0XHRvc3UgKz0gYCR7cHJvcGVydHl9OiR7dGhpc1twcm9wZXJ0eV19XFxuYDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG9zdSArPSAnXFxuW0V2ZW50c11cXG4nO1xyXG5cdFx0b3N1ICs9IHRoaXMub3JpZ2luYWxFdmVudHMgKyAnXFxuJztcclxuXHJcblx0XHRvc3UgKz0gJ1xcbltUaW1pbmdQb2ludHNdXFxuJztcclxuXHRcdHRoaXMuVGltaW5nUG9pbnRzLnNvcnQoKGEsIGIpID0+IGEub2Zmc2V0IC0gYi5vZmZzZXQgfHwgYi50aW1pbmdDaGFuZ2UgLSBhLnRpbWluZ0NoYW5nZSk7XHJcblx0XHR0aGlzLlRpbWluZ1BvaW50cy5mb3JFYWNoKHRwdCA9PiB7XHJcblx0XHRcdG9zdSArPSB0cHQuc2VyaWFsaXplKCkgKyAnXFxuJztcclxuXHRcdH0pO1xyXG5cclxuXHRcdG9zdSArPSAnXFxuJztcclxuXHRcdGlmICgodGhpcy5oYXNPd25Qcm9wZXJ0eSgnQ29tYm9Db2xvcnMnKSAmJiB0aGlzLkNvbWJvQ29sb3JzLmxlbmd0aCA+IDApIHx8IHRoaXMuaGFzT3duUHJvcGVydHkoJ1NsaWRlckJvcmRlcicpIHx8IHRoaXMuaGFzT3duUHJvcGVydHkoJ1NsaWRlclRyYWNrT3ZlcnJpZGUnKSkge1xyXG5cdFx0XHRvc3UgKz0gJ1xcbltDb2xvdXJzXVxcbic7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5Db21ib0NvbG9ycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdG9zdSArPSBgQ29tYm8ke2kgKyAxfSA6ICR7dGhpcy5Db21ib0NvbG9yc1tpXS50b0FycmF5KCkuam9pbignLCcpfVxcbmA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ1NsaWRlckJvcmRlcicpKVxyXG5cdFx0XHRcdG9zdSArPSBgU2xpZGVyQm9yZGVyOiR7dGhpcy5TbGlkZXJCb3JkZXIudG9BcnJheSgpLmpvaW4oJywnKX1cXG5gO1xyXG5cdFx0XHRpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnU2xpZGVyVHJhY2tPdmVycmlkZScpKVxyXG5cdFx0XHRcdG9zdSArPSBgU2xpZGVyVHJhY2tPdmVycmlkZToke3RoaXMuU2xpZGVyVHJhY2tPdmVycmlkZS50b0FycmF5KCkuam9pbignLCcpfVxcbmA7XHJcblx0XHR9XHJcblxyXG5cdFx0b3N1ICs9ICdcXG5bSGl0T2JqZWN0c11cXG4nO1xyXG5cdFx0dGhpcy5IaXRPYmplY3RzLnNvcnQoKGEsIGIpID0+IGEub2Zmc2V0IC0gYi5vZmZzZXQpO1xyXG5cdFx0dGhpcy5IaXRPYmplY3RzLmZvckVhY2gob2JqID0+IHtcclxuXHRcdFx0b3N1ICs9IG9iai5zZXJpYWxpemUoKSArICdcXG4nO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIG9zdSArICdcXG4nO1xyXG5cdH1cclxuXHRnZXRUaW1pbmdQb2ludChvZmZzZXQpIHtcclxuXHRcdHZhciBsZWZ0ID0gMCxcclxuXHRcdFx0cmlnaHQgPSB0aGlzLlRpbWluZ1BvaW50cy5sZW5ndGggLSAxO1xyXG5cdFx0dmFyIHJlc3VsdCA9IDA7XHJcblx0XHR3aGlsZSAobGVmdCA8PSByaWdodCkge1xyXG5cdFx0XHR2YXIgbWlkcG9pbnQgPSB+figobGVmdCArIHJpZ2h0KSAvIDIpO1xyXG5cdFx0XHRpZiAodGhpcy5UaW1pbmdQb2ludHNbbWlkcG9pbnRdLm9mZnNldCA+IG9mZnNldCkge1xyXG5cdFx0XHRcdHJpZ2h0ID0gbWlkcG9pbnQgLSAxO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdCA9IG1pZHBvaW50O1xyXG5cdFx0XHRcdGxlZnQgPSBtaWRwb2ludCArIDE7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAocmVzdWx0IDwgdGhpcy5UaW1pbmdQb2ludHMubGVuZ3RoIC0gMSAmJlxyXG5cdFx0XHR0aGlzLlRpbWluZ1BvaW50c1tyZXN1bHRdLm9mZnNldCA9PSB0aGlzLlRpbWluZ1BvaW50c1tyZXN1bHQgKyAxXS5vZmZzZXQpXHJcblx0XHRcdHJlc3VsdCsrO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLlRpbWluZ1BvaW50c1tyZXN1bHRdO1xyXG5cdFx0Ly8gZm9yICh2YXIgaSA9IHRoaXMuVGltaW5nUG9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XHJcblx0XHQvLyBcdGlmICh0aGlzLlRpbWluZ1BvaW50c1tpXS5vZmZzZXQgPD0gb2Zmc2V0KVxyXG5cdFx0Ly8gXHRcdHJldHVybiB0aGlzLlRpbWluZ1BvaW50c1tpXTtcclxuXHRcdC8vIH1cclxuXHRcdC8vIHJldHVybiB0aGlzLlRpbWluZ1BvaW50c1swXTtcclxuXHR9XHJcblxyXG5cdGdldEluZGV4QXQob2Zmc2V0KSB7XHJcblx0XHRmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMuSGl0T2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgb2JqID0gdGhpcy5IaXRPYmplY3RzW2ldO1xyXG5cdFx0XHRpZiAob2JqLnN0YXJ0VGltZSA+IG9mZnNldClcclxuXHRcdFx0XHRyZXR1cm4gaSAtIDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gaSAtIDE7XHJcblx0fVxyXG5cclxuXHRtYXRjaE9iaihpZCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYgKHRoaXMuSGl0T2JqZWN0c1tpXS5pZCA9PSBpZClcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5IaXRPYmplY3RzW2ldO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIHVuanNvbihvYmplY3QpIHtcclxuXHRcdHZhciBiZWF0bWFwID0gbmV3IEJlYXRtYXAoKTtcclxuXHRcdGZvciAodmFyIGtleSBvZiBLRUVQX1RIUk9VR0hfU0VSSUFMSVpBVElPTikge1xyXG5cdFx0XHRpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuXHRcdFx0XHRiZWF0bWFwW2tleV0gPSBvYmplY3Rba2V5XTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShcIkNvbWJvQ29sb3JzXCIpKSB7XHJcblx0XHRcdGJlYXRtYXAuQ29tYm9Db2xvcnMgPSBvYmplY3QuQ29tYm9Db2xvcnMubWFwKGZ1bmN0aW9uIChjb2xvcikge1xyXG5cdFx0XHRcdHJldHVybiBDb2xvci5mcm9tQXJyYXkoY29sb3IpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoJ1NsaWRlckJvcmRlcicpKVxyXG5cdFx0XHRiZWF0bWFwLlNsaWRlckJvcmRlciA9IENvbG9yLmZyb21BcnJheShvYmplY3QuU2xpZGVyQm9yZGVyKTtcclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoJ1NsaWRlclRyYWNrT3ZlcnJpZGUnKSlcclxuXHRcdFx0YmVhdG1hcC5TbGlkZXJUcmFja092ZXJyaWRlID0gQ29sb3IuZnJvbUFycmF5KG9iamVjdC5TbGlkZXJUcmFja092ZXJyaWRlKTtcclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoXCJUaW1pbmdQb2ludHNcIikpIHtcclxuXHRcdFx0YmVhdG1hcC5UaW1pbmdQb2ludHMgPSBvYmplY3QuVGltaW5nUG9pbnRzLm1hcChmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdHZhciBwb2ludCA9IG5ldyBUaW1pbmdQb2ludChkYXRhLnNlcmlhbGl6ZWQpO1xyXG5cdFx0XHRcdHBvaW50LmlkID0gZGF0YS5pZDtcclxuXHRcdFx0XHRyZXR1cm4gcG9pbnQ7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0YmVhdG1hcC5UaW1pbmdQb2ludHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG5cdFx0XHRcdHJldHVybiBhLm9mZnNldCAtIGIub2Zmc2V0IHx8IGIudGltaW5nQ2hhbmdlIC0gYS50aW1pbmdDaGFuZ2U7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dmFyIHByZXY7XHJcblx0XHRcdGJlYXRtYXAuVGltaW5nUG9pbnRzID0gYmVhdG1hcC5UaW1pbmdQb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCkge1xyXG5cdFx0XHRcdGlmIChwb2ludC5icG0pIHtcclxuXHRcdFx0XHRcdGJlYXRtYXAuQnBtTWluID0gTWF0aC5taW4oYmVhdG1hcC5CcG1NaW4sIHBvaW50LmJwbSk7XHJcblx0XHRcdFx0XHRiZWF0bWFwLkJwbU1heCA9IE1hdGgubWF4KGJlYXRtYXAuQnBtTWF4LCBwb2ludC5icG0pO1xyXG5cdFx0XHRcdFx0cG9pbnQuYmFzZU9mZnNldCA9IHBvaW50Lm9mZnNldDtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHByZXYpIHtcclxuXHRcdFx0XHRcdHBvaW50LmJlYXRMZW5ndGggPSBwcmV2LmJlYXRMZW5ndGg7XHJcblx0XHRcdFx0XHRwb2ludC5icG0gPSBwcmV2LmJwbTtcclxuXHRcdFx0XHRcdHBvaW50LmJhc2VPZmZzZXQgPSBwcmV2LmJhc2VPZmZzZXQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHByZXYgPSBwb2ludDtcclxuXHRcdFx0XHRyZXR1cm4gcG9pbnQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShcIkhpdE9iamVjdHNcIikpIHtcclxuXHRcdFx0YmVhdG1hcC5IaXRPYmplY3RzID0gb2JqZWN0LkhpdE9iamVjdHMubWFwKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0dmFyIG9iamVjdCA9IEhpdE9iamVjdC5wYXJzZShkYXRhLnNlcmlhbGl6ZWQpO1xyXG5cdFx0XHRcdG9iamVjdC5pZCA9IGRhdGEuaWQ7XHJcblx0XHRcdFx0b2JqZWN0LmJlYXRtYXAgPSBiZWF0bWFwO1xyXG5cdFx0XHRcdGlmIChvYmplY3QgaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0XHRcdG9iamVjdC5jYWxjdWxhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIG9iamVjdDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJlYXRtYXAuSGl0T2JqZWN0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0XHRcdFx0cmV0dXJuIGEuc3RhcnRUaW1lIC0gYi5zdGFydFRpbWU7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGJlYXRtYXA7XHJcblx0fVxyXG5cclxuXHRqc29uKCkge1xyXG5cdFx0dmFyIG9iaiA9IHt9O1xyXG5cdFx0Zm9yICh2YXIga2V5IG9mIEtFRVBfVEhST1VHSF9TRVJJQUxJWkFUSU9OKSB7XHJcblx0XHRcdG9ialtrZXldID0gdGhpc1trZXldO1xyXG5cdFx0fVxyXG5cdFx0b2JqLkNvbWJvQ29sb3JzID0gdGhpcy5Db21ib0NvbG9ycy5tYXAoZnVuY3Rpb24gKGNvbG9yKSB7XHJcblx0XHRcdHJldHVybiBjb2xvci50b0FycmF5KCk7XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLmhhc093blByb3BlcnR5KCdTbGlkZXJCb3JkZXInKSlcclxuXHRcdFx0b2JqLlNsaWRlckJvcmRlciA9IHRoaXMuU2xpZGVyQm9yZGVyLnRvQXJyYXkoKTtcclxuXHRcdGlmICh0aGlzLmhhc093blByb3BlcnR5KCdTbGlkZXJUcmFja092ZXJyaWRlJykpXHJcblx0XHRcdG9iai5TbGlkZXJUcmFja092ZXJyaWRlID0gdGhpcy5TbGlkZXJUcmFja092ZXJyaWRlLnRvQXJyYXkoKTtcclxuXHRcdG9iai5UaW1pbmdQb2ludHMgPSB0aGlzLlRpbWluZ1BvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50KSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0aWQ6IHBvaW50LmlkLFxyXG5cdFx0XHRcdHNlcmlhbGl6ZWQ6IHBvaW50LnNlcmlhbGl6ZSgpXHJcblx0XHRcdH07XHJcblx0XHR9KTtcclxuXHRcdG9iai5IaXRPYmplY3RzID0gdGhpcy5IaXRPYmplY3RzLm1hcChmdW5jdGlvbiAob2JqZWN0KSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0aWQ6IG9iamVjdC5pZCxcclxuXHRcdFx0XHRzZXJpYWxpemVkOiBvYmplY3Quc2VyaWFsaXplKClcclxuXHRcdFx0fTtcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdG1vZHVsZS5leHBvcnRzID0gQmVhdG1hcDtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuQmVhdG1hcCA9IEVkaXRvci5CZWF0bWFwID0gQmVhdG1hcDtcclxufVxyXG4iXSwiZmlsZSI6IkJlYXRtYXAuanMifQ==

var Editor = Editor || {};

class Player {
	constructor(buffer, context, volume) {
		this.buffer = buffer;
		this.context = context;
		this.sourceNode = null;
		this.startedAt = 0;
		this.playing = false;
		this._volume = volume || 0.5;
	}

	play(offset, delay) {
		delay = delay || 0;
		if (this.sourceNode) this.sourceNode.stop();
		this.sourceNode = this.context.createBufferSource();
		this.gain = this.context.createGain();
		this.gain.gain.value = this.volume / 8;
		this.sourceNode.connect(this.gain);
		this.gain.connect(this.context.destination);
		this.sourceNode.buffer = this.buffer;
		if (offset === undefined) {
			if (!this.playing && typeof this.pausedAt !== "undefined")
				offset = this.pausedAt;
			else
				offset = 0;
		}
		this.pausedAt = undefined;
		if (offset >= this.buffer.duration) offset = 0;
		this.sourceNode.start(delay, offset);
		this.startedAt = this.context.currentTime - offset + delay;
		this.playing = true;
	}

	pause(offset) {
		this.pausedAt = offset !== undefined ? offset : this.t;
		this.stop();
	}

	seek(offset) {
		offset = Math.max(0, Math.min(offset, this.duration));
		var temp = this.playing;
		this.pause(offset);
		if (temp)
			this.play();
	}

	stop() {
		if (this.sourceNode) {
			this.sourceNode.disconnect();
			this.sourceNode.stop(0);
			this.sourceNode = null;
		}
		this.playing = false;
	}

	get t() {
		if (this.pausedAt !== undefined)
			return this.pausedAt;
		else {
			if (this.playing)
				return this.context.currentTime - this.startedAt;
			return 0;
		}
	}

	set t(offset) {
		this.seek(offset);
	}

	get duration() {
		return this.buffer.duration;
	}

	get volume() {
		return this._volume;
	}

	set volume(x) {
		this._volume = x;
		if (this.gain) this.gain.gain.value = x;
	}
}

window.Player = Editor.Player = Player;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJQbGF5ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbmNsYXNzIFBsYXllciB7XHJcblx0Y29uc3RydWN0b3IoYnVmZmVyLCBjb250ZXh0LCB2b2x1bWUpIHtcclxuXHRcdHRoaXMuYnVmZmVyID0gYnVmZmVyO1xyXG5cdFx0dGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHRcdHRoaXMuc291cmNlTm9kZSA9IG51bGw7XHJcblx0XHR0aGlzLnN0YXJ0ZWRBdCA9IDA7XHJcblx0XHR0aGlzLnBsYXlpbmcgPSBmYWxzZTtcclxuXHRcdHRoaXMuX3ZvbHVtZSA9IHZvbHVtZSB8fCAwLjU7XHJcblx0fVxyXG5cclxuXHRwbGF5KG9mZnNldCwgZGVsYXkpIHtcclxuXHRcdGRlbGF5ID0gZGVsYXkgfHwgMDtcclxuXHRcdGlmICh0aGlzLnNvdXJjZU5vZGUpIHRoaXMuc291cmNlTm9kZS5zdG9wKCk7XHJcblx0XHR0aGlzLnNvdXJjZU5vZGUgPSB0aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcblx0XHR0aGlzLmdhaW4gPSB0aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO1xyXG5cdFx0dGhpcy5nYWluLmdhaW4udmFsdWUgPSB0aGlzLnZvbHVtZSAvIDg7XHJcblx0XHR0aGlzLnNvdXJjZU5vZGUuY29ubmVjdCh0aGlzLmdhaW4pO1xyXG5cdFx0dGhpcy5nYWluLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKTtcclxuXHRcdHRoaXMuc291cmNlTm9kZS5idWZmZXIgPSB0aGlzLmJ1ZmZlcjtcclxuXHRcdGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRpZiAoIXRoaXMucGxheWluZyAmJiB0eXBlb2YgdGhpcy5wYXVzZWRBdCAhPT0gXCJ1bmRlZmluZWRcIilcclxuXHRcdFx0XHRvZmZzZXQgPSB0aGlzLnBhdXNlZEF0O1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0b2Zmc2V0ID0gMDtcclxuXHRcdH1cclxuXHRcdHRoaXMucGF1c2VkQXQgPSB1bmRlZmluZWQ7XHJcblx0XHRpZiAob2Zmc2V0ID49IHRoaXMuYnVmZmVyLmR1cmF0aW9uKSBvZmZzZXQgPSAwO1xyXG5cdFx0dGhpcy5zb3VyY2VOb2RlLnN0YXJ0KGRlbGF5LCBvZmZzZXQpO1xyXG5cdFx0dGhpcy5zdGFydGVkQXQgPSB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSBvZmZzZXQgKyBkZWxheTtcclxuXHRcdHRoaXMucGxheWluZyA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRwYXVzZShvZmZzZXQpIHtcclxuXHRcdHRoaXMucGF1c2VkQXQgPSBvZmZzZXQgIT09IHVuZGVmaW5lZCA/IG9mZnNldCA6IHRoaXMudDtcclxuXHRcdHRoaXMuc3RvcCgpO1xyXG5cdH1cclxuXHJcblx0c2VlayhvZmZzZXQpIHtcclxuXHRcdG9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG9mZnNldCwgdGhpcy5kdXJhdGlvbikpO1xyXG5cdFx0dmFyIHRlbXAgPSB0aGlzLnBsYXlpbmc7XHJcblx0XHR0aGlzLnBhdXNlKG9mZnNldCk7XHJcblx0XHRpZiAodGVtcClcclxuXHRcdFx0dGhpcy5wbGF5KCk7XHJcblx0fVxyXG5cclxuXHRzdG9wKCkge1xyXG5cdFx0aWYgKHRoaXMuc291cmNlTm9kZSkge1xyXG5cdFx0XHR0aGlzLnNvdXJjZU5vZGUuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnNvdXJjZU5vZGUuc3RvcCgwKTtcclxuXHRcdFx0dGhpcy5zb3VyY2VOb2RlID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdHRoaXMucGxheWluZyA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Z2V0IHQoKSB7XHJcblx0XHRpZiAodGhpcy5wYXVzZWRBdCAhPT0gdW5kZWZpbmVkKVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5wYXVzZWRBdDtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZiAodGhpcy5wbGF5aW5nKVxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0ZWRBdDtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXQgdChvZmZzZXQpIHtcclxuXHRcdHRoaXMuc2VlayhvZmZzZXQpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGR1cmF0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYnVmZmVyLmR1cmF0aW9uO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZvbHVtZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl92b2x1bWU7XHJcblx0fVxyXG5cclxuXHRzZXQgdm9sdW1lKHgpIHtcclxuXHRcdHRoaXMuX3ZvbHVtZSA9IHg7XHJcblx0XHRpZiAodGhpcy5nYWluKSB0aGlzLmdhaW4uZ2Fpbi52YWx1ZSA9IHg7XHJcblx0fVxyXG59XHJcblxyXG53aW5kb3cuUGxheWVyID0gRWRpdG9yLlBsYXllciA9IFBsYXllcjsiXSwiZmlsZSI6IlBsYXllci5qcyJ9

var Editor = Editor || {};

class Skin {
    constructor(_name) {
        this._meta = {};
        this._meta.name = _name;
        this._meta.options = {};
    }

    static ParseIni(content) {
        var skin = {};
        var keyValReg = /^([a-zA-Z0-9]+)[ ]*:[ ]*(.+)$/;
        content.toString().split(/[\n\r]+/).forEach(function (line) {
            line = line.toString().trim();
            if (!line) {
                return;
            }
            var match = keyValReg.exec(line);
            if (match) { skin[match[1]] = match[2]; }
        });

        return skin;
    }

    static LoadSkin(name, callback, elements) {
        var skin = new Skin(name);
        elements = elements || ['sliderb0', 'sliderfollowcircle', /*'sliderstartcircle', 'sliderstartcircleoverlay', 'sliderendcircle', 'sliderendcircleoverlay',*/ 'sliderscorepoint',
            'cursor', 'cursortrail', 'hitcircle', 'hitcircleoverlay', 'approachcircle', 'hitcircleselect',
            'default-0', 'default-1', 'default-2', 'default-3', 'default-4', 'default-5', 'default-6', 'default-7', 'default-8', 'default-9',
            'spinner-bottom', 'spinner-top', 'spinner-middle', 'spinner-middle2', 'reversearrow'
        ];

        $.get(`../Skins/${name}/skin.ini`, function (ini) {
            var i;
            skin._meta.options = Skin.ParseIni(ini);
            (function next(i) {
                Editor.updateStatus(`Loading Skin: ${Math.round(85 * i / elements.length)}%`);
                if (i < elements.length) {
                    skin[elements[i]] = new Image();
                    skin[elements[i]].src = `../Skins/${skin._meta.name}/${elements[i]}.png`;
                    skin[elements[i]].onload = function () {
                        next(i + 1);
                    };
                    skin[elements[i]].onerror = function () {
                        skin[elements[i]].src = `../Skins/Default/${elements[i]}.png`;
                        skin[elements[i]].onerror = function () {
                            next(i + 1);
                        }
                    };
                } else {
                    var n = 0;
                    var loaded = function () {
                        n++;
                        Editor.updateStatus(`Loading Skin: ${Math.round(85 + n / 2)}%`);
                        if (n >= 30) {
                            Editor.updateStatus('Loading Skin: 100%');
                            skin['hitcircle-1'] = tint(skin.hitcircle, [128, 128, 128]);
                            callback(skin);
                        }
                    };
                    if (skin._meta.options.HitCirclePrefix && !skin[skin._meta.options.HitCirclePrefix + '-0']) {
                        for (i = 0; i < 10; i++) {
                            skin[skin._meta.options.HitCirclePrefix + '-' + i] = new Image();
                            skin[skin._meta.options.HitCirclePrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.HitCirclePrefix}-${i}.png`;
                            skin[skin._meta.options.HitCirclePrefix + '-' + i].onload = loaded;
                        }
                    } else n += 10;
                    if (skin._meta.options.ScorePrefix && !skin[skin._meta.options.ScorePrefix + '-0']) {
                        for (i = 0; i < 10; i++) {
                            skin[skin._meta.options.ScorePrefix + '-' + i] = new Image();
                            skin[skin._meta.options.ScorePrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.ScorePrefix}-${i}.png`;
                            skin[skin._meta.options.ScorePrefix + '-' + i].onload = loaded;
                        }
                    } else n += 10;
                    if (skin._meta.options.ComboPrefix && !skin[skin._meta.options.ComboPrefix + '-0']) {
                        for (i = 0; i < 10; i++) {
                            skin[skin._meta.options.ComboPrefix + '-' + i] = new Image();
                            skin[skin._meta.options.ComboPrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.ComboPrefix}-${i}.png`;
                            skin[skin._meta.options.ComboPrefix + '-' + i].onload = loaded;
                        }
                    } else n += 10;
                }
            })(0);
        });
    }

    addComboNumber(digits, n) {
        this['default-' + n] = concatImages(digits, parseInt(this._meta.options.HitCircleOverlap || 2, 10));
        return this['default-' + n];
    }

    addComboColor(col) {
        Editor.cols.push(col);
        var tintelements = ['hitcircle', 'approachcircle', 'sliderb0'];
        for (var i = 0; i < tintelements.length; i++) {
            if (tintelements[i] == 'sliderb0') {
                this[tintelements[i] + (Editor.cols.length - 1)] = tint(this[tintelements[i]], [0, 0, 0]);
            } else
                this[tintelements[i] + (Editor.cols.length - 1)] = tint(this[tintelements[i]], col);
        }
    }
}

if (typeof module !== "undefined") {
    module.exports = Skin;
} else {
    window.Skin = Editor.Skin = Skin;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJTa2luLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBFZGl0b3IgPSBFZGl0b3IgfHwge307XHJcblxyXG5jbGFzcyBTa2luIHtcclxuICAgIGNvbnN0cnVjdG9yKF9uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fbWV0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuX21ldGEubmFtZSA9IF9uYW1lO1xyXG4gICAgICAgIHRoaXMuX21ldGEub3B0aW9ucyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBQYXJzZUluaShjb250ZW50KSB7XHJcbiAgICAgICAgdmFyIHNraW4gPSB7fTtcclxuICAgICAgICB2YXIga2V5VmFsUmVnID0gL14oW2EtekEtWjAtOV0rKVsgXSo6WyBdKiguKykkLztcclxuICAgICAgICBjb250ZW50LnRvU3RyaW5nKCkuc3BsaXQoL1tcXG5cXHJdKy8pLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcclxuICAgICAgICAgICAgbGluZSA9IGxpbmUudG9TdHJpbmcoKS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghbGluZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGtleVZhbFJlZy5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHsgc2tpblttYXRjaFsxXV0gPSBtYXRjaFsyXTsgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gc2tpbjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgTG9hZFNraW4obmFtZSwgY2FsbGJhY2ssIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIHNraW4gPSBuZXcgU2tpbihuYW1lKTtcclxuICAgICAgICBlbGVtZW50cyA9IGVsZW1lbnRzIHx8IFsnc2xpZGVyYjAnLCAnc2xpZGVyZm9sbG93Y2lyY2xlJywgLyonc2xpZGVyc3RhcnRjaXJjbGUnLCAnc2xpZGVyc3RhcnRjaXJjbGVvdmVybGF5JywgJ3NsaWRlcmVuZGNpcmNsZScsICdzbGlkZXJlbmRjaXJjbGVvdmVybGF5JywqLyAnc2xpZGVyc2NvcmVwb2ludCcsXHJcbiAgICAgICAgICAgICdjdXJzb3InLCAnY3Vyc29ydHJhaWwnLCAnaGl0Y2lyY2xlJywgJ2hpdGNpcmNsZW92ZXJsYXknLCAnYXBwcm9hY2hjaXJjbGUnLCAnaGl0Y2lyY2xlc2VsZWN0JyxcclxuICAgICAgICAgICAgJ2RlZmF1bHQtMCcsICdkZWZhdWx0LTEnLCAnZGVmYXVsdC0yJywgJ2RlZmF1bHQtMycsICdkZWZhdWx0LTQnLCAnZGVmYXVsdC01JywgJ2RlZmF1bHQtNicsICdkZWZhdWx0LTcnLCAnZGVmYXVsdC04JywgJ2RlZmF1bHQtOScsXHJcbiAgICAgICAgICAgICdzcGlubmVyLWJvdHRvbScsICdzcGlubmVyLXRvcCcsICdzcGlubmVyLW1pZGRsZScsICdzcGlubmVyLW1pZGRsZTInLCAncmV2ZXJzZWFycm93J1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgICQuZ2V0KGAuLi9Ta2lucy8ke25hbWV9L3NraW4uaW5pYCwgZnVuY3Rpb24gKGluaSkge1xyXG4gICAgICAgICAgICB2YXIgaTtcclxuICAgICAgICAgICAgc2tpbi5fbWV0YS5vcHRpb25zID0gU2tpbi5QYXJzZUluaShpbmkpO1xyXG4gICAgICAgICAgICAoZnVuY3Rpb24gbmV4dChpKSB7XHJcbiAgICAgICAgICAgICAgICBFZGl0b3IudXBkYXRlU3RhdHVzKGBMb2FkaW5nIFNraW46ICR7TWF0aC5yb3VuZCg4NSAqIGkgLyBlbGVtZW50cy5sZW5ndGgpfSVgKTtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbltlbGVtZW50c1tpXV0gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBza2luW2VsZW1lbnRzW2ldXS5zcmMgPSBgLi4vU2tpbnMvJHtza2luLl9tZXRhLm5hbWV9LyR7ZWxlbWVudHNbaV19LnBuZ2A7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbltlbGVtZW50c1tpXV0ub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHNraW5bZWxlbWVudHNbaV1dLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bZWxlbWVudHNbaV1dLnNyYyA9IGAuLi9Ta2lucy9EZWZhdWx0LyR7ZWxlbWVudHNbaV19LnBuZ2A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bZWxlbWVudHNbaV1dLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9hZGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci51cGRhdGVTdGF0dXMoYExvYWRpbmcgU2tpbjogJHtNYXRoLnJvdW5kKDg1ICsgbiAvIDIpfSVgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPj0gMzApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvci51cGRhdGVTdGF0dXMoJ0xvYWRpbmcgU2tpbjogMTAwJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpblsnaGl0Y2lyY2xlLTEnXSA9IHRpbnQoc2tpbi5oaXRjaXJjbGUsIFsxMjgsIDEyOCwgMTI4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhza2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVQcmVmaXggJiYgIXNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZVByZWZpeCArICctMCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVQcmVmaXggKyAnLScgKyBpXSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbltza2luLl9tZXRhLm9wdGlvbnMuSGl0Q2lyY2xlUHJlZml4ICsgJy0nICsgaV0uc3JjID0gYC4uL1NraW5zLyR7c2tpbi5fbWV0YS5uYW1lfS8ke3NraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVQcmVmaXh9LSR7aX0ucG5nYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZVByZWZpeCArICctJyArIGldLm9ubG9hZCA9IGxvYWRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuICs9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChza2luLl9tZXRhLm9wdGlvbnMuU2NvcmVQcmVmaXggJiYgIXNraW5bc2tpbi5fbWV0YS5vcHRpb25zLlNjb3JlUHJlZml4ICsgJy0wJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLlNjb3JlUHJlZml4ICsgJy0nICsgaV0gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLlNjb3JlUHJlZml4ICsgJy0nICsgaV0uc3JjID0gYC4uL1NraW5zLyR7c2tpbi5fbWV0YS5uYW1lfS8ke3NraW4uX21ldGEub3B0aW9ucy5TY29yZVByZWZpeH0tJHtpfS5wbmdgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbltza2luLl9tZXRhLm9wdGlvbnMuU2NvcmVQcmVmaXggKyAnLScgKyBpXS5vbmxvYWQgPSBsb2FkZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbiArPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbi5fbWV0YS5vcHRpb25zLkNvbWJvUHJlZml4ICYmICFza2luW3NraW4uX21ldGEub3B0aW9ucy5Db21ib1ByZWZpeCArICctMCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5Db21ib1ByZWZpeCArICctJyArIGldID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5Db21ib1ByZWZpeCArICctJyArIGldLnNyYyA9IGAuLi9Ta2lucy8ke3NraW4uX21ldGEubmFtZX0vJHtza2luLl9tZXRhLm9wdGlvbnMuQ29tYm9QcmVmaXh9LSR7aX0ucG5nYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkNvbWJvUHJlZml4ICsgJy0nICsgaV0ub25sb2FkID0gbG9hZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG4gKz0gMTA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbWJvTnVtYmVyKGRpZ2l0cywgbikge1xyXG4gICAgICAgIHRoaXNbJ2RlZmF1bHQtJyArIG5dID0gY29uY2F0SW1hZ2VzKGRpZ2l0cywgcGFyc2VJbnQodGhpcy5fbWV0YS5vcHRpb25zLkhpdENpcmNsZU92ZXJsYXAgfHwgMiwgMTApKTtcclxuICAgICAgICByZXR1cm4gdGhpc1snZGVmYXVsdC0nICsgbl07XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ29tYm9Db2xvcihjb2wpIHtcclxuICAgICAgICBFZGl0b3IuY29scy5wdXNoKGNvbCk7XHJcbiAgICAgICAgdmFyIHRpbnRlbGVtZW50cyA9IFsnaGl0Y2lyY2xlJywgJ2FwcHJvYWNoY2lyY2xlJywgJ3NsaWRlcmIwJ107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aW50ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRpbnRlbGVtZW50c1tpXSA9PSAnc2xpZGVyYjAnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzW3RpbnRlbGVtZW50c1tpXSArIChFZGl0b3IuY29scy5sZW5ndGggLSAxKV0gPSB0aW50KHRoaXNbdGludGVsZW1lbnRzW2ldXSwgWzAsIDAsIDBdKTtcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzW3RpbnRlbGVtZW50c1tpXSArIChFZGl0b3IuY29scy5sZW5ndGggLSAxKV0gPSB0aW50KHRoaXNbdGludGVsZW1lbnRzW2ldXSwgY29sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFNraW47XHJcbn0gZWxzZSB7XHJcbiAgICB3aW5kb3cuU2tpbiA9IEVkaXRvci5Ta2luID0gU2tpbjtcclxufVxyXG4iXSwiZmlsZSI6IlNraW4uanMifQ==

var Editor = Editor || {};

class MapUtils {
	static moveObject(obj, dx, dy) {
		if (obj instanceof Slider) {
			for (var j = 1; j < obj.points.length; j++) {
				obj.points[j].x += dx;
				obj.points[j].y += dy;
			}
			if (obj.cache && obj.cache.render) {
				obj.cache.render[1][0] += dx;
				obj.cache.render[1][1] += dy;
			}
			obj.calculate();
		}
		obj.position.x += dx;
		obj.position.y += dy;
	}

	static endTime(obj) {
		if (obj.endTime)
			return obj.endTime;
		else
			return obj.startTime;
	}

	constructor(beatmap) {
		if (beatmap)
			this.beatmap = beatmap;
		else
			this.beatmap = Editor.beatmap;
		this.HitObjectIdsByEnd = [];
		let temp = this.beatmap.HitObjects.concat().sort((a, b) => MapUtils.endTime(a) - MapUtils.endTime(b));
		for (let i = 0; i < temp.length; i++) {
			this.HitObjectIdsByEnd.push({
				endTime: MapUtils.endTime(temp[i]),
				index: i
			});
		}
	}

	timelineRenderRange() {
		let ret = [];
		let startOffset = (Editor.source.t - 3 / Editor.options.timelinezoom - 1) * 1000;
		let start = 0;
		for (var i = this.HitObjectIdsByEnd.length - 2; i > 0; i--) {
			var temp = this.HitObjectIdsByEnd[i];
			if (temp.endTime < startOffset) {
				start = temp.index + 1;
				break;
			}
		}

		let end = Editor.beatmap.getIndexAt((Editor.source.t + 3 / Editor.options.timelinezoom + 1) * 1000);

		return [start, end];
	}
}

if (typeof module !== "undefined") {
	module.exports = MapUtils;
} else {
	Editor.MapUtils = MapUtils;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJNYXBVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxuY2xhc3MgTWFwVXRpbHMge1xyXG5cdHN0YXRpYyBtb3ZlT2JqZWN0KG9iaiwgZHgsIGR5KSB7XHJcblx0XHRpZiAob2JqIGluc3RhbmNlb2YgU2xpZGVyKSB7XHJcblx0XHRcdGZvciAodmFyIGogPSAxOyBqIDwgb2JqLnBvaW50cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdG9iai5wb2ludHNbal0ueCArPSBkeDtcclxuXHRcdFx0XHRvYmoucG9pbnRzW2pdLnkgKz0gZHk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKG9iai5jYWNoZSAmJiBvYmouY2FjaGUucmVuZGVyKSB7XHJcblx0XHRcdFx0b2JqLmNhY2hlLnJlbmRlclsxXVswXSArPSBkeDtcclxuXHRcdFx0XHRvYmouY2FjaGUucmVuZGVyWzFdWzFdICs9IGR5O1xyXG5cdFx0XHR9XHJcblx0XHRcdG9iai5jYWxjdWxhdGUoKTtcclxuXHRcdH1cclxuXHRcdG9iai5wb3NpdGlvbi54ICs9IGR4O1xyXG5cdFx0b2JqLnBvc2l0aW9uLnkgKz0gZHk7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZW5kVGltZShvYmopIHtcclxuXHRcdGlmIChvYmouZW5kVGltZSlcclxuXHRcdFx0cmV0dXJuIG9iai5lbmRUaW1lO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gb2JqLnN0YXJ0VGltZTtcclxuXHR9XHJcblxyXG5cdGNvbnN0cnVjdG9yKGJlYXRtYXApIHtcclxuXHRcdGlmIChiZWF0bWFwKVxyXG5cdFx0XHR0aGlzLmJlYXRtYXAgPSBiZWF0bWFwO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLmJlYXRtYXAgPSBFZGl0b3IuYmVhdG1hcDtcclxuXHRcdHRoaXMuSGl0T2JqZWN0SWRzQnlFbmQgPSBbXTtcclxuXHRcdGxldCB0ZW1wID0gdGhpcy5iZWF0bWFwLkhpdE9iamVjdHMuY29uY2F0KCkuc29ydCgoYSwgYikgPT4gTWFwVXRpbHMuZW5kVGltZShhKSAtIE1hcFV0aWxzLmVuZFRpbWUoYikpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHRoaXMuSGl0T2JqZWN0SWRzQnlFbmQucHVzaCh7XHJcblx0XHRcdFx0ZW5kVGltZTogTWFwVXRpbHMuZW5kVGltZSh0ZW1wW2ldKSxcclxuXHRcdFx0XHRpbmRleDogaVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHRpbWVsaW5lUmVuZGVyUmFuZ2UoKSB7XHJcblx0XHRsZXQgcmV0ID0gW107XHJcblx0XHRsZXQgc3RhcnRPZmZzZXQgPSAoRWRpdG9yLnNvdXJjZS50IC0gMyAvIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSAtIDEpICogMTAwMDtcclxuXHRcdGxldCBzdGFydCA9IDA7XHJcblx0XHRmb3IgKHZhciBpID0gdGhpcy5IaXRPYmplY3RJZHNCeUVuZC5sZW5ndGggLSAyOyBpID4gMDsgaS0tKSB7XHJcblx0XHRcdHZhciB0ZW1wID0gdGhpcy5IaXRPYmplY3RJZHNCeUVuZFtpXTtcclxuXHRcdFx0aWYgKHRlbXAuZW5kVGltZSA8IHN0YXJ0T2Zmc2V0KSB7XHJcblx0XHRcdFx0c3RhcnQgPSB0ZW1wLmluZGV4ICsgMTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBlbmQgPSBFZGl0b3IuYmVhdG1hcC5nZXRJbmRleEF0KChFZGl0b3Iuc291cmNlLnQgKyAzIC8gRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tICsgMSkgKiAxMDAwKTtcclxuXHJcblx0XHRyZXR1cm4gW3N0YXJ0LCBlbmRdO1xyXG5cdH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcFV0aWxzO1xyXG59IGVsc2Uge1xyXG5cdEVkaXRvci5NYXBVdGlscyA9IE1hcFV0aWxzO1xyXG59XHJcbiJdLCJmaWxlIjoiTWFwVXRpbHMuanMifQ==

var Editor = Editor || {};
class Socket {
	static get_file(path, responseType, complete, progress) {
		var oReq = new XMLHttpRequest();
		oReq.open("GET", path, true);
		if (responseType) oReq.responseType = responseType;

		if (progress) oReq.addEventListener("progress", (e) => { progress(e.loaded / e.total); });
		oReq.addEventListener("load", (e) => { complete(responseType ? oReq.response : oReq.responseText); });

		oReq.send(null);
	}
	static get_osu(callback) {
		if (Editor.fileInfo && Editor.fileInfo.difficulty) {
			console.log(Editor.beatmap);
			document.title = `${Editor.beatmap.ArtistUnicode} - ${Editor.beatmap.TitleUnicode} [${Editor.beatmap.Version}]`;
			if (callback) callback();
			// Socket.get_file(`/f/${Editor.roomID}/${Editor.fileInfo.difficulty}`, false, function(content) {
			// 	Editor.beatmap = Beatmap.ParseString(content);
			// 	document.title = Editor.beatmap.ArtistUnicode + ' - ' + Editor.beatmap.TitleUnicode + ' [' + Editor.beatmap.Version + ']';
			// 	if (callback) callback();
			// }, function(p) {
			// 	Editor.updateStatus(`Loading beatmap: ${Math.round(p*100)}%`);
			// });
		} else {
			console.log('%cDifficulty not found!', 'color: #F00');
			alert('Room does not exist. Redirecting to homepage...');
			window.location.href = window.location.origin;
		}
	}

	static get_mp3(callback) {
		var done = false, t;
		if (Editor.beatmap && Editor.beatmap.AudioFilename) {
			Socket.get_file(`/f/${Editor.roomID}/${Editor.beatmap.AudioFilename}`, 'arraybuffer', function (content) {
				Editor.audioCtx.decodeAudioData(content).then(function (buffer) {
					if (Editor.source) {
						t = Editor.source.t;
						Editor.source.stop();
					} else {
						t = parseFloat(localStorage[Editor.roomID + 't']);
					}
					Editor.source = new Player(buffer, Editor.audioCtx);
					if (t) {
						Editor.source.t = t;
						console.log('Resuming from time: ' + t);
					}
					var v = parseFloat(localStorage[Editor.roomID + 'v']);
					if (v) {
						Editor.source.volume = v;
						console.log('Using volume: ' + v);
					}
					if (callback) callback();
				});
			}, function (p) {
				if (done) return;
				if (p == 1) done = true;
				Editor.updateStatus(`Loading audio: ${Math.round(p * 100)}%`);
			});
		} else {
			console.log('%cThis map has no audio!', 'color: #F00');
			Editor.beatmap.AudioFilename = '';
			if (callback) callback();
		}
	}

	static get_bg(callback) {
		if (Editor.beatmap && Editor.beatmap.bgFilename) {
			Socket.get_file(`/f/${Editor.roomID}/${Editor.beatmap.bgFilename}`, 'blob', function (blob) {
				var $old = $('#backgrounds .bg');
				var $new = $old.clone();
				$new.css('background', `url(${URL.createObjectURL(blob)}) no-repeat center center fixed`)
					.css('background-size', 'cover')
					.css('display', 'none')
					.appendTo('#backgrounds');
				$new.fadeIn(1000);
				$old.fadeOut(1000, function () {
					$(this).remove();
				});
				if (callback) callback();
			}, function (p) {
				Editor.updateStatus(`Loading background: ${Math.round(p * 100)}%`);
			});

		} else {
			console.log('%cThis map has no background!', 'color: #F00');
			Editor.beatmap.bgFilename = '';
			if (callback) callback();
		}
	}
	constructor() {
		this.room = {};
		var socket = this.instance = io.connect(location.pathname);

		var _this = this;

		socket.on("news", function (data) {
			console.log("%cServer: " + data.status, "color:" + (data.color || "#000"));
		});
		socket.on('diffs', function (data) {
			Editor.diffs = data;
		});
		socket.on("disconnect", function () {
			console.log("disconnected");
			Editor.connected = false;
		});
		socket.on("connect", function () {
			Editor.connected = true;

			socket.on("hi", function (data) {
				socket.emit("join", 'placeholder'); //username will go here, passwords can be added through _this
				Editor.beatmap = Beatmap.unjson(data);
				Editor.fileInfo = { difficulty: Editor.beatmap.Version };
				// if (Editor.beatmap) return;
				Socket.get_osu(function () {
					Socket.get_bg(function () {
						Socket.get_mp3(function () {
							Editor.init();
							Editor.loading = false;
							$('#cover').fadeOut();
							$('#loading').fadeOut();
						});
					});
				});
			});

			socket.on('join', function (data) {
				if (!data[0].includes(socket.id)) {
					console.log(data[0] + " joined");
					_this.room[data[0]] = [];
				}
			});

			socket.on('leave', function (data) {
				console.log(data + " left");
				delete _this.room[data];
			});

			socket.on("badurl", function (data) {
				alert('Room does not exist. Redirecting to homepage...');
				window.location.href = window.location.origin;
			});

			socket.on("msg", function (data) {
				console.log("Message: ", data);
			});

			socket.on('edit move', function (data) {
				var obj = Editor.beatmap.matchObj(data[0]);
				if (obj) {
					var dx = data[1] - obj.position.x,
						dy = data[2] - obj.position.y;
					Editor.MapUtils.moveObject(obj, dx, dy);
				} else {
					console.log('object not found!');
				}
				Editor.renderupdate();
			});
		});
	}

	send(msg) {
		this.instance.emit('msg', msg);
	}

	edit_move(obj, x, y) {
		this.instance.emit('edit move', [obj, x, y]);
	}
}
Editor.Socket = Socket;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJTb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuY2xhc3MgU29ja2V0IHtcclxuXHRzdGF0aWMgZ2V0X2ZpbGUocGF0aCwgcmVzcG9uc2VUeXBlLCBjb21wbGV0ZSwgcHJvZ3Jlc3MpIHtcclxuXHRcdHZhciBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRvUmVxLm9wZW4oXCJHRVRcIiwgcGF0aCwgdHJ1ZSk7XHJcblx0XHRpZiAocmVzcG9uc2VUeXBlKSBvUmVxLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcclxuXHJcblx0XHRpZiAocHJvZ3Jlc3MpIG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIChlKSA9PiB7IHByb2dyZXNzKGUubG9hZGVkIC8gZS50b3RhbCk7IH0pO1xyXG5cdFx0b1JlcS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZSkgPT4geyBjb21wbGV0ZShyZXNwb25zZVR5cGUgPyBvUmVxLnJlc3BvbnNlIDogb1JlcS5yZXNwb25zZVRleHQpOyB9KTtcclxuXHJcblx0XHRvUmVxLnNlbmQobnVsbCk7XHJcblx0fVxyXG5cdHN0YXRpYyBnZXRfb3N1KGNhbGxiYWNrKSB7XHJcblx0XHRpZiAoRWRpdG9yLmZpbGVJbmZvICYmIEVkaXRvci5maWxlSW5mby5kaWZmaWN1bHR5KSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKEVkaXRvci5iZWF0bWFwKTtcclxuXHRcdFx0ZG9jdW1lbnQudGl0bGUgPSBgJHtFZGl0b3IuYmVhdG1hcC5BcnRpc3RVbmljb2RlfSAtICR7RWRpdG9yLmJlYXRtYXAuVGl0bGVVbmljb2RlfSBbJHtFZGl0b3IuYmVhdG1hcC5WZXJzaW9ufV1gO1xyXG5cdFx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcblx0XHRcdC8vIFNvY2tldC5nZXRfZmlsZShgL2YvJHtFZGl0b3Iucm9vbUlEfS8ke0VkaXRvci5maWxlSW5mby5kaWZmaWN1bHR5fWAsIGZhbHNlLCBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHRcdC8vIFx0RWRpdG9yLmJlYXRtYXAgPSBCZWF0bWFwLlBhcnNlU3RyaW5nKGNvbnRlbnQpO1xyXG5cdFx0XHQvLyBcdGRvY3VtZW50LnRpdGxlID0gRWRpdG9yLmJlYXRtYXAuQXJ0aXN0VW5pY29kZSArICcgLSAnICsgRWRpdG9yLmJlYXRtYXAuVGl0bGVVbmljb2RlICsgJyBbJyArIEVkaXRvci5iZWF0bWFwLlZlcnNpb24gKyAnXSc7XHJcblx0XHRcdC8vIFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0XHQvLyB9LCBmdW5jdGlvbihwKSB7XHJcblx0XHRcdC8vIFx0RWRpdG9yLnVwZGF0ZVN0YXR1cyhgTG9hZGluZyBiZWF0bWFwOiAke01hdGgucm91bmQocCoxMDApfSVgKTtcclxuXHRcdFx0Ly8gfSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnJWNEaWZmaWN1bHR5IG5vdCBmb3VuZCEnLCAnY29sb3I6ICNGMDAnKTtcclxuXHRcdFx0YWxlcnQoJ1Jvb20gZG9lcyBub3QgZXhpc3QuIFJlZGlyZWN0aW5nIHRvIGhvbWVwYWdlLi4uJyk7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0YXRpYyBnZXRfbXAzKGNhbGxiYWNrKSB7XHJcblx0XHR2YXIgZG9uZSA9IGZhbHNlLCB0O1xyXG5cdFx0aWYgKEVkaXRvci5iZWF0bWFwICYmIEVkaXRvci5iZWF0bWFwLkF1ZGlvRmlsZW5hbWUpIHtcclxuXHRcdFx0U29ja2V0LmdldF9maWxlKGAvZi8ke0VkaXRvci5yb29tSUR9LyR7RWRpdG9yLmJlYXRtYXAuQXVkaW9GaWxlbmFtZX1gLCAnYXJyYXlidWZmZXInLCBmdW5jdGlvbiAoY29udGVudCkge1xyXG5cdFx0XHRcdEVkaXRvci5hdWRpb0N0eC5kZWNvZGVBdWRpb0RhdGEoY29udGVudCkudGhlbihmdW5jdGlvbiAoYnVmZmVyKSB7XHJcblx0XHRcdFx0XHRpZiAoRWRpdG9yLnNvdXJjZSkge1xyXG5cdFx0XHRcdFx0XHR0ID0gRWRpdG9yLnNvdXJjZS50O1xyXG5cdFx0XHRcdFx0XHRFZGl0b3Iuc291cmNlLnN0b3AoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHQgPSBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZVtFZGl0b3Iucm9vbUlEICsgJ3QnXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRFZGl0b3Iuc291cmNlID0gbmV3IFBsYXllcihidWZmZXIsIEVkaXRvci5hdWRpb0N0eCk7XHJcblx0XHRcdFx0XHRpZiAodCkge1xyXG5cdFx0XHRcdFx0XHRFZGl0b3Iuc291cmNlLnQgPSB0O1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnUmVzdW1pbmcgZnJvbSB0aW1lOiAnICsgdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgdiA9IHBhcnNlRmxvYXQobG9jYWxTdG9yYWdlW0VkaXRvci5yb29tSUQgKyAndiddKTtcclxuXHRcdFx0XHRcdGlmICh2KSB7XHJcblx0XHRcdFx0XHRcdEVkaXRvci5zb3VyY2Uudm9sdW1lID0gdjtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ1VzaW5nIHZvbHVtZTogJyArIHYpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCBmdW5jdGlvbiAocCkge1xyXG5cdFx0XHRcdGlmIChkb25lKSByZXR1cm47XHJcblx0XHRcdFx0aWYgKHAgPT0gMSkgZG9uZSA9IHRydWU7XHJcblx0XHRcdFx0RWRpdG9yLnVwZGF0ZVN0YXR1cyhgTG9hZGluZyBhdWRpbzogJHtNYXRoLnJvdW5kKHAgKiAxMDApfSVgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnJWNUaGlzIG1hcCBoYXMgbm8gYXVkaW8hJywgJ2NvbG9yOiAjRjAwJyk7XHJcblx0XHRcdEVkaXRvci5iZWF0bWFwLkF1ZGlvRmlsZW5hbWUgPSAnJztcclxuXHRcdFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldF9iZyhjYWxsYmFjaykge1xyXG5cdFx0aWYgKEVkaXRvci5iZWF0bWFwICYmIEVkaXRvci5iZWF0bWFwLmJnRmlsZW5hbWUpIHtcclxuXHRcdFx0U29ja2V0LmdldF9maWxlKGAvZi8ke0VkaXRvci5yb29tSUR9LyR7RWRpdG9yLmJlYXRtYXAuYmdGaWxlbmFtZX1gLCAnYmxvYicsIGZ1bmN0aW9uIChibG9iKSB7XHJcblx0XHRcdFx0dmFyICRvbGQgPSAkKCcjYmFja2dyb3VuZHMgLmJnJyk7XHJcblx0XHRcdFx0dmFyICRuZXcgPSAkb2xkLmNsb25lKCk7XHJcblx0XHRcdFx0JG5ldy5jc3MoJ2JhY2tncm91bmQnLCBgdXJsKCR7VVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKX0pIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyIGZpeGVkYClcclxuXHRcdFx0XHRcdC5jc3MoJ2JhY2tncm91bmQtc2l6ZScsICdjb3ZlcicpXHJcblx0XHRcdFx0XHQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxyXG5cdFx0XHRcdFx0LmFwcGVuZFRvKCcjYmFja2dyb3VuZHMnKTtcclxuXHRcdFx0XHQkbmV3LmZhZGVJbigxMDAwKTtcclxuXHRcdFx0XHQkb2xkLmZhZGVPdXQoMTAwMCwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcblx0XHRcdH0sIGZ1bmN0aW9uIChwKSB7XHJcblx0XHRcdFx0RWRpdG9yLnVwZGF0ZVN0YXR1cyhgTG9hZGluZyBiYWNrZ3JvdW5kOiAke01hdGgucm91bmQocCAqIDEwMCl9JWApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnJWNUaGlzIG1hcCBoYXMgbm8gYmFja2dyb3VuZCEnLCAnY29sb3I6ICNGMDAnKTtcclxuXHRcdFx0RWRpdG9yLmJlYXRtYXAuYmdGaWxlbmFtZSA9ICcnO1xyXG5cdFx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5yb29tID0ge307XHJcblx0XHR2YXIgc29ja2V0ID0gdGhpcy5pbnN0YW5jZSA9IGlvLmNvbm5lY3QobG9jYXRpb24ucGF0aG5hbWUpO1xyXG5cclxuXHRcdHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG5cdFx0c29ja2V0Lm9uKFwibmV3c1wiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIiVjU2VydmVyOiBcIiArIGRhdGEuc3RhdHVzLCBcImNvbG9yOlwiICsgKGRhdGEuY29sb3IgfHwgXCIjMDAwXCIpKTtcclxuXHRcdH0pO1xyXG5cdFx0c29ja2V0Lm9uKCdkaWZmcycsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdEVkaXRvci5kaWZmcyA9IGRhdGE7XHJcblx0XHR9KTtcclxuXHRcdHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImRpc2Nvbm5lY3RlZFwiKTtcclxuXHRcdFx0RWRpdG9yLmNvbm5lY3RlZCA9IGZhbHNlO1xyXG5cdFx0fSk7XHJcblx0XHRzb2NrZXQub24oXCJjb25uZWN0XCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0RWRpdG9yLmNvbm5lY3RlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oXCJoaVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdHNvY2tldC5lbWl0KFwiam9pblwiLCAncGxhY2Vob2xkZXInKTsgLy91c2VybmFtZSB3aWxsIGdvIGhlcmUsIHBhc3N3b3JkcyBjYW4gYmUgYWRkZWQgdGhyb3VnaCBfdGhpc1xyXG5cdFx0XHRcdEVkaXRvci5iZWF0bWFwID0gQmVhdG1hcC51bmpzb24oZGF0YSk7XHJcblx0XHRcdFx0RWRpdG9yLmZpbGVJbmZvID0geyBkaWZmaWN1bHR5OiBFZGl0b3IuYmVhdG1hcC5WZXJzaW9uIH07XHJcblx0XHRcdFx0Ly8gaWYgKEVkaXRvci5iZWF0bWFwKSByZXR1cm47XHJcblx0XHRcdFx0U29ja2V0LmdldF9vc3UoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0U29ja2V0LmdldF9iZyhmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdFNvY2tldC5nZXRfbXAzKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0XHRFZGl0b3IuaW5pdCgpO1xyXG5cdFx0XHRcdFx0XHRcdEVkaXRvci5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0JCgnI2NvdmVyJykuZmFkZU91dCgpO1xyXG5cdFx0XHRcdFx0XHRcdCQoJyNsb2FkaW5nJykuZmFkZU91dCgpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNvY2tldC5vbignam9pbicsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0aWYgKCFkYXRhWzBdLmluY2x1ZGVzKHNvY2tldC5pZCkpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGFbMF0gKyBcIiBqb2luZWRcIik7XHJcblx0XHRcdFx0XHRfdGhpcy5yb29tW2RhdGFbMF1dID0gW107XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNvY2tldC5vbignbGVhdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEgKyBcIiBsZWZ0XCIpO1xyXG5cdFx0XHRcdGRlbGV0ZSBfdGhpcy5yb29tW2RhdGFdO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNvY2tldC5vbihcImJhZHVybFwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdGFsZXJ0KCdSb29tIGRvZXMgbm90IGV4aXN0LiBSZWRpcmVjdGluZyB0byBob21lcGFnZS4uLicpO1xyXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oXCJtc2dcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIk1lc3NhZ2U6IFwiLCBkYXRhKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oJ2VkaXQgbW92ZScsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0dmFyIG9iaiA9IEVkaXRvci5iZWF0bWFwLm1hdGNoT2JqKGRhdGFbMF0pO1xyXG5cdFx0XHRcdGlmIChvYmopIHtcclxuXHRcdFx0XHRcdHZhciBkeCA9IGRhdGFbMV0gLSBvYmoucG9zaXRpb24ueCxcclxuXHRcdFx0XHRcdFx0ZHkgPSBkYXRhWzJdIC0gb2JqLnBvc2l0aW9uLnk7XHJcblx0XHRcdFx0XHRFZGl0b3IuTWFwVXRpbHMubW92ZU9iamVjdChvYmosIGR4LCBkeSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdvYmplY3Qgbm90IGZvdW5kIScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRFZGl0b3IucmVuZGVydXBkYXRlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzZW5kKG1zZykge1xyXG5cdFx0dGhpcy5pbnN0YW5jZS5lbWl0KCdtc2cnLCBtc2cpO1xyXG5cdH1cclxuXHJcblx0ZWRpdF9tb3ZlKG9iaiwgeCwgeSkge1xyXG5cdFx0dGhpcy5pbnN0YW5jZS5lbWl0KCdlZGl0IG1vdmUnLCBbb2JqLCB4LCB5XSk7XHJcblx0fVxyXG59XHJcbkVkaXRvci5Tb2NrZXQgPSBTb2NrZXQ7Il0sImZpbGUiOiJTb2NrZXQuanMifQ==

// Global Variables
var mouseX = 0, //actual mouse position in the coordinates of the playfield
	mouseY = 0,
	snapped_mouseX = 0, //position of object being edited, or snapped cursor location
	snapped_mouseY = 0,
	page_mouseX = 0, //absolute position on page (actual position on canvas has page_mouseY - 24)
	page_mouseY = 0;
var keyMap = Array(256);

// Debug variables
var keycodedbg = false;

var isMouseinElement = function(elem) {
	var e = $(elem);
	if (e.length != 1) return false;
	return page_mouseX >= e.offset().left && page_mouseX <= e.offset().left + e.width() && page_mouseY >= e.offset().top && page_mouseY <= e.offset().top + e.height();
};

Editor.roomID = location.pathname.split('/').splice(-1)[0];

Editor.updateStatus = function (status) {
	$('#statuslabel').html(status).stop().fadeIn(0).fadeOut(3000);
};

$('#statuslabel').mouseover(function () {
	$(this).fadeOut(1000);
});

window.onbeforeunload = function() {
	if (Editor.roomID && Editor.source) {
		localStorage.setItem(Editor.roomID + 't', Editor.source.t);
		localStorage.setItem(Editor.roomID + 'v', Editor.source.volume);
	}
};

var toggleFullScreen = function () {
	if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {
		if (document.documentElement.requestFullscreen) {
			document.documentElement.requestFullscreen();
		} else if (document.documentElement.msRequestFullscreen) {
			document.documentElement.msRequestFullscreen();
		} else if (document.documentElement.mozRequestFullScreen) {
			document.documentElement.mozRequestFullScreen();
		} else if (document.documentElement.webkitRequestFullscreen) {
			document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
		}
	} else {
		if (document.exitFullscreen) {
			document.exitFullscreen();
		} else if (document.msExitFullscreen) {
		document.msExitFullscreen();
		} else if (document.mozCancelFullScreen) {
			document.mozCancelFullScreen();
		} else if (document.webkitExitFullscreen) {
			document.webkitExitFullscreen();
		}
	}
};

function fullscreenHandler() {
	console.log('derp?');
	var el = document.getElementById('fullscreen');
	el.src = el.src.endsWith("/stuff/editor-fullscreen.png") ? "/stuff/editor-unfullscreen.png" : "/stuff/editor-fullscreen.png";
}

document.addEventListener('webkitfullscreenchange', fullscreenHandler, false);
document.addEventListener('mozfullscreenchange', fullscreenHandler, false);
document.addEventListener('fullscreenchange', fullscreenHandler, false);
document.addEventListener('MSFullscreenChange', fullscreenHandler, false);

Editor.align = function () {
	var height = $(window).height() * 0.75;
	var width = height * 4 / 3;

	$("#canvases > canvas").attr("width", $(window).width())
		.attr("height", $(window).height());

	$('#timeline2').attr("width", $(window).width() * 0.8)
		.attr("height", $(window).height() * 0.12);

	var grid = $("#grid");
	grid.attr("width", width)
		.attr("height", height)
		.css({
			'left': ($(window).width() - width) / 2,
			'top': $(window).height() * 0.16
		});
	Editor.drawGrid();

	$("#righttoolbar > img").width($("#lefttoolbar > img")[0].width);
	$("#righttoolbar").css("top", 14 + (1 - $("#righttoolbar").height() / ($("#container").height() - $("#topsection").height() - $("#bottomsection").height())) * 50 + "%");

	if (Editor.source && Editor.timelinemarks) {
		var track = $('#timelinetrack');
		for (var time in Editor.timelinemarks) {
			if (Editor.timelinemarks.hasOwnProperty(time)) {
				for (var point in Editor.timelinemarks[time]) {
					if (Editor.timelinemarks[time].hasOwnProperty(point)) {
						$(Editor.timelinemarks[time][point]).css({
							left: track.position().left + track.width() * (time / Editor.source.duration)
						});
					}
				}
			}
		}
	}
};

Editor.renderTimeline  = function() {
	Editor.timeline_rendered = new Set();
	var timeline = $('#timeline2');
	var tctx = document.getElementById('timeline2').getContext('2d'),
		width = tctx.canvas.width,
		height = tctx.canvas.height;
	tctx.clearRect(0, 0, width, height);
	tctx.save();
	var [renderFrom, renderTo] = Editor.mapUtils.timelineRenderRange();
	var flag = Editor.timeline2_mousedown && Editor.timeline2_objend;
	for (var i = renderTo; i >= renderFrom; i--) {
		var obj = Editor.beatmap.HitObjects[i];
		if (!(Editor.timeline2_mousedown && ! Editor.timeline2_objend) &&
			(Editor.selected.length < 2 && (obj instanceof Slider || obj instanceof Spinner))) {
			let t = Editor.source.t * 1000,
				x = page_mouseX - timeline.offset().left,
				y = page_mouseY - timeline.offset().top,
				pxps = timeline.width() / 6 * Editor.options.timelinezoom,
				x2 = pxps * (obj.endTime - t) / 1000 + timeline.width() / 2;
			if (Math.abs(x - x2) < timeline.height() * 0.1 && Math.abs(y - timeline.height() / 2) <= timeline.height() * 0.4) {
				timeline.css('cursor', 'e-resize');
				//console.log(Editor.timeline2_objend, Editor.timeline2_mousedown);
				flag = true;
				Editor.timeline2_objend = true;
			}
		}
		var a;
		try {
			a = obj.timelineRender();
		}
		catch (e) {
			console.log(e);
		}
		if (a)
			Editor.timeline_rendered.add(Editor.beatmap.HitObjects[i]);
	}
	if (!flag) {
		timeline.css('cursor', 'auto');
		Editor.timeline2_objend = false;
	}
	tctx.restore();
	tctx.strokeStyle = '#FFF';
	tctx.lineWidth = 1.5;
	tctx.beginPath();
	tctx.moveTo(0, height - 3);
	tctx.lineTo(width, height - 3);
	tctx.moveTo(width / 2 - 1.5, height / 10);
	tctx.lineTo(width / 2 - 1.5, height - 3);
	tctx.moveTo(width / 2 + 1.5, height / 10);
	tctx.lineTo(width / 2 + 1.5, height - 3);
	tctx.stroke();
	function mod(m, n) {
		return ((m % n) + n) % n;
	}
	var t = Editor.source.t,
		d = Editor.options.beatsnapdivisor,
		tpt = Editor.beatmap.getTimingPoint(t * 1000),
		beatl = tpt.beatLength / 1000,
		lbound = t - 3 / Editor.options.timelinezoom,
		rbound = t + 3 / Editor.options.timelinezoom,
		beat1 = lbound - mod(lbound - tpt.baseOffset / 1000, beatl * tpt.timingSignature),
		beat1pos = ((beat1 - t) * Editor.options.timelinezoom / 6 + .5) * width;

	// measure bars
	tctx.beginPath();
	for (var x = beat1pos; x < width; x += beatl * tpt.timingSignature * Editor.options.timelinezoom / 6 * width) {
		tctx.moveTo(x, height * 0.6);
		tctx.lineTo(x, height - 3);
	}
	tctx.stroke();

	x = 0;
	for (var i = 0; x < width; i++) {
		var j = i % d, yfrom;
		x = beat1pos + i * beatl * Editor.options.timelinezoom / 6 * width / d;

		if (x < 0 || i % (d * tpt.timingSignature) === 0) continue;
		if (j === 0) {
			yfrom = height * 0.8;
			tctx.strokeStyle = '#FFF';
		} else if ((j / d * 2) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#F33';
		} else if ((j / d * 4) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#33F';
		} else if ((j / d * 3) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#B6E';
		} else if ((j / d * 6) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#B6E';
		} else if ((j / d * 8) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#FF4';
		} else if ((j / d * 12) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#AAA';
		} else if ((j / d * 16) % 1 === 0) {
			yfrom = height * 0.9;
			tctx.strokeStyle = '#AAA';
		}

		tctx.beginPath();
		tctx.moveTo(x, yfrom);
		tctx.lineTo(x, height - 3);
		tctx.stroke();
	}
	
	var fadew = 25,
		temp = document.createElement('canvas'),
        tx = temp.getContext('2d');
    temp.width = width;
    temp.height = height;
    tx.translate(-temp.width, 0);
    tx.shadowOffsetX = temp.width;
    tx.shadowOffsetY = 0;
    tx.shadowColor = '#000';
    tx.shadowBlur = fadew;
    tx.fillRect(fadew, 0, width - fadew * 2, height);
    tctx.save();
    tctx.globalCompositeOperation = 'destination-in';
    tctx.drawImage(temp, 0, 0);
    tctx.restore();
    var timeline = $('#timeline2');
	if (Editor.timeline2_dragging) {
		tctx.save();
		tctx.fillStyle = '#FFF';
		tctx.globalAlpha = 0.3;
		let x1 = ((Editor.drag_startt - t) * Editor.options.timelinezoom / 6 + .5) * width,
			x2 = (page_mouseX - timeline.offset().left);
		tctx.fillRect(x1, 0, x2 - x1, height - 3);
		tctx.restore();
	}
};

Editor.render = function () {
	//timeline rendering
	Editor.renderTimeline();

    //object rendering
    Editor.playfield_rendered = new Set();
	var height = $(window).height() * 0.75,
		width = height * 4 / 3,
		t = Editor.source.t,
		ar = ars(Editor.beatmap.ApproachRate),
		cs = cspx(Editor.beatmap.CircleSize),
		temp;
	var ctx = document.getElementById('gridcanvas').getContext('2d');
	ctx.save();
	ctx.clearRect(0, 0, $(window).width(), $(window).height());
	ctx.translate(($(window).width() - width) / 2, $(window).height() * 0.16);
	ctx.scale(width / 512, height / 384);

	var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
	ctx2.save();
	ctx2.clearRect(0, 0, $(window).width(), $(window).height());
	ctx2.translate(($(window).width() - width) / 2, $(window).height() * 0.16);
	ctx2.scale(width / 512, height / 384);

	var renderFrom = Editor.beatmap.getIndexAt((t - 0.8 - Editor.maxsliderdur) * 1000),
		renderTo = Editor.beatmap.getIndexAt((t + ar) * 1000);
	for (var i = renderTo; i >= renderFrom; i--) {
		if (Editor.beatmap.HitObjects[i].render(t, Editor.objc[i][0] % Editor.cols.length, Editor.objc[i][1]))
			Editor.playfield_rendered.add(Editor.beatmap.HitObjects[i]);
	}

	//selected objects
	ctx.globalAlpha = 1;
	for (i = 0; i < Editor.selected.length; i++) {
		if(!(Editor.selected[i] instanceof Spinner))
			ctx.drawImage(Editor.skin.hitcircleselect, Editor.selected[i].position.x - cs / 2, Editor.selected[i].position.y - cs / 2, cs, cs);
		if(Editor.selected[i] instanceof Slider)
			ctx.drawImage(Editor.skin.hitcircleselect, Editor.selected[i].endPosition.x - cs / 2, Editor.selected[i].endPosition.y - cs / 2, cs, cs);
	}

	//drag area
	if (Editor.edit_dragging) {
		ctx2.fillStyle = 'rgba(255,255,255,0.2)';
		ctx2.strokeStyle = '#FFF';
		ctx2.lineWidth = 0.5;
		ctx2.beginPath();
		ctx2.rect(Editor.drag_startx, Editor.drag_starty, mouseX - Editor.drag_startx, mouseY - Editor.drag_starty);
		ctx2.fill();
		ctx2.stroke();
	} else {
		//hovered objects
		ctx2.lineWidth = cs * 11 / 12;
		ctx2.lineJoin = 'round';
		ctx2.lineCap = 'round';
		Editor.sliderpt_hovered = false;
		for (i = renderFrom; i <= renderTo; i++) {
			var obj = Editor.beatmap.HitObjects[i];
			if (!(obj instanceof Slider) || t > obj.endTime / 1000 + obj.fadetime || t < obj.startTime / 1000 - ar) continue;
			if (!obj.path) {
				ctx2.beginPath();
				for (var j = 0; j < obj.spline.length; j++) {
					ctx2.lineTo(obj.spline[j][0], obj.spline[j][1]);
				}
				temp = ctx2.isPointInStroke(page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
			} else
				temp = ctx2.isPointInStroke(obj.path, page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
			if (temp) {
				obj.hover();
				//ctx.restore();
				//ctx2.restore();
				break;
			}
		}
	}

	ctx.restore();
	ctx2.restore();
};

Editor.renderupdate = function () { // for updates that only change rendering
	if (!Editor.beatmap || !Editor.source || Editor.source.playing) return;
	Editor.render();
};

Editor.setGridLevel = function (n) { //2^(n+1) pixels per cell
	Editor.options.gridlevel = n;
	Editor.drawGrid();
};

var copyStringFromObjects = function(objs) {
	objs.sort(function(a, b) {
		return a.startTime - b.startTime;
	});
	var ret = msToTimeString(objs[0].startTime) + " (";
	for (var i = 0; i < objs.length; i++) {
		ret += Editor.objc[Editor.beatmap.HitObjects.indexOf(Editor.selected[i])][1];
		if (i < objs.length - 1) ret += ",";
	}
	return ret + ") - ";
};

var copyTextToClipboard = function (text) {
	var textArea;
	try {
		textArea = document.createElement("textarea");
		textArea.style.position = 'fixed';
		textArea.style.top = 0;
		textArea.style.left = 0;
		textArea.style.width = '2em';
		textArea.style.height = '2em';
		textArea.style.padding = 0;
		textArea.style.border = 'none';
		textArea.style.outline = 'none';
		textArea.style.boxShadow = 'none';
		textArea.style.background = 'transparent';
		textArea.value = text;
		document.body.appendChild(textArea);
		textArea.select();
		document.execCommand('copy');
	} catch (err) {
		console.log('copy failed');
	}
	document.body.removeChild(textArea);
};

Editor.drawGrid = function (level, grid) {
	if (!level) level = Editor.options.gridlevel;
	if (!grid) grid = $('#grid');
	var h = grid.height();
	var w = grid.width();
	var px = h / 384;
	var ctx = grid[0].getContext('2d');
	var cs = Math.pow(2, level + 1);

	ctx.clearRect(0, 0, w, h);
	ctx.strokeStyle = '#FFF';
	ctx.lineWidth = px;

	for (var i = 0; i <= 384; i += cs) {
		ctx.globalAlpha = i == 384 / 2 ? 0.2 : 0.06;
		ctx.beginPath();
		ctx.moveTo(0, i * px);
		ctx.lineTo(512 * px, i * px);
		ctx.stroke();
	}

	for (i = 0; i <= 512; i += cs) {
		ctx.globalAlpha = i == 512 / 2 ? 0.2 : 0.06;
		ctx.beginPath();
		ctx.moveTo(i * px, 0);
		ctx.lineTo(i * px, 384 * px);
		ctx.stroke();
	}
};

var msToTimeString = function(t) {
	return new Date(Math.round(t)).toISOString().substr(14, 9).replace('.', ':');
};

Editor.updateTime = function() {
	var t = Editor.source ? Math.min(Editor.source.t, Editor.source.duration) : 0;
	var pct = Editor.source ? t / Editor.source.duration : 0;
	var rounded = (pct * 100).toFixed(1);
	$('#time').html(msToTimeString(t * 1000));
	$('#progress').html((rounded > 100 ? 'outro' : rounded) + '%');
	var track = $('#timelinetrack');
	//$('#timelinebar').css({left:track.position().left + track.width()*pct});
	$('#timelinebar').css({
		left: track.position().left + track.width() * pct
	});
	if (pct >= 1) {
		Editor.source.pause(Editor.source.duration);
	}
};

Editor.createTimelineMark = function (time, type) {
	if (Editor.source) {
		var mark = document.createElement('div');
		mark.classList.add('timelinemark', type);
		var track = $('#timelinetrack');
		$(mark).css({
			left: track.position().left + track.width() * (time / Editor.source.duration)
		});
		$('#timeline1c').append(mark);
		if (!Editor.timelinemarks[time])
			Editor.timelinemarks[time] = {};
		Editor.timelinemarks[time][type] = mark;
	}
};

Editor.removeTimelineMark = function (time, type) {
	if (Editor.timelinemarks[time] && Editor.timelinemarks[time][type]) {
		Editor.timelinemarks[time][type].parentNode.removeChild(Editor.timelinemarks[time][type]);
	}
};

Editor.init = function (callback) {
	var i, pts;
	Editor.options.distancespacing = Editor.beatmap.DistanceSpacing;
	Editor.options.gridlevel = Math.log2(Editor.beatmap.GridSize) - 1;
	Editor.options.timelinezoom = parseFloat(Editor.beatmap.TimelineZoom);
	Editor.mapUtils = new Editor.MapUtils(Editor.beatmap);
	var breaks = Editor.beatmap.breakTimes,
		n = 1,
		skinopts = Editor.skin._meta.options;
	if (Editor.skin._meta.name != 'Default' && skinopts.Combo1 && !skinopts.ignoreSkinColors) {
		Editor.cols = [];
		while (skinopts['Combo' + n]) {
			Editor.cols.push(colorToArray(skinopts['Combo' + n]));
			n++;
		}
	} else if (Editor.beatmap.ComboColors.length === 0) {
		console.log('using default colors');
		Editor.cols = [
			[255, 192, 0],
			[0, 202, 0],
			[18, 124, 255],
			[242, 24, 57]
		];
	} else {
		Editor.cols = [];
		for (i = 0; i < Editor.beatmap.ComboColors.length; i++) {
			Editor.cols.push(Editor.beatmap.ComboColors[i].toArray());
		}
	}
	Editor.objc = [];
	n = 0;
	j = 1;
	var maxc = 1;
	for (i = 0; i < Editor.beatmap.HitObjects.length; i++) {
		if (i === 0 || (Editor.beatmap.HitObjects[i].newCombo)) {
			if (j > maxc) {
				maxc = j;
			}
			n++;
			if (!(Editor.beatmap.HitObjects[i] instanceof Spinner))
				n += Editor.beatmap.HitObjects[i].customColor;
			j = 1;
		}
		Editor.objc.push([n, j]);
		j++;
	}
	n = 10;
	while (n <= maxc) {
		var digits = [];
		var n2 = n.toString();
		for (j = 0; j < n2.length; j++) {
			digits.push(Editor.skin['default-' + n2.charAt(j)]);
		}
		Editor.skin.addComboNumber(digits, n);
		n++;
	}

	Editor.maxsliderdur = 0;
	for (i = 0; i < Editor.beatmap.HitObjects.length; i++) {
		if (Editor.beatmap.HitObjects[i] instanceof Slider) {
			if (Editor.beatmap.HitObjects[i].duration / 1000 > Editor.maxsliderdur)
				Editor.maxsliderdur = Editor.beatmap.HitObjects[i].duration / 1000;
		}
	}

	var tintelements = ['hitcircle', 'approachcircle', 'sliderb0'];
	for (i = 0; i < tintelements.length; i++) {
		for (j = 0; j < Editor.cols.length; j++) {
			if (tintelements[i] == 'sliderb0') {
				Editor.skin[tintelements[i] + j] = tint(Editor.skin[tintelements[i]], [0, 0, 0]);
			} else
				Editor.skin[tintelements[i] + j] = tint(Editor.skin[tintelements[i]], Editor.cols[j]);
		}
	}
	$('#timeline1c .timelinemark').remove();
	Editor.timelinemarks = {};
	if (Editor.beatmap.Bookmarks) {
		pts = Editor.beatmap.Bookmarks;
		for (i in pts) {
			if (pts.hasOwnProperty(i)) {
				Editor.createTimelineMark(pts[i] / 1000, 'bookmark');
			}
		}
	}
	if (Editor.beatmap.PreviewTime) Editor.createTimelineMark(Editor.beatmap.PreviewTime / 1000, 'previewtime');
	if (Editor.beatmap.TimingPoints) {
		pts = Editor.beatmap.TimingPoints;
		for (i = 0; i < pts.length; i++) {
			if (pts[i].timingChange)
				Editor.createTimelineMark(pts[i].offset / 1000, 'uninheritedpoint');
			else
				Editor.createTimelineMark(pts[i].offset / 1000, 'inheritedpoint');
		}
	}
	Editor.setGridLevel(Editor.options.gridlevel);
	Editor.updateMouseLocation();
	Editor.update();
	//setTimeout(function(){renderslidersasync(si, 10, function(){console.log('sliders done')})}, 0); //async
	//rendersliders(si, 0, callback);
};

Editor.update = function () { // for updates that change the time
	if (!Editor.drawing) frame();
};

Editor.loadSkin = function(name) {
	Skin.LoadSkin(name, function (skin) {
		Editor.skin = skin;
		Editor.init();
	});
};

var frame = function () {
	Editor.updateTime();
	if (Editor.source && Editor.beatmap) {
		Editor.render();
		if (Editor.source.playing) {
			if (Editor.prevt) {
				var from = Editor.beatmap.getIndexAt(Editor.prevt * 1000);
				var to = Editor.beatmap.getIndexAt(Editor.source.t * 1000);
				for (var i = from; i <= to; i++) {
					var obj = Editor.beatmap.HitObjects[i];
					// play sfx
				}
			}
			Editor.prevt = Editor.source.t;
			Editor.drawing = true;
			window.requestAnimationFrame(frame);
		} else {
			Editor.drawing = false;
			Editor.prevt = false;
		}
	}
};

$(window).on("resize", function () {
	Editor.align();
	if (Editor.source) {
		var track = $('#timelinetrack');
		for (var time in Editor.timelinemarks) {
			if (Editor.timelinemarks.hasOwnProperty(time)) {
				for (var point in Editor.timelinemarks[time]) {
					if (Editor.timelinemarks[time].hasOwnProperty(point)) {
						$(Editor.timelinemarks[time][point]).css({
							left: track.position().left + track.width() * (time / Editor.source.duration)
						});
					}
				}
			}
		}
	}
	Editor.update();
});

$(document).ready(function main() {
	Editor.options = {
		timelinezoom: 1,
		beatsnapdivisor: 4,
		distancespacing: 1,
		distancesnap: true,
		gridlevel: 2,
		gridsnap: true,
		locknotes: false,
		tool: 0, //0-3 for select, circle, slider, and spinner
		soundopts: [false, false, false], //whistle, finish, clap
		ncopt: false,
		ignoreSkinColors: false
	};
	Editor.copyData = '';
	Editor.selected = [];
	Editor.timeline_rendered = new Set();
	Editor.playfield_rendered = new Set();

	$("#menubar>div").mouseover(function () {
		var a = $(this).offset();
		a.top += 18;
		$(this).find(".dropdown").offset(a);
	});

	Editor.getCurObj = function () {
		var temp, clicked, t = Editor.source.t * 1000;
		if (isMouseinElement('#timeline2')) {
			var rendered = [...Editor.timeline_rendered];
			var timeline = $('#timeline2'),
				dx = (page_mouseX - timeline.offset().left - timeline.width() / 2),
				pxps = timeline.width() / 6 * Editor.options.timelinezoom,
				mouset = t / 1000 + dx / pxps;
			var x2 = page_mouseX - timeline.offset().left,
				y2 = page_mouseY - timeline.offset().top;
			for (var obj of Editor.selected) {
				var xpos = pxps * (obj.startTime - t) / 1000 + timeline.width() / 2;
				if(Math.sqrt(Math.pow(x2 - xpos, 2) + Math.pow(y2 - timeline.height() / 2, 2)) <= timeline.height() * 0.4) return obj;
				if (obj instanceof Slider || obj instanceof Spinner) {
					var xpos2 = pxps * (obj.endTime - t) / 1000 + timeline.width() / 2;
					if (Math.sqrt(Math.pow(x2 - xpos2, 2) + Math.pow(y2 - timeline.height() / 2, 2)) <= timeline.height() * 0.4) return obj;
					if (x2 >= xpos && x2 <= xpos2) return obj;
				}
			}
			var minD = Infinity, minI;
			for (var i = 0; i < rendered.length; i++) {
				var obj = rendered[i];
				var d = Math.abs(obj.startTime / 1000 - mouset);
				if (obj instanceof Slider || obj instanceof Spinner) {
					if (mouset > obj.startTime / 1000 && mouset < obj.endTime / 1000) return obj;
					d = Math.min(d, Math.abs(obj.endTime / 1000 - mouset));
				}
				if (d < minD) {
					minD = d;
					minI = i;
				}
			}
			clicked = rendered[minI];
			if (typeof clicked == "undefined") return clicked;
			var xpos = pxps * (clicked.startTime - t) / 1000 + timeline.width() / 2;
			if (Math.sqrt(Math.pow(x2 - xpos, 2) + Math.pow(y2 - timeline.height() / 2, 2)) <= timeline.height() * 0.4) return clicked;
			if (clicked instanceof Slider || clicked instanceof Spinner) {
				var xpos2 = pxps * (clicked.endTime - t) / 1000 + timeline.width() / 2;
				if (Math.sqrt(Math.pow(x2 - xpos2, 2) + Math.pow(y2 - timeline.height() / 2, 2)) <= timeline.height() * 0.4) return clicked;
				if (x2 >= xpos && x2 <= xpos2) return clicked;
			}
			return undefined;
		} else {
			var rendered = [...Editor.playfield_rendered];
			rendered.sort(function (a, b) {
				var dta = a.startTime - t,
					dtb = b.startTime - t;
				if (a instanceof Slider && Math.abs(dta) < Math.abs(a.endTime - t)) dta = a.endTime - t;
				if (b instanceof Slider && Math.abs(dtb) < Math.abs(b.endTime - t)) dtb = b.endTime - t;
				if (Math.abs(Math.abs(dta) - Math.abs(dtb)) == 1) dta = Math.sign(dta) * dtb;
				if (dta == -dtb) return dta;
				return Math.abs(b.startTime - t) - Math.abs(a.startTime - t);
			});
			var ar = ars(Editor.beatmap.ApproachRate);
			var cs = cspx(Editor.beatmap.CircleSize);
			var objsToCheck = rendered.concat(Editor.selected);
			for (var i = objsToCheck.length - 1; i >= 0; i--) {
				var obj = objsToCheck[i];
				var td = (obj.startTime - t) / 1000;
				
				if (obj instanceof Spinner) continue;
				if (obj instanceof HitCircle || Editor.selected.indexOf(obj) != -1 && !Editor.playfield_rendered.has(obj)) {
					if (obj.position.distanceTo(new Vector(mouseX, mouseY)) <= cs / 2) {
						clicked = obj;
						break;
					}
				} else if (obj instanceof Slider) {
					var height = $(window).height() * 0.75;
					var width = height * 4 / 3;
					var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
					ctx2.save();
					ctx2.translate(($(window).width() - width) / 2, $(window).height() * 0.16);
					ctx2.scale(width / 512, height / 384);
					ctx2.lineWidth = cs * 11 / 12;
					ctx2.lineJoin = 'round';
					ctx2.lineCap = 'round';
					if (!obj.path) {
						ctx2.beginPath();
						for (var j = 0; j < obj.spline.length; j++) {
							ctx2.lineTo(obj.spline[j][0], obj.spline[j][1]);
						}
						temp = ctx2.isPointInStroke(page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
					} else
						temp = ctx2.isPointInStroke(obj.path, page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
					ctx2.restore();
					if (temp) {
						clicked = obj;
						break;
					}
				}
			}
		}
		return clicked;
	};

	Editor.deleteSelected = function () { // CURRENTLY WHEN STUFF GETS DELETED COMBOS GET MESSED UP, CALLING init() CAN BE A TEMPORARY FIX
		for (var j = 0; j < Editor.selected.length; j++) {
			Editor.beatmap.HitObjects.splice(Editor.beatmap.HitObjects.indexOf(Editor.selected[j]), 1);
			// collabTODO
		}
		Editor.selected = [];
	};

	document.addEventListener("contextmenu", function (e) { // right click handling
		e.preventDefault();
		var clicked = Editor.getCurObj();
		var i = Editor.selected.indexOf(clicked);
		if (i != -1) {
			Editor.deleteSelected();
		} else { // SEE LINE 415
			Editor.beatmap.HitObjects.splice(Editor.beatmap.HitObjects.indexOf(clicked), 1);
			// collabTODO
		}
		var o = (e.srcElement || e.originalTarget);
		if (o.matches('#righttoolbar img, #lefttoolbar img, #timeline1c, #playcontrols img')) {
			var ev = document.createEvent('HTMLEvents');
			ev.initEvent('click', true, false);
			o.dispatchEvent(ev);
		}
	});

	$('#gridcanvas2, #grid').dblclick(function (e) { // clicks in play area
		var clicked = Editor.getCurObj();
		if (clicked) Editor.source.t = clicked.startTime / 1000;
		// handle slider end/edge editing one day
	});

	var timelinemove = function (e) {
		if (!Editor.source) return;
		var track = $('#timelinetrack');
		var w = track.width();
		var pct = Math.max(0, Math.min(page_mouseX - track.position().left, w)) / w;
		var pos = pct * Editor.source.duration;
		if (pct >= 1) Editor.source.pause(Editor.source.duration);
		else
			Editor.source.seek(pos);
		Editor.update();
	};

	Editor.select = function (x) {
		if (x instanceof HitObject) {
			x.selected = true;
			Editor.selected.push(x);
		} else if (x instanceof Array) {
			x.forEach((obj) => {
				obj.selected = true;
			});
			Editor.selected = Editor.selected.concat(x);
		}
	};

	Editor.deselectAll = function () {
		for (var i = 0; i < Editor.selected.length; i++) {
			Editor.selected[i].selected = false;
		}
		Editor.selected = [];
	};

	Editor.setSelection = function (arr) {
		Editor.deselectAll();
		Editor.select(arr);
	};

	var mousemoved = false,
		edit_mousedown = false,
		selected_offsetx = 0, // offset of the mouse position to the actual position of the primary selected object
		selected_offsety = 0,
		selectedi = 0, // index in Editor.selected of the primary selected item
		selectedparts = 0; // bit flag for what part(s) of the selected object is selected
	Editor.edit_dragging = false,
	$('#gridcanvas2, #grid').mousedown(function (e) { // clicks in play area
		if (!Editor.beatmap) return;
		edit_mousedown = true;
		if (Editor.options.tool === 0) {
			var clicked = Editor.getCurObj();
			if (clicked) {
				clicked.selected = true;
				selected_offsetx = mouseX - clicked.position.x;
				selected_offsety = mouseY - clicked.position.y;
			}
			i = Editor.selected.indexOf(clicked);
			if (i != -1) {
				selectedi = i;
				return;
			}
			if (!e.ctrlKey || !clicked) {
				Editor.deselectAll();
				if (clicked) Editor.selected = [clicked];
				else {
					Editor.edit_dragging = true;
					Editor.drag_startx = mouseX;
					Editor.drag_starty = mouseY;
				}
			} else {
				Editor.selected.push(clicked);
			}
			selectedi = Editor.selected.length ? Editor.selected.length - 1 : 0;
		}
		Editor.renderupdate();
	});

	var selected_offsett = 0;
	Editor.timeline2_mousedown = false;
	Editor.drag_startt = 0;
	Editor.timeline2_dragging = false,
	Editor.timeline2_objend = false;
	Editor.scroll_interval = false;
	$('#timeline2').mousedown(function (e) {
		if (!Editor.beatmap) return;
		Editor.timeline2_mousedown = true;
		$('#lefttoolbar img').removeClass('button_selected');
		$('#draw_select').addClass('button_selected');
		Editor.options.tool = 0;
		var $this = $(this);
		var dx = (page_mouseX - $this.offset().left - $this.width() / 2),
			pxps = $this.width() / 6 * Editor.options.timelinezoom,
			time_clicked = Editor.source.t + dx / pxps;
		var clicked = Editor.getCurObj();
		if (clicked) {
			clicked.selected = true;
			selected_offsett = time_clicked - (Editor.timeline2_objend ? clicked.endTime / 1000 : clicked.startTime / 1000);
		}
		i = Editor.selected.indexOf(clicked);
		if (i != -1) {
			selectedi = i;
			return;
		}
		if (!e.ctrlKey || !clicked) {
			Editor.deselectAll();
			if (clicked) Editor.selected = [clicked];
			else {
				Editor.timeline2_dragging = true;
				Editor.drag_startt = time_clicked;
			}
		} else {
			Editor.selected.push(clicked);
		}
		selectedi = Editor.selected.length ? Editor.selected.length - 1 : 0;
		Editor.renderupdate();
	});

	var timeline_mousedown = false;
	$('#timeline1c').mousedown(function (e) {
		timeline_mousedown = true;
		timelinemove(e);
	});

	$(document).mouseup(function () {
		if (mousemoved) Editor.updateMouseLocation();
		mousemoved = false;
		timeline_mousedown = false;
		edit_mousedown = false;
		Editor.edit_dragging = false;
		Editor.timeline2_mousedown = false;
		Editor.timeline2_dragging = false;
		Editor.renderupdate();
	});

	var snap_grid = function (n) {
		var d = Editor.options.gridsnap ? Math.pow(2, Editor.options.gridlevel + 1) : 1;
		return Math.round(n / d) * d;
	};

	var snap_beat = function (t) {
		var tpt = Editor.beatmap.getTimingPoint(t * 1000);
		return snap(t, tpt.baseOffset / 1000, tpt.beatLength / 1000 / Editor.options.beatsnapdivisor);
	};

	Editor.updateMouseLocation = function () {
		var height = $(window).height() * 0.75;
		var width = height * 4 / 3;
		var prevmouseX = mouseX,
			prevmouseY = mouseY;
		mouseX = (page_mouseX - $('#grid').offset().left) / width * 512;
		mouseY = (page_mouseY - $('#grid').offset().top) / height * 384;
		snapped_mouseX = snap_grid(mouseX);
		snapped_mouseY = snap_grid(mouseY);

		if (timeline_mousedown)
			timelinemove(e);
		else if (edit_mousedown) {
			if(Editor.edit_dragging) {
				let [minx, maxx] = mouseX > Editor.drag_startx ? [Editor.drag_startx, mouseX] : [mouseX, Editor.drag_startx];
				let [miny, maxy] = mouseY > Editor.drag_starty ? [Editor.drag_starty, mouseY] : [mouseY, Editor.drag_starty];
				Editor.setSelection([...Editor.playfield_rendered].filter((o) => {
					return o.position.x >= minx && o.position.x <= maxx && o.position.y >= miny && o.position.y <= maxy;
				}));
			} else {
				var newx = Math.min(512, Math.max(0, snap_grid(mouseX - selected_offsetx)));
				var newy = Math.min(384, Math.max(0, snap_grid(mouseY - selected_offsety)));
				// add more stuff to keep the whole selection in the play area
				var dx = newx - Editor.selected[selectedi].position.x,
				dy = newy - Editor.selected[selectedi].position.y;
				
				for (var i = 0; i < Editor.selected.length; i++) {
					let obj = Editor.selected[i];
					Editor.MapUtils.moveObject(Editor.selected[i], dx, dy);
					Editor.socket.edit_move(obj.id, obj.position.x, obj.position.y);
				}
			}
		} else if (Editor.timeline2_mousedown) {
			var timeline = $('#timeline2'),
				dx = (page_mouseX - timeline.offset().left - timeline.width() / 2),
				pxps = timeline.width() / 6 * Editor.options.timelinezoom,
				mouseT = Editor.source.t + dx / pxps;
				if (Editor.timeline2_dragging) {
				var temp = [];
				let [mint, maxt] = mouseT > Editor.drag_startt ? [Editor.drag_startt, mouseT] : [mouseT, Editor.drag_startt];
				mint *= 1000;
				maxt *= 1000;
				let [mini, maxi] = [mint, maxt].map((i) => { return Editor.beatmap.getIndexAt(i); });
				for (var i = mini; i <= maxi; i++) {
					let o = Editor.beatmap.HitObjects[i];
					if ((o.startTime >= mint && o.startTime <= maxt) || (!(o instanceof HitCircle) && (o.endTime >= mint && o.endTime <= maxt)))
						temp.push(o);
				}
				Editor.setSelection(temp);
			} else if (selectedi in Editor.selected) {
				if (Editor.selected.length < 2 && Editor.timeline2_objend) {
					var obj = Editor.selected[selectedi];
					if (obj instanceof Spinner) {
						var newt = snap_beat(Math.min(Editor.source.duration, Math.max(0, mouseT - selected_offsett))) * 1000;
						if (newt > obj.startTime + 1) {
							obj.endTime = newt;
							obj.duration = obj.endTime - obj.startTime;
						}
						//collab todo
						//Editor.socket.durationchange(?);
					} else if (obj instanceof Slider) {
						var newr = Math.round((mouseT - selected_offsett) * 1000 / obj.duration);
						var newt = newr * obj.duration;
						newt = Math.min(Editor.source.duration, Math.max(0, mouseT - selected_offsett));
						if (newt > obj.startTime + 1 && newt != obj.endTime) {
							obj.endTime = newt;
							obj.duration = obj.endTime - obj.startTime;
							obj.repeatCount = newr;
						}
					}	
				} else {
					var newt = snap_beat(Math.min(Editor.source.duration, Math.max(0, mouseT - selected_offsett)));
					var dt = newt - Editor.selected[selectedi].startTime / 1000;
					for (let i = 0; i < Editor.selected.length; i++) {
						let obj = Editor.selected[i];
						let serialized = obj.serialize();
						if (obj instanceof Slider || obj instanceof Spinner)
							obj.endTime += dt * 1000;
						obj.startTime += dt * 1000;
						// IMPORTANT: CHANGE THE ORDER OF STUFF IN beatmap.HitObjects !!!!! TODO!!!!!
						// collabTODO
						//Editor.socket.edit_movet(serialized, obj.startTime);
					}
				}
			}
			function isTimelineScroll() {
				return Editor.timeline2_mousedown && !Editor.source.playing && (page_mouseX < timeline.offset().left || page_mouseX > timeline.offset().left + timeline.width());
			}
			if (isTimelineScroll() && !Editor.scroll_interval) {
				Editor.scroll_interval = setInterval(function() {
					if (!isTimelineScroll()) {
						clearInterval(Editor.scroll_interval);
						Editor.scroll_interval = false;
					} else {
						let n = page_mouseX - timeline.offset().left - timeline.width() / 2; // mousex relative to center of timeline
						n -= Math.sign(n) * timeline.width() / 2; // change n so it is a measure of how far outside the timeline it is
						if (n > 2 * timeline.offset().left) n = 2 * timeline.offset().left; // right side caps distance at 2x the length of the left (arbitrary)
						Editor.source.t = Math.max(0, Math.min(Editor.source.duration, Editor.source.t + n / 6 / Math.pow(6 + Editor.options.timelinezoom, 2)));
						Editor.updateTime();
						Editor.renderupdate();
					}
				}, 10);
			}
		} else { }
		Editor.renderupdate();

		var tempx, tempy;
		if (Editor.sliderpt_hovered) {
			tempx = Editor.sliderpt_hovered.x, tempy = Editor.sliderpt_hovered.y;
		} else if (Editor.selected.length > 0) {
			tempx = Editor.selected[selectedi].position.x, tempy = Editor.selected[selectedi].position.y;
		} else {
			tempx = snapped_mouseX, tempy = snapped_mouseY;
		}
		$('#mousepos').html('x:' + tempx + ' y:' + tempy);
	};

	var captureMouseLocation = function (e) {
		if (page_mouseX == e.pageX && page_mouseY == e.pageY) return;
		if (timeline_mousedown || edit_mousedown || Editor.timeline2_mousedown) mousemoved = true;
		page_mouseX = e.pageX;
		page_mouseY = e.pageY;
		Editor.updateMouseLocation();
	};

	var wheelupdate = function (e) {
		if (e.altKey) {
			if (isMouseinElement('#grid'))
				Editor.options.distancespacing = Math.min(6, Math.max(0.1, Editor.options.distancespacing + (e.wheelDelta || -e.detail) / 1200));
			else if (isMouseinElement('#timeline2'))
				Editor.options.timelinezoom = Math.min(8, Math.max(0.4, Editor.options.timelinezoom + (e.wheelDelta || -e.detail) / 1200));
			else if (Editor.source)
				Editor.source.volume = Math.min(1, Math.max(0, Editor.source.volume + (e.wheelDelta || -e.detail) / 2400));
		} else if (e.ctrlKey) {
			e.preventDefault();
			Editor.options.beatsnapdivisor = Math.min(16, Math.max(1, Math.floor(Editor.options.beatsnapdivisor * Math.pow(2, (e.wheelDelta || -e.detail) / 120))));
		} else if (Editor.source && Editor.beatmap) {
			var tpt = Editor.beatmap.getTimingPoint(Editor.source.t * 1000);
			var pos = Math.min(Editor.source.duration,
				Math.max(0, Editor.source.t - ((e.wheelDelta || -e.detail) / 120 *
					tpt.beatLength / 1000 /
					(Editor.source.playing ? 1 : Editor.options.beatsnapdivisor) *
					(e.shiftKey ? tpt.timingSignature : 1))));
			tpt = Editor.beatmap.getTimingPoint(pos * 1000);
			if (pos >= Editor.source.duration) Editor.source.pause(Editor.source.duration);
			else if (Editor.source.playing)
				Editor.source.play(pos);
			else {
				Editor.source.pause(snap(pos, tpt.baseOffset / 1000, tpt.beatLength / 1000 / (e.shiftKey ? 1 : Editor.options.beatsnapdivisor)));
			}
			Editor.update();
		}
	};

	document.addEventListener("mousemove", captureMouseLocation, false);
	document.addEventListener("mousewheel", wheelupdate);

	var controlclicked = function (elem) {
		elem.removeClass("scalable");
		setTimeout(function () {
			elem.addClass("scalable");
		}, 40);
	};

	$('#editorplay').click(function () {
		if (Editor.source) {
			if (Editor.source.playing) Editor.source.play(0);
			else Editor.source.play();
			Editor.update();
		}
		controlclicked($(this));
	});

	$('#editorpause').click(function () {
		if (Editor.source) {
			if (Editor.source.playing) Editor.source.pause();
			else {
				Editor.source.play();
				Editor.update();
			}
		}
		controlclicked($(this));
	});

	$('#editorstop').click(function () {
		if (Editor.source)
			Editor.source.pause(0);
		controlclicked($(this));
	});

	$('#fullscreen').click(toggleFullScreen);

	$('#zoomin').click(function () {
		Editor.options.timelinezoom = Math.min(8, Editor.options.timelinezoom + 0.1);
		Editor.update();
	});

	$('#zoomout').click(function () {
		Editor.options.timelinezoom = Math.max(0.4, Editor.options.timelinezoom - 0.1);
		Editor.update();
	});

	$('#righttoolbar img').click(function () {
		$(this).toggleClass('button_selected');
		switch (this.id) {
			case 'draw_newcombo':
				Editor.options.ncopt = !Editor.options.ncopt;
				break;
			case 'sound_whistle':
				Editor.options.soundopts[0] = !Editor.options.soundopts[0];
				break;
			case 'sound_finish':
				Editor.options.soundopts[1] = !Editor.options.soundopts[1];
				break;
			case 'sound_clap':
				Editor.options.soundopts[2] = !Editor.options.soundopts[2];
				break;
			case 'draw_beatsnap':
				Editor.options.gridsnap = !Editor.options.gridsnap;
				Editor.updateMouseLocation();
				break;
			case 'draw_distsnap':
				Editor.options.distancesnap = !Editor.options.distancesnap;
				Editor.updateMouseLocation();
				break;
		}

	});

	$('#lefttoolbar img').click(function () {
		$('#lefttoolbar img').removeClass('button_selected');
		$(this).addClass('button_selected');
		Editor.options.tool = $(this).index();
	});

	var keypresshandler = function (e) {
		var data;
		var code = (window.event) ? event.keyCode : e.keyCode;
		if (!(code == 122 || code == 123)) {
			e.preventDefault();
		}
		if (keycodedbg) console.log("keycode: ", code);
		if (!keyMap[16] && code == 16) {
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
		}
		if (!keyMap[18] && code == 18) {
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distancesnap = !Editor.options.distancesnap;
		}
		keyMap[code] = true;
		if ((code == 67 || code == 32) && Editor.source) { //c, space
			if (code == 67 && e.ctrlKey) { //ctrl-c
				if (Editor.selected.length > 0) {
					data = copyStringFromObjects(Editor.selected);
					copyTextToClipboard(data);
					Editor.copyData = data;
					console.log('copied: ' + data);
				} else {
					console.log('nothing copied!');
				}
			} else if (!e.ctrlKey) {
				if (Editor.source.playing) Editor.source.pause();
				else {
					Editor.source.play();
				}
			}
		} else if (code == 89) { //y
			if (e.ctrlKey) {
				console.log('redo');
			}
		} else if (code == 90) { //z
			if (e.ctrlKey) {
				console.log('undo');
			} else {
				Editor.source.seek(Editor.beatmap.HitObjects[0].startTime / 1000);
			}
		} else if (code == 88) { //x
			if (e.ctrlKey) { //ctrl-x
				console.log('cut');
				data = 'hi';
				copyTextToClipboard(data);
				Editor.copyData = data;
			} else {
				if (Editor.source)
					Editor.source.play(0);
			}
		} else if (code == 86) { //v
			if (e.ctrlKey) {
				console.log('paste');
			}
		} else if (code == 37 || code == 39) { //left & right
			if (e.ctrlKey && Editor.selected) {
				let dx = code == 37 ? -1 : 1;
				if (Editor.options.gridsnap) {
					dx *= Math.pow(2, Editor.options.gridlevel + 1);
				}
				if (Editor.selected.some(obj => obj.position.x + dx < 0 || obj.position.x > 512))
					return;
				for (var i = 0; i < Editor.selected.length; i++) {
					let obj = Editor.selected[i];
					Editor.MapUtils.moveObject(Editor.selected[i], dx, 0);
					Editor.socket.edit_move(obj.id, obj.position.x, obj.position.y);
				}
			} else if (Editor.source) {
				var tpt = Editor.beatmap.getTimingPoint(Editor.source.t * 1000);
				var pos = Editor.source.t +
					(code == 37 ? -1 : 1) * tpt.beatLength / 1000 / (Editor.source.playing ? 1 :
					Editor.options.beatsnapdivisor) * (e.shiftKey ? 4 : 1);
				tpt = Editor.beatmap.getTimingPoint(pos * 1000);
				if (!Editor.source.playing)
					pos = snap(pos, tpt.baseOffset / 1000, tpt.beatLength / 1000 / Editor.options.beatsnapdivisor);
				Editor.source.seek(pos);
			}
		} else if (code == 46) { //delete
			Editor.deleteSelected();
		} else if (code == 49) { //1
			if (e.ctrlKey) {
				Editor.setGridLevel(1);
			} else if (Editor.options.tool !== 0) {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_select').addClass('button_selected');
				Editor.options.tool = 0;
			}
		} else if (code == 50) { //2
			if (e.ctrlKey) {
				Editor.setGridLevel(2);
			} else if (Editor.options.tool != 1) {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_normal').addClass('button_selected');
				Editor.options.tool = 1;
				Editor.deselectAll();
			}
		} else if (code == 51) { //3
			if (e.ctrlKey) {
				Editor.setGridLevel(3);
			} else if (Editor.options.tool != 2) {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_slider').addClass('button_selected');
				Editor.options.tool = 2;
				Editor.deselectAll();
			}
		} else if (code == 52) { //4
			if (e.ctrlKey) {
				Editor.setGridLevel(4);
			} else if (Editor.options.tool != 3) {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_spinner').addClass('button_selected');
				Editor.options.tool = 3;
				Editor.deselectAll();
			}
		} else if (code == 81) { //q
			$('#draw_newcombo').toggleClass('button_selected');
			Editor.options.ncopt = !Editor.options.ncopt;
		} else if (code == 87) { //w
			$('#sound_whistle').toggleClass('button_selected');
			Editor.options.soundopts[0] = !Editor.options.soundopts[0];
		} else if (code == 69) { //e
			$('#sound_finish').toggleClass('button_selected');
			Editor.options.soundopts[1] = !Editor.options.soundopts[1];
		} else if (code == 82) { //r
			$('#sound_clap').toggleClass('button_selected');
			Editor.options.soundopts[2] = !Editor.options.soundopts[2];
		} else if (code == 84) { //t
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
		} else if (code == 89) { //y
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distsnap = !Editor.options.distsnap;
		} else if (code == 76) { //l
			$('#draw_lock').toggleClass('button_selected');
			Editor.options.locknotes = !Editor.options.locknotes;
		} else if (code == 71) { //g
			Editor.setGridLevel(Editor.options.gridlevel % 4 + 1);
		} else if (code == 70) { //f
			toggleFullScreen();
		} else if (code == 65) { //a
			if (e.ctrlKey)
				Editor.setSelection(Editor.beatmap.HitObjects);
		}
		Editor.updateMouseLocation();
		Editor.update();
	};

	var keyuphandler = function (e) {
		e.preventDefault();
		var code = (window.event) ? event.keyCode : e.keyCode;
		keyMap[code] = false;
		if (code == 16) {
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
			Editor.updateMouseLocation();
		}
		if (code == 18) {
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distancesnap = !Editor.options.distancesnap;
			Editor.updateMouseLocation();
		}
	};

	document.addEventListener('keydown', keypresshandler, false);
	document.addEventListener('keyup', keyuphandler, false);

	Editor.align();
	Skin.LoadSkin('Default', function (skin) {
		Editor.skin = skin;
		Editor.audioCtx = new AudioContext();
		Editor.socket = new Socket();
		Editor.align();
		Editor.update();
	});
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJNYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdsb2JhbCBWYXJpYWJsZXNcclxudmFyIG1vdXNlWCA9IDAsIC8vYWN0dWFsIG1vdXNlIHBvc2l0aW9uIGluIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcGxheWZpZWxkXHJcblx0bW91c2VZID0gMCxcclxuXHRzbmFwcGVkX21vdXNlWCA9IDAsIC8vcG9zaXRpb24gb2Ygb2JqZWN0IGJlaW5nIGVkaXRlZCwgb3Igc25hcHBlZCBjdXJzb3IgbG9jYXRpb25cclxuXHRzbmFwcGVkX21vdXNlWSA9IDAsXHJcblx0cGFnZV9tb3VzZVggPSAwLCAvL2Fic29sdXRlIHBvc2l0aW9uIG9uIHBhZ2UgKGFjdHVhbCBwb3NpdGlvbiBvbiBjYW52YXMgaGFzIHBhZ2VfbW91c2VZIC0gMjQpXHJcblx0cGFnZV9tb3VzZVkgPSAwO1xyXG52YXIga2V5TWFwID0gQXJyYXkoMjU2KTtcclxuXHJcbi8vIERlYnVnIHZhcmlhYmxlc1xyXG52YXIga2V5Y29kZWRiZyA9IGZhbHNlO1xyXG5cclxudmFyIGlzTW91c2VpbkVsZW1lbnQgPSBmdW5jdGlvbihlbGVtKSB7XHJcblx0dmFyIGUgPSAkKGVsZW0pO1xyXG5cdGlmIChlLmxlbmd0aCAhPSAxKSByZXR1cm4gZmFsc2U7XHJcblx0cmV0dXJuIHBhZ2VfbW91c2VYID49IGUub2Zmc2V0KCkubGVmdCAmJiBwYWdlX21vdXNlWCA8PSBlLm9mZnNldCgpLmxlZnQgKyBlLndpZHRoKCkgJiYgcGFnZV9tb3VzZVkgPj0gZS5vZmZzZXQoKS50b3AgJiYgcGFnZV9tb3VzZVkgPD0gZS5vZmZzZXQoKS50b3AgKyBlLmhlaWdodCgpO1xyXG59O1xyXG5cclxuRWRpdG9yLnJvb21JRCA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJykuc3BsaWNlKC0xKVswXTtcclxuXHJcbkVkaXRvci51cGRhdGVTdGF0dXMgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XHJcblx0JCgnI3N0YXR1c2xhYmVsJykuaHRtbChzdGF0dXMpLnN0b3AoKS5mYWRlSW4oMCkuZmFkZU91dCgzMDAwKTtcclxufTtcclxuXHJcbiQoJyNzdGF0dXNsYWJlbCcpLm1vdXNlb3ZlcihmdW5jdGlvbiAoKSB7XHJcblx0JCh0aGlzKS5mYWRlT3V0KDEwMDApO1xyXG59KTtcclxuXHJcbndpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdGlmIChFZGl0b3Iucm9vbUlEICYmIEVkaXRvci5zb3VyY2UpIHtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKEVkaXRvci5yb29tSUQgKyAndCcsIEVkaXRvci5zb3VyY2UudCk7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShFZGl0b3Iucm9vbUlEICsgJ3YnLCBFZGl0b3Iuc291cmNlLnZvbHVtZSk7XHJcblx0fVxyXG59O1xyXG5cclxudmFyIHRvZ2dsZUZ1bGxTY3JlZW4gPSBmdW5jdGlvbiAoKSB7XHJcblx0aWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCAmJiAhZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgJiYgIWRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50ICYmICFkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50ICkge1xyXG5cdFx0aWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikge1xyXG5cdFx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XHJcblx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpO1xyXG5cdFx0fSBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xyXG5cdFx0ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpO1xyXG5cdFx0fSBlbHNlIGlmIChkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKSB7XHJcblx0XHRcdGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcclxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4pIHtcclxuXHRcdFx0ZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmdWxsc2NyZWVuSGFuZGxlcigpIHtcclxuXHRjb25zb2xlLmxvZygnZGVycD8nKTtcclxuXHR2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVsbHNjcmVlbicpO1xyXG5cdGVsLnNyYyA9IGVsLnNyYy5lbmRzV2l0aChcIi9zdHVmZi9lZGl0b3ItZnVsbHNjcmVlbi5wbmdcIikgPyBcIi9zdHVmZi9lZGl0b3ItdW5mdWxsc2NyZWVuLnBuZ1wiIDogXCIvc3R1ZmYvZWRpdG9yLWZ1bGxzY3JlZW4ucG5nXCI7XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLCBmdWxsc2NyZWVuSGFuZGxlciwgZmFsc2UpO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkhhbmRsZXIsIGZhbHNlKTtcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGZ1bGxzY3JlZW5IYW5kbGVyLCBmYWxzZSk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ01TRnVsbHNjcmVlbkNoYW5nZScsIGZ1bGxzY3JlZW5IYW5kbGVyLCBmYWxzZSk7XHJcblxyXG5FZGl0b3IuYWxpZ24gPSBmdW5jdGlvbiAoKSB7XHJcblx0dmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAqIDAuNzU7XHJcblx0dmFyIHdpZHRoID0gaGVpZ2h0ICogNCAvIDM7XHJcblxyXG5cdCQoXCIjY2FudmFzZXMgPiBjYW52YXNcIikuYXR0cihcIndpZHRoXCIsICQod2luZG93KS53aWR0aCgpKVxyXG5cdFx0LmF0dHIoXCJoZWlnaHRcIiwgJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHJcblx0JCgnI3RpbWVsaW5lMicpLmF0dHIoXCJ3aWR0aFwiLCAkKHdpbmRvdykud2lkdGgoKSAqIDAuOClcclxuXHRcdC5hdHRyKFwiaGVpZ2h0XCIsICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTIpO1xyXG5cclxuXHR2YXIgZ3JpZCA9ICQoXCIjZ3JpZFwiKTtcclxuXHRncmlkLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcclxuXHRcdC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcclxuXHRcdC5jc3Moe1xyXG5cdFx0XHQnbGVmdCc6ICgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsXHJcblx0XHRcdCd0b3AnOiAkKHdpbmRvdykuaGVpZ2h0KCkgKiAwLjE2XHJcblx0XHR9KTtcclxuXHRFZGl0b3IuZHJhd0dyaWQoKTtcclxuXHJcblx0JChcIiNyaWdodHRvb2xiYXIgPiBpbWdcIikud2lkdGgoJChcIiNsZWZ0dG9vbGJhciA+IGltZ1wiKVswXS53aWR0aCk7XHJcblx0JChcIiNyaWdodHRvb2xiYXJcIikuY3NzKFwidG9wXCIsIDE0ICsgKDEgLSAkKFwiI3JpZ2h0dG9vbGJhclwiKS5oZWlnaHQoKSAvICgkKFwiI2NvbnRhaW5lclwiKS5oZWlnaHQoKSAtICQoXCIjdG9wc2VjdGlvblwiKS5oZWlnaHQoKSAtICQoXCIjYm90dG9tc2VjdGlvblwiKS5oZWlnaHQoKSkpICogNTAgKyBcIiVcIik7XHJcblxyXG5cdGlmIChFZGl0b3Iuc291cmNlICYmIEVkaXRvci50aW1lbGluZW1hcmtzKSB7XHJcblx0XHR2YXIgdHJhY2sgPSAkKCcjdGltZWxpbmV0cmFjaycpO1xyXG5cdFx0Zm9yICh2YXIgdGltZSBpbiBFZGl0b3IudGltZWxpbmVtYXJrcykge1xyXG5cdFx0XHRpZiAoRWRpdG9yLnRpbWVsaW5lbWFya3MuaGFzT3duUHJvcGVydHkodGltZSkpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBwb2ludCBpbiBFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXSkge1xyXG5cdFx0XHRcdFx0aWYgKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdLmhhc093blByb3BlcnR5KHBvaW50KSkge1xyXG5cdFx0XHRcdFx0XHQkKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdW3BvaW50XSkuY3NzKHtcclxuXHRcdFx0XHRcdFx0XHRsZWZ0OiB0cmFjay5wb3NpdGlvbigpLmxlZnQgKyB0cmFjay53aWR0aCgpICogKHRpbWUgLyBFZGl0b3Iuc291cmNlLmR1cmF0aW9uKVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5FZGl0b3IucmVuZGVyVGltZWxpbmUgID0gZnVuY3Rpb24oKSB7XHJcblx0RWRpdG9yLnRpbWVsaW5lX3JlbmRlcmVkID0gbmV3IFNldCgpO1xyXG5cdHZhciB0aW1lbGluZSA9ICQoJyN0aW1lbGluZTInKTtcclxuXHR2YXIgdGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1lbGluZTInKS5nZXRDb250ZXh0KCcyZCcpLFxyXG5cdFx0d2lkdGggPSB0Y3R4LmNhbnZhcy53aWR0aCxcclxuXHRcdGhlaWdodCA9IHRjdHguY2FudmFzLmhlaWdodDtcclxuXHR0Y3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHR0Y3R4LnNhdmUoKTtcclxuXHR2YXIgW3JlbmRlckZyb20sIHJlbmRlclRvXSA9IEVkaXRvci5tYXBVdGlscy50aW1lbGluZVJlbmRlclJhbmdlKCk7XHJcblx0dmFyIGZsYWcgPSBFZGl0b3IudGltZWxpbmUyX21vdXNlZG93biAmJiBFZGl0b3IudGltZWxpbmUyX29iamVuZDtcclxuXHRmb3IgKHZhciBpID0gcmVuZGVyVG87IGkgPj0gcmVuZGVyRnJvbTsgaS0tKSB7XHJcblx0XHR2YXIgb2JqID0gRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXTtcclxuXHRcdGlmICghKEVkaXRvci50aW1lbGluZTJfbW91c2Vkb3duICYmICEgRWRpdG9yLnRpbWVsaW5lMl9vYmplbmQpICYmXHJcblx0XHRcdChFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoIDwgMiAmJiAob2JqIGluc3RhbmNlb2YgU2xpZGVyIHx8IG9iaiBpbnN0YW5jZW9mIFNwaW5uZXIpKSkge1xyXG5cdFx0XHRsZXQgdCA9IEVkaXRvci5zb3VyY2UudCAqIDEwMDAsXHJcblx0XHRcdFx0eCA9IHBhZ2VfbW91c2VYIC0gdGltZWxpbmUub2Zmc2V0KCkubGVmdCxcclxuXHRcdFx0XHR5ID0gcGFnZV9tb3VzZVkgLSB0aW1lbGluZS5vZmZzZXQoKS50b3AsXHJcblx0XHRcdFx0cHhwcyA9IHRpbWVsaW5lLndpZHRoKCkgLyA2ICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tLFxyXG5cdFx0XHRcdHgyID0gcHhwcyAqIChvYmouZW5kVGltZSAtIHQpIC8gMTAwMCArIHRpbWVsaW5lLndpZHRoKCkgLyAyO1xyXG5cdFx0XHRpZiAoTWF0aC5hYnMoeCAtIHgyKSA8IHRpbWVsaW5lLmhlaWdodCgpICogMC4xICYmIE1hdGguYWJzKHkgLSB0aW1lbGluZS5oZWlnaHQoKSAvIDIpIDw9IHRpbWVsaW5lLmhlaWdodCgpICogMC40KSB7XHJcblx0XHRcdFx0dGltZWxpbmUuY3NzKCdjdXJzb3InLCAnZS1yZXNpemUnKTtcclxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKEVkaXRvci50aW1lbGluZTJfb2JqZW5kLCBFZGl0b3IudGltZWxpbmUyX21vdXNlZG93bik7XHJcblx0XHRcdFx0ZmxhZyA9IHRydWU7XHJcblx0XHRcdFx0RWRpdG9yLnRpbWVsaW5lMl9vYmplbmQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR2YXIgYTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGEgPSBvYmoudGltZWxpbmVSZW5kZXIoKTtcclxuXHRcdH1cclxuXHRcdGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGEpXHJcblx0XHRcdEVkaXRvci50aW1lbGluZV9yZW5kZXJlZC5hZGQoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXSk7XHJcblx0fVxyXG5cdGlmICghZmxhZykge1xyXG5cdFx0dGltZWxpbmUuY3NzKCdjdXJzb3InLCAnYXV0bycpO1xyXG5cdFx0RWRpdG9yLnRpbWVsaW5lMl9vYmplbmQgPSBmYWxzZTtcclxuXHR9XHJcblx0dGN0eC5yZXN0b3JlKCk7XHJcblx0dGN0eC5zdHJva2VTdHlsZSA9ICcjRkZGJztcclxuXHR0Y3R4LmxpbmVXaWR0aCA9IDEuNTtcclxuXHR0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdHRjdHgubW92ZVRvKDAsIGhlaWdodCAtIDMpO1xyXG5cdHRjdHgubGluZVRvKHdpZHRoLCBoZWlnaHQgLSAzKTtcclxuXHR0Y3R4Lm1vdmVUbyh3aWR0aCAvIDIgLSAxLjUsIGhlaWdodCAvIDEwKTtcclxuXHR0Y3R4LmxpbmVUbyh3aWR0aCAvIDIgLSAxLjUsIGhlaWdodCAtIDMpO1xyXG5cdHRjdHgubW92ZVRvKHdpZHRoIC8gMiArIDEuNSwgaGVpZ2h0IC8gMTApO1xyXG5cdHRjdHgubGluZVRvKHdpZHRoIC8gMiArIDEuNSwgaGVpZ2h0IC0gMyk7XHJcblx0dGN0eC5zdHJva2UoKTtcclxuXHRmdW5jdGlvbiBtb2QobSwgbikge1xyXG5cdFx0cmV0dXJuICgobSAlIG4pICsgbikgJSBuO1xyXG5cdH1cclxuXHR2YXIgdCA9IEVkaXRvci5zb3VyY2UudCxcclxuXHRcdGQgPSBFZGl0b3Iub3B0aW9ucy5iZWF0c25hcGRpdmlzb3IsXHJcblx0XHR0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludCh0ICogMTAwMCksXHJcblx0XHRiZWF0bCA9IHRwdC5iZWF0TGVuZ3RoIC8gMTAwMCxcclxuXHRcdGxib3VuZCA9IHQgLSAzIC8gRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tLFxyXG5cdFx0cmJvdW5kID0gdCArIDMgLyBFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20sXHJcblx0XHRiZWF0MSA9IGxib3VuZCAtIG1vZChsYm91bmQgLSB0cHQuYmFzZU9mZnNldCAvIDEwMDAsIGJlYXRsICogdHB0LnRpbWluZ1NpZ25hdHVyZSksXHJcblx0XHRiZWF0MXBvcyA9ICgoYmVhdDEgLSB0KSAqIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSAvIDYgKyAuNSkgKiB3aWR0aDtcclxuXHJcblx0Ly8gbWVhc3VyZSBiYXJzXHJcblx0dGN0eC5iZWdpblBhdGgoKTtcclxuXHRmb3IgKHZhciB4ID0gYmVhdDFwb3M7IHggPCB3aWR0aDsgeCArPSBiZWF0bCAqIHRwdC50aW1pbmdTaWduYXR1cmUgKiBFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gLyA2ICogd2lkdGgpIHtcclxuXHRcdHRjdHgubW92ZVRvKHgsIGhlaWdodCAqIDAuNik7XHJcblx0XHR0Y3R4LmxpbmVUbyh4LCBoZWlnaHQgLSAzKTtcclxuXHR9XHJcblx0dGN0eC5zdHJva2UoKTtcclxuXHJcblx0eCA9IDA7XHJcblx0Zm9yICh2YXIgaSA9IDA7IHggPCB3aWR0aDsgaSsrKSB7XHJcblx0XHR2YXIgaiA9IGkgJSBkLCB5ZnJvbTtcclxuXHRcdHggPSBiZWF0MXBvcyArIGkgKiBiZWF0bCAqIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSAvIDYgKiB3aWR0aCAvIGQ7XHJcblxyXG5cdFx0aWYgKHggPCAwIHx8IGkgJSAoZCAqIHRwdC50aW1pbmdTaWduYXR1cmUpID09PSAwKSBjb250aW51ZTtcclxuXHRcdGlmIChqID09PSAwKSB7XHJcblx0XHRcdHlmcm9tID0gaGVpZ2h0ICogMC44O1xyXG5cdFx0XHR0Y3R4LnN0cm9rZVN0eWxlID0gJyNGRkYnO1xyXG5cdFx0fSBlbHNlIGlmICgoaiAvIGQgKiAyKSAlIDEgPT09IDApIHtcclxuXHRcdFx0eWZyb20gPSBoZWlnaHQgKiAwLjk7XHJcblx0XHRcdHRjdHguc3Ryb2tlU3R5bGUgPSAnI0YzMyc7XHJcblx0XHR9IGVsc2UgaWYgKChqIC8gZCAqIDQpICUgMSA9PT0gMCkge1xyXG5cdFx0XHR5ZnJvbSA9IGhlaWdodCAqIDAuOTtcclxuXHRcdFx0dGN0eC5zdHJva2VTdHlsZSA9ICcjMzNGJztcclxuXHRcdH0gZWxzZSBpZiAoKGogLyBkICogMykgJSAxID09PSAwKSB7XHJcblx0XHRcdHlmcm9tID0gaGVpZ2h0ICogMC45O1xyXG5cdFx0XHR0Y3R4LnN0cm9rZVN0eWxlID0gJyNCNkUnO1xyXG5cdFx0fSBlbHNlIGlmICgoaiAvIGQgKiA2KSAlIDEgPT09IDApIHtcclxuXHRcdFx0eWZyb20gPSBoZWlnaHQgKiAwLjk7XHJcblx0XHRcdHRjdHguc3Ryb2tlU3R5bGUgPSAnI0I2RSc7XHJcblx0XHR9IGVsc2UgaWYgKChqIC8gZCAqIDgpICUgMSA9PT0gMCkge1xyXG5cdFx0XHR5ZnJvbSA9IGhlaWdodCAqIDAuOTtcclxuXHRcdFx0dGN0eC5zdHJva2VTdHlsZSA9ICcjRkY0JztcclxuXHRcdH0gZWxzZSBpZiAoKGogLyBkICogMTIpICUgMSA9PT0gMCkge1xyXG5cdFx0XHR5ZnJvbSA9IGhlaWdodCAqIDAuOTtcclxuXHRcdFx0dGN0eC5zdHJva2VTdHlsZSA9ICcjQUFBJztcclxuXHRcdH0gZWxzZSBpZiAoKGogLyBkICogMTYpICUgMSA9PT0gMCkge1xyXG5cdFx0XHR5ZnJvbSA9IGhlaWdodCAqIDAuOTtcclxuXHRcdFx0dGN0eC5zdHJva2VTdHlsZSA9ICcjQUFBJztcclxuXHRcdH1cclxuXHJcblx0XHR0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0dGN0eC5tb3ZlVG8oeCwgeWZyb20pO1xyXG5cdFx0dGN0eC5saW5lVG8oeCwgaGVpZ2h0IC0gMyk7XHJcblx0XHR0Y3R4LnN0cm9rZSgpO1xyXG5cdH1cclxuXHRcclxuXHR2YXIgZmFkZXcgPSAyNSxcclxuXHRcdHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSxcclxuICAgICAgICB0eCA9IHRlbXAuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHRlbXAud2lkdGggPSB3aWR0aDtcclxuICAgIHRlbXAuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdHgudHJhbnNsYXRlKC10ZW1wLndpZHRoLCAwKTtcclxuICAgIHR4LnNoYWRvd09mZnNldFggPSB0ZW1wLndpZHRoO1xyXG4gICAgdHguc2hhZG93T2Zmc2V0WSA9IDA7XHJcbiAgICB0eC5zaGFkb3dDb2xvciA9ICcjMDAwJztcclxuICAgIHR4LnNoYWRvd0JsdXIgPSBmYWRldztcclxuICAgIHR4LmZpbGxSZWN0KGZhZGV3LCAwLCB3aWR0aCAtIGZhZGV3ICogMiwgaGVpZ2h0KTtcclxuICAgIHRjdHguc2F2ZSgpO1xyXG4gICAgdGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24taW4nO1xyXG4gICAgdGN0eC5kcmF3SW1hZ2UodGVtcCwgMCwgMCk7XHJcbiAgICB0Y3R4LnJlc3RvcmUoKTtcclxuICAgIHZhciB0aW1lbGluZSA9ICQoJyN0aW1lbGluZTInKTtcclxuXHRpZiAoRWRpdG9yLnRpbWVsaW5lMl9kcmFnZ2luZykge1xyXG5cdFx0dGN0eC5zYXZlKCk7XHJcblx0XHR0Y3R4LmZpbGxTdHlsZSA9ICcjRkZGJztcclxuXHRcdHRjdHguZ2xvYmFsQWxwaGEgPSAwLjM7XHJcblx0XHRsZXQgeDEgPSAoKEVkaXRvci5kcmFnX3N0YXJ0dCAtIHQpICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tIC8gNiArIC41KSAqIHdpZHRoLFxyXG5cdFx0XHR4MiA9IChwYWdlX21vdXNlWCAtIHRpbWVsaW5lLm9mZnNldCgpLmxlZnQpO1xyXG5cdFx0dGN0eC5maWxsUmVjdCh4MSwgMCwgeDIgLSB4MSwgaGVpZ2h0IC0gMyk7XHJcblx0XHR0Y3R4LnJlc3RvcmUoKTtcclxuXHR9XHJcbn07XHJcblxyXG5FZGl0b3IucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdC8vdGltZWxpbmUgcmVuZGVyaW5nXHJcblx0RWRpdG9yLnJlbmRlclRpbWVsaW5lKCk7XHJcblxyXG4gICAgLy9vYmplY3QgcmVuZGVyaW5nXHJcbiAgICBFZGl0b3IucGxheWZpZWxkX3JlbmRlcmVkID0gbmV3IFNldCgpO1xyXG5cdHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKiAwLjc1LFxyXG5cdFx0d2lkdGggPSBoZWlnaHQgKiA0IC8gMyxcclxuXHRcdHQgPSBFZGl0b3Iuc291cmNlLnQsXHJcblx0XHRhciA9IGFycyhFZGl0b3IuYmVhdG1hcC5BcHByb2FjaFJhdGUpLFxyXG5cdFx0Y3MgPSBjc3B4KEVkaXRvci5iZWF0bWFwLkNpcmNsZVNpemUpLFxyXG5cdFx0dGVtcDtcclxuXHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdGN0eC5zYXZlKCk7XHJcblx0Y3R4LmNsZWFyUmVjdCgwLCAwLCAkKHdpbmRvdykud2lkdGgoKSwgJCh3aW5kb3cpLmhlaWdodCgpKTtcclxuXHRjdHgudHJhbnNsYXRlKCgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTYpO1xyXG5cdGN0eC5zY2FsZSh3aWR0aCAvIDUxMiwgaGVpZ2h0IC8gMzg0KTtcclxuXHJcblx0dmFyIGN0eDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZGNhbnZhczInKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdGN0eDIuc2F2ZSgpO1xyXG5cdGN0eDIuY2xlYXJSZWN0KDAsIDAsICQod2luZG93KS53aWR0aCgpLCAkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdGN0eDIudHJhbnNsYXRlKCgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTYpO1xyXG5cdGN0eDIuc2NhbGUod2lkdGggLyA1MTIsIGhlaWdodCAvIDM4NCk7XHJcblxyXG5cdHZhciByZW5kZXJGcm9tID0gRWRpdG9yLmJlYXRtYXAuZ2V0SW5kZXhBdCgodCAtIDAuOCAtIEVkaXRvci5tYXhzbGlkZXJkdXIpICogMTAwMCksXHJcblx0XHRyZW5kZXJUbyA9IEVkaXRvci5iZWF0bWFwLmdldEluZGV4QXQoKHQgKyBhcikgKiAxMDAwKTtcclxuXHRmb3IgKHZhciBpID0gcmVuZGVyVG87IGkgPj0gcmVuZGVyRnJvbTsgaS0tKSB7XHJcblx0XHRpZiAoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXS5yZW5kZXIodCwgRWRpdG9yLm9iamNbaV1bMF0gJSBFZGl0b3IuY29scy5sZW5ndGgsIEVkaXRvci5vYmpjW2ldWzFdKSlcclxuXHRcdFx0RWRpdG9yLnBsYXlmaWVsZF9yZW5kZXJlZC5hZGQoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXSk7XHJcblx0fVxyXG5cclxuXHQvL3NlbGVjdGVkIG9iamVjdHNcclxuXHRjdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG5cdGZvciAoaSA9IDA7IGkgPCBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmKCEoRWRpdG9yLnNlbGVjdGVkW2ldIGluc3RhbmNlb2YgU3Bpbm5lcikpXHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlc2VsZWN0LCBFZGl0b3Iuc2VsZWN0ZWRbaV0ucG9zaXRpb24ueCAtIGNzIC8gMiwgRWRpdG9yLnNlbGVjdGVkW2ldLnBvc2l0aW9uLnkgLSBjcyAvIDIsIGNzLCBjcyk7XHJcblx0XHRpZihFZGl0b3Iuc2VsZWN0ZWRbaV0gaW5zdGFuY2VvZiBTbGlkZXIpXHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlc2VsZWN0LCBFZGl0b3Iuc2VsZWN0ZWRbaV0uZW5kUG9zaXRpb24ueCAtIGNzIC8gMiwgRWRpdG9yLnNlbGVjdGVkW2ldLmVuZFBvc2l0aW9uLnkgLSBjcyAvIDIsIGNzLCBjcyk7XHJcblx0fVxyXG5cclxuXHQvL2RyYWcgYXJlYVxyXG5cdGlmIChFZGl0b3IuZWRpdF9kcmFnZ2luZykge1xyXG5cdFx0Y3R4Mi5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjIpJztcclxuXHRcdGN0eDIuc3Ryb2tlU3R5bGUgPSAnI0ZGRic7XHJcblx0XHRjdHgyLmxpbmVXaWR0aCA9IDAuNTtcclxuXHRcdGN0eDIuYmVnaW5QYXRoKCk7XHJcblx0XHRjdHgyLnJlY3QoRWRpdG9yLmRyYWdfc3RhcnR4LCBFZGl0b3IuZHJhZ19zdGFydHksIG1vdXNlWCAtIEVkaXRvci5kcmFnX3N0YXJ0eCwgbW91c2VZIC0gRWRpdG9yLmRyYWdfc3RhcnR5KTtcclxuXHRcdGN0eDIuZmlsbCgpO1xyXG5cdFx0Y3R4Mi5zdHJva2UoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly9ob3ZlcmVkIG9iamVjdHNcclxuXHRcdGN0eDIubGluZVdpZHRoID0gY3MgKiAxMSAvIDEyO1xyXG5cdFx0Y3R4Mi5saW5lSm9pbiA9ICdyb3VuZCc7XHJcblx0XHRjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG5cdFx0RWRpdG9yLnNsaWRlcnB0X2hvdmVyZWQgPSBmYWxzZTtcclxuXHRcdGZvciAoaSA9IHJlbmRlckZyb207IGkgPD0gcmVuZGVyVG87IGkrKykge1xyXG5cdFx0XHR2YXIgb2JqID0gRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXTtcclxuXHRcdFx0aWYgKCEob2JqIGluc3RhbmNlb2YgU2xpZGVyKSB8fCB0ID4gb2JqLmVuZFRpbWUgLyAxMDAwICsgb2JqLmZhZGV0aW1lIHx8IHQgPCBvYmouc3RhcnRUaW1lIC8gMTAwMCAtIGFyKSBjb250aW51ZTtcclxuXHRcdFx0aWYgKCFvYmoucGF0aCkge1xyXG5cdFx0XHRcdGN0eDIuYmVnaW5QYXRoKCk7XHJcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBvYmouc3BsaW5lLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRjdHgyLmxpbmVUbyhvYmouc3BsaW5lW2pdWzBdLCBvYmouc3BsaW5lW2pdWzFdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGVtcCA9IGN0eDIuaXNQb2ludEluU3Ryb2tlKHBhZ2VfbW91c2VYLCBwYWdlX21vdXNlWSAtICQoJyNncmlkY2FudmFzMicpLm9mZnNldCgpLnRvcCk7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdHRlbXAgPSBjdHgyLmlzUG9pbnRJblN0cm9rZShvYmoucGF0aCwgcGFnZV9tb3VzZVgsIHBhZ2VfbW91c2VZIC0gJCgnI2dyaWRjYW52YXMyJykub2Zmc2V0KCkudG9wKTtcclxuXHRcdFx0aWYgKHRlbXApIHtcclxuXHRcdFx0XHRvYmouaG92ZXIoKTtcclxuXHRcdFx0XHQvL2N0eC5yZXN0b3JlKCk7XHJcblx0XHRcdFx0Ly9jdHgyLnJlc3RvcmUoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y3R4LnJlc3RvcmUoKTtcclxuXHRjdHgyLnJlc3RvcmUoKTtcclxufTtcclxuXHJcbkVkaXRvci5yZW5kZXJ1cGRhdGUgPSBmdW5jdGlvbiAoKSB7IC8vIGZvciB1cGRhdGVzIHRoYXQgb25seSBjaGFuZ2UgcmVuZGVyaW5nXHJcblx0aWYgKCFFZGl0b3IuYmVhdG1hcCB8fCAhRWRpdG9yLnNvdXJjZSB8fCBFZGl0b3Iuc291cmNlLnBsYXlpbmcpIHJldHVybjtcclxuXHRFZGl0b3IucmVuZGVyKCk7XHJcbn07XHJcblxyXG5FZGl0b3Iuc2V0R3JpZExldmVsID0gZnVuY3Rpb24gKG4pIHsgLy8yXihuKzEpIHBpeGVscyBwZXIgY2VsbFxyXG5cdEVkaXRvci5vcHRpb25zLmdyaWRsZXZlbCA9IG47XHJcblx0RWRpdG9yLmRyYXdHcmlkKCk7XHJcbn07XHJcblxyXG52YXIgY29weVN0cmluZ0Zyb21PYmplY3RzID0gZnVuY3Rpb24ob2Jqcykge1xyXG5cdG9ianMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcblx0XHRyZXR1cm4gYS5zdGFydFRpbWUgLSBiLnN0YXJ0VGltZTtcclxuXHR9KTtcclxuXHR2YXIgcmV0ID0gbXNUb1RpbWVTdHJpbmcob2Jqc1swXS5zdGFydFRpbWUpICsgXCIgKFwiO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgb2Jqcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0cmV0ICs9IEVkaXRvci5vYmpjW0VkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZihFZGl0b3Iuc2VsZWN0ZWRbaV0pXVsxXTtcclxuXHRcdGlmIChpIDwgb2Jqcy5sZW5ndGggLSAxKSByZXQgKz0gXCIsXCI7XHJcblx0fVxyXG5cdHJldHVybiByZXQgKyBcIikgLSBcIjtcclxufTtcclxuXHJcbnZhciBjb3B5VGV4dFRvQ2xpcGJvYXJkID0gZnVuY3Rpb24gKHRleHQpIHtcclxuXHR2YXIgdGV4dEFyZWE7XHJcblx0dHJ5IHtcclxuXHRcdHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUudG9wID0gMDtcclxuXHRcdHRleHRBcmVhLnN0eWxlLmxlZnQgPSAwO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUud2lkdGggPSAnMmVtJztcclxuXHRcdHRleHRBcmVhLnN0eWxlLmhlaWdodCA9ICcyZW0nO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUucGFkZGluZyA9IDA7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5vdXRsaW5lID0gJ25vbmUnO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUuYm94U2hhZG93ID0gJ25vbmUnO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7XHJcblx0XHR0ZXh0QXJlYS52YWx1ZSA9IHRleHQ7XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKTtcclxuXHRcdHRleHRBcmVhLnNlbGVjdCgpO1xyXG5cdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTtcclxuXHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdjb3B5IGZhaWxlZCcpO1xyXG5cdH1cclxuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRBcmVhKTtcclxufTtcclxuXHJcbkVkaXRvci5kcmF3R3JpZCA9IGZ1bmN0aW9uIChsZXZlbCwgZ3JpZCkge1xyXG5cdGlmICghbGV2ZWwpIGxldmVsID0gRWRpdG9yLm9wdGlvbnMuZ3JpZGxldmVsO1xyXG5cdGlmICghZ3JpZCkgZ3JpZCA9ICQoJyNncmlkJyk7XHJcblx0dmFyIGggPSBncmlkLmhlaWdodCgpO1xyXG5cdHZhciB3ID0gZ3JpZC53aWR0aCgpO1xyXG5cdHZhciBweCA9IGggLyAzODQ7XHJcblx0dmFyIGN0eCA9IGdyaWRbMF0uZ2V0Q29udGV4dCgnMmQnKTtcclxuXHR2YXIgY3MgPSBNYXRoLnBvdygyLCBsZXZlbCArIDEpO1xyXG5cclxuXHRjdHguY2xlYXJSZWN0KDAsIDAsIHcsIGgpO1xyXG5cdGN0eC5zdHJva2VTdHlsZSA9ICcjRkZGJztcclxuXHRjdHgubGluZVdpZHRoID0gcHg7XHJcblxyXG5cdGZvciAodmFyIGkgPSAwOyBpIDw9IDM4NDsgaSArPSBjcykge1xyXG5cdFx0Y3R4Lmdsb2JhbEFscGhhID0gaSA9PSAzODQgLyAyID8gMC4yIDogMC4wNjtcclxuXHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHRcdGN0eC5tb3ZlVG8oMCwgaSAqIHB4KTtcclxuXHRcdGN0eC5saW5lVG8oNTEyICogcHgsIGkgKiBweCk7XHJcblx0XHRjdHguc3Ryb2tlKCk7XHJcblx0fVxyXG5cclxuXHRmb3IgKGkgPSAwOyBpIDw9IDUxMjsgaSArPSBjcykge1xyXG5cdFx0Y3R4Lmdsb2JhbEFscGhhID0gaSA9PSA1MTIgLyAyID8gMC4yIDogMC4wNjtcclxuXHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHRcdGN0eC5tb3ZlVG8oaSAqIHB4LCAwKTtcclxuXHRcdGN0eC5saW5lVG8oaSAqIHB4LCAzODQgKiBweCk7XHJcblx0XHRjdHguc3Ryb2tlKCk7XHJcblx0fVxyXG59O1xyXG5cclxudmFyIG1zVG9UaW1lU3RyaW5nID0gZnVuY3Rpb24odCkge1xyXG5cdHJldHVybiBuZXcgRGF0ZShNYXRoLnJvdW5kKHQpKS50b0lTT1N0cmluZygpLnN1YnN0cigxNCwgOSkucmVwbGFjZSgnLicsICc6Jyk7XHJcbn07XHJcblxyXG5FZGl0b3IudXBkYXRlVGltZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciB0ID0gRWRpdG9yLnNvdXJjZSA/IE1hdGgubWluKEVkaXRvci5zb3VyY2UudCwgRWRpdG9yLnNvdXJjZS5kdXJhdGlvbikgOiAwO1xyXG5cdHZhciBwY3QgPSBFZGl0b3Iuc291cmNlID8gdCAvIEVkaXRvci5zb3VyY2UuZHVyYXRpb24gOiAwO1xyXG5cdHZhciByb3VuZGVkID0gKHBjdCAqIDEwMCkudG9GaXhlZCgxKTtcclxuXHQkKCcjdGltZScpLmh0bWwobXNUb1RpbWVTdHJpbmcodCAqIDEwMDApKTtcclxuXHQkKCcjcHJvZ3Jlc3MnKS5odG1sKChyb3VuZGVkID4gMTAwID8gJ291dHJvJyA6IHJvdW5kZWQpICsgJyUnKTtcclxuXHR2YXIgdHJhY2sgPSAkKCcjdGltZWxpbmV0cmFjaycpO1xyXG5cdC8vJCgnI3RpbWVsaW5lYmFyJykuY3NzKHtsZWZ0OnRyYWNrLnBvc2l0aW9uKCkubGVmdCArIHRyYWNrLndpZHRoKCkqcGN0fSk7XHJcblx0JCgnI3RpbWVsaW5lYmFyJykuY3NzKHtcclxuXHRcdGxlZnQ6IHRyYWNrLnBvc2l0aW9uKCkubGVmdCArIHRyYWNrLndpZHRoKCkgKiBwY3RcclxuXHR9KTtcclxuXHRpZiAocGN0ID49IDEpIHtcclxuXHRcdEVkaXRvci5zb3VyY2UucGF1c2UoRWRpdG9yLnNvdXJjZS5kdXJhdGlvbik7XHJcblx0fVxyXG59O1xyXG5cclxuRWRpdG9yLmNyZWF0ZVRpbWVsaW5lTWFyayA9IGZ1bmN0aW9uICh0aW1lLCB0eXBlKSB7XHJcblx0aWYgKEVkaXRvci5zb3VyY2UpIHtcclxuXHRcdHZhciBtYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRtYXJrLmNsYXNzTGlzdC5hZGQoJ3RpbWVsaW5lbWFyaycsIHR5cGUpO1xyXG5cdFx0dmFyIHRyYWNrID0gJCgnI3RpbWVsaW5ldHJhY2snKTtcclxuXHRcdCQobWFyaykuY3NzKHtcclxuXHRcdFx0bGVmdDogdHJhY2sucG9zaXRpb24oKS5sZWZ0ICsgdHJhY2sud2lkdGgoKSAqICh0aW1lIC8gRWRpdG9yLnNvdXJjZS5kdXJhdGlvbilcclxuXHRcdH0pO1xyXG5cdFx0JCgnI3RpbWVsaW5lMWMnKS5hcHBlbmQobWFyayk7XHJcblx0XHRpZiAoIUVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdKVxyXG5cdFx0XHRFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXSA9IHt9O1xyXG5cdFx0RWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV1bdHlwZV0gPSBtYXJrO1xyXG5cdH1cclxufTtcclxuXHJcbkVkaXRvci5yZW1vdmVUaW1lbGluZU1hcmsgPSBmdW5jdGlvbiAodGltZSwgdHlwZSkge1xyXG5cdGlmIChFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXSAmJiBFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXVt0eXBlXSkge1xyXG5cdFx0RWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV1bdHlwZV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXVt0eXBlXSk7XHJcblx0fVxyXG59O1xyXG5cclxuRWRpdG9yLmluaXQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuXHR2YXIgaSwgcHRzO1xyXG5cdEVkaXRvci5vcHRpb25zLmRpc3RhbmNlc3BhY2luZyA9IEVkaXRvci5iZWF0bWFwLkRpc3RhbmNlU3BhY2luZztcclxuXHRFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwgPSBNYXRoLmxvZzIoRWRpdG9yLmJlYXRtYXAuR3JpZFNpemUpIC0gMTtcclxuXHRFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gPSBwYXJzZUZsb2F0KEVkaXRvci5iZWF0bWFwLlRpbWVsaW5lWm9vbSk7XHJcblx0RWRpdG9yLm1hcFV0aWxzID0gbmV3IEVkaXRvci5NYXBVdGlscyhFZGl0b3IuYmVhdG1hcCk7XHJcblx0dmFyIGJyZWFrcyA9IEVkaXRvci5iZWF0bWFwLmJyZWFrVGltZXMsXHJcblx0XHRuID0gMSxcclxuXHRcdHNraW5vcHRzID0gRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucztcclxuXHRpZiAoRWRpdG9yLnNraW4uX21ldGEubmFtZSAhPSAnRGVmYXVsdCcgJiYgc2tpbm9wdHMuQ29tYm8xICYmICFza2lub3B0cy5pZ25vcmVTa2luQ29sb3JzKSB7XHJcblx0XHRFZGl0b3IuY29scyA9IFtdO1xyXG5cdFx0d2hpbGUgKHNraW5vcHRzWydDb21ibycgKyBuXSkge1xyXG5cdFx0XHRFZGl0b3IuY29scy5wdXNoKGNvbG9yVG9BcnJheShza2lub3B0c1snQ29tYm8nICsgbl0pKTtcclxuXHRcdFx0bisrO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoRWRpdG9yLmJlYXRtYXAuQ29tYm9Db2xvcnMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRjb25zb2xlLmxvZygndXNpbmcgZGVmYXVsdCBjb2xvcnMnKTtcclxuXHRcdEVkaXRvci5jb2xzID0gW1xyXG5cdFx0XHRbMjU1LCAxOTIsIDBdLFxyXG5cdFx0XHRbMCwgMjAyLCAwXSxcclxuXHRcdFx0WzE4LCAxMjQsIDI1NV0sXHJcblx0XHRcdFsyNDIsIDI0LCA1N11cclxuXHRcdF07XHJcblx0fSBlbHNlIHtcclxuXHRcdEVkaXRvci5jb2xzID0gW107XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgRWRpdG9yLmJlYXRtYXAuQ29tYm9Db2xvcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0RWRpdG9yLmNvbHMucHVzaChFZGl0b3IuYmVhdG1hcC5Db21ib0NvbG9yc1tpXS50b0FycmF5KCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRFZGl0b3Iub2JqYyA9IFtdO1xyXG5cdG4gPSAwO1xyXG5cdGogPSAxO1xyXG5cdHZhciBtYXhjID0gMTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKGkgPT09IDAgfHwgKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV0ubmV3Q29tYm8pKSB7XHJcblx0XHRcdGlmIChqID4gbWF4Yykge1xyXG5cdFx0XHRcdG1heGMgPSBqO1xyXG5cdFx0XHR9XHJcblx0XHRcdG4rKztcclxuXHRcdFx0aWYgKCEoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXSBpbnN0YW5jZW9mIFNwaW5uZXIpKVxyXG5cdFx0XHRcdG4gKz0gRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXS5jdXN0b21Db2xvcjtcclxuXHRcdFx0aiA9IDE7XHJcblx0XHR9XHJcblx0XHRFZGl0b3Iub2JqYy5wdXNoKFtuLCBqXSk7XHJcblx0XHRqKys7XHJcblx0fVxyXG5cdG4gPSAxMDtcclxuXHR3aGlsZSAobiA8PSBtYXhjKSB7XHJcblx0XHR2YXIgZGlnaXRzID0gW107XHJcblx0XHR2YXIgbjIgPSBuLnRvU3RyaW5nKCk7XHJcblx0XHRmb3IgKGogPSAwOyBqIDwgbjIubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0ZGlnaXRzLnB1c2goRWRpdG9yLnNraW5bJ2RlZmF1bHQtJyArIG4yLmNoYXJBdChqKV0pO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnNraW4uYWRkQ29tYm9OdW1iZXIoZGlnaXRzLCBuKTtcclxuXHRcdG4rKztcclxuXHR9XHJcblxyXG5cdEVkaXRvci5tYXhzbGlkZXJkdXIgPSAwO1xyXG5cdGZvciAoaSA9IDA7IGkgPCBFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXSBpbnN0YW5jZW9mIFNsaWRlcikge1xyXG5cdFx0XHRpZiAoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXS5kdXJhdGlvbiAvIDEwMDAgPiBFZGl0b3IubWF4c2xpZGVyZHVyKVxyXG5cdFx0XHRcdEVkaXRvci5tYXhzbGlkZXJkdXIgPSBFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzW2ldLmR1cmF0aW9uIC8gMTAwMDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHZhciB0aW50ZWxlbWVudHMgPSBbJ2hpdGNpcmNsZScsICdhcHByb2FjaGNpcmNsZScsICdzbGlkZXJiMCddO1xyXG5cdGZvciAoaSA9IDA7IGkgPCB0aW50ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGZvciAoaiA9IDA7IGogPCBFZGl0b3IuY29scy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRpZiAodGludGVsZW1lbnRzW2ldID09ICdzbGlkZXJiMCcpIHtcclxuXHRcdFx0XHRFZGl0b3Iuc2tpblt0aW50ZWxlbWVudHNbaV0gKyBqXSA9IHRpbnQoRWRpdG9yLnNraW5bdGludGVsZW1lbnRzW2ldXSwgWzAsIDAsIDBdKTtcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0RWRpdG9yLnNraW5bdGludGVsZW1lbnRzW2ldICsgal0gPSB0aW50KEVkaXRvci5za2luW3RpbnRlbGVtZW50c1tpXV0sIEVkaXRvci5jb2xzW2pdKTtcclxuXHRcdH1cclxuXHR9XHJcblx0JCgnI3RpbWVsaW5lMWMgLnRpbWVsaW5lbWFyaycpLnJlbW92ZSgpO1xyXG5cdEVkaXRvci50aW1lbGluZW1hcmtzID0ge307XHJcblx0aWYgKEVkaXRvci5iZWF0bWFwLkJvb2ttYXJrcykge1xyXG5cdFx0cHRzID0gRWRpdG9yLmJlYXRtYXAuQm9va21hcmtzO1xyXG5cdFx0Zm9yIChpIGluIHB0cykge1xyXG5cdFx0XHRpZiAocHRzLmhhc093blByb3BlcnR5KGkpKSB7XHJcblx0XHRcdFx0RWRpdG9yLmNyZWF0ZVRpbWVsaW5lTWFyayhwdHNbaV0gLyAxMDAwLCAnYm9va21hcmsnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoRWRpdG9yLmJlYXRtYXAuUHJldmlld1RpbWUpIEVkaXRvci5jcmVhdGVUaW1lbGluZU1hcmsoRWRpdG9yLmJlYXRtYXAuUHJldmlld1RpbWUgLyAxMDAwLCAncHJldmlld3RpbWUnKTtcclxuXHRpZiAoRWRpdG9yLmJlYXRtYXAuVGltaW5nUG9pbnRzKSB7XHJcblx0XHRwdHMgPSBFZGl0b3IuYmVhdG1hcC5UaW1pbmdQb2ludHM7XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgcHRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChwdHNbaV0udGltaW5nQ2hhbmdlKVxyXG5cdFx0XHRcdEVkaXRvci5jcmVhdGVUaW1lbGluZU1hcmsocHRzW2ldLm9mZnNldCAvIDEwMDAsICd1bmluaGVyaXRlZHBvaW50Jyk7XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRFZGl0b3IuY3JlYXRlVGltZWxpbmVNYXJrKHB0c1tpXS5vZmZzZXQgLyAxMDAwLCAnaW5oZXJpdGVkcG9pbnQnKTtcclxuXHRcdH1cclxuXHR9XHJcblx0RWRpdG9yLnNldEdyaWRMZXZlbChFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwpO1xyXG5cdEVkaXRvci51cGRhdGVNb3VzZUxvY2F0aW9uKCk7XHJcblx0RWRpdG9yLnVwZGF0ZSgpO1xyXG5cdC8vc2V0VGltZW91dChmdW5jdGlvbigpe3JlbmRlcnNsaWRlcnNhc3luYyhzaSwgMTAsIGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coJ3NsaWRlcnMgZG9uZScpfSl9LCAwKTsgLy9hc3luY1xyXG5cdC8vcmVuZGVyc2xpZGVycyhzaSwgMCwgY2FsbGJhY2spO1xyXG59O1xyXG5cclxuRWRpdG9yLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsgLy8gZm9yIHVwZGF0ZXMgdGhhdCBjaGFuZ2UgdGhlIHRpbWVcclxuXHRpZiAoIUVkaXRvci5kcmF3aW5nKSBmcmFtZSgpO1xyXG59O1xyXG5cclxuRWRpdG9yLmxvYWRTa2luID0gZnVuY3Rpb24obmFtZSkge1xyXG5cdFNraW4uTG9hZFNraW4obmFtZSwgZnVuY3Rpb24gKHNraW4pIHtcclxuXHRcdEVkaXRvci5za2luID0gc2tpbjtcclxuXHRcdEVkaXRvci5pbml0KCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG52YXIgZnJhbWUgPSBmdW5jdGlvbiAoKSB7XHJcblx0RWRpdG9yLnVwZGF0ZVRpbWUoKTtcclxuXHRpZiAoRWRpdG9yLnNvdXJjZSAmJiBFZGl0b3IuYmVhdG1hcCkge1xyXG5cdFx0RWRpdG9yLnJlbmRlcigpO1xyXG5cdFx0aWYgKEVkaXRvci5zb3VyY2UucGxheWluZykge1xyXG5cdFx0XHRpZiAoRWRpdG9yLnByZXZ0KSB7XHJcblx0XHRcdFx0dmFyIGZyb20gPSBFZGl0b3IuYmVhdG1hcC5nZXRJbmRleEF0KEVkaXRvci5wcmV2dCAqIDEwMDApO1xyXG5cdFx0XHRcdHZhciB0byA9IEVkaXRvci5iZWF0bWFwLmdldEluZGV4QXQoRWRpdG9yLnNvdXJjZS50ICogMTAwMCk7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IGZyb207IGkgPD0gdG87IGkrKykge1xyXG5cdFx0XHRcdFx0dmFyIG9iaiA9IEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV07XHJcblx0XHRcdFx0XHQvLyBwbGF5IHNmeFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRFZGl0b3IucHJldnQgPSBFZGl0b3Iuc291cmNlLnQ7XHJcblx0XHRcdEVkaXRvci5kcmF3aW5nID0gdHJ1ZTtcclxuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRFZGl0b3IuZHJhd2luZyA9IGZhbHNlO1xyXG5cdFx0XHRFZGl0b3IucHJldnQgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG4kKHdpbmRvdykub24oXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xyXG5cdEVkaXRvci5hbGlnbigpO1xyXG5cdGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHR2YXIgdHJhY2sgPSAkKCcjdGltZWxpbmV0cmFjaycpO1xyXG5cdFx0Zm9yICh2YXIgdGltZSBpbiBFZGl0b3IudGltZWxpbmVtYXJrcykge1xyXG5cdFx0XHRpZiAoRWRpdG9yLnRpbWVsaW5lbWFya3MuaGFzT3duUHJvcGVydHkodGltZSkpIHtcclxuXHRcdFx0XHRmb3IgKHZhciBwb2ludCBpbiBFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXSkge1xyXG5cdFx0XHRcdFx0aWYgKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdLmhhc093blByb3BlcnR5KHBvaW50KSkge1xyXG5cdFx0XHRcdFx0XHQkKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdW3BvaW50XSkuY3NzKHtcclxuXHRcdFx0XHRcdFx0XHRsZWZ0OiB0cmFjay5wb3NpdGlvbigpLmxlZnQgKyB0cmFjay53aWR0aCgpICogKHRpbWUgLyBFZGl0b3Iuc291cmNlLmR1cmF0aW9uKVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0RWRpdG9yLnVwZGF0ZSgpO1xyXG59KTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uIG1haW4oKSB7XHJcblx0RWRpdG9yLm9wdGlvbnMgPSB7XHJcblx0XHR0aW1lbGluZXpvb206IDEsXHJcblx0XHRiZWF0c25hcGRpdmlzb3I6IDQsXHJcblx0XHRkaXN0YW5jZXNwYWNpbmc6IDEsXHJcblx0XHRkaXN0YW5jZXNuYXA6IHRydWUsXHJcblx0XHRncmlkbGV2ZWw6IDIsXHJcblx0XHRncmlkc25hcDogdHJ1ZSxcclxuXHRcdGxvY2tub3RlczogZmFsc2UsXHJcblx0XHR0b29sOiAwLCAvLzAtMyBmb3Igc2VsZWN0LCBjaXJjbGUsIHNsaWRlciwgYW5kIHNwaW5uZXJcclxuXHRcdHNvdW5kb3B0czogW2ZhbHNlLCBmYWxzZSwgZmFsc2VdLCAvL3doaXN0bGUsIGZpbmlzaCwgY2xhcFxyXG5cdFx0bmNvcHQ6IGZhbHNlLFxyXG5cdFx0aWdub3JlU2tpbkNvbG9yczogZmFsc2VcclxuXHR9O1xyXG5cdEVkaXRvci5jb3B5RGF0YSA9ICcnO1xyXG5cdEVkaXRvci5zZWxlY3RlZCA9IFtdO1xyXG5cdEVkaXRvci50aW1lbGluZV9yZW5kZXJlZCA9IG5ldyBTZXQoKTtcclxuXHRFZGl0b3IucGxheWZpZWxkX3JlbmRlcmVkID0gbmV3IFNldCgpO1xyXG5cclxuXHQkKFwiI21lbnViYXI+ZGl2XCIpLm1vdXNlb3ZlcihmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgYSA9ICQodGhpcykub2Zmc2V0KCk7XHJcblx0XHRhLnRvcCArPSAxODtcclxuXHRcdCQodGhpcykuZmluZChcIi5kcm9wZG93blwiKS5vZmZzZXQoYSk7XHJcblx0fSk7XHJcblxyXG5cdEVkaXRvci5nZXRDdXJPYmogPSBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgdGVtcCwgY2xpY2tlZCwgdCA9IEVkaXRvci5zb3VyY2UudCAqIDEwMDA7XHJcblx0XHRpZiAoaXNNb3VzZWluRWxlbWVudCgnI3RpbWVsaW5lMicpKSB7XHJcblx0XHRcdHZhciByZW5kZXJlZCA9IFsuLi5FZGl0b3IudGltZWxpbmVfcmVuZGVyZWRdO1xyXG5cdFx0XHR2YXIgdGltZWxpbmUgPSAkKCcjdGltZWxpbmUyJyksXHJcblx0XHRcdFx0ZHggPSAocGFnZV9tb3VzZVggLSB0aW1lbGluZS5vZmZzZXQoKS5sZWZ0IC0gdGltZWxpbmUud2lkdGgoKSAvIDIpLFxyXG5cdFx0XHRcdHB4cHMgPSB0aW1lbGluZS53aWR0aCgpIC8gNiAqIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSxcclxuXHRcdFx0XHRtb3VzZXQgPSB0IC8gMTAwMCArIGR4IC8gcHhwcztcclxuXHRcdFx0dmFyIHgyID0gcGFnZV9tb3VzZVggLSB0aW1lbGluZS5vZmZzZXQoKS5sZWZ0LFxyXG5cdFx0XHRcdHkyID0gcGFnZV9tb3VzZVkgLSB0aW1lbGluZS5vZmZzZXQoKS50b3A7XHJcblx0XHRcdGZvciAodmFyIG9iaiBvZiBFZGl0b3Iuc2VsZWN0ZWQpIHtcclxuXHRcdFx0XHR2YXIgeHBvcyA9IHB4cHMgKiAob2JqLnN0YXJ0VGltZSAtIHQpIC8gMTAwMCArIHRpbWVsaW5lLndpZHRoKCkgLyAyO1xyXG5cdFx0XHRcdGlmKE1hdGguc3FydChNYXRoLnBvdyh4MiAtIHhwb3MsIDIpICsgTWF0aC5wb3coeTIgLSB0aW1lbGluZS5oZWlnaHQoKSAvIDIsIDIpKSA8PSB0aW1lbGluZS5oZWlnaHQoKSAqIDAuNCkgcmV0dXJuIG9iajtcclxuXHRcdFx0XHRpZiAob2JqIGluc3RhbmNlb2YgU2xpZGVyIHx8IG9iaiBpbnN0YW5jZW9mIFNwaW5uZXIpIHtcclxuXHRcdFx0XHRcdHZhciB4cG9zMiA9IHB4cHMgKiAob2JqLmVuZFRpbWUgLSB0KSAvIDEwMDAgKyB0aW1lbGluZS53aWR0aCgpIC8gMjtcclxuXHRcdFx0XHRcdGlmIChNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4cG9zMiwgMikgKyBNYXRoLnBvdyh5MiAtIHRpbWVsaW5lLmhlaWdodCgpIC8gMiwgMikpIDw9IHRpbWVsaW5lLmhlaWdodCgpICogMC40KSByZXR1cm4gb2JqO1xyXG5cdFx0XHRcdFx0aWYgKHgyID49IHhwb3MgJiYgeDIgPD0geHBvczIpIHJldHVybiBvYmo7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBtaW5EID0gSW5maW5pdHksIG1pbkk7XHJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgb2JqID0gcmVuZGVyZWRbaV07XHJcblx0XHRcdFx0dmFyIGQgPSBNYXRoLmFicyhvYmouc3RhcnRUaW1lIC8gMTAwMCAtIG1vdXNldCk7XHJcblx0XHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFNsaWRlciB8fCBvYmogaW5zdGFuY2VvZiBTcGlubmVyKSB7XHJcblx0XHRcdFx0XHRpZiAobW91c2V0ID4gb2JqLnN0YXJ0VGltZSAvIDEwMDAgJiYgbW91c2V0IDwgb2JqLmVuZFRpbWUgLyAxMDAwKSByZXR1cm4gb2JqO1xyXG5cdFx0XHRcdFx0ZCA9IE1hdGgubWluKGQsIE1hdGguYWJzKG9iai5lbmRUaW1lIC8gMTAwMCAtIG1vdXNldCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoZCA8IG1pbkQpIHtcclxuXHRcdFx0XHRcdG1pbkQgPSBkO1xyXG5cdFx0XHRcdFx0bWluSSA9IGk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGNsaWNrZWQgPSByZW5kZXJlZFttaW5JXTtcclxuXHRcdFx0aWYgKHR5cGVvZiBjbGlja2VkID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBjbGlja2VkO1xyXG5cdFx0XHR2YXIgeHBvcyA9IHB4cHMgKiAoY2xpY2tlZC5zdGFydFRpbWUgLSB0KSAvIDEwMDAgKyB0aW1lbGluZS53aWR0aCgpIC8gMjtcclxuXHRcdFx0aWYgKE1hdGguc3FydChNYXRoLnBvdyh4MiAtIHhwb3MsIDIpICsgTWF0aC5wb3coeTIgLSB0aW1lbGluZS5oZWlnaHQoKSAvIDIsIDIpKSA8PSB0aW1lbGluZS5oZWlnaHQoKSAqIDAuNCkgcmV0dXJuIGNsaWNrZWQ7XHJcblx0XHRcdGlmIChjbGlja2VkIGluc3RhbmNlb2YgU2xpZGVyIHx8IGNsaWNrZWQgaW5zdGFuY2VvZiBTcGlubmVyKSB7XHJcblx0XHRcdFx0dmFyIHhwb3MyID0gcHhwcyAqIChjbGlja2VkLmVuZFRpbWUgLSB0KSAvIDEwMDAgKyB0aW1lbGluZS53aWR0aCgpIC8gMjtcclxuXHRcdFx0XHRpZiAoTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geHBvczIsIDIpICsgTWF0aC5wb3coeTIgLSB0aW1lbGluZS5oZWlnaHQoKSAvIDIsIDIpKSA8PSB0aW1lbGluZS5oZWlnaHQoKSAqIDAuNCkgcmV0dXJuIGNsaWNrZWQ7XHJcblx0XHRcdFx0aWYgKHgyID49IHhwb3MgJiYgeDIgPD0geHBvczIpIHJldHVybiBjbGlja2VkO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgcmVuZGVyZWQgPSBbLi4uRWRpdG9yLnBsYXlmaWVsZF9yZW5kZXJlZF07XHJcblx0XHRcdHJlbmRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuXHRcdFx0XHR2YXIgZHRhID0gYS5zdGFydFRpbWUgLSB0LFxyXG5cdFx0XHRcdFx0ZHRiID0gYi5zdGFydFRpbWUgLSB0O1xyXG5cdFx0XHRcdGlmIChhIGluc3RhbmNlb2YgU2xpZGVyICYmIE1hdGguYWJzKGR0YSkgPCBNYXRoLmFicyhhLmVuZFRpbWUgLSB0KSkgZHRhID0gYS5lbmRUaW1lIC0gdDtcclxuXHRcdFx0XHRpZiAoYiBpbnN0YW5jZW9mIFNsaWRlciAmJiBNYXRoLmFicyhkdGIpIDwgTWF0aC5hYnMoYi5lbmRUaW1lIC0gdCkpIGR0YiA9IGIuZW5kVGltZSAtIHQ7XHJcblx0XHRcdFx0aWYgKE1hdGguYWJzKE1hdGguYWJzKGR0YSkgLSBNYXRoLmFicyhkdGIpKSA9PSAxKSBkdGEgPSBNYXRoLnNpZ24oZHRhKSAqIGR0YjtcclxuXHRcdFx0XHRpZiAoZHRhID09IC1kdGIpIHJldHVybiBkdGE7XHJcblx0XHRcdFx0cmV0dXJuIE1hdGguYWJzKGIuc3RhcnRUaW1lIC0gdCkgLSBNYXRoLmFicyhhLnN0YXJ0VGltZSAtIHQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dmFyIGFyID0gYXJzKEVkaXRvci5iZWF0bWFwLkFwcHJvYWNoUmF0ZSk7XHJcblx0XHRcdHZhciBjcyA9IGNzcHgoRWRpdG9yLmJlYXRtYXAuQ2lyY2xlU2l6ZSk7XHJcblx0XHRcdHZhciBvYmpzVG9DaGVjayA9IHJlbmRlcmVkLmNvbmNhdChFZGl0b3Iuc2VsZWN0ZWQpO1xyXG5cdFx0XHRmb3IgKHZhciBpID0gb2Jqc1RvQ2hlY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0XHR2YXIgb2JqID0gb2Jqc1RvQ2hlY2tbaV07XHJcblx0XHRcdFx0dmFyIHRkID0gKG9iai5zdGFydFRpbWUgLSB0KSAvIDEwMDA7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFNwaW5uZXIpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdGlmIChvYmogaW5zdGFuY2VvZiBIaXRDaXJjbGUgfHwgRWRpdG9yLnNlbGVjdGVkLmluZGV4T2Yob2JqKSAhPSAtMSAmJiAhRWRpdG9yLnBsYXlmaWVsZF9yZW5kZXJlZC5oYXMob2JqKSkge1xyXG5cdFx0XHRcdFx0aWYgKG9iai5wb3NpdGlvbi5kaXN0YW5jZVRvKG5ldyBWZWN0b3IobW91c2VYLCBtb3VzZVkpKSA8PSBjcyAvIDIpIHtcclxuXHRcdFx0XHRcdFx0Y2xpY2tlZCA9IG9iajtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0XHRcdHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKiAwLjc1O1xyXG5cdFx0XHRcdFx0dmFyIHdpZHRoID0gaGVpZ2h0ICogNCAvIDM7XHJcblx0XHRcdFx0XHR2YXIgY3R4MiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzMicpLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRcdFx0XHRjdHgyLnNhdmUoKTtcclxuXHRcdFx0XHRcdGN0eDIudHJhbnNsYXRlKCgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTYpO1xyXG5cdFx0XHRcdFx0Y3R4Mi5zY2FsZSh3aWR0aCAvIDUxMiwgaGVpZ2h0IC8gMzg0KTtcclxuXHRcdFx0XHRcdGN0eDIubGluZVdpZHRoID0gY3MgKiAxMSAvIDEyO1xyXG5cdFx0XHRcdFx0Y3R4Mi5saW5lSm9pbiA9ICdyb3VuZCc7XHJcblx0XHRcdFx0XHRjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG5cdFx0XHRcdFx0aWYgKCFvYmoucGF0aCkge1xyXG5cdFx0XHRcdFx0XHRjdHgyLmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG9iai5zcGxpbmUubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHRjdHgyLmxpbmVUbyhvYmouc3BsaW5lW2pdWzBdLCBvYmouc3BsaW5lW2pdWzFdKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0ZW1wID0gY3R4Mi5pc1BvaW50SW5TdHJva2UocGFnZV9tb3VzZVgsIHBhZ2VfbW91c2VZIC0gJCgnI2dyaWRjYW52YXMyJykub2Zmc2V0KCkudG9wKTtcclxuXHRcdFx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdFx0XHR0ZW1wID0gY3R4Mi5pc1BvaW50SW5TdHJva2Uob2JqLnBhdGgsIHBhZ2VfbW91c2VYLCBwYWdlX21vdXNlWSAtICQoJyNncmlkY2FudmFzMicpLm9mZnNldCgpLnRvcCk7XHJcblx0XHRcdFx0XHRjdHgyLnJlc3RvcmUoKTtcclxuXHRcdFx0XHRcdGlmICh0ZW1wKSB7XHJcblx0XHRcdFx0XHRcdGNsaWNrZWQgPSBvYmo7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNsaWNrZWQ7XHJcblx0fTtcclxuXHJcblx0RWRpdG9yLmRlbGV0ZVNlbGVjdGVkID0gZnVuY3Rpb24gKCkgeyAvLyBDVVJSRU5UTFkgV0hFTiBTVFVGRiBHRVRTIERFTEVURUQgQ09NQk9TIEdFVCBNRVNTRUQgVVAsIENBTExJTkcgaW5pdCgpIENBTiBCRSBBIFRFTVBPUkFSWSBGSVhcclxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgRWRpdG9yLnNlbGVjdGVkLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMuc3BsaWNlKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZihFZGl0b3Iuc2VsZWN0ZWRbal0pLCAxKTtcclxuXHRcdFx0Ly8gY29sbGFiVE9ET1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnNlbGVjdGVkID0gW107XHJcblx0fTtcclxuXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uIChlKSB7IC8vIHJpZ2h0IGNsaWNrIGhhbmRsaW5nXHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR2YXIgY2xpY2tlZCA9IEVkaXRvci5nZXRDdXJPYmooKTtcclxuXHRcdHZhciBpID0gRWRpdG9yLnNlbGVjdGVkLmluZGV4T2YoY2xpY2tlZCk7XHJcblx0XHRpZiAoaSAhPSAtMSkge1xyXG5cdFx0XHRFZGl0b3IuZGVsZXRlU2VsZWN0ZWQoKTtcclxuXHRcdH0gZWxzZSB7IC8vIFNFRSBMSU5FIDQxNVxyXG5cdFx0XHRFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzLnNwbGljZShFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzLmluZGV4T2YoY2xpY2tlZCksIDEpO1xyXG5cdFx0XHQvLyBjb2xsYWJUT0RPXHJcblx0XHR9XHJcblx0XHR2YXIgbyA9IChlLnNyY0VsZW1lbnQgfHwgZS5vcmlnaW5hbFRhcmdldCk7XHJcblx0XHRpZiAoby5tYXRjaGVzKCcjcmlnaHR0b29sYmFyIGltZywgI2xlZnR0b29sYmFyIGltZywgI3RpbWVsaW5lMWMsICNwbGF5Y29udHJvbHMgaW1nJykpIHtcclxuXHRcdFx0dmFyIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcclxuXHRcdFx0ZXYuaW5pdEV2ZW50KCdjbGljaycsIHRydWUsIGZhbHNlKTtcclxuXHRcdFx0by5kaXNwYXRjaEV2ZW50KGV2KTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JCgnI2dyaWRjYW52YXMyLCAjZ3JpZCcpLmRibGNsaWNrKGZ1bmN0aW9uIChlKSB7IC8vIGNsaWNrcyBpbiBwbGF5IGFyZWFcclxuXHRcdHZhciBjbGlja2VkID0gRWRpdG9yLmdldEN1ck9iaigpO1xyXG5cdFx0aWYgKGNsaWNrZWQpIEVkaXRvci5zb3VyY2UudCA9IGNsaWNrZWQuc3RhcnRUaW1lIC8gMTAwMDtcclxuXHRcdC8vIGhhbmRsZSBzbGlkZXIgZW5kL2VkZ2UgZWRpdGluZyBvbmUgZGF5XHJcblx0fSk7XHJcblxyXG5cdHZhciB0aW1lbGluZW1vdmUgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0aWYgKCFFZGl0b3Iuc291cmNlKSByZXR1cm47XHJcblx0XHR2YXIgdHJhY2sgPSAkKCcjdGltZWxpbmV0cmFjaycpO1xyXG5cdFx0dmFyIHcgPSB0cmFjay53aWR0aCgpO1xyXG5cdFx0dmFyIHBjdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBhZ2VfbW91c2VYIC0gdHJhY2sucG9zaXRpb24oKS5sZWZ0LCB3KSkgLyB3O1xyXG5cdFx0dmFyIHBvcyA9IHBjdCAqIEVkaXRvci5zb3VyY2UuZHVyYXRpb247XHJcblx0XHRpZiAocGN0ID49IDEpIEVkaXRvci5zb3VyY2UucGF1c2UoRWRpdG9yLnNvdXJjZS5kdXJhdGlvbik7XHJcblx0XHRlbHNlXHJcblx0XHRcdEVkaXRvci5zb3VyY2Uuc2Vlayhwb3MpO1xyXG5cdFx0RWRpdG9yLnVwZGF0ZSgpO1xyXG5cdH07XHJcblxyXG5cdEVkaXRvci5zZWxlY3QgPSBmdW5jdGlvbiAoeCkge1xyXG5cdFx0aWYgKHggaW5zdGFuY2VvZiBIaXRPYmplY3QpIHtcclxuXHRcdFx0eC5zZWxlY3RlZCA9IHRydWU7XHJcblx0XHRcdEVkaXRvci5zZWxlY3RlZC5wdXNoKHgpO1xyXG5cdFx0fSBlbHNlIGlmICh4IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuXHRcdFx0eC5mb3JFYWNoKChvYmopID0+IHtcclxuXHRcdFx0XHRvYmouc2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0RWRpdG9yLnNlbGVjdGVkID0gRWRpdG9yLnNlbGVjdGVkLmNvbmNhdCh4KTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRFZGl0b3IuZGVzZWxlY3RBbGwgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IEVkaXRvci5zZWxlY3RlZC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRFZGl0b3Iuc2VsZWN0ZWRbaV0uc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHRcdH1cclxuXHRcdEVkaXRvci5zZWxlY3RlZCA9IFtdO1xyXG5cdH07XHJcblxyXG5cdEVkaXRvci5zZXRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoYXJyKSB7XHJcblx0XHRFZGl0b3IuZGVzZWxlY3RBbGwoKTtcclxuXHRcdEVkaXRvci5zZWxlY3QoYXJyKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgbW91c2Vtb3ZlZCA9IGZhbHNlLFxyXG5cdFx0ZWRpdF9tb3VzZWRvd24gPSBmYWxzZSxcclxuXHRcdHNlbGVjdGVkX29mZnNldHggPSAwLCAvLyBvZmZzZXQgb2YgdGhlIG1vdXNlIHBvc2l0aW9uIHRvIHRoZSBhY3R1YWwgcG9zaXRpb24gb2YgdGhlIHByaW1hcnkgc2VsZWN0ZWQgb2JqZWN0XHJcblx0XHRzZWxlY3RlZF9vZmZzZXR5ID0gMCxcclxuXHRcdHNlbGVjdGVkaSA9IDAsIC8vIGluZGV4IGluIEVkaXRvci5zZWxlY3RlZCBvZiB0aGUgcHJpbWFyeSBzZWxlY3RlZCBpdGVtXHJcblx0XHRzZWxlY3RlZHBhcnRzID0gMDsgLy8gYml0IGZsYWcgZm9yIHdoYXQgcGFydChzKSBvZiB0aGUgc2VsZWN0ZWQgb2JqZWN0IGlzIHNlbGVjdGVkXHJcblx0RWRpdG9yLmVkaXRfZHJhZ2dpbmcgPSBmYWxzZSxcclxuXHQkKCcjZ3JpZGNhbnZhczIsICNncmlkJykubW91c2Vkb3duKGZ1bmN0aW9uIChlKSB7IC8vIGNsaWNrcyBpbiBwbGF5IGFyZWFcclxuXHRcdGlmICghRWRpdG9yLmJlYXRtYXApIHJldHVybjtcclxuXHRcdGVkaXRfbW91c2Vkb3duID0gdHJ1ZTtcclxuXHRcdGlmIChFZGl0b3Iub3B0aW9ucy50b29sID09PSAwKSB7XHJcblx0XHRcdHZhciBjbGlja2VkID0gRWRpdG9yLmdldEN1ck9iaigpO1xyXG5cdFx0XHRpZiAoY2xpY2tlZCkge1xyXG5cdFx0XHRcdGNsaWNrZWQuc2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdHNlbGVjdGVkX29mZnNldHggPSBtb3VzZVggLSBjbGlja2VkLnBvc2l0aW9uLng7XHJcblx0XHRcdFx0c2VsZWN0ZWRfb2Zmc2V0eSA9IG1vdXNlWSAtIGNsaWNrZWQucG9zaXRpb24ueTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpID0gRWRpdG9yLnNlbGVjdGVkLmluZGV4T2YoY2xpY2tlZCk7XHJcblx0XHRcdGlmIChpICE9IC0xKSB7XHJcblx0XHRcdFx0c2VsZWN0ZWRpID0gaTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFlLmN0cmxLZXkgfHwgIWNsaWNrZWQpIHtcclxuXHRcdFx0XHRFZGl0b3IuZGVzZWxlY3RBbGwoKTtcclxuXHRcdFx0XHRpZiAoY2xpY2tlZCkgRWRpdG9yLnNlbGVjdGVkID0gW2NsaWNrZWRdO1xyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0RWRpdG9yLmVkaXRfZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0RWRpdG9yLmRyYWdfc3RhcnR4ID0gbW91c2VYO1xyXG5cdFx0XHRcdFx0RWRpdG9yLmRyYWdfc3RhcnR5ID0gbW91c2VZO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRFZGl0b3Iuc2VsZWN0ZWQucHVzaChjbGlja2VkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzZWxlY3RlZGkgPSBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoID8gRWRpdG9yLnNlbGVjdGVkLmxlbmd0aCAtIDEgOiAwO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnJlbmRlcnVwZGF0ZSgpO1xyXG5cdH0pO1xyXG5cclxuXHR2YXIgc2VsZWN0ZWRfb2Zmc2V0dCA9IDA7XHJcblx0RWRpdG9yLnRpbWVsaW5lMl9tb3VzZWRvd24gPSBmYWxzZTtcclxuXHRFZGl0b3IuZHJhZ19zdGFydHQgPSAwO1xyXG5cdEVkaXRvci50aW1lbGluZTJfZHJhZ2dpbmcgPSBmYWxzZSxcclxuXHRFZGl0b3IudGltZWxpbmUyX29iamVuZCA9IGZhbHNlO1xyXG5cdEVkaXRvci5zY3JvbGxfaW50ZXJ2YWwgPSBmYWxzZTtcclxuXHQkKCcjdGltZWxpbmUyJykubW91c2Vkb3duKGZ1bmN0aW9uIChlKSB7XHJcblx0XHRpZiAoIUVkaXRvci5iZWF0bWFwKSByZXR1cm47XHJcblx0XHRFZGl0b3IudGltZWxpbmUyX21vdXNlZG93biA9IHRydWU7XHJcblx0XHQkKCcjbGVmdHRvb2xiYXIgaW1nJykucmVtb3ZlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0JCgnI2RyYXdfc2VsZWN0JykuYWRkQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDA7XHJcblx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cdFx0dmFyIGR4ID0gKHBhZ2VfbW91c2VYIC0gJHRoaXMub2Zmc2V0KCkubGVmdCAtICR0aGlzLndpZHRoKCkgLyAyKSxcclxuXHRcdFx0cHhwcyA9ICR0aGlzLndpZHRoKCkgLyA2ICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tLFxyXG5cdFx0XHR0aW1lX2NsaWNrZWQgPSBFZGl0b3Iuc291cmNlLnQgKyBkeCAvIHB4cHM7XHJcblx0XHR2YXIgY2xpY2tlZCA9IEVkaXRvci5nZXRDdXJPYmooKTtcclxuXHRcdGlmIChjbGlja2VkKSB7XHJcblx0XHRcdGNsaWNrZWQuc2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRzZWxlY3RlZF9vZmZzZXR0ID0gdGltZV9jbGlja2VkIC0gKEVkaXRvci50aW1lbGluZTJfb2JqZW5kID8gY2xpY2tlZC5lbmRUaW1lIC8gMTAwMCA6IGNsaWNrZWQuc3RhcnRUaW1lIC8gMTAwMCk7XHJcblx0XHR9XHJcblx0XHRpID0gRWRpdG9yLnNlbGVjdGVkLmluZGV4T2YoY2xpY2tlZCk7XHJcblx0XHRpZiAoaSAhPSAtMSkge1xyXG5cdFx0XHRzZWxlY3RlZGkgPSBpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIWUuY3RybEtleSB8fCAhY2xpY2tlZCkge1xyXG5cdFx0XHRFZGl0b3IuZGVzZWxlY3RBbGwoKTtcclxuXHRcdFx0aWYgKGNsaWNrZWQpIEVkaXRvci5zZWxlY3RlZCA9IFtjbGlja2VkXTtcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0RWRpdG9yLnRpbWVsaW5lMl9kcmFnZ2luZyA9IHRydWU7XHJcblx0XHRcdFx0RWRpdG9yLmRyYWdfc3RhcnR0ID0gdGltZV9jbGlja2VkO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRFZGl0b3Iuc2VsZWN0ZWQucHVzaChjbGlja2VkKTtcclxuXHRcdH1cclxuXHRcdHNlbGVjdGVkaSA9IEVkaXRvci5zZWxlY3RlZC5sZW5ndGggPyBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoIC0gMSA6IDA7XHJcblx0XHRFZGl0b3IucmVuZGVydXBkYXRlKCk7XHJcblx0fSk7XHJcblxyXG5cdHZhciB0aW1lbGluZV9tb3VzZWRvd24gPSBmYWxzZTtcclxuXHQkKCcjdGltZWxpbmUxYycpLm1vdXNlZG93bihmdW5jdGlvbiAoZSkge1xyXG5cdFx0dGltZWxpbmVfbW91c2Vkb3duID0gdHJ1ZTtcclxuXHRcdHRpbWVsaW5lbW92ZShlKTtcclxuXHR9KTtcclxuXHJcblx0JChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAobW91c2Vtb3ZlZCkgRWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHRcdG1vdXNlbW92ZWQgPSBmYWxzZTtcclxuXHRcdHRpbWVsaW5lX21vdXNlZG93biA9IGZhbHNlO1xyXG5cdFx0ZWRpdF9tb3VzZWRvd24gPSBmYWxzZTtcclxuXHRcdEVkaXRvci5lZGl0X2RyYWdnaW5nID0gZmFsc2U7XHJcblx0XHRFZGl0b3IudGltZWxpbmUyX21vdXNlZG93biA9IGZhbHNlO1xyXG5cdFx0RWRpdG9yLnRpbWVsaW5lMl9kcmFnZ2luZyA9IGZhbHNlO1xyXG5cdFx0RWRpdG9yLnJlbmRlcnVwZGF0ZSgpO1xyXG5cdH0pO1xyXG5cclxuXHR2YXIgc25hcF9ncmlkID0gZnVuY3Rpb24gKG4pIHtcclxuXHRcdHZhciBkID0gRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPyBNYXRoLnBvdygyLCBFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwgKyAxKSA6IDE7XHJcblx0XHRyZXR1cm4gTWF0aC5yb3VuZChuIC8gZCkgKiBkO1xyXG5cdH07XHJcblxyXG5cdHZhciBzbmFwX2JlYXQgPSBmdW5jdGlvbiAodCkge1xyXG5cdFx0dmFyIHRwdCA9IEVkaXRvci5iZWF0bWFwLmdldFRpbWluZ1BvaW50KHQgKiAxMDAwKTtcclxuXHRcdHJldHVybiBzbmFwKHQsIHRwdC5iYXNlT2Zmc2V0IC8gMTAwMCwgdHB0LmJlYXRMZW5ndGggLyAxMDAwIC8gRWRpdG9yLm9wdGlvbnMuYmVhdHNuYXBkaXZpc29yKTtcclxuXHR9O1xyXG5cclxuXHRFZGl0b3IudXBkYXRlTW91c2VMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKiAwLjc1O1xyXG5cdFx0dmFyIHdpZHRoID0gaGVpZ2h0ICogNCAvIDM7XHJcblx0XHR2YXIgcHJldm1vdXNlWCA9IG1vdXNlWCxcclxuXHRcdFx0cHJldm1vdXNlWSA9IG1vdXNlWTtcclxuXHRcdG1vdXNlWCA9IChwYWdlX21vdXNlWCAtICQoJyNncmlkJykub2Zmc2V0KCkubGVmdCkgLyB3aWR0aCAqIDUxMjtcclxuXHRcdG1vdXNlWSA9IChwYWdlX21vdXNlWSAtICQoJyNncmlkJykub2Zmc2V0KCkudG9wKSAvIGhlaWdodCAqIDM4NDtcclxuXHRcdHNuYXBwZWRfbW91c2VYID0gc25hcF9ncmlkKG1vdXNlWCk7XHJcblx0XHRzbmFwcGVkX21vdXNlWSA9IHNuYXBfZ3JpZChtb3VzZVkpO1xyXG5cclxuXHRcdGlmICh0aW1lbGluZV9tb3VzZWRvd24pXHJcblx0XHRcdHRpbWVsaW5lbW92ZShlKTtcclxuXHRcdGVsc2UgaWYgKGVkaXRfbW91c2Vkb3duKSB7XHJcblx0XHRcdGlmKEVkaXRvci5lZGl0X2RyYWdnaW5nKSB7XHJcblx0XHRcdFx0bGV0IFttaW54LCBtYXh4XSA9IG1vdXNlWCA+IEVkaXRvci5kcmFnX3N0YXJ0eCA/IFtFZGl0b3IuZHJhZ19zdGFydHgsIG1vdXNlWF0gOiBbbW91c2VYLCBFZGl0b3IuZHJhZ19zdGFydHhdO1xyXG5cdFx0XHRcdGxldCBbbWlueSwgbWF4eV0gPSBtb3VzZVkgPiBFZGl0b3IuZHJhZ19zdGFydHkgPyBbRWRpdG9yLmRyYWdfc3RhcnR5LCBtb3VzZVldIDogW21vdXNlWSwgRWRpdG9yLmRyYWdfc3RhcnR5XTtcclxuXHRcdFx0XHRFZGl0b3Iuc2V0U2VsZWN0aW9uKFsuLi5FZGl0b3IucGxheWZpZWxkX3JlbmRlcmVkXS5maWx0ZXIoKG8pID0+IHtcclxuXHRcdFx0XHRcdHJldHVybiBvLnBvc2l0aW9uLnggPj0gbWlueCAmJiBvLnBvc2l0aW9uLnggPD0gbWF4eCAmJiBvLnBvc2l0aW9uLnkgPj0gbWlueSAmJiBvLnBvc2l0aW9uLnkgPD0gbWF4eTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIG5ld3ggPSBNYXRoLm1pbig1MTIsIE1hdGgubWF4KDAsIHNuYXBfZ3JpZChtb3VzZVggLSBzZWxlY3RlZF9vZmZzZXR4KSkpO1xyXG5cdFx0XHRcdHZhciBuZXd5ID0gTWF0aC5taW4oMzg0LCBNYXRoLm1heCgwLCBzbmFwX2dyaWQobW91c2VZIC0gc2VsZWN0ZWRfb2Zmc2V0eSkpKTtcclxuXHRcdFx0XHQvLyBhZGQgbW9yZSBzdHVmZiB0byBrZWVwIHRoZSB3aG9sZSBzZWxlY3Rpb24gaW4gdGhlIHBsYXkgYXJlYVxyXG5cdFx0XHRcdHZhciBkeCA9IG5ld3ggLSBFZGl0b3Iuc2VsZWN0ZWRbc2VsZWN0ZWRpXS5wb3NpdGlvbi54LFxyXG5cdFx0XHRcdGR5ID0gbmV3eSAtIEVkaXRvci5zZWxlY3RlZFtzZWxlY3RlZGldLnBvc2l0aW9uLnk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGxldCBvYmogPSBFZGl0b3Iuc2VsZWN0ZWRbaV07XHJcblx0XHRcdFx0XHRFZGl0b3IuTWFwVXRpbHMubW92ZU9iamVjdChFZGl0b3Iuc2VsZWN0ZWRbaV0sIGR4LCBkeSk7XHJcblx0XHRcdFx0XHRFZGl0b3Iuc29ja2V0LmVkaXRfbW92ZShvYmouaWQsIG9iai5wb3NpdGlvbi54LCBvYmoucG9zaXRpb24ueSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKEVkaXRvci50aW1lbGluZTJfbW91c2Vkb3duKSB7XHJcblx0XHRcdHZhciB0aW1lbGluZSA9ICQoJyN0aW1lbGluZTInKSxcclxuXHRcdFx0XHRkeCA9IChwYWdlX21vdXNlWCAtIHRpbWVsaW5lLm9mZnNldCgpLmxlZnQgLSB0aW1lbGluZS53aWR0aCgpIC8gMiksXHJcblx0XHRcdFx0cHhwcyA9IHRpbWVsaW5lLndpZHRoKCkgLyA2ICogRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tLFxyXG5cdFx0XHRcdG1vdXNlVCA9IEVkaXRvci5zb3VyY2UudCArIGR4IC8gcHhwcztcclxuXHRcdFx0XHRpZiAoRWRpdG9yLnRpbWVsaW5lMl9kcmFnZ2luZykge1xyXG5cdFx0XHRcdHZhciB0ZW1wID0gW107XHJcblx0XHRcdFx0bGV0IFttaW50LCBtYXh0XSA9IG1vdXNlVCA+IEVkaXRvci5kcmFnX3N0YXJ0dCA/IFtFZGl0b3IuZHJhZ19zdGFydHQsIG1vdXNlVF0gOiBbbW91c2VULCBFZGl0b3IuZHJhZ19zdGFydHRdO1xyXG5cdFx0XHRcdG1pbnQgKj0gMTAwMDtcclxuXHRcdFx0XHRtYXh0ICo9IDEwMDA7XHJcblx0XHRcdFx0bGV0IFttaW5pLCBtYXhpXSA9IFttaW50LCBtYXh0XS5tYXAoKGkpID0+IHsgcmV0dXJuIEVkaXRvci5iZWF0bWFwLmdldEluZGV4QXQoaSk7IH0pO1xyXG5cdFx0XHRcdGZvciAodmFyIGkgPSBtaW5pOyBpIDw9IG1heGk7IGkrKykge1xyXG5cdFx0XHRcdFx0bGV0IG8gPSBFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzW2ldO1xyXG5cdFx0XHRcdFx0aWYgKChvLnN0YXJ0VGltZSA+PSBtaW50ICYmIG8uc3RhcnRUaW1lIDw9IG1heHQpIHx8ICghKG8gaW5zdGFuY2VvZiBIaXRDaXJjbGUpICYmIChvLmVuZFRpbWUgPj0gbWludCAmJiBvLmVuZFRpbWUgPD0gbWF4dCkpKVxyXG5cdFx0XHRcdFx0XHR0ZW1wLnB1c2gobyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdEVkaXRvci5zZXRTZWxlY3Rpb24odGVtcCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoc2VsZWN0ZWRpIGluIEVkaXRvci5zZWxlY3RlZCkge1xyXG5cdFx0XHRcdGlmIChFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoIDwgMiAmJiBFZGl0b3IudGltZWxpbmUyX29iamVuZCkge1xyXG5cdFx0XHRcdFx0dmFyIG9iaiA9IEVkaXRvci5zZWxlY3RlZFtzZWxlY3RlZGldO1xyXG5cdFx0XHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFNwaW5uZXIpIHtcclxuXHRcdFx0XHRcdFx0dmFyIG5ld3QgPSBzbmFwX2JlYXQoTWF0aC5taW4oRWRpdG9yLnNvdXJjZS5kdXJhdGlvbiwgTWF0aC5tYXgoMCwgbW91c2VUIC0gc2VsZWN0ZWRfb2Zmc2V0dCkpKSAqIDEwMDA7XHJcblx0XHRcdFx0XHRcdGlmIChuZXd0ID4gb2JqLnN0YXJ0VGltZSArIDEpIHtcclxuXHRcdFx0XHRcdFx0XHRvYmouZW5kVGltZSA9IG5ld3Q7XHJcblx0XHRcdFx0XHRcdFx0b2JqLmR1cmF0aW9uID0gb2JqLmVuZFRpbWUgLSBvYmouc3RhcnRUaW1lO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vY29sbGFiIHRvZG9cclxuXHRcdFx0XHRcdFx0Ly9FZGl0b3Iuc29ja2V0LmR1cmF0aW9uY2hhbmdlKD8pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0XHRcdFx0dmFyIG5ld3IgPSBNYXRoLnJvdW5kKChtb3VzZVQgLSBzZWxlY3RlZF9vZmZzZXR0KSAqIDEwMDAgLyBvYmouZHVyYXRpb24pO1xyXG5cdFx0XHRcdFx0XHR2YXIgbmV3dCA9IG5ld3IgKiBvYmouZHVyYXRpb247XHJcblx0XHRcdFx0XHRcdG5ld3QgPSBNYXRoLm1pbihFZGl0b3Iuc291cmNlLmR1cmF0aW9uLCBNYXRoLm1heCgwLCBtb3VzZVQgLSBzZWxlY3RlZF9vZmZzZXR0KSk7XHJcblx0XHRcdFx0XHRcdGlmIChuZXd0ID4gb2JqLnN0YXJ0VGltZSArIDEgJiYgbmV3dCAhPSBvYmouZW5kVGltZSkge1xyXG5cdFx0XHRcdFx0XHRcdG9iai5lbmRUaW1lID0gbmV3dDtcclxuXHRcdFx0XHRcdFx0XHRvYmouZHVyYXRpb24gPSBvYmouZW5kVGltZSAtIG9iai5zdGFydFRpbWU7XHJcblx0XHRcdFx0XHRcdFx0b2JqLnJlcGVhdENvdW50ID0gbmV3cjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVx0XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHZhciBuZXd0ID0gc25hcF9iZWF0KE1hdGgubWluKEVkaXRvci5zb3VyY2UuZHVyYXRpb24sIE1hdGgubWF4KDAsIG1vdXNlVCAtIHNlbGVjdGVkX29mZnNldHQpKSk7XHJcblx0XHRcdFx0XHR2YXIgZHQgPSBuZXd0IC0gRWRpdG9yLnNlbGVjdGVkW3NlbGVjdGVkaV0uc3RhcnRUaW1lIC8gMTAwMDtcclxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgRWRpdG9yLnNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdGxldCBvYmogPSBFZGl0b3Iuc2VsZWN0ZWRbaV07XHJcblx0XHRcdFx0XHRcdGxldCBzZXJpYWxpemVkID0gb2JqLnNlcmlhbGl6ZSgpO1xyXG5cdFx0XHRcdFx0XHRpZiAob2JqIGluc3RhbmNlb2YgU2xpZGVyIHx8IG9iaiBpbnN0YW5jZW9mIFNwaW5uZXIpXHJcblx0XHRcdFx0XHRcdFx0b2JqLmVuZFRpbWUgKz0gZHQgKiAxMDAwO1xyXG5cdFx0XHRcdFx0XHRvYmouc3RhcnRUaW1lICs9IGR0ICogMTAwMDtcclxuXHRcdFx0XHRcdFx0Ly8gSU1QT1JUQU5UOiBDSEFOR0UgVEhFIE9SREVSIE9GIFNUVUZGIElOIGJlYXRtYXAuSGl0T2JqZWN0cyAhISEhISBUT0RPISEhISFcclxuXHRcdFx0XHRcdFx0Ly8gY29sbGFiVE9ET1xyXG5cdFx0XHRcdFx0XHQvL0VkaXRvci5zb2NrZXQuZWRpdF9tb3ZldChzZXJpYWxpemVkLCBvYmouc3RhcnRUaW1lKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZnVuY3Rpb24gaXNUaW1lbGluZVNjcm9sbCgpIHtcclxuXHRcdFx0XHRyZXR1cm4gRWRpdG9yLnRpbWVsaW5lMl9tb3VzZWRvd24gJiYgIUVkaXRvci5zb3VyY2UucGxheWluZyAmJiAocGFnZV9tb3VzZVggPCB0aW1lbGluZS5vZmZzZXQoKS5sZWZ0IHx8IHBhZ2VfbW91c2VYID4gdGltZWxpbmUub2Zmc2V0KCkubGVmdCArIHRpbWVsaW5lLndpZHRoKCkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChpc1RpbWVsaW5lU2Nyb2xsKCkgJiYgIUVkaXRvci5zY3JvbGxfaW50ZXJ2YWwpIHtcclxuXHRcdFx0XHRFZGl0b3Iuc2Nyb2xsX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAoIWlzVGltZWxpbmVTY3JvbGwoKSkge1xyXG5cdFx0XHRcdFx0XHRjbGVhckludGVydmFsKEVkaXRvci5zY3JvbGxfaW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0XHRFZGl0b3Iuc2Nyb2xsX2ludGVydmFsID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRsZXQgbiA9IHBhZ2VfbW91c2VYIC0gdGltZWxpbmUub2Zmc2V0KCkubGVmdCAtIHRpbWVsaW5lLndpZHRoKCkgLyAyOyAvLyBtb3VzZXggcmVsYXRpdmUgdG8gY2VudGVyIG9mIHRpbWVsaW5lXHJcblx0XHRcdFx0XHRcdG4gLT0gTWF0aC5zaWduKG4pICogdGltZWxpbmUud2lkdGgoKSAvIDI7IC8vIGNoYW5nZSBuIHNvIGl0IGlzIGEgbWVhc3VyZSBvZiBob3cgZmFyIG91dHNpZGUgdGhlIHRpbWVsaW5lIGl0IGlzXHJcblx0XHRcdFx0XHRcdGlmIChuID4gMiAqIHRpbWVsaW5lLm9mZnNldCgpLmxlZnQpIG4gPSAyICogdGltZWxpbmUub2Zmc2V0KCkubGVmdDsgLy8gcmlnaHQgc2lkZSBjYXBzIGRpc3RhbmNlIGF0IDJ4IHRoZSBsZW5ndGggb2YgdGhlIGxlZnQgKGFyYml0cmFyeSlcclxuXHRcdFx0XHRcdFx0RWRpdG9yLnNvdXJjZS50ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oRWRpdG9yLnNvdXJjZS5kdXJhdGlvbiwgRWRpdG9yLnNvdXJjZS50ICsgbiAvIDYgLyBNYXRoLnBvdyg2ICsgRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tLCAyKSkpO1xyXG5cdFx0XHRcdFx0XHRFZGl0b3IudXBkYXRlVGltZSgpO1xyXG5cdFx0XHRcdFx0XHRFZGl0b3IucmVuZGVydXBkYXRlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMTApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgeyB9XHJcblx0XHRFZGl0b3IucmVuZGVydXBkYXRlKCk7XHJcblxyXG5cdFx0dmFyIHRlbXB4LCB0ZW1weTtcclxuXHRcdGlmIChFZGl0b3Iuc2xpZGVycHRfaG92ZXJlZCkge1xyXG5cdFx0XHR0ZW1weCA9IEVkaXRvci5zbGlkZXJwdF9ob3ZlcmVkLngsIHRlbXB5ID0gRWRpdG9yLnNsaWRlcnB0X2hvdmVyZWQueTtcclxuXHRcdH0gZWxzZSBpZiAoRWRpdG9yLnNlbGVjdGVkLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0dGVtcHggPSBFZGl0b3Iuc2VsZWN0ZWRbc2VsZWN0ZWRpXS5wb3NpdGlvbi54LCB0ZW1weSA9IEVkaXRvci5zZWxlY3RlZFtzZWxlY3RlZGldLnBvc2l0aW9uLnk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0ZW1weCA9IHNuYXBwZWRfbW91c2VYLCB0ZW1weSA9IHNuYXBwZWRfbW91c2VZO1xyXG5cdFx0fVxyXG5cdFx0JCgnI21vdXNlcG9zJykuaHRtbCgneDonICsgdGVtcHggKyAnIHk6JyArIHRlbXB5KTtcclxuXHR9O1xyXG5cclxuXHR2YXIgY2FwdHVyZU1vdXNlTG9jYXRpb24gPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0aWYgKHBhZ2VfbW91c2VYID09IGUucGFnZVggJiYgcGFnZV9tb3VzZVkgPT0gZS5wYWdlWSkgcmV0dXJuO1xyXG5cdFx0aWYgKHRpbWVsaW5lX21vdXNlZG93biB8fCBlZGl0X21vdXNlZG93biB8fCBFZGl0b3IudGltZWxpbmUyX21vdXNlZG93bikgbW91c2Vtb3ZlZCA9IHRydWU7XHJcblx0XHRwYWdlX21vdXNlWCA9IGUucGFnZVg7XHJcblx0XHRwYWdlX21vdXNlWSA9IGUucGFnZVk7XHJcblx0XHRFZGl0b3IudXBkYXRlTW91c2VMb2NhdGlvbigpO1xyXG5cdH07XHJcblxyXG5cdHZhciB3aGVlbHVwZGF0ZSA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRpZiAoZS5hbHRLZXkpIHtcclxuXHRcdFx0aWYgKGlzTW91c2VpbkVsZW1lbnQoJyNncmlkJykpXHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzcGFjaW5nID0gTWF0aC5taW4oNiwgTWF0aC5tYXgoMC4xLCBFZGl0b3Iub3B0aW9ucy5kaXN0YW5jZXNwYWNpbmcgKyAoZS53aGVlbERlbHRhIHx8IC1lLmRldGFpbCkgLyAxMjAwKSk7XHJcblx0XHRcdGVsc2UgaWYgKGlzTW91c2VpbkVsZW1lbnQoJyN0aW1lbGluZTInKSlcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gPSBNYXRoLm1pbig4LCBNYXRoLm1heCgwLjQsIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSArIChlLndoZWVsRGVsdGEgfHwgLWUuZGV0YWlsKSAvIDEyMDApKTtcclxuXHRcdFx0ZWxzZSBpZiAoRWRpdG9yLnNvdXJjZSlcclxuXHRcdFx0XHRFZGl0b3Iuc291cmNlLnZvbHVtZSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIEVkaXRvci5zb3VyY2Uudm9sdW1lICsgKGUud2hlZWxEZWx0YSB8fCAtZS5kZXRhaWwpIC8gMjQwMCkpO1xyXG5cdFx0fSBlbHNlIGlmIChlLmN0cmxLZXkpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5iZWF0c25hcGRpdmlzb3IgPSBNYXRoLm1pbigxNiwgTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihFZGl0b3Iub3B0aW9ucy5iZWF0c25hcGRpdmlzb3IgKiBNYXRoLnBvdygyLCAoZS53aGVlbERlbHRhIHx8IC1lLmRldGFpbCkgLyAxMjApKSkpO1xyXG5cdFx0fSBlbHNlIGlmIChFZGl0b3Iuc291cmNlICYmIEVkaXRvci5iZWF0bWFwKSB7XHJcblx0XHRcdHZhciB0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludChFZGl0b3Iuc291cmNlLnQgKiAxMDAwKTtcclxuXHRcdFx0dmFyIHBvcyA9IE1hdGgubWluKEVkaXRvci5zb3VyY2UuZHVyYXRpb24sXHJcblx0XHRcdFx0TWF0aC5tYXgoMCwgRWRpdG9yLnNvdXJjZS50IC0gKChlLndoZWVsRGVsdGEgfHwgLWUuZGV0YWlsKSAvIDEyMCAqXHJcblx0XHRcdFx0XHR0cHQuYmVhdExlbmd0aCAvIDEwMDAgL1xyXG5cdFx0XHRcdFx0KEVkaXRvci5zb3VyY2UucGxheWluZyA/IDEgOiBFZGl0b3Iub3B0aW9ucy5iZWF0c25hcGRpdmlzb3IpICpcclxuXHRcdFx0XHRcdChlLnNoaWZ0S2V5ID8gdHB0LnRpbWluZ1NpZ25hdHVyZSA6IDEpKSkpO1xyXG5cdFx0XHR0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludChwb3MgKiAxMDAwKTtcclxuXHRcdFx0aWYgKHBvcyA+PSBFZGl0b3Iuc291cmNlLmR1cmF0aW9uKSBFZGl0b3Iuc291cmNlLnBhdXNlKEVkaXRvci5zb3VyY2UuZHVyYXRpb24pO1xyXG5cdFx0XHRlbHNlIGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpXHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS5wbGF5KHBvcyk7XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdEVkaXRvci5zb3VyY2UucGF1c2Uoc25hcChwb3MsIHRwdC5iYXNlT2Zmc2V0IC8gMTAwMCwgdHB0LmJlYXRMZW5ndGggLyAxMDAwIC8gKGUuc2hpZnRLZXkgPyAxIDogRWRpdG9yLm9wdGlvbnMuYmVhdHNuYXBkaXZpc29yKSkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGNhcHR1cmVNb3VzZUxvY2F0aW9uLCBmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgd2hlZWx1cGRhdGUpO1xyXG5cclxuXHR2YXIgY29udHJvbGNsaWNrZWQgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG5cdFx0ZWxlbS5yZW1vdmVDbGFzcyhcInNjYWxhYmxlXCIpO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGVsZW0uYWRkQ2xhc3MoXCJzY2FsYWJsZVwiKTtcclxuXHRcdH0sIDQwKTtcclxuXHR9O1xyXG5cclxuXHQkKCcjZWRpdG9ycGxheScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHRcdGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpIEVkaXRvci5zb3VyY2UucGxheSgwKTtcclxuXHRcdFx0ZWxzZSBFZGl0b3Iuc291cmNlLnBsYXkoKTtcclxuXHRcdFx0RWRpdG9yLnVwZGF0ZSgpO1xyXG5cdFx0fVxyXG5cdFx0Y29udHJvbGNsaWNrZWQoJCh0aGlzKSk7XHJcblx0fSk7XHJcblxyXG5cdCQoJyNlZGl0b3JwYXVzZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHRcdGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpIEVkaXRvci5zb3VyY2UucGF1c2UoKTtcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS5wbGF5KCk7XHJcblx0XHRcdFx0RWRpdG9yLnVwZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRjb250cm9sY2xpY2tlZCgkKHRoaXMpKTtcclxuXHR9KTtcclxuXHJcblx0JCgnI2VkaXRvcnN0b3AnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoRWRpdG9yLnNvdXJjZSlcclxuXHRcdFx0RWRpdG9yLnNvdXJjZS5wYXVzZSgwKTtcclxuXHRcdGNvbnRyb2xjbGlja2VkKCQodGhpcykpO1xyXG5cdH0pO1xyXG5cclxuXHQkKCcjZnVsbHNjcmVlbicpLmNsaWNrKHRvZ2dsZUZ1bGxTY3JlZW4pO1xyXG5cclxuXHQkKCcjem9vbWluJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0RWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tID0gTWF0aC5taW4oOCwgRWRpdG9yLm9wdGlvbnMudGltZWxpbmV6b29tICsgMC4xKTtcclxuXHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHR9KTtcclxuXHJcblx0JCgnI3pvb21vdXQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblx0XHRFZGl0b3Iub3B0aW9ucy50aW1lbGluZXpvb20gPSBNYXRoLm1heCgwLjQsIEVkaXRvci5vcHRpb25zLnRpbWVsaW5lem9vbSAtIDAuMSk7XHJcblx0XHRFZGl0b3IudXBkYXRlKCk7XHJcblx0fSk7XHJcblxyXG5cdCQoJyNyaWdodHRvb2xiYXIgaW1nJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRzd2l0Y2ggKHRoaXMuaWQpIHtcclxuXHRcdFx0Y2FzZSAnZHJhd19uZXdjb21ibyc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMubmNvcHQgPSAhRWRpdG9yLm9wdGlvbnMubmNvcHQ7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NvdW5kX3doaXN0bGUnOlxyXG5cdFx0XHRcdEVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1swXSA9ICFFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMF07XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3NvdW5kX2ZpbmlzaCc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzFdID0gIUVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1sxXTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc291bmRfY2xhcCc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzJdID0gIUVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1syXTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnZHJhd19iZWF0c25hcCc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHRcdFx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnZHJhd19kaXN0c25hcCc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwID0gIUVkaXRvci5vcHRpb25zLmRpc3RhbmNlc25hcDtcclxuXHRcdFx0XHRFZGl0b3IudXBkYXRlTW91c2VMb2NhdGlvbigpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcblx0JCgnI2xlZnR0b29sYmFyIGltZycpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHRcdCQoJyNsZWZ0dG9vbGJhciBpbWcnKS5yZW1vdmVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHQkKHRoaXMpLmFkZENsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdEVkaXRvci5vcHRpb25zLnRvb2wgPSAkKHRoaXMpLmluZGV4KCk7XHJcblx0fSk7XHJcblxyXG5cdHZhciBrZXlwcmVzc2hhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0dmFyIGRhdGE7XHJcblx0XHR2YXIgY29kZSA9ICh3aW5kb3cuZXZlbnQpID8gZXZlbnQua2V5Q29kZSA6IGUua2V5Q29kZTtcclxuXHRcdGlmICghKGNvZGUgPT0gMTIyIHx8IGNvZGUgPT0gMTIzKSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9XHJcblx0XHRpZiAoa2V5Y29kZWRiZykgY29uc29sZS5sb2coXCJrZXljb2RlOiBcIiwgY29kZSk7XHJcblx0XHRpZiAoIWtleU1hcFsxNl0gJiYgY29kZSA9PSAxNikge1xyXG5cdFx0XHQkKCcjZHJhd19iZWF0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHR9XHJcblx0XHRpZiAoIWtleU1hcFsxOF0gJiYgY29kZSA9PSAxOCkge1xyXG5cdFx0XHQkKCcjZHJhd19kaXN0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwID0gIUVkaXRvci5vcHRpb25zLmRpc3RhbmNlc25hcDtcclxuXHRcdH1cclxuXHRcdGtleU1hcFtjb2RlXSA9IHRydWU7XHJcblx0XHRpZiAoKGNvZGUgPT0gNjcgfHwgY29kZSA9PSAzMikgJiYgRWRpdG9yLnNvdXJjZSkgeyAvL2MsIHNwYWNlXHJcblx0XHRcdGlmIChjb2RlID09IDY3ICYmIGUuY3RybEtleSkgeyAvL2N0cmwtY1xyXG5cdFx0XHRcdGlmIChFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0ZGF0YSA9IGNvcHlTdHJpbmdGcm9tT2JqZWN0cyhFZGl0b3Iuc2VsZWN0ZWQpO1xyXG5cdFx0XHRcdFx0Y29weVRleHRUb0NsaXBib2FyZChkYXRhKTtcclxuXHRcdFx0XHRcdEVkaXRvci5jb3B5RGF0YSA9IGRhdGE7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnY29waWVkOiAnICsgZGF0YSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdub3RoaW5nIGNvcGllZCEnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoIWUuY3RybEtleSkge1xyXG5cdFx0XHRcdGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpIEVkaXRvci5zb3VyY2UucGF1c2UoKTtcclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdEVkaXRvci5zb3VyY2UucGxheSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDg5KSB7IC8veVxyXG5cdFx0XHRpZiAoZS5jdHJsS2V5KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3JlZG8nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDkwKSB7IC8velxyXG5cdFx0XHRpZiAoZS5jdHJsS2V5KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3VuZG8nKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRFZGl0b3Iuc291cmNlLnNlZWsoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1swXS5zdGFydFRpbWUgLyAxMDAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDg4KSB7IC8veFxyXG5cdFx0XHRpZiAoZS5jdHJsS2V5KSB7IC8vY3RybC14XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2N1dCcpO1xyXG5cdFx0XHRcdGRhdGEgPSAnaGknO1xyXG5cdFx0XHRcdGNvcHlUZXh0VG9DbGlwYm9hcmQoZGF0YSk7XHJcblx0XHRcdFx0RWRpdG9yLmNvcHlEYXRhID0gZGF0YTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAoRWRpdG9yLnNvdXJjZSlcclxuXHRcdFx0XHRcdEVkaXRvci5zb3VyY2UucGxheSgwKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDg2KSB7IC8vdlxyXG5cdFx0XHRpZiAoZS5jdHJsS2V5KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3Bhc3RlJyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSAzNyB8fCBjb2RlID09IDM5KSB7IC8vbGVmdCAmIHJpZ2h0XHJcblx0XHRcdGlmIChlLmN0cmxLZXkgJiYgRWRpdG9yLnNlbGVjdGVkKSB7XHJcblx0XHRcdFx0bGV0IGR4ID0gY29kZSA9PSAzNyA/IC0xIDogMTtcclxuXHRcdFx0XHRpZiAoRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXApIHtcclxuXHRcdFx0XHRcdGR4ICo9IE1hdGgucG93KDIsIEVkaXRvci5vcHRpb25zLmdyaWRsZXZlbCArIDEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoRWRpdG9yLnNlbGVjdGVkLnNvbWUob2JqID0+IG9iai5wb3NpdGlvbi54ICsgZHggPCAwIHx8IG9iai5wb3NpdGlvbi54ID4gNTEyKSlcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IEVkaXRvci5zZWxlY3RlZC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0bGV0IG9iaiA9IEVkaXRvci5zZWxlY3RlZFtpXTtcclxuXHRcdFx0XHRcdEVkaXRvci5NYXBVdGlscy5tb3ZlT2JqZWN0KEVkaXRvci5zZWxlY3RlZFtpXSwgZHgsIDApO1xyXG5cdFx0XHRcdFx0RWRpdG9yLnNvY2tldC5lZGl0X21vdmUob2JqLmlkLCBvYmoucG9zaXRpb24ueCwgb2JqLnBvc2l0aW9uLnkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHRcdFx0dmFyIHRwdCA9IEVkaXRvci5iZWF0bWFwLmdldFRpbWluZ1BvaW50KEVkaXRvci5zb3VyY2UudCAqIDEwMDApO1xyXG5cdFx0XHRcdHZhciBwb3MgPSBFZGl0b3Iuc291cmNlLnQgK1xyXG5cdFx0XHRcdFx0KGNvZGUgPT0gMzcgPyAtMSA6IDEpICogdHB0LmJlYXRMZW5ndGggLyAxMDAwIC8gKEVkaXRvci5zb3VyY2UucGxheWluZyA/IDEgOlxyXG5cdFx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuYmVhdHNuYXBkaXZpc29yKSAqIChlLnNoaWZ0S2V5ID8gNCA6IDEpO1xyXG5cdFx0XHRcdHRwdCA9IEVkaXRvci5iZWF0bWFwLmdldFRpbWluZ1BvaW50KHBvcyAqIDEwMDApO1xyXG5cdFx0XHRcdGlmICghRWRpdG9yLnNvdXJjZS5wbGF5aW5nKVxyXG5cdFx0XHRcdFx0cG9zID0gc25hcChwb3MsIHRwdC5iYXNlT2Zmc2V0IC8gMTAwMCwgdHB0LmJlYXRMZW5ndGggLyAxMDAwIC8gRWRpdG9yLm9wdGlvbnMuYmVhdHNuYXBkaXZpc29yKTtcclxuXHRcdFx0XHRFZGl0b3Iuc291cmNlLnNlZWsocG9zKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDQ2KSB7IC8vZGVsZXRlXHJcblx0XHRcdEVkaXRvci5kZWxldGVTZWxlY3RlZCgpO1xyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDQ5KSB7IC8vMVxyXG5cdFx0XHRpZiAoZS5jdHJsS2V5KSB7XHJcblx0XHRcdFx0RWRpdG9yLnNldEdyaWRMZXZlbCgxKTtcclxuXHRcdFx0fSBlbHNlIGlmIChFZGl0b3Iub3B0aW9ucy50b29sICE9PSAwKSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zZWxlY3QnKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MCkgeyAvLzJcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoMik7XHJcblx0XHRcdH0gZWxzZSBpZiAoRWRpdG9yLm9wdGlvbnMudG9vbCAhPSAxKSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19ub3JtYWwnKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDE7XHJcblx0XHRcdFx0RWRpdG9yLmRlc2VsZWN0QWxsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MSkgeyAvLzNcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoMyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoRWRpdG9yLm9wdGlvbnMudG9vbCAhPSAyKSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zbGlkZXInKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDI7XHJcblx0XHRcdFx0RWRpdG9yLmRlc2VsZWN0QWxsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MikgeyAvLzRcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoNCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoRWRpdG9yLm9wdGlvbnMudG9vbCAhPSAzKSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zcGlubmVyJykuYWRkQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdEVkaXRvci5vcHRpb25zLnRvb2wgPSAzO1xyXG5cdFx0XHRcdEVkaXRvci5kZXNlbGVjdEFsbCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODEpIHsgLy9xXHJcblx0XHRcdCQoJyNkcmF3X25ld2NvbWJvJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5uY29wdCA9ICFFZGl0b3Iub3B0aW9ucy5uY29wdDtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA4NykgeyAvL3dcclxuXHRcdFx0JCgnI3NvdW5kX3doaXN0bGUnKS50b2dnbGVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdEVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1swXSA9ICFFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMF07XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gNjkpIHsgLy9lXHJcblx0XHRcdCQoJyNzb3VuZF9maW5pc2gnKS50b2dnbGVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdEVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1sxXSA9ICFFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMV07XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODIpIHsgLy9yXHJcblx0XHRcdCQoJyNzb3VuZF9jbGFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMl0gPSAhRWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzJdO1xyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDg0KSB7IC8vdFxyXG5cdFx0XHQkKCcjZHJhd19iZWF0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODkpIHsgLy95XHJcblx0XHRcdCQoJyNkcmF3X2Rpc3RzbmFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5kaXN0c25hcCA9ICFFZGl0b3Iub3B0aW9ucy5kaXN0c25hcDtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA3NikgeyAvL2xcclxuXHRcdFx0JCgnI2RyYXdfbG9jaycpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMubG9ja25vdGVzID0gIUVkaXRvci5vcHRpb25zLmxvY2tub3RlcztcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA3MSkgeyAvL2dcclxuXHRcdFx0RWRpdG9yLnNldEdyaWRMZXZlbChFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwgJSA0ICsgMSk7XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gNzApIHsgLy9mXHJcblx0XHRcdHRvZ2dsZUZ1bGxTY3JlZW4oKTtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA2NSkgeyAvL2FcclxuXHRcdFx0aWYgKGUuY3RybEtleSlcclxuXHRcdFx0XHRFZGl0b3Iuc2V0U2VsZWN0aW9uKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMpO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHR9O1xyXG5cclxuXHR2YXIga2V5dXBoYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHZhciBjb2RlID0gKHdpbmRvdy5ldmVudCkgPyBldmVudC5rZXlDb2RlIDogZS5rZXlDb2RlO1xyXG5cdFx0a2V5TWFwW2NvZGVdID0gZmFsc2U7XHJcblx0XHRpZiAoY29kZSA9PSAxNikge1xyXG5cdFx0XHQkKCcjZHJhd19iZWF0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHRcdEVkaXRvci51cGRhdGVNb3VzZUxvY2F0aW9uKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoY29kZSA9PSAxOCkge1xyXG5cdFx0XHQkKCcjZHJhd19kaXN0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwID0gIUVkaXRvci5vcHRpb25zLmRpc3RhbmNlc25hcDtcclxuXHRcdFx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5cHJlc3NoYW5kbGVyLCBmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBrZXl1cGhhbmRsZXIsIGZhbHNlKTtcclxuXHJcblx0RWRpdG9yLmFsaWduKCk7XHJcblx0U2tpbi5Mb2FkU2tpbignRGVmYXVsdCcsIGZ1bmN0aW9uIChza2luKSB7XHJcblx0XHRFZGl0b3Iuc2tpbiA9IHNraW47XHJcblx0XHRFZGl0b3IuYXVkaW9DdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XHJcblx0XHRFZGl0b3Iuc29ja2V0ID0gbmV3IFNvY2tldCgpO1xyXG5cdFx0RWRpdG9yLmFsaWduKCk7XHJcblx0XHRFZGl0b3IudXBkYXRlKCk7XHJcblx0fSk7XHJcbn0pO1xyXG4iXSwiZmlsZSI6Ik1haW4uanMifQ==
